var A1=Object.create;var kv=Object.defineProperty,R1=Object.defineProperties,M1=Object.getOwnPropertyDescriptor,P1=Object.getOwnPropertyDescriptors,x1=Object.getOwnPropertyNames,PD=Object.getOwnPropertySymbols,ND=Object.getPrototypeOf,OD=Object.prototype.hasOwnProperty,N1=Object.prototype.propertyIsEnumerable,O1=Reflect.get;var xD=(t,e,n)=>e in t?kv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,G=(t,e)=>{for(var n in e||={})OD.call(e,n)&&xD(t,n,e[n]);if(PD)for(var n of PD(e))N1.call(e,n)&&xD(t,n,e[n]);return t},be=(t,e)=>R1(t,P1(e));var k1=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var L1=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of x1(e))!OD.call(t,i)&&i!==n&&kv(t,i,{get:()=>e[i],enumerable:!(r=M1(e,i))||r.enumerable});return t};var F1=(t,e,n)=>(n=t!=null?A1(ND(t)):{},L1(e||!t||!t.__esModule?kv(n,"default",{value:t,enumerable:!0}):n,t));var ko=(t,e,n)=>O1(ND(t),n,e);var T=(t,e,n)=>new Promise((r,i)=>{var o=d=>{try{u(n.next(d))}catch(f){i(f)}},a=d=>{try{u(n.throw(d))}catch(f){i(f)}},u=d=>d.done?r(d.value):Promise.resolve(d.value).then(o,a);u((n=n.apply(t,e)).next())});var YM=k1((Am,QM)=>{"use strict";(function(t,e){typeof Am=="object"&&typeof QM<"u"?e(Am):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.leaflet={}))})(Am,function(t){"use strict";var e="1.9.4";function n(s){var c,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(c in _)s[c]=_[c]}return s}var r=Object.create||(function(){function s(){}return function(c){return s.prototype=c,new s}})();function i(s,c){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(c,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function u(s,c,h){var p,_,E,S;return S=function(){p=!1,_&&(E.apply(h,_),_=!1)},E=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(S,c),p=!0)},E}function d(s,c,h){var p=c[1],_=c[0],E=p-_;return s===p&&h?s:((s-_)%E+E)%E+_}function f(){return!1}function m(s,c){if(c===!1)return s;var h=Math.pow(10,c===void 0?6:c);return Math.round(s*h)/h}function y(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function I(s){return y(s).split(/\s+/)}function b(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?r(s.options):{});for(var h in c)s.options[h]=c[h];return s.options}function k(s,c,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function j(s,c){return s.replace(U,function(h,p){var _=c[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(c)),_})}var q=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function ie(s,c){for(var h=0;h<s.length;h++)if(s[h]===c)return h;return-1}var oe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ze(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var $t=0;function He(s){var c=+new Date,h=Math.max(0,16-(c-$t));return $t=c+h,window.setTimeout(s,h)}var M=window.requestAnimationFrame||ze("RequestAnimationFrame")||He,C=window.cancelAnimationFrame||ze("CancelAnimationFrame")||ze("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,c,h){if(h&&M===He)s.call(c);else return M.call(window,i(s,c))}function R(s){s&&C.call(window,s)}var P={__proto__:null,extend:n,create:r,bind:i,get lastId(){return o},stamp:a,throttle:u,wrapNum:d,falseFn:f,formatNum:m,trim:y,splitWords:I,setOptions:b,getParamString:k,template:j,isArray:q,indexOf:ie,emptyImageUrl:oe,requestFn:M,cancelFn:C,requestAnimFrame:D,cancelAnimFrame:R};function N(){}N.extend=function(s){var c=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,p=r(h);p.constructor=c,c.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(c[_]=this[_]);return s.statics&&n(c,s.statics),s.includes&&(A(s.includes),n.apply(null,[p].concat(s.includes))),n(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?r(h.options):{},n(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,S=p._initHooks.length;E<S;E++)p._initHooks[E].call(this)}},c},N.include=function(s){var c=this.prototype.options;return n(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},N.mergeOptions=function(s){return n(this.prototype.options,s),this},N.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function A(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=q(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ht={on:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c);else{s=I(s);for(var _=0,E=s.length;_<E;_++)this._on(s[_],c,h)}return this},off:function(s,c,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],c);else{s=I(s);for(var _=arguments.length===1,E=0,S=s.length;E<S;E++)_?this._off(s[E]):this._off(s[E],c,h)}return this},_on:function(s,c,h,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,h)===!1){h===this&&(h=void 0);var _={fn:c,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,c,h){var p,_,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,E=p.length;_<E;_++)p[_].fn=f;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var S=this._listens(s,c,h);if(S!==!1){var O=p[S];this._firingCount&&(O.fn=f,this._events[s]=p=p.slice()),p.splice(S,1)}}},fire:function(s,c,h){if(!this.listens(s,h))return this;var p=n({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var E=0,S=_.length;E<S;E++){var O=_[E],F=O.fn;O.once&&this.off(s,F,O.ctx),F.call(O.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,c,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=c;typeof c!="function"&&(p=!!c,_=void 0,h=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var S in this._eventParents)if(this._eventParents[S].listens(s,c,h,p))return!0}return!1},_listens:function(s,c,h){if(!this._events)return!1;var p=this._events[s]||[];if(!c)return!!p.length;h===this&&(h=void 0);for(var _=0,E=p.length;_<E;_++)if(p[_].fn===c&&p[_].ctx===h)return _;return!1},once:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c,!0);else{s=I(s);for(var _=0,E=s.length;_<E;_++)this._on(s[_],c,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,n({layer:s.target,propagatedFrom:s.target},s),!0)}};ht.addEventListener=ht.on,ht.removeEventListener=ht.clearAllEventListeners=ht.off,ht.addOneTimeEventListener=ht.once,ht.fireEvent=ht.fire,ht.hasEventListeners=ht.listens;var Ir=N.extend(ht);function ve(s,c,h){this.x=h?Math.round(s):s,this.y=h?Math.round(c):c}var wo=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};ve.prototype={clone:function(){return new ve(this.x,this.y)},add:function(s){return this.clone()._add(se(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(se(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new ve(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new ve(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=wo(this.x),this.y=wo(this.y),this},distanceTo:function(s){s=se(s);var c=s.x-this.x,h=s.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(s){return s=se(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=se(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function se(s,c,h){return s instanceof ve?s:q(s)?new ve(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new ve(s.x,s.y):new ve(s,c,h)}function et(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}et.prototype={extend:function(s){var c,h;if(!s)return this;if(s instanceof ve||typeof s[0]=="number"||"x"in s)c=h=se(s);else if(s=tn(s),c=s.min,h=s.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return se((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return se(this.min.x,this.max.y)},getTopRight:function(){return se(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,h;return typeof s[0]=="number"||s instanceof ve?s=se(s):s=tn(s),s instanceof et?(c=s.min,h=s.max):c=h=s,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=tn(s);var c=this.min,h=this.max,p=s.min,_=s.max,E=_.x>=c.x&&p.x<=h.x,S=_.y>=c.y&&p.y<=h.y;return E&&S},overlaps:function(s){s=tn(s);var c=this.min,h=this.max,p=s.min,_=s.max,E=_.x>c.x&&p.x<h.x,S=_.y>c.y&&p.y<h.y;return E&&S},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,h=this.max,p=Math.abs(c.x-h.x)*s,_=Math.abs(c.y-h.y)*s;return tn(se(c.x-p,c.y-_),se(h.x+p,h.y+_))},equals:function(s){return s?(s=tn(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function tn(s,c){return!s||s instanceof et?s:new et(s,c)}function hn(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}hn.prototype={extend:function(s){var c=this._southWest,h=this._northEast,p,_;if(s instanceof ge)p=s,_=s;else if(s instanceof hn){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(Oe(s)||Ze(s)):this;return!c&&!h?(this._southWest=new ge(p.lat,p.lng),this._northEast=new ge(_.lat,_.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var c=this._southWest,h=this._northEast,p=Math.abs(c.lat-h.lat)*s,_=Math.abs(c.lng-h.lng)*s;return new hn(new ge(c.lat-p,c.lng-_),new ge(h.lat+p,h.lng+_))},getCenter:function(){return new ge((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ge(this.getNorth(),this.getWest())},getSouthEast:function(){return new ge(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ge||"lat"in s?s=Oe(s):s=Ze(s);var c=this._southWest,h=this._northEast,p,_;return s instanceof hn?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=c.lat&&_.lat<=h.lat&&p.lng>=c.lng&&_.lng<=h.lng},intersects:function(s){s=Ze(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),E=_.lat>=c.lat&&p.lat<=h.lat,S=_.lng>=c.lng&&p.lng<=h.lng;return E&&S},overlaps:function(s){s=Ze(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),E=_.lat>c.lat&&p.lat<h.lat,S=_.lng>c.lng&&p.lng<h.lng;return E&&S},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=Ze(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ze(s,c){return s instanceof hn?s:new hn(s,c)}function ge(s,c,h){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,h!==void 0&&(this.alt=+h)}ge.prototype={equals:function(s,c){if(!s)return!1;s=Oe(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+m(this.lat,s)+", "+m(this.lng,s)+")"},distanceTo:function(s){return zr.distance(this,Oe(s))},wrap:function(){return zr.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,h=c/Math.cos(Math.PI/180*this.lat);return Ze([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new ge(this.lat,this.lng,this.alt)}};function Oe(s,c,h){return s instanceof ge?s:q(s)&&typeof s[0]!="object"?s.length===3?new ge(s[0],s[1],s[2]):s.length===2?new ge(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ge(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new ge(s,c,h)}var wn={latLngToPoint:function(s,c){var h=this.projection.project(s),p=this.scale(c);return this.transformation._transform(h,p)},pointToLatLng:function(s,c){var h=this.scale(c),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(c.min,h),_=this.transformation.transform(c.max,h);return new et(p,_)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?d(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?d(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new ge(h,c,p)},wrapLatLngBounds:function(s){var c=s.getCenter(),h=this.wrapLatLng(c),p=c.lat-h.lat,_=c.lng-h.lng;if(p===0&&_===0)return s;var E=s.getSouthWest(),S=s.getNorthEast(),O=new ge(E.lat-p,E.lng-_),F=new ge(S.lat-p,S.lng-_);return new hn(O,F)}},zr=n({},wn,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var h=Math.PI/180,p=s.lat*h,_=c.lat*h,E=Math.sin((c.lat-s.lat)*h/2),S=Math.sin((c.lng-s.lng)*h/2),O=E*E+Math.cos(p)*Math.cos(_)*S*S,F=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*F}}),Io=6378137,hl={R:Io,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*c);return new ve(this.R*s.lng*c,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var c=180/Math.PI;return new ge((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:(function(){var s=Io*Math.PI;return new et([-s,-s],[s,s])})()};function fl(s,c,h,p){if(q(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=h,this._d=p}fl.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new ve((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function qr(s,c,h,p){return new fl(s,c,h,p)}var bo=n({},zr,{code:"EPSG:3857",projection:hl,transformation:(function(){var s=.5/(Math.PI*hl.R);return qr(s,.5,-s,.5)})()}),pl=n({},bo,{code:"EPSG:900913"});function Ja(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Xa(s,c){var h="",p,_,E,S,O,F;for(p=0,E=s.length;p<E;p++){for(O=s[p],_=0,S=O.length;_<S;_++)F=O[_],h+=(_?"L":"M")+F.x+" "+F.y;h+=c?J.svg?"z":"x":""}return h||"M0 0"}var As=document.documentElement.style,Rs="ActiveXObject"in window,of=Rs&&!document.addEventListener,sf="msLaunchUri"in navigator&&!("documentMode"in document),ec=Bn("webkit"),gl=Bn("android"),tc=Bn("android 2")||Bn("android 3"),af=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Dv=gl&&Bn("Google")&&af<537&&!("AudioNode"in window),Ms=!!window.opera,nc=!sf&&Bn("chrome"),rc=Bn("gecko")&&!ec&&!Ms&&!Rs,Ht=!nc&&Bn("safari"),zt=Bn("phantom"),Ps="OTransition"in As,cf=navigator.platform.indexOf("Win")===0,ml=Rs&&"transition"in As,_l="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!tc,To="MozPerspective"in As,uf=!window.L_DISABLE_3D&&(ml||_l||To)&&!Ps&&!zt,Co=typeof orientation<"u"||Bn("mobile"),vl=Co&&ec,Sv=Co&&_l,lf=!window.PointerEvent&&window.MSPointerEvent,ic=!!(window.PointerEvent||lf),yl="ontouchstart"in window||!!window.TouchEvent,df=!window.L_NO_TOUCH&&(yl||ic),xs=Co&&Ms,El=Co&&rc,wl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ai=(function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return s})(),hf=(function(){return!!document.createElement("canvas").getContext})(),Do=!!(document.createElementNS&&Ja("svg").createSVGRect),ff=!!Do&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Ns=!Do&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),pf=navigator.platform.indexOf("Mac")===0,nn=navigator.platform.indexOf("Linux")===0;function Bn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var J={ie:Rs,ielt9:of,edge:sf,webkit:ec,android:gl,android23:tc,androidStock:Dv,opera:Ms,chrome:nc,gecko:rc,safari:Ht,phantom:zt,opera12:Ps,win:cf,ie3d:ml,webkit3d:_l,gecko3d:To,any3d:uf,mobile:Co,mobileWebkit:vl,mobileWebkit3d:Sv,msPointer:lf,pointer:ic,touch:df,touchNative:yl,mobileOpera:xs,mobileGecko:El,retina:wl,passiveEvents:Ai,canvas:hf,svg:Do,vml:Ns,inlineSvg:ff,mac:pf,linux:nn},So=J.msPointer?"MSPointerDown":"pointerdown",gf=J.msPointer?"MSPointerMove":"pointermove",mf=J.msPointer?"MSPointerUp":"pointerup",Ri=J.msPointer?"MSPointerCancel":"pointercancel",Il={touchstart:So,touchmove:gf,touchend:mf,touchcancel:Ri},_f={touchstart:yf,touchmove:Ao,touchend:Ao,touchcancel:Ao},br={},bl=!1;function Tl(s,c,h){return c==="touchstart"&&Dl(),_f[c]?(h=_f[c].bind(this,h),s.addEventListener(Il[c],h,!1),h):(console.warn("wrong event specified:",c),f)}function oc(s,c,h){if(!Il[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(Il[c],h,!1)}function Gr(s){br[s.pointerId]=s}function vf(s){br[s.pointerId]&&(br[s.pointerId]=s)}function Cl(s){delete br[s.pointerId]}function Dl(){bl||(document.addEventListener(So,Gr,!0),document.addEventListener(gf,vf,!0),document.addEventListener(mf,Cl,!0),document.addEventListener(Ri,Cl,!0),bl=!0)}function Ao(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in br)c.touches.push(br[h]);c.changedTouches=[c],s(c)}}function yf(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&pt(c),Ao(s,c)}function Ef(s){var c={},h,p;for(p in s)h=s[p],c[p]=h&&h.bind?h.bind(s):h;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Av=200;function sc(s,c){s.addEventListener("dblclick",c);var h=0,p;function _(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var S=kl(E);if(!(S.some(function(F){return F instanceof HTMLLabelElement&&F.attributes.for})&&!S.some(function(F){return F instanceof HTMLInputElement||F instanceof HTMLSelectElement}))){var O=Date.now();O-h<=Av?(p++,p===2&&c(Ef(E))):p=1,h=O}}}return s.addEventListener("click",_),{dblclick:c,simDblclick:_}}function wf(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var Os=or(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Tr=or(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Wr=Tr==="webkitTransition"||Tr==="OTransition"?Tr+"End":"transitionend";function ac(s){return typeof s=="string"?document.getElementById(s):s}function ks(s,c){var h=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[c]:null}return h==="auto"?null:h}function Ve(s,c,h){var p=document.createElement(s);return p.className=c||"",h&&h.appendChild(p),p}function tt(s){var c=s.parentNode;c&&c.removeChild(s)}function Ls(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Kr(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function Zr(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function cc(s,c){if(s.classList!==void 0)return s.classList.contains(c);var h=Fs(s);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function Ie(s,c){if(s.classList!==void 0)for(var h=I(c),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!cc(s,c)){var E=Fs(s);Sl(s,(E?E+" ":"")+c)}}function ft(s,c){s.classList!==void 0?s.classList.remove(c):Sl(s,y((" "+Fs(s)+" ").replace(" "+c+" "," ")))}function Sl(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function Fs(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function In(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&Rv(s,c)}function Rv(s,c){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):s.style.filter+=" progid:"+p+"(opacity="+c+")"}function or(s){for(var c=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in c)return s[h];return!1}function rn(s,c,h){var p=c||new ve(0,0);s.style[Os]=(J.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function it(s,c){s._leaflet_pos=c,J.any3d?rn(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function sr(s){return s._leaflet_pos||new ve(0,0)}var Ro,qe,Mo;if("onselectstart"in document)Ro=function(){me(window,"selectstart",pt)},qe=function(){Qe(window,"selectstart",pt)};else{var Cr=or(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ro=function(){if(Cr){var s=document.documentElement.style;Mo=s[Cr],s[Cr]="none"}},qe=function(){Cr&&(document.documentElement.style[Cr]=Mo,Mo=void 0)}}function Mi(){me(window,"dragstart",pt)}function Al(){Qe(window,"dragstart",pt)}var Vs,Rl;function Ml(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(uc(),Vs=s,Rl=s.style.outlineStyle,s.style.outlineStyle="none",me(window,"keydown",uc))}function uc(){Vs&&(Vs.style.outlineStyle=Rl,Vs=void 0,Rl=void 0,Qe(window,"keydown",uc))}function If(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Pi(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var Qr={__proto__:null,TRANSFORM:Os,TRANSITION:Tr,TRANSITION_END:Wr,get:ac,getStyle:ks,create:Ve,remove:tt,empty:Ls,toFront:Kr,toBack:Zr,hasClass:cc,addClass:Ie,removeClass:ft,setClass:Sl,getClass:Fs,setOpacity:In,testProp:or,setTransform:rn,setPosition:it,getPosition:sr,get disableTextSelection(){return Ro},get enableTextSelection(){return qe},disableImageDrag:Mi,enableImageDrag:Al,preventOutline:Ml,restoreOutline:uc,getSizedParentNode:If,getScale:Pi};function me(s,c,h,p){if(c&&typeof c=="object")for(var _ in c)xl(s,_,c[_],h);else{c=I(c);for(var E=0,S=c.length;E<S;E++)xl(s,c[E],h,p)}return this}var jn="_leaflet_events";function Qe(s,c,h,p){if(arguments.length===1)xi(s),delete s[jn];else if(c&&typeof c=="object")for(var _ in c)Nl(s,_,c[_],h);else if(c=I(c),arguments.length===2)xi(s,function(O){return ie(c,O)!==-1});else for(var E=0,S=c.length;E<S;E++)Nl(s,c[E],h,p);return this}function xi(s,c){for(var h in s[jn]){var p=h.split(/\d/)[0];(!c||c(p))&&Nl(s,p,null,null,h)}}var Pl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function xl(s,c,h,p){var _=c+a(h)+(p?"_"+a(p):"");if(s[jn]&&s[jn][_])return this;var E=function(O){return h.call(p||s,O||window.event)},S=E;!J.touchNative&&J.pointer&&c.indexOf("touch")===0?E=Tl(s,c,E):J.touch&&c==="dblclick"?E=sc(s,E):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(Pl[c]||c,E,J.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(E=function(O){O=O||window.event,Us(s,O)&&S(O)},s.addEventListener(Pl[c],E,!1)):s.addEventListener(c,S,!1):s.attachEvent("on"+c,E),s[jn]=s[jn]||{},s[jn][_]=E}function Nl(s,c,h,p,_){_=_||c+a(h)+(p?"_"+a(p):"");var E=s[jn]&&s[jn][_];if(!E)return this;!J.touchNative&&J.pointer&&c.indexOf("touch")===0?oc(s,c,E):J.touch&&c==="dblclick"?wf(s,E):"removeEventListener"in s?s.removeEventListener(Pl[c]||c,E,!1):s.detachEvent("on"+c,E),s[jn][_]=null}function fn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Ol(s){return xl(s,"wheel",fn),this}function Bs(s){return me(s,"mousedown touchstart dblclick contextmenu",fn),s._leaflet_disable_click=!0,this}function pt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ar(s){return pt(s),fn(s),this}function kl(s){if(s.composedPath)return s.composedPath();for(var c=[],h=s.target;h;)c.push(h),h=h.parentNode;return c}function Po(s,c){if(!c)return new ve(s.clientX,s.clientY);var h=Pi(c),p=h.boundingClientRect;return new ve((s.clientX-p.left)/h.x-c.clientLeft,(s.clientY-p.top)/h.y-c.clientTop)}var js=J.linux&&J.chrome?window.devicePixelRatio:J.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ll(s){return J.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/js:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Us(s,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var at={__proto__:null,on:me,off:Qe,stopPropagation:fn,disableScrollPropagation:Ol,disableClickPropagation:Bs,preventDefault:pt,stop:ar,getPropagationPath:kl,getMousePosition:Po,getWheelDelta:Ll,isExternalTarget:Us,addListener:me,removeListener:Qe},bf=Ir.extend({run:function(s,c,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=sr(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var h=this._startPos.add(this._offset.multiplyBy(s));c&&h._round(),it(this._el,h),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),ke=Ir.extend({options:{crs:bo,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=b(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Oe(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Tr&&J.any3d&&!J.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,Wr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(Oe(s),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=n({animate:h.animate},h.zoom),h.pan=n({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(J.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(J.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,h){var p=this.getZoomScale(c),_=this.getSize().divideBy(2),E=s instanceof ve?s:this.latLngToContainerPoint(s),S=E.subtract(_).multiplyBy(1-1/p),O=this.containerPointToLatLng(_.add(S));return this.setView(O,c,{zoom:h})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():Ze(s);var h=se(c.paddingTopLeft||c.padding||[0,0]),p=se(c.paddingBottomRight||c.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof c.maxZoom=="number"?Math.min(c.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var E=p.subtract(h).divideBy(2),S=this.project(s.getSouthWest(),_),O=this.project(s.getNorthEast(),_),F=this.unproject(S.add(O).divideBy(2).add(E),_);return{center:F,zoom:_}},fitBounds:function(s,c){if(s=Ze(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=se(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new bf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Ie(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,h){if(h=h||{},h.animate===!1||!J.any3d)return this.setView(s,c,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),E=this.getSize(),S=this._zoom;s=Oe(s),c=c===void 0?S:c;var O=Math.max(E.x,E.y),F=O*this.getZoomScale(S,c),H=_.distanceTo(p)||1,Q=1.42,ce=Q*Q;function Pe(wt){var Uf=wt?-1:1,T1=wt?F:O,C1=F*F-O*O+Uf*ce*ce*H*H,D1=2*T1*ce*H,Ov=C1/D1,MD=Math.sqrt(Ov*Ov+1)-Ov,S1=MD<1e-9?-18:Math.log(MD);return S1}function Tn(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function Gt(wt){return(Math.exp(wt)+Math.exp(-wt))/2}function cr(wt){return Tn(wt)/Gt(wt)}var xn=Pe(0);function wc(wt){return O*(Gt(xn)/Gt(xn+Q*wt))}function E1(wt){return O*(Gt(xn)*cr(xn+Q*wt)-Tn(xn))/ce}function w1(wt){return 1-Math.pow(1-wt,1.5)}var I1=Date.now(),AD=(Pe(1)-xn)/Q,b1=h.duration?1e3*h.duration:1e3*AD*.8;function RD(){var wt=(Date.now()-I1)/b1,Uf=w1(wt)*AD;wt<=1?(this._flyToFrame=D(RD,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(E1(Uf)/H)),S),this.getScaleZoom(O/wc(Uf),S),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),RD.call(this),this},flyToBounds:function(s,c){var h=this._getBoundsCenterZoom(s,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(s){return s=Ze(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,Ze(s));return h.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var h=se(c.paddingTopLeft||c.padding||[0,0]),p=se(c.paddingBottomRight||c.padding||[0,0]),_=this.project(this.getCenter()),E=this.project(s),S=this.getPixelBounds(),O=tn([S.min.add(h),S.max.subtract(p)]),F=O.getSize();if(!O.contains(E)){this._enforcingBounds=!0;var H=E.subtract(O.getCenter()),Q=O.extend(E).getSize().subtract(F);_.x+=H.x<0?-Q.x:Q.x,_.y+=H.y<0?-Q.y:Q.y,this.panTo(this.unproject(_),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=n({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=c.divideBy(2).round(),_=h.divideBy(2).round(),E=p.subtract(_);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=n({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=i(this._handleGeolocationResponse,this),h=i(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,s):navigator.geolocation.getCurrentPosition(c,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,h=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,h=s.coords.longitude,p=new ge(c,h),_=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var S=this.getBoundsZoom(_);this.setView(p,E.maxZoom?Math.min(S,E.maxZoom):S)}var O={latlng:p,bounds:_,timestamp:s.timestamp};for(var F in s.coords)typeof s.coords[F]=="number"&&(O[F]=s.coords[F]);this.fire("locationfound",O)}},addHandler:function(s,c){if(!c)return this;var h=this[s]=new c(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)tt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ve("div",h,c||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new hn(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,h){s=Ze(s),h=se(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),E=this.getMaxZoom(),S=s.getNorthWest(),O=s.getSouthEast(),F=this.getSize().subtract(h),H=tn(this.project(O,p),this.project(S,p)).getSize(),Q=J.any3d?this.options.zoomSnap:1,ce=F.x/H.x,Pe=F.y/H.y,Tn=c?Math.max(ce,Pe):Math.min(ce,Pe);return p=this.getScaleZoom(Tn,p),Q&&(p=Math.round(p/(Q/100))*(Q/100),p=c?Math.ceil(p/Q)*Q:Math.floor(p/Q)*Q),Math.max(_,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ve(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var h=this._getTopLeftPoint(s,c);return new et(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(s)/h.scale(c)},getScaleZoom:function(s,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var p=h.zoom(s*h.scale(c));return isNaN(p)?1/0:p},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Oe(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(se(s),c)},layerPointToLatLng:function(s){var c=se(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(Oe(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Oe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Ze(s))},distance:function(s,c){return this.options.crs.distance(Oe(s),Oe(c))},containerPointToLayerPoint:function(s){return se(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return se(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(se(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Oe(s)))},mouseEventToContainerPoint:function(s){return Po(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=ac(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(c,"scroll",this._onScroll,this),this._containerId=a(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&J.any3d,Ie(s,"leaflet-container"+(J.touch?" leaflet-touch":"")+(J.retina?" leaflet-retina":"")+(J.ielt9?" leaflet-oldie":"")+(J.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=ks(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),it(this._mapPane,new ve(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ie(s.markerPane,"leaflet-zoom-hide"),Ie(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,h){it(this._mapPane,new ve(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var _=this._zoom!==c;this._moveStart(_,h)._move(s,c)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,h,p){c===void 0&&(c=this._zoom);var _=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){it(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var c=s?Qe:me;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),J.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var h=[],p,_=c==="mouseout"||c==="mouseover",E=s.target||s.srcElement,S=!1;E;){if(p=this._targets[a(E)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){S=!0;break}if(p&&p.listens(c,!0)&&(_&&!Us(E,s)||(h.push(p),_))||E===this._container)break;E=E.parentNode}return!h.length&&!S&&!_&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var h=s.type;h==="mousedown"&&Ml(c),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,h){if(s.type==="click"){var p=n({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,c);if(h){for(var E=[],S=0;S<h.length;S++)h[S].listens(c,!0)&&E.push(h[S]);_=E.concat(_)}if(_.length){c==="contextmenu"&&pt(s);var O=_[0],F={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var H=O.getLatLng&&(!O._radius||O._radius<=10);F.containerPoint=H?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(s),F.layerPoint=this.containerPointToLayerPoint(F.containerPoint),F.latlng=H?O.getLatLng():this.layerPointToLatLng(F.layerPoint)}for(S=0;S<_.length;S++)if(_[S].fire(c,F,!0),F.originalEvent._stopped||_[S].options.bubblingMouseEvents===!1&&ie(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return sr(this._mapPane)||new ve(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var h=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var h=this.getSize()._divideBy(2);return this.project(s,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return this.project(s,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return tn([this.project(s.getSouthWest(),c)._subtract(p),this.project(s.getNorthWest(),c)._subtract(p),this.project(s.getSouthEast(),c)._subtract(p),this.project(s.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,h){if(!h)return s;var p=this.project(s,c),_=this.getSize().divideBy(2),E=new et(p.subtract(_),p.add(_)),S=this._getBoundsOffset(E,h,c);return Math.abs(S.x)<=1&&Math.abs(S.y)<=1?s:this.unproject(p.add(S),c)},_limitOffset:function(s,c){if(!c)return s;var h=this.getPixelBounds(),p=new et(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(s,c,h){var p=tn(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),_=p.min.subtract(s.min),E=p.max.subtract(s.max),S=this._rebound(_.x,-E.x),O=this._rebound(_.y,-E.y);return new ve(S,O)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),h=this.getMaxZoom(),p=J.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(c,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ft(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var h=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var s=this._proxy=Ve("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var h=Os,p=this._proxy.style[h];rn(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();rn(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,Ie(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ft(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Tf(s,c){return new ke(s,c)}var Pn=N.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Ie(c,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),xo=function(s){return new Pn(s)};ke.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",h=this._controlContainer=Ve("div",c+"control-container",this._container);function p(_,E){var S=c+_+" "+c+E;s[_+E]=Ve("div",S,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)tt(this._controlCorners[s]);tt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $s=Pn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,c,h){b(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Pn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(a(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Ie(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Ie(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):ft(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ft(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=Ve("div",s),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Bs(c),Ol(c);var p=this._section=Ve("section",s+"-list");h&&(this._map.on("click",this.collapse,this),me(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Ve("a",s+"-toggle",c);_.href="#",_.title="Layers",_.setAttribute("role","button"),me(_,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){pt(E),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Ve("div",s+"-base",p),this._separator=Ve("div",s+"-separator",p),this._overlaysList=Ve("div",s+"-overlays",p),c.appendChild(p)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&a(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(i(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ls(this._baseLayersList),Ls(this._overlaysList),this._layerControlInputs=[];var s,c,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),c=c||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(a(s.target)),h=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(s,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var c=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),me(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var E=document.createElement("span");c.appendChild(E),E.appendChild(p),E.appendChild(_);var S=s.overlay?this._overlaysList:this._baseLayersList;return S.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,h,p=[],_=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)c=s[E],h=this._getLayer(c.layerId).layer,c.checked?p.push(h):c.checked||_.push(h);for(E=0;E<_.length;E++)this._map.hasLayer(_[E])&&this._map.removeLayer(_[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)c=s[_],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,me(s,"click",pt),this.expand();var c=this;setTimeout(function(){Qe(s,"click",pt),c._preventClick=!1})}}),Cf=function(s,c,h){return new $s(s,c,h)},Un=Pn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",h=Ve("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,h,p,_){var E=Ve("a",h,p);return E.innerHTML=s,E.href="#",E.title=c,E.setAttribute("role","button"),E.setAttribute("aria-label",c),Bs(E),me(E,"click",ar),me(E,"click",_,this),me(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";ft(this._zoomInButton,c),ft(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Ie(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Ie(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});ke.mergeOptions({zoomControl:!0}),ke.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Un,this.addControl(this.zoomControl))});var Df=function(s){return new Un(s)},Sf=Pn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",h=Ve("div",c),p=this.options;return this._addScales(p,c+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,h){s.metric&&(this._mScale=Ve("div",c,h)),s.imperial&&(this._iScale=Ve("div",c,h))},_update:function(){var s=this._map,c=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/s)},_updateImperial:function(s){var c=s*3.2808399,h,p,_;c>5280?(h=c/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(c),this._updateScale(this._iScale,_+" ft",_/c))},_updateScale:function(s,c,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),h=s/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),Hs=function(s){return new Sf(s)},Af='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',zs=Pn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(J.inlineSvg?Af+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ve("div","leaflet-control-attribution"),Bs(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});ke.mergeOptions({attributionControl:!0}),ke.addInitHook(function(){this.options.attributionControl&&new zs().addTo(this)});var lc=function(s){return new zs(s)};Pn.Layers=$s,Pn.Zoom=Un,Pn.Scale=Sf,Pn.Attribution=zs,xo.layers=Cf,xo.zoom=Df,xo.scale=Hs,xo.attribution=lc;var $n=N.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});$n.addTo=function(s,c){return s.addHandler(c,this),this};var dc={Events:ht},Rf=J.touch?"touchstart mousedown":"mousedown",Dr=Ir.extend({options:{clickTolerance:3},initialize:function(s,c,h,p){b(this,p),this._element=s,this._dragStartTarget=c||s,this._preventOutline=h},enable:function(){this._enabled||(me(this._dragStartTarget,Rf,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Dr._dragging===this&&this.finishDrag(!0),Qe(this._dragStartTarget,Rf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!cc(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Dr._dragging===this&&this.finishDrag();return}if(!(Dr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Dr._dragging=this,this._preventOutline&&Ml(this._element),Mi(),Ro(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,h=If(this._element);this._startPoint=new ve(c.clientX,c.clientY),this._startPos=sr(this._element),this._parentScale=Pi(h);var p=s.type==="mousedown";me(document,p?"mousemove":"touchmove",this._onMove,this),me(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,h=new ve(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,pt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Ie(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ie(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),it(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){ft(document.body,"leaflet-dragging"),this._lastTarget&&(ft(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qe(document,"mousemove touchmove",this._onMove,this),Qe(document,"mouseup touchend touchcancel",this._onUp,this),Al(),qe();var c=this._moved&&this._moving;this._moving=!1,Dr._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function No(s,c,h){var p,_=[1,4,2,8],E,S,O,F,H,Q,ce,Pe;for(E=0,Q=s.length;E<Q;E++)s[E]._code=Yr(s[E],c);for(O=0;O<4;O++){for(ce=_[O],p=[],E=0,Q=s.length,S=Q-1;E<Q;S=E++)F=s[E],H=s[S],F._code&ce?H._code&ce||(Pe=qs(H,F,ce,c,h),Pe._code=Yr(Pe,c),p.push(Pe)):(H._code&ce&&(Pe=qs(H,F,ce,c,h),Pe._code=Yr(Pe,c),p.push(Pe)),p.push(F));s=p}return s}function Fl(s,c){var h,p,_,E,S,O,F,H,Q;if(!s||s.length===0)throw new Error("latlngs not passed");bn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ce=Oe([0,0]),Pe=Ze(s),Tn=Pe.getNorthWest().distanceTo(Pe.getSouthWest())*Pe.getNorthEast().distanceTo(Pe.getNorthWest());Tn<1700&&(ce=hc(s));var Gt=s.length,cr=[];for(h=0;h<Gt;h++){var xn=Oe(s[h]);cr.push(c.project(Oe([xn.lat-ce.lat,xn.lng-ce.lng])))}for(O=F=H=0,h=0,p=Gt-1;h<Gt;p=h++)_=cr[h],E=cr[p],S=_.y*E.x-E.y*_.x,F+=(_.x+E.x)*S,H+=(_.y+E.y)*S,O+=S*3;O===0?Q=cr[0]:Q=[F/O,H/O];var wc=c.unproject(se(Q));return Oe([wc.lat+ce.lat,wc.lng+ce.lng])}function hc(s){for(var c=0,h=0,p=0,_=0;_<s.length;_++){var E=Oe(s[_]);c+=E.lat,h+=E.lng,p++}return Oe([c/p,h/p])}var Vl={__proto__:null,clipPolygon:No,polygonCenter:Fl,centroid:hc};function fc(s,c){if(!c||!s.length)return s.slice();var h=c*c;return s=Ni(s,h),s=Mf(s,h),s}function Bl(s,c,h){return Math.sqrt(Ot(s,c,h,!0))}function pc(s,c,h){return Ot(s,c,h)}function Mf(s,c){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,gc(s,_,c,0,h-1);var E,S=[];for(E=0;E<h;E++)_[E]&&S.push(s[E]);return S}function gc(s,c,h,p,_){var E=0,S,O,F;for(O=p+1;O<=_-1;O++)F=Ot(s[O],s[p],s[_],!0),F>E&&(S=O,E=F);E>h&&(c[S]=1,gc(s,c,h,p,S),gc(s,c,h,S,_))}function Ni(s,c){for(var h=[s[0]],p=1,_=0,E=s.length;p<E;p++)mc(s[p],s[_])>c&&(h.push(s[p]),_=p);return _<E-1&&h.push(s[E-1]),h}var jl;function Ul(s,c,h,p,_){var E=p?jl:Yr(s,h),S=Yr(c,h),O,F,H;for(jl=S;;){if(!(E|S))return[s,c];if(E&S)return!1;O=E||S,F=qs(s,c,O,h,_),H=Yr(F,h),O===E?(s=F,E=H):(c=F,S=H)}}function qs(s,c,h,p,_){var E=c.x-s.x,S=c.y-s.y,O=p.min,F=p.max,H,Q;return h&8?(H=s.x+E*(F.y-s.y)/S,Q=F.y):h&4?(H=s.x+E*(O.y-s.y)/S,Q=O.y):h&2?(H=F.x,Q=s.y+S*(F.x-s.x)/E):h&1&&(H=O.x,Q=s.y+S*(O.x-s.x)/E),new ve(H,Q,_)}function Yr(s,c){var h=0;return s.x<c.min.x?h|=1:s.x>c.max.x&&(h|=2),s.y<c.min.y?h|=4:s.y>c.max.y&&(h|=8),h}function mc(s,c){var h=c.x-s.x,p=c.y-s.y;return h*h+p*p}function Ot(s,c,h,p){var _=c.x,E=c.y,S=h.x-_,O=h.y-E,F=S*S+O*O,H;return F>0&&(H=((s.x-_)*S+(s.y-E)*O)/F,H>1?(_=h.x,E=h.y):H>0&&(_+=S*H,E+=O*H)),S=s.x-_,O=s.y-E,p?S*S+O*O:new ve(_,E)}function bn(s){return!q(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function $l(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),bn(s)}function Oi(s,c){var h,p,_,E,S,O,F,H;if(!s||s.length===0)throw new Error("latlngs not passed");bn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Q=Oe([0,0]),ce=Ze(s),Pe=ce.getNorthWest().distanceTo(ce.getSouthWest())*ce.getNorthEast().distanceTo(ce.getNorthWest());Pe<1700&&(Q=hc(s));var Tn=s.length,Gt=[];for(h=0;h<Tn;h++){var cr=Oe(s[h]);Gt.push(c.project(Oe([cr.lat-Q.lat,cr.lng-Q.lng])))}for(h=0,p=0;h<Tn-1;h++)p+=Gt[h].distanceTo(Gt[h+1])/2;if(p===0)H=Gt[0];else for(h=0,E=0;h<Tn-1;h++)if(S=Gt[h],O=Gt[h+1],_=S.distanceTo(O),E+=_,E>p){F=(E-p)/_,H=[O.x-F*(O.x-S.x),O.y-F*(O.y-S.y)];break}var xn=c.unproject(se(H));return Oe([xn.lat+Q.lat,xn.lng+Q.lng])}var l={__proto__:null,simplify:fc,pointToSegmentDistance:Bl,closestPointOnSegment:pc,clipSegment:Ul,_getEdgeIntersection:qs,_getBitCode:Yr,_sqClosestPointOnSegment:Ot,isFlat:bn,_flat:$l,polylineCenter:Oi},g={project:function(s){return new ve(s.lng,s.lat)},unproject:function(s){return new ge(s.y,s.x)},bounds:new et([-180,-90],[180,90])},v={R:6378137,R_MINOR:6356752314245179e-9,bounds:new et([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,h=this.R,p=s.lat*c,_=this.R_MINOR/h,E=Math.sqrt(1-_*_),S=E*Math.sin(p),O=Math.tan(Math.PI/4-p/2)/Math.pow((1-S)/(1+S),E/2);return p=-h*Math.log(Math.max(O,1e-10)),new ve(s.lng*c*h,p)},unproject:function(s){for(var c=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),E=Math.exp(-s.y/h),S=Math.PI/2-2*Math.atan(E),O=0,F=.1,H;O<15&&Math.abs(F)>1e-7;O++)H=_*Math.sin(S),H=Math.pow((1-H)/(1+H),_/2),F=Math.PI/2-2*Math.atan(E*H)-S,S+=F;return new ge(S*c,s.x*c/h)}},w={__proto__:null,LonLat:g,Mercator:v,SphericalMercator:hl},x=n({},zr,{code:"EPSG:3395",projection:v,transformation:(function(){var s=.5/(Math.PI*v.R);return qr(s,.5,-s,.5)})()}),V=n({},zr,{code:"EPSG:4326",projection:g,transformation:qr(1/180,1,-1/180,.5)}),W=n({},wn,{projection:g,transformation:qr(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var h=c.lng-s.lng,p=c.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});wn.Earth=zr,wn.EPSG3395=x,wn.EPSG3857=bo,wn.EPSG900913=pl,wn.EPSG4326=V,wn.Simple=W;var Ae=Ir.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});ke.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=a(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=a(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},_addLayers:function(s){s=s?q(s)?s:[s]:[];for(var c=0,h=s.length;c<h;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=a(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),c=_.maxZoom===void 0?c:Math.max(c,_.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ct=Ae.extend({initialize:function(s,c){b(this,c),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),je=function(s,c){return new ct(s,c)},nt=ct.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),ct.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),ct.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new hn;for(var c in this._layers){var h=this._layers[c];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),qt=function(s,c){return new nt(s,c)},Hn=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,c){var h=this.options,p=h[c+"Size"];typeof p=="number"&&(p=[p,p]);var _=se(p),E=se(c==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(h.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return J.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function zn(s){return new Hn(s)}var Jr=Hn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Jr.imagePath!="string"&&(Jr.imagePath=this._detectIconPath()),(this.options.imagePath||Jr.imagePath)+Hn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(h,p,_){var E=p.exec(h);return E&&E[_]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ve("div","leaflet-default-icon-path",document.body),c=ks(s,"background-image")||ks(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),_c=$n.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Dr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ie(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ft(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,h=c._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,E=sr(c._icon),S=h.getPixelBounds(),O=h.getPixelOrigin(),F=tn(S.min._subtract(O).add(_),S.max._subtract(O).subtract(_));if(!F.contains(E)){var H=se((Math.max(F.max.x,E.x)-F.max.x)/(S.max.x-F.max.x)-(Math.min(F.min.x,E.x)-F.min.x)/(S.min.x-F.min.x),(Math.max(F.max.y,E.y)-F.max.y)/(S.max.y-F.max.y)-(Math.min(F.min.y,E.y)-F.min.y)/(S.min.y-F.min.y)).multiplyBy(p);h.panBy(H,{animate:!1}),this._draggable._newPos._add(H),this._draggable._startPos._add(H),it(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,h=c._shadow,p=sr(c._icon),_=c._map.layerPointToLatLng(p);h&&it(h,p),c._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Pf=Ae.extend({options:{icon:new Jr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){b(this,c),this._latlng=Oe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=Oe(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Ie(h,c),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),E=!1;_!==this._shadow&&(this._removeShadow(),E=!0),_&&(Ie(_,c),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qe(this._icon,"focus",this._panOnFocus,this),tt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&it(this._icon,s),this._shadow&&it(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Ie(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_c)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _c(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&In(this._icon,s),this._shadow&&In(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,h=c.iconSize?se(c.iconSize):se(0,0),p=c.iconAnchor?se(c.iconAnchor):se(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function n1(s,c){return new Pf(s,c)}var Oo=Ae.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),xf=Oo.extend({options:{fill:!0,radius:10},initialize:function(s,c){b(this,c),this._latlng=Oe(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=Oe(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return Oo.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,h=this._clickTolerance(),p=[s+h,c+h];this._pxBounds=new et(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function r1(s,c){return new xf(s,c)}var Mv=xf.extend({initialize:function(s,c,h){if(typeof c=="number"&&(c=n({},h,{radius:c})),b(this,c),this._latlng=Oe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new hn(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Oo.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===zr.distance){var _=Math.PI/180,E=this._mRadius/zr.R/_,S=h.project([c+E,s]),O=h.project([c-E,s]),F=S.add(O).divideBy(2),H=h.unproject(F).lat,Q=Math.acos((Math.cos(E*_)-Math.sin(c*_)*Math.sin(H*_))/(Math.cos(c*_)*Math.cos(H*_)))/_;(isNaN(Q)||Q===0)&&(Q=E/Math.cos(Math.PI/180*c)),this._point=F.subtract(h.getPixelOrigin()),this._radius=isNaN(Q)?0:F.x-h.project([H,s-Q]).x,this._radiusY=F.y-S.y}else{var ce=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(ce).x}this._updateBounds()}});function i1(s,c,h){return new Mv(s,c,h)}var ki=Oo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){b(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,h=null,p=Ot,_,E,S=0,O=this._parts.length;S<O;S++)for(var F=this._parts[S],H=1,Q=F.length;H<Q;H++){_=F[H-1],E=F[H];var ce=p(s,_,E,!0);ce<c&&(c=ce,h=p(s,_,E))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Oi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=Oe(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new hn,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return bn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],h=bn(s),p=0,_=s.length;p<_;p++)h?(c[p]=Oe(s[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(s[p]);return c},_project:function(){var s=new et;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new ve(s,s);this._rawPxBounds&&(this._pxBounds=new et([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,h){var p=s[0]instanceof ge,_=s.length,E,S;if(p){for(S=[],E=0;E<_;E++)S[E]=this._map.latLngToLayerPoint(s[E]),h.extend(S[E]);c.push(S)}else for(E=0;E<_;E++)this._projectLatlngs(s[E],c,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,p,_,E,S,O,F;for(h=0,_=0,E=this._rings.length;h<E;h++)for(F=this._rings[h],p=0,S=F.length;p<S-1;p++)O=Ul(F[p],F[p+1],s,p,!0),O&&(c[_]=c[_]||[],c[_].push(O[0]),(O[1]!==F[p+1]||p===S-2)&&(c[_].push(O[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=fc(s[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var h,p,_,E,S,O,F=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,E=this._parts.length;h<E;h++)for(O=this._parts[h],p=0,S=O.length,_=S-1;p<S;_=p++)if(!(!c&&p===0)&&Bl(s,O[_],O[p])<=F)return!0;return!1}});function o1(s,c){return new ki(s,c)}ki._flat=$l;var vc=ki.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=ki.prototype._convertLatLngs.call(this,s),h=c.length;return h>=2&&c[0]instanceof ge&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(s){ki.prototype._setLatLngs.call(this,s),bn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return bn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,h=new ve(c,c);if(s=new et(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,E;p<_;p++)E=No(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,h,p,_,E,S,O,F,H;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,F=this._parts.length;E<F;E++)for(h=this._parts[E],S=0,H=h.length,O=H-1;S<H;O=S++)p=h[S],_=h[O],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(c=!c);return c||ki.prototype._containsPoint.call(this,s,!0)}});function s1(s,c){return new vc(s,c)}var Li=nt.extend({initialize:function(s,c){b(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=q(s)?s:s.features,h,p,_;if(c){for(h=0,p=c.length;h<p;h++)_=c[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var S=Nf(s,E);return S?(S.feature=Lf(s),S.defaultOptions=S.options,this.resetStyle(S),E.onEachFeature&&E.onEachFeature(s,S),this.addLayer(S)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=n({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function Nf(s,c){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],E=c&&c.pointToLayer,S=c&&c.coordsToLatLng||Pv,O,F,H,Q;if(!p&&!h)return null;switch(h.type){case"Point":return O=S(p),lD(E,s,O,c);case"MultiPoint":for(H=0,Q=p.length;H<Q;H++)O=S(p[H]),_.push(lD(E,s,O,c));return new nt(_);case"LineString":case"MultiLineString":return F=Of(p,h.type==="LineString"?0:1,S),new ki(F,c);case"Polygon":case"MultiPolygon":return F=Of(p,h.type==="Polygon"?1:2,S),new vc(F,c);case"GeometryCollection":for(H=0,Q=h.geometries.length;H<Q;H++){var ce=Nf({geometry:h.geometries[H],type:"Feature",properties:s.properties},c);ce&&_.push(ce)}return new nt(_);case"FeatureCollection":for(H=0,Q=h.features.length;H<Q;H++){var Pe=Nf(h.features[H],c);Pe&&_.push(Pe)}return new nt(_);default:throw new Error("Invalid GeoJSON object.")}}function lD(s,c,h,p){return s?s(c,h):new Pf(h,p&&p.markersInheritOptions&&p)}function Pv(s){return new ge(s[1],s[0],s[2])}function Of(s,c,h){for(var p=[],_=0,E=s.length,S;_<E;_++)S=c?Of(s[_],c-1,h):(h||Pv)(s[_]),p.push(S);return p}function xv(s,c){return s=Oe(s),s.alt!==void 0?[m(s.lng,c),m(s.lat,c),m(s.alt,c)]:[m(s.lng,c),m(s.lat,c)]}function kf(s,c,h,p){for(var _=[],E=0,S=s.length;E<S;E++)_.push(c?kf(s[E],bn(s[E])?0:c-1,h,p):xv(s[E],p));return!c&&h&&_.length>0&&_.push(_[0].slice()),_}function yc(s,c){return s.feature?n({},s.feature,{geometry:c}):Lf(c)}function Lf(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Nv={toGeoJSON:function(s){return yc(this,{type:"Point",coordinates:xv(this.getLatLng(),s)})}};Pf.include(Nv),Mv.include(Nv),xf.include(Nv),ki.include({toGeoJSON:function(s){var c=!bn(this._latlngs),h=kf(this._latlngs,c?1:0,!1,s);return yc(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),vc.include({toGeoJSON:function(s){var c=!bn(this._latlngs),h=c&&!bn(this._latlngs[0]),p=kf(this._latlngs,h?2:c?1:0,!0,s);return c||(p=[p]),yc(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),ct.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(s).geometry.coordinates)}),yc(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var h=c==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var E=_.toGeoJSON(s);if(h)p.push(E.geometry);else{var S=Lf(E);S.type==="FeatureCollection"?p.push.apply(p,S.features):p.push(S)}}}),h?yc(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function dD(s,c){return new Li(s,c)}var a1=dD,Ff=Ae.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,h){this._url=s,this._bounds=Ze(c),b(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ie(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Kr(this._image),this},bringToBack:function(){return this._map&&Zr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Ze(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:Ve("img");if(Ie(c,"leaflet-image-layer"),this._zoomAnimated&&Ie(c,"leaflet-zoom-animated"),this.options.className&&Ie(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=i(this.fire,this,"load"),c.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;rn(this._image,h,c)},_reset:function(){var s=this._image,c=new et(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();it(s,c.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){In(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),c1=function(s,c,h){return new Ff(s,c,h)},hD=Ff.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:Ve("video");if(Ie(c,"leaflet-image-layer"),this._zoomAnimated&&Ie(c,"leaflet-zoom-animated"),this.options.className&&Ie(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=i(this.fire,this,"load"),s){for(var h=c.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[c.src];return}q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var S=Ve("source");S.src=this._url[E],c.appendChild(S)}}});function u1(s,c,h){return new hD(s,c,h)}var fD=Ff.extend({_initImage:function(){var s=this._image=this._url;Ie(s,"leaflet-image-layer"),this._zoomAnimated&&Ie(s,"leaflet-zoom-animated"),this.options.className&&Ie(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function l1(s,c,h){return new fD(s,c,h)}var Xr=Ae.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof ge||q(s))?(this._latlng=Oe(s),b(this,c)):(b(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&In(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&In(this._container,1),this.bringToFront(),this.options.interactive&&(Ie(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(In(this._container,0),this._removeTimeout=setTimeout(i(tt,void 0,this._container),200)):tt(this._container),this.options.interactive&&(ft(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Oe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kr(this._container),this},bringToBack:function(){return this._map&&Zr(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof nt){c=null;var h=this._source._layers;for(var p in h)if(h[p]._map){c=h[p];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=se(this.options.offset),h=this._getAnchor();this._zoomAnimated?it(this._container,s.add(h)):c=c.add(s).add(h);var p=this._containerBottom=-c.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});ke.include({_initOverlay:function(s,c,h,p){var _=c;return _ instanceof s||(_=new s(p).setContent(c)),h&&_.setLatLng(h),_}}),Ae.include({_initOverlay:function(s,c,h,p){var _=h;return _ instanceof s?(b(_,p),_._source=this):(_=c&&!p?c:new s(p,this),_.setContent(h)),_}});var Vf=Xr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Xr.prototype.openOn.call(this,s)},onAdd:function(s){Xr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Oo||this._source.on("preclick",fn))},onRemove:function(s){Xr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Oo||this._source.off("preclick",fn))},getEvents:function(){var s=Xr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=Ve("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Ve("div",s+"-content-wrapper",c);if(this._contentNode=Ve("div",s+"-content",h),Bs(c),Ol(this._contentNode),me(c,"contextmenu",fn),this._tipContainer=Ve("div",s+"-tip-container",c),this._tip=Ve("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ve("a",s+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',me(p,"click",function(_){pt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var p=s.offsetHeight,_=this.options.maxHeight,E="leaflet-popup-scrolled";_&&p>_?(c.height=_+"px",Ie(s,E)):ft(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();it(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(ks(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,p=this._containerWidth,_=new ve(this._containerLeft,-h-this._containerBottom);_._add(sr(this._container));var E=s.layerPointToContainerPoint(_),S=se(this.options.autoPanPadding),O=se(this.options.autoPanPaddingTopLeft||S),F=se(this.options.autoPanPaddingBottomRight||S),H=s.getSize(),Q=0,ce=0;E.x+p+F.x>H.x&&(Q=E.x+p-H.x+F.x),E.x-Q-O.x<0&&(Q=E.x-O.x),E.y+h+F.y>H.y&&(ce=E.y+h-H.y+F.y),E.y-ce-O.y<0&&(ce=E.y-O.y),(Q||ce)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Q,ce]))}},_getAnchor:function(){return se(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),d1=function(s,c){return new Vf(s,c)};ke.mergeOptions({closePopupOnClick:!0}),ke.include({openPopup:function(s,c,h){return this._initOverlay(Vf,s,c,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Ae.include({bindPopup:function(s,c){return this._popup=this._initOverlay(Vf,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof nt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ar(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof Oo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Bf=Xr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Xr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Xr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Xr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ve("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,h,p=this._map,_=this._container,E=p.latLngToContainerPoint(p.getCenter()),S=p.layerPointToContainerPoint(s),O=this.options.direction,F=_.offsetWidth,H=_.offsetHeight,Q=se(this.options.offset),ce=this._getAnchor();O==="top"?(c=F/2,h=H):O==="bottom"?(c=F/2,h=0):O==="center"?(c=F/2,h=H/2):O==="right"?(c=0,h=H/2):O==="left"?(c=F,h=H/2):S.x<E.x?(O="right",c=0,h=H/2):(O="left",c=F+(Q.x+ce.x)*2,h=H/2),s=s.subtract(se(c,h,!0)).add(Q).add(ce),ft(_,"leaflet-tooltip-right"),ft(_,"leaflet-tooltip-left"),ft(_,"leaflet-tooltip-top"),ft(_,"leaflet-tooltip-bottom"),Ie(_,"leaflet-tooltip-"+O),it(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&In(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return se(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),h1=function(s,c){return new Bf(s,c)};ke.include({openTooltip:function(s,c,h){return this._initOverlay(Bf,s,c,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Ae.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Bf,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof nt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(me(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),me(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var pD=Hn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Ls(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=se(h.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function f1(s){return new pD(s)}Hn.Default=Jr;var Hl=Ae.extend({options:{tileSize:256,opacity:1,updateWhenIdle:J.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),tt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Zr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof ve?s:new ve(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,h=-s(-1/0,1/0),p=0,_=c.length,E;p<_;p++)E=c[p].style.zIndex,c[p]!==this._container&&E&&(h=s(h,+E));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!J.ielt9){In(this._container,this.options.opacity);var s=+new Date,c=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var E=Math.min(1,(s-_.loaded)/200);In(_.el,E),E<1?c=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(R(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Ve("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=c-Math.abs(s-h),this._onUpdateLevel(h)):(tt(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=Ve("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)tt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,h,p){var _=Math.floor(s/2),E=Math.floor(c/2),S=h-1,O=new ve(+_,+E);O.z=+S;var F=this._tileCoordsToKey(O),H=this._tiles[F];return H&&H.active?(H.retain=!0,!0):(H&&H.loaded&&(H.retain=!0),S>p?this._retainParent(_,E,S,p):!1)},_retainChildren:function(s,c,h,p){for(var _=2*s;_<2*s+2;_++)for(var E=2*c;E<2*c+2;E++){var S=new ve(_,E);S.z=h+1;var O=this._tileCoordsToKey(S),F=this._tiles[O];if(F&&F.active){F.retain=!0;continue}else F&&F.loaded&&(F.retain=!0);h+1<p&&this._retainChildren(_,E,h+1,p)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,h,p){var _=Math.round(c);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var E=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||E)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,c)},_setZoomTransform:function(s,c,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,h)).round();J.any3d?rn(s.el,_,p):it(s.el,_)},_resetGrid:function(){var s=this._map,c=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,c.wrapLng[1]],p).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([c.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(h,this._tileZoom),_=c.project(s,this._tileZoom).floor(),E=c.getSize().divideBy(p*2);return new et(_.subtract(E),_.add(E))},_update:function(s){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),E=_.getCenter(),S=[],O=this.options.keepBuffer,F=new et(_.getBottomLeft().subtract([O,-O]),_.getTopRight().add([O,-O]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var H in this._tiles){var Q=this._tiles[H].coords;(Q.z!==this._tileZoom||!F.contains(new ve(Q.x,Q.y)))&&(this._tiles[H].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var ce=_.min.y;ce<=_.max.y;ce++)for(var Pe=_.min.x;Pe<=_.max.x;Pe++){var Tn=new ve(Pe,ce);if(Tn.z=this._tileZoom,!!this._isValidTile(Tn)){var Gt=this._tiles[this._tileCoordsToKey(Tn)];Gt?Gt.current=!0:S.push(Tn)}}if(S.sort(function(xn,wc){return xn.distanceTo(E)-wc.distanceTo(E)}),S.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var cr=document.createDocumentFragment();for(Pe=0;Pe<S.length;Pe++)this._addTile(S[Pe],cr);this._level.el.appendChild(cr)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!c.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Ze(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),E=c.unproject(p,s.z),S=c.unproject(_,s.z);return[E,S]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),h=new hn(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),h=new ve(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(s){var c=this._tiles[s];c&&(tt(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Ie(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=f,s.onmousemove=f,J.ielt9&&this.options.opacity<1&&In(s,this.options.opacity)},_addTile:function(s,c){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),i(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(i(this._tileReady,this,s,null,_)),it(_,h),this._tiles[p]={el:_,coords:s,current:!0},c.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(In(h.el,0),R(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(Ie(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new ve(this._wrapX?d(s.x,this._wrapX):s.x,this._wrapY?d(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new et(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function p1(s){return new Hl(s)}var Ec=Hl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=b(this,c),c.detectRetina&&J.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var h=document.createElement("img");return me(h,"load",i(this._tileOnLoad,this,c,h)),me(h,"error",i(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var c={r:J.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=h),c["-y"]=h}return j(this._url,n(c,this.options))},_tileOnLoad:function(s,c){J.ielt9?setTimeout(i(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,h){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),s(h,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=c-s),s+p},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=f,c.onerror=f,!c.complete)){c.src=oe;var h=this._tiles[s].coords;tt(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",oe),Hl.prototype._removeTile.call(this,s)},_tileReady:function(s,c,h){if(!(!this._map||h&&h.getAttribute("src")===oe))return Hl.prototype._tileReady.call(this,s,c,h)}});function gD(s,c){return new Ec(s,c)}var mD=Ec.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var h=n({},this.defaultWmsParams);for(var p in c)p in this.options||(h[p]=c[p]);c=b(this,c);var _=c.detectRetina&&J.retina?2:1,E=this.getTileSize();h.width=E.x*_,h.height=E.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Ec.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),h=this._crs,p=tn(h.project(c[0]),h.project(c[1])),_=p.min,E=p.max,S=(this._wmsVersion>=1.3&&this._crs===V?[_.y,_.x,E.y,E.x]:[_.x,_.y,E.x,E.y]).join(","),O=Ec.prototype.getTileUrl.call(this,s);return O+k(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+S},setParams:function(s,c){return n(this.wmsParams,s),c||this.redraw(),this}});function g1(s,c){return new mD(s,c)}Ec.WMS=mD,gD.wms=g1;var Fi=Ae.extend({options:{padding:.1},initialize:function(s){b(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ie(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var h=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,c),E=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,c));J.any3d?rn(this._container,E,h):it(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new et(h,h.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),_D=Fi.extend({options:{tolerance:0},getEvents:function(){var s=Fi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");me(s,"mousemove",this._onMouseMove,this),me(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,tt(this._container),Qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var s=this._bounds,c=this._container,h=s.getSize(),p=J.retina?2:1;it(c,s.min),c.width=p*h.x,c.height=p*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",J.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Fi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,h=c.next,p=c.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<c.length;_++){if(p=Number(c[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new et,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var h,p,_,E,S=s._parts,O=S.length,F=this._ctx;if(O){for(F.beginPath(),h=0;h<O;h++){for(p=0,_=S[h].length;p<_;p++)E=S[h][p],F[p?"lineTo":"moveTo"](E.x,E.y);c&&F.closePath()}this._fillStroke(F,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(c.x,c.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,c){var h=c.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(ft(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Ie(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,h){this._map._fireDOMEvent(c,h||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function vD(s){return J.canvas?new _D(s):null}var zl=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),m1={_initContainer:function(){this._container=Ve("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=zl("shape");Ie(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=zl("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;tt(c),s.removeInteractiveTarget(c),delete this._layers[a(s)]},_updateStyle:function(s){var c=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(c||(c=s._stroke=zl("stroke")),_.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=q(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(_.removeChild(c),s._stroke=null),p.fill?(h||(h=s._fill=zl("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){Kr(s._container)},_bringToBack:function(s){Zr(s._container)}},jf=J.vml?zl:Ja,ql=Fi.extend({_initContainer:function(){this._container=jf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=jf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tt(this._container),Qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var s=this._bounds,c=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),it(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=jf("path");s.options.className&&Ie(c,s.options.className),s.options.interactive&&Ie(c,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){tt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,h=s.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,Xa(s._parts,c))},_updateCircle:function(s){var c=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(c.x-h)+","+c.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,E)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){Kr(s._path)},_bringToBack:function(s){Zr(s._path)}});J.vml&&ql.include(m1);function yD(s){return J.svg||J.vml?new ql(s):null}ke.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&vD(s)||yD(s)}});var ED=vc.extend({initialize:function(s,c){vc.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Ze(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function _1(s,c){return new ED(s,c)}ql.create=jf,ql.pointsToPath=Xa,Li.geometryToLayer=Nf,Li.coordsToLatLng=Pv,Li.coordsToLatLngs=Of,Li.latLngToCoords=xv,Li.latLngsToCoords=kf,Li.getFeature=yc,Li.asFeature=Lf,ke.mergeOptions({boxZoom:!0});var wD=$n.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ro(),Mi(),this._startPoint=this._map.mouseEventToContainerPoint(s),me(document,{contextmenu:ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ve("div","leaflet-zoom-box",this._container),Ie(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new et(this._point,this._startPoint),h=c.getSize();it(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(tt(this._box),ft(this._container,"leaflet-crosshair")),qe(),Al(),Qe(document,{contextmenu:ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var c=new hn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ke.addInitHook("addHandler","boxZoom",wD),ke.mergeOptions({doubleClickZoom:!0});var ID=$n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,h=c.getZoom(),p=c.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;c.options.doubleClickZoom==="center"?c.setZoom(_):c.setZoomAround(s.containerPoint,_)}});ke.addInitHook("addHandler","doubleClickZoom",ID),ke.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var bD=$n.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Dr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Ie(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ft(this._map._container,"leaflet-grab"),ft(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=Ze(this._map.options.maxBounds);this._offsetLimit=tn(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-c+h)%s+c-h,E=(p+c+h)%s-c-h,S=Math.abs(_+h)<Math.abs(E+h)?_:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=S},_onDragEnd:function(s){var c=this._map,h=c.options,p=!h.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),p)c.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,S=h.easeLinearity,O=_.multiplyBy(S/E),F=O.distanceTo([0,0]),H=Math.min(h.inertiaMaxSpeed,F),Q=O.multiplyBy(H/F),ce=H/(h.inertiaDeceleration*S),Pe=Q.multiplyBy(-ce/2).round();!Pe.x&&!Pe.y?c.fire("moveend"):(Pe=c._limitOffset(Pe,c.options.maxBounds),D(function(){c.panBy(Pe,{duration:ce,easeLinearity:S,noMoveStart:!0,animate:!0})}))}}});ke.addInitHook("addHandler","dragging",bD),ke.mergeOptions({keyboard:!0,keyboardPanDelta:80});var TD=$n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),me(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,h=s.scrollTop||c.scrollTop,p=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)c[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)c[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)c[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)c[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)c[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)c[h.zoomOut[p]]=-s},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,h=this._map,p;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[c],s.shiftKey&&(p=se(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(se(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;ar(s)}}});ke.addInitHook("addHandler","keyboard",TD),ke.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var CD=$n.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=Ll(s),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),p),ar(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=h?Math.ceil(_/h)*h:_,S=s._limitZoom(c+(this._delta>0?E:-E))-c;this._delta=0,this._startTime=null,S&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+S):s.setZoomAround(this._lastMousePos,c+S))}});ke.addInitHook("addHandler","scrollWheelZoom",CD);var v1=600;ke.mergeOptions({tapHold:J.touchNative&&J.safari&&J.mobile,tapTolerance:15});var DD=$n.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new ve(c.clientX,c.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",pt),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),v1),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Qe(document,"touchend",pt),Qe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Qe(document,"touchend touchcancel contextmenu",this._cancel,this),Qe(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new ve(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});ke.addInitHook("addHandler","tapHold",DD),ke.mergeOptions({touchZoom:J.touch,bounceAtZoomLimits:!0});var SD=$n.extend({addHooks:function(){Ie(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ft(this._map._container,"leaflet-touch-zoom"),Qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),pt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(_,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&_<1||this._zoom>c.getMaxZoom()&&_>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var E=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&E.x===0&&E.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var S=i(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(S,this,!0),pt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),Qe(document,"touchmove",this._onTouchMove,this),Qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ke.addInitHook("addHandler","touchZoom",SD),ke.BoxZoom=wD,ke.DoubleClickZoom=ID,ke.Drag=bD,ke.Keyboard=TD,ke.ScrollWheelZoom=CD,ke.TapHold=DD,ke.TouchZoom=SD,t.Bounds=et,t.Browser=J,t.CRS=wn,t.Canvas=_D,t.Circle=Mv,t.CircleMarker=xf,t.Class=N,t.Control=Pn,t.DivIcon=pD,t.DivOverlay=Xr,t.DomEvent=at,t.DomUtil=Qr,t.Draggable=Dr,t.Evented=Ir,t.FeatureGroup=nt,t.GeoJSON=Li,t.GridLayer=Hl,t.Handler=$n,t.Icon=Hn,t.ImageOverlay=Ff,t.LatLng=ge,t.LatLngBounds=hn,t.Layer=Ae,t.LayerGroup=ct,t.LineUtil=l,t.Map=ke,t.Marker=Pf,t.Mixin=dc,t.Path=Oo,t.Point=ve,t.PolyUtil=Vl,t.Polygon=vc,t.Polyline=ki,t.Popup=Vf,t.PosAnimation=bf,t.Projection=w,t.Rectangle=ED,t.Renderer=Fi,t.SVG=ql,t.SVGOverlay=fD,t.TileLayer=Ec,t.Tooltip=Bf,t.Transformation=fl,t.Util=P,t.VideoOverlay=hD,t.bind=i,t.bounds=tn,t.canvas=vD,t.circle=i1,t.circleMarker=r1,t.control=xo,t.divIcon=f1,t.extend=n,t.featureGroup=qt,t.geoJSON=dD,t.geoJson=a1,t.gridLayer=p1,t.icon=zn,t.imageOverlay=c1,t.latLng=Oe,t.latLngBounds=Ze,t.layerGroup=je,t.map=Tf,t.marker=n1,t.point=se,t.polygon=s1,t.polyline=o1,t.popup=d1,t.rectangle=_1,t.setOptions=b,t.stamp=a,t.svg=yD,t.svgOverlay=l1,t.tileLayer=gD,t.tooltip=h1,t.transformation=qr,t.version=e,t.videoOverlay=u1;var y1=window.L;t.noConflict=function(){return window.L=y1,this},window.L=t})});var Lv;function $f(){return Lv}function ei(t){let e=Lv;return Lv=t,e}var kD=Symbol("NotFound");function Ic(t){return t===kD||t?.name==="\u0275NotFound"}var pn=null,Hf=!1,Fv=1,V1=null,gn=Symbol("SIGNAL");function De(t){let e=pn;return pn=t,e}function Wf(){return pn}var bc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Tc(t){if(Hf)throw new Error("");if(pn===null)return;pn.consumerOnSignalRead(t);let e=pn.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=pn.recomputing;if(r&&(n=e!==void 0?e.nextProducer:pn.producers,n!==void 0&&n.producer===t)){pn.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===pn&&(!r||j1(i,pn)))return;let o=Dc(pn),a={producer:t,consumer:pn,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};pn.producersTail=a,e!==void 0?e.nextProducer=a:pn.producers=a,o&&BD(t,a)}function LD(){Fv++}function Kf(t){if(!(Dc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Fv)){if(!t.producerMustRecompute(t)&&!Kl(t)){Gf(t);return}t.producerRecomputeValue(t),Gf(t)}}function Vv(t){if(t.consumers===void 0)return;let e=Hf;Hf=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||B1(r)}}finally{Hf=e}}function Bv(){return pn?.consumerAllowSignalWrites!==!1}function B1(t){t.dirty=!0,Vv(t),t.consumerMarkedDirty?.(t)}function Gf(t){t.dirty=!1,t.lastCleanEpoch=Fv}function Cc(t){return t&&FD(t),De(t)}function FD(t){t.producersTail=void 0,t.recomputing=!0}function Wl(t,e){De(e),t&&VD(t)}function VD(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Dc(t))do n=jv(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Kl(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Kf(n),r!==n.version))return!0}return!1}function Zl(t){if(Dc(t)){let e=t.producers;for(;e!==void 0;)e=jv(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function BD(t,e){let n=t.consumersTail,r=Dc(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)BD(i.producer,i)}function jv(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Dc(e)){let o=e.producers;for(;o!==void 0;)o=jv(o)}return n}function Dc(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Zf(t){V1?.(t)}function j1(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Qf(t,e){return Object.is(t,e)}function Yf(t,e){let n=Object.create(U1);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Kf(n),Tc(n),n.value===Gl)throw n.error;return n.value};return r[gn]=n,Zf(n),r}var zf=Symbol("UNSET"),qf=Symbol("COMPUTING"),Gl=Symbol("ERRORED"),U1=be(G({},bc),{value:zf,dirty:!0,error:null,equal:Qf,kind:"computed",producerMustRecompute(t){return t.value===zf||t.value===qf},producerRecomputeValue(t){if(t.value===qf)throw new Error("");let e=t.value;t.value=qf;let n=Cc(t),r,i=!1;try{r=t.computation(),De(null),i=e!==zf&&e!==Gl&&r!==Gl&&t.equal(e,r)}catch(o){r=Gl,t.error=o}finally{Wl(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function $1(){throw new Error}var jD=$1;function UD(t){jD(t)}function Uv(t){jD=t}var H1=null;function $v(t,e){let n=Object.create(Jf);n.value=t,e!==void 0&&(n.equal=e);let r=()=>$D(n);return r[gn]=n,Zf(n),[r,a=>Sc(n,a),a=>Hv(n,a)]}function $D(t){return Tc(t),t.value}function Sc(t,e){Bv()||UD(t),t.equal(t.value,e)||(t.value=e,z1(t))}function Hv(t,e){Bv()||UD(t),Sc(t,e(t.value))}var Jf=be(G({},bc),{equal:Qf,value:void 0,kind:"signal"});function z1(t){t.version++,LD(),Vv(t),H1?.(t)}function Te(t){return typeof t=="function"}function Ac(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Xf=Ac(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Gs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var mt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Te(r))try{r()}catch(o){e=o instanceof Xf?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{HD(o)}catch(a){e=e??[],a instanceof Xf?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Xf(e)}}add(e){var n;if(e&&e!==this)if(this.closed)HD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Gs(n,e)}remove(e){let{_finalizers:n}=this;n&&Gs(n,e),e instanceof t&&e._removeParent(this)}};mt.EMPTY=(()=>{let t=new mt;return t.closed=!0,t})();var zv=mt.EMPTY;function ep(t){return t instanceof mt||t&&"closed"in t&&Te(t.remove)&&Te(t.add)&&Te(t.unsubscribe)}function HD(t){Te(t)?t():t.unsubscribe()}var Sr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Rc={setTimeout(t,e,...n){let{delegate:r}=Rc;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Rc;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function tp(t){Rc.setTimeout(()=>{let{onUnhandledError:e}=Sr;if(e)e(t);else throw t})}function Ql(){}var zD=qv("C",void 0,void 0);function qD(t){return qv("E",void 0,t)}function GD(t){return qv("N",t,void 0)}function qv(t,e,n){return{kind:t,value:e,error:n}}var Ws=null;function Mc(t){if(Sr.useDeprecatedSynchronousErrorHandling){let e=!Ws;if(e&&(Ws={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ws;if(Ws=null,n)throw r}}else t()}function WD(t){Sr.useDeprecatedSynchronousErrorHandling&&Ws&&(Ws.errorThrown=!0,Ws.error=t)}var Ks=class extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ep(e)&&e.add(this)):this.destination=W1}static create(e,n,r){return new Pc(e,n,r)}next(e){this.isStopped?Wv(GD(e),this):this._next(e)}error(e){this.isStopped?Wv(qD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Wv(zD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},q1=Function.prototype.bind;function Gv(t,e){return q1.call(t,e)}var Kv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){np(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){np(r)}else np(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){np(n)}}},Pc=class extends Ks{constructor(e,n,r){super();let i;if(Te(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Sr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Gv(e.next,o),error:e.error&&Gv(e.error,o),complete:e.complete&&Gv(e.complete,o)}):i=e}this.destination=new Kv(i)}};function np(t){Sr.useDeprecatedSynchronousErrorHandling?WD(t):tp(t)}function G1(t){throw t}function Wv(t,e){let{onStoppedNotification:n}=Sr;n&&Rc.setTimeout(()=>n(t,e))}var W1={closed:!0,next:Ql,error:G1,complete:Ql};var xc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qn(t){return t}function rp(...t){return Zv(t)}function Zv(t){return t.length===0?qn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var le=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Z1(n)?n:new Pc(n,r,i);return Mc(()=>{let{operator:a,source:u}=this;o.add(a?a.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=KD(r),new r((i,o)=>{let a=new Pc({next:u=>{try{n(u)}catch(d){o(d),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[xc](){return this}pipe(...n){return Zv(n)(this)}toPromise(n){return n=KD(n),new n((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return t.create=e=>new t(e),t})();function KD(t){var e;return(e=t??Sr.Promise)!==null&&e!==void 0?e:Promise}function K1(t){return t&&Te(t.next)&&Te(t.error)&&Te(t.complete)}function Z1(t){return t&&t instanceof Ks||K1(t)&&ep(t)}function Qv(t){return Te(t?.lift)}function Ue(t){return e=>{if(Qv(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Le(t,e,n,r,i){return new Yv(t,e,n,r,i)}var Yv=class extends Ks{constructor(e,n,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(u){try{n(u)}catch(d){e.error(d)}}:super._next,this._error=i?function(u){try{i(u)}catch(d){e.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Nc(){return Ue((t,e)=>{let n=null;t._refCount++;let r=Le(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Oc=class extends le{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Qv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mt;let n=this.getSubject();e.add(this.source.subscribe(Le(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mt.EMPTY)}return e}refCount(){return Nc()(this)}};var ZD=Ac(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var It=(()=>{class t extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ip(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ZD}next(n){Mc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Mc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Mc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?zv:(this.currentObservers=null,o.push(n),new mt(()=>{this.currentObservers=null,Gs(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new le;return n.source=this,n}}return t.create=(e,n)=>new ip(e,n),t})(),ip=class extends It{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:zv}};var on=class extends It{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Jv={now(){return(Jv.delegate||Date).now()},delegate:void 0};var op=class extends mt{constructor(e,n){super()}schedule(e,n=0){return this}};var Yl={setInterval(t,e,...n){let{delegate:r}=Yl;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Yl;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var kc=class extends op{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Yl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Yl.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Gs(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Lc=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Lc.now=Jv.now;var Fc=class extends Lc{constructor(e,n=Lc.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Xv=new Fc(kc);var sp=class extends kc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ap=class extends Fc{};var ey=new ap(sp);var Nn=new le(t=>t.complete());function QD(t){return t&&Te(t.schedule)}function YD(t){return t[t.length-1]}function cp(t){return Te(YD(t))?t.pop():void 0}function Lo(t){return QD(YD(t))?t.pop():void 0}function ty(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function XD(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(m){try{f(r.next(m))}catch(y){a(y)}}function d(m){try{f(r.throw(m))}catch(y){a(y)}}function f(m){m.done?o(m.value):i(m.value).then(u,d)}f((r=r.apply(t,e||[])).next())})}function JD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zs(t){return this instanceof Zs?(this.v=t,this):new Zs(t)}function e0(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(b){return function(k){return Promise.resolve(k).then(b,y)}}function u(b,k){r[b]&&(i[b]=function(U){return new Promise(function(j,q){o.push([b,U,j,q])>1||d(b,U)})},k&&(i[b]=k(i[b])))}function d(b,k){try{f(r[b](k))}catch(U){I(o[0][3],U)}}function f(b){b.value instanceof Zs?Promise.resolve(b.value.v).then(m,y):I(o[0][2],b)}function m(b){d("next",b)}function y(b){d("throw",b)}function I(b,k){b(k),o.shift(),o.length&&d(o[0][0],o[0][1])}}function t0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof JD=="function"?JD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(u,d){a=t[o](a),i(u,d,a.done,a.value)})}}function i(o,a,u,d){Promise.resolve(d).then(function(f){o({value:f,done:u})},a)}}var up=t=>t&&typeof t.length=="number"&&typeof t!="function";function lp(t){return Te(t?.then)}function dp(t){return Te(t[xc])}function hp(t){return Symbol.asyncIterator&&Te(t?.[Symbol.asyncIterator])}function fp(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Q1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var pp=Q1();function gp(t){return Te(t?.[pp])}function mp(t){return e0(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Zs(n.read());if(i)return yield Zs(void 0);yield yield Zs(r)}}finally{n.releaseLock()}})}function _p(t){return Te(t?.getReader)}function bt(t){if(t instanceof le)return t;if(t!=null){if(dp(t))return Y1(t);if(up(t))return J1(t);if(lp(t))return X1(t);if(hp(t))return n0(t);if(gp(t))return eL(t);if(_p(t))return tL(t)}throw fp(t)}function Y1(t){return new le(e=>{let n=t[xc]();if(Te(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function J1(t){return new le(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function X1(t){return new le(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,tp)})}function eL(t){return new le(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function n0(t){return new le(e=>{nL(t,e).catch(n=>e.error(n))})}function tL(t){return n0(mp(t))}function nL(t,e){var n,r,i,o;return XD(this,void 0,void 0,function*(){try{for(n=t0(t);r=yield n.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function On(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Fo(t,e=0){return Ue((n,r)=>{n.subscribe(Le(r,i=>On(r,t,()=>r.next(i),e),()=>On(r,t,()=>r.complete(),e),i=>On(r,t,()=>r.error(i),e)))})}function Vo(t,e=0){return Ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function r0(t,e){return bt(t).pipe(Vo(e),Fo(e))}function i0(t,e){return bt(t).pipe(Vo(e),Fo(e))}function o0(t,e){return new le(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function s0(t,e){return new le(n=>{let r;return On(n,e,()=>{r=t[pp](),On(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),()=>Te(r?.return)&&r.return()})}function vp(t,e){if(!t)throw new Error("Iterable cannot be null");return new le(n=>{On(n,e,()=>{let r=t[Symbol.asyncIterator]();On(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function a0(t,e){return vp(mp(t),e)}function c0(t,e){if(t!=null){if(dp(t))return r0(t,e);if(up(t))return o0(t,e);if(lp(t))return i0(t,e);if(hp(t))return vp(t,e);if(gp(t))return s0(t,e);if(_p(t))return a0(t,e)}throw fp(t)}function ut(t,e){return e?c0(t,e):bt(t)}function de(...t){let e=Lo(t);return ut(t,e)}function Vc(t,e){let n=Te(t)?t:()=>t,r=i=>i.error(n());return new le(e?i=>e.schedule(r,0,i):r)}function ny(t){return!!t&&(t instanceof le||Te(t.lift)&&Te(t.subscribe))}var Vi=Ac(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function he(t,e){return Ue((n,r)=>{let i=0;n.subscribe(Le(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:rL}=Array;function iL(t,e){return rL(e)?t(...e):t(e)}function yp(t){return he(e=>iL(t,e))}var{isArray:oL}=Array,{getPrototypeOf:sL,prototype:aL,keys:cL}=Object;function Ep(t){if(t.length===1){let e=t[0];if(oL(e))return{args:e,keys:null};if(uL(e)){let n=cL(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function uL(t){return t&&typeof t=="object"&&sL(t)===aL}function wp(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Bc(...t){let e=Lo(t),n=cp(t),{args:r,keys:i}=Ep(t);if(r.length===0)return ut([],e);let o=new le(lL(r,e,i?a=>wp(i,a):qn));return n?o.pipe(yp(n)):o}function lL(t,e,n=qn){return r=>{u0(e,()=>{let{length:i}=t,o=new Array(i),a=i,u=i;for(let d=0;d<i;d++)u0(e,()=>{let f=ut(t[d],e),m=!1;f.subscribe(Le(r,y=>{o[d]=y,m||(m=!0,u--),u||r.next(n(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function u0(t,e,n){t?On(n,t,e):e()}function l0(t,e,n,r,i,o,a,u){let d=[],f=0,m=0,y=!1,I=()=>{y&&!d.length&&!f&&e.complete()},b=U=>f<r?k(U):d.push(U),k=U=>{o&&e.next(U),f++;let j=!1;bt(n(U,m++)).subscribe(Le(e,q=>{i?.(q),o?b(q):e.next(q)},()=>{j=!0},void 0,()=>{if(j)try{for(f--;d.length&&f<r;){let q=d.shift();a?On(e,a,()=>k(q)):k(q)}I()}catch(q){e.error(q)}}))};return t.subscribe(Le(e,b,()=>{y=!0,I()})),()=>{u?.()}}function kt(t,e,n=1/0){return Te(e)?kt((r,i)=>he((o,a)=>e(r,o,i,a))(bt(t(r,i))),n):(typeof e=="number"&&(n=e),Ue((r,i)=>l0(r,i,t,n)))}function d0(t=1/0){return kt(qn,t)}function h0(){return d0(1)}function jc(...t){return h0()(ut(t,Lo(t)))}function Jl(t){return new le(e=>{bt(t()).subscribe(e)})}function ry(...t){let e=cp(t),{args:n,keys:r}=Ep(t),i=new le(o=>{let{length:a}=n;if(!a){o.complete();return}let u=new Array(a),d=a,f=a;for(let m=0;m<a;m++){let y=!1;bt(n[m]).subscribe(Le(o,I=>{y||(y=!0,f--),u[m]=I},()=>d--,void 0,()=>{(!d||!y)&&(f||o.next(r?wp(r,u):u),o.complete())}))}});return e?i.pipe(yp(e)):i}function Gn(t,e){return Ue((n,r)=>{let i=0;n.subscribe(Le(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Bo(t){return Ue((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Le(n,void 0,void 0,a=>{o=bt(t(a,Bo(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function f0(t,e,n,r,i){return(o,a)=>{let u=n,d=e,f=0;o.subscribe(Le(a,m=>{let y=f++;d=u?t(d,m,y):(u=!0,m),r&&a.next(d)},i&&(()=>{u&&a.next(d),a.complete()})))}}function Uc(t,e){return Te(e)?kt(t,e,1):kt(t,1)}function jo(t){return Ue((e,n)=>{let r=!1;e.subscribe(Le(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Bi(t){return t<=0?()=>Nn:Ue((e,n)=>{let r=0;e.subscribe(Le(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ip(t=dL){return Ue((e,n)=>{let r=!1;e.subscribe(Le(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function dL(){return new Vi}function Xl(t){return Ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ji(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Gn((i,o)=>t(i,o,r)):qn,Bi(1),n?jo(e):Ip(()=>new Vi))}function $c(t){return t<=0?()=>Nn:Ue((e,n)=>{let r=[];e.subscribe(Le(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function iy(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Gn((i,o)=>t(i,o,r)):qn,$c(1),n?jo(e):Ip(()=>new Vi))}function bp(t,e){return Ue(f0(t,e,arguments.length>=2,!0))}function Tp(...t){let e=Lo(t);return Ue((n,r)=>{(e?jc(t,n,e):jc(t,n)).subscribe(r)})}function kn(t,e){return Ue((n,r)=>{let i=null,o=0,a=!1,u=()=>a&&!i&&r.complete();n.subscribe(Le(r,d=>{i?.unsubscribe();let f=0,m=o++;bt(t(d,m)).subscribe(i=Le(r,y=>r.next(e?e(d,y,m,f++):y),()=>{i=null,u()}))},()=>{a=!0,u()}))})}function Cp(t){return Ue((e,n)=>{bt(t).subscribe(Le(n,()=>n.complete(),Ql)),!n.closed&&e.subscribe(n)})}function Wt(t,e,n){let r=Te(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ue((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let u=!0;i.subscribe(Le(o,d=>{var f;(f=r.next)===null||f===void 0||f.call(r,d),o.next(d)},()=>{var d;u=!1,(d=r.complete)===null||d===void 0||d.call(r),o.complete()},d=>{var f;u=!1,(f=r.error)===null||f===void 0||f.call(r,d),o.error(d)},()=>{var d,f;u&&((d=r.unsubscribe)===null||d===void 0||d.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):qn}function p0(t){let e=De(null);try{return t()}finally{De(e)}}var Ys=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},_y=new Ys("20.3.14");var Rp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Z=class extends Error{code;constructor(e,n){super(zc(e,n)),this.code=e}};function hL(t){return`NG0${Math.abs(t)}`}function zc(t,e){return`${hL(t)}${e?": "+e:""}`}var zi=globalThis;function We(t){for(let e in t)if(t[e]===We)return e;throw Error("")}function _0(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function $i(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map($i).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function vy(t,e){return t?e?`${t} ${e}`:t:e||""}var fL=We({__forward_ref__:We});function ur(t){return t.__forward_ref__=ur,t.toString=function(){return $i(this())},t}function sn(t){return yy(t)?t():t}function yy(t){return typeof t=="function"&&t.hasOwnProperty(fL)&&t.__forward_ref__===ur}function ee(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ti(t){return{providers:t.providers||[],imports:t.imports||[]}}function rd(t){return pL(t,Mp)}function Ey(t){return rd(t)!==null}function pL(t,e){return t.hasOwnProperty(e)&&t[e]||null}function gL(t){let e=t?.[Mp]??null;return e||null}function sy(t){return t&&t.hasOwnProperty(Sp)?t[Sp]:null}var Mp=We({\u0275prov:We}),Sp=We({\u0275inj:We}),X=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function wy(t){return t&&!!t.\u0275providers}var Iy=We({\u0275cmp:We}),by=We({\u0275dir:We}),Ty=We({\u0275pipe:We}),Cy=We({\u0275mod:We}),td=We({\u0275fac:We}),ta=We({__NG_ELEMENT_ID__:We}),g0=We({__NG_ENV_ID__:We});function na(t){return typeof t=="string"?t:t==null?"":String(t)}function v0(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():na(t)}var y0=We({ngErrorCode:We}),mL=We({ngErrorMessage:We}),_L=We({ngTokenPath:We});function Dy(t,e){return E0("",-200,e)}function Pp(t,e){throw new Z(-201,!1)}function E0(t,e,n){let r=new Z(e,t);return r[y0]=e,r[mL]=t,n&&(r[_L]=n),r}function vL(t){return t[y0]}var ay;function w0(){return ay}function Cn(t){let e=ay;return ay=t,e}function Sy(t,e,n){let r=rd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Pp(t,"Injector")}var yL={},Qs=yL,cy="__NG_DI_FLAG__",uy=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Js(n)||0;try{return this.injector.get(e,r&8?null:Qs,r)}catch(i){if(Ic(i))return i;throw i}}};function EL(t,e=0){let n=$f();if(n===void 0)throw new Z(-203,!1);if(n===null)return Sy(t,void 0,e);{let r=wL(e),i=n.retrieve(t,r);if(Ic(i)){if(r.optional)return null;throw i}return i}}function Se(t,e=0){return(w0()||EL)(sn(t),e)}function B(t,e){return Se(t,Js(e))}function Js(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function wL(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function ly(t){let e=[];for(let n=0;n<t.length;n++){let r=sn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,o=0;for(let a=0;a<r.length;a++){let u=r[a],d=IL(u);typeof d=="number"?d===-1?i=u.token:o|=d:i=u}e.push(Se(i,o))}else e.push(Se(r))}return e}function I0(t,e){return t[cy]=e,t.prototype[cy]=e,t}function IL(t){return t[cy]}function Uo(t,e){let n=t.hasOwnProperty(td);return n?t[td]:null}function xp(t,e){t.forEach(n=>Array.isArray(n)?xp(n,e):e(n))}function Ay(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function id(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function b0(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function T0(t,e,n){let r=qc(t,e);return r>=0?t[r|1]=n:(r=~r,b0(t,r,e,n)),r}function Np(t,e){let n=qc(t,e);if(n>=0)return t[n|1]}function qc(t,e){return bL(t,e,1)}function bL(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),a=t[o<<n];if(e===a)return o<<n;a>e?i=o:r=o+1}return~(i<<n)}var Ho={},Wn=[],zo=new X(""),Ry=new X("",-1),My=new X(""),nd=class{get(e,n=Qs){if(n===Qs){let i=E0("",-201);throw i.name="\u0275NotFound",i}return n}};function Py(t){return t[Cy]||null}function qo(t){return t[Iy]||null}function xy(t){return t[by]||null}function C0(t){return t[Ty]||null}function ni(t){return{\u0275providers:t}}function D0(...t){return{\u0275providers:Ny(!0,t),\u0275fromNgModule:!0}}function Ny(t,...e){let n=[],r=new Set,i,o=a=>{n.push(a)};return xp(e,a=>{let u=a;Ap(u,o,[],r)&&(i||=[],i.push(u))}),i!==void 0&&S0(i,o),n}function S0(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Oy(i,o=>{e(o,r)})}}function Ap(t,e,n,r){if(t=sn(t),!t)return!1;let i=null,o=sy(t),a=!o&&qo(t);if(!o&&!a){let d=t.ngModule;if(o=sy(d),o)i=d;else return!1}else{if(a&&!a.standalone)return!1;i=t}let u=r.has(i);if(a){if(u)return!1;if(r.add(i),a.dependencies){let d=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of d)Ap(f,e,n,r)}}else if(o){if(o.imports!=null&&!u){r.add(i);let f;try{xp(o.imports,m=>{Ap(m,e,n,r)&&(f||=[],f.push(m))})}finally{}f!==void 0&&S0(f,e)}if(!u){let f=Uo(i)||(()=>new i);e({provide:i,useFactory:f,deps:Wn},i),e({provide:My,useValue:i,multi:!0},i),e({provide:zo,useValue:()=>Se(i),multi:!0},i)}let d=o.providers;if(d!=null&&!u){let f=t;Oy(d,m=>{e(m,f)})}}else return!1;return i!==t&&t.providers!==void 0}function Oy(t,e){for(let n of t)wy(n)&&(n=n.\u0275providers),Array.isArray(n)?Oy(n,e):e(n)}var TL=We({provide:String,useValue:We});function A0(t){return t!==null&&typeof t=="object"&&TL in t}function CL(t){return!!(t&&t.useExisting)}function DL(t){return!!(t&&t.useFactory)}function Xs(t){return typeof t=="function"}function R0(t){return!!t.useClass}var od=new X(""),Dp={},m0={},oy;function sd(){return oy===void 0&&(oy=new nd),oy}var Tt=class{},ea=class extends Tt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,hy(e,a=>this.processProvider(a)),this.records.set(Ry,Hc(void 0,this)),i.has("environment")&&this.records.set(Tt,Hc(void 0,this));let o=this.records.get(od);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(My,Wn,{self:!0}))}retrieve(e,n){let r=Js(n)||0;try{return this.get(e,Qs,r)}catch(i){if(Ic(i))return i;throw i}}destroy(){ed(this),this._destroyed=!0;let e=De(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return ed(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ed(this);let n=ei(this),r=Cn(void 0),i;try{return e()}finally{ei(n),Cn(r)}}get(e,n=Qs,r){if(ed(this),e.hasOwnProperty(g0))return e[g0](this);let i=Js(r),o,a=ei(this),u=Cn(void 0);try{if(!(i&4)){let f=this.records.get(e);if(f===void 0){let m=PL(e)&&rd(e);m&&this.injectableDefInScope(m)?f=Hc(dy(e),Dp):f=null,this.records.set(e,f)}if(f!=null)return this.hydrate(e,f,i)}let d=i&2?sd():this.parent;return n=i&8&&n===Qs?null:n,d.get(e,n)}catch(d){let f=vL(d);throw f===-200||f===-201?new Z(f,null):d}finally{Cn(u),ei(a)}}resolveInjectorInitializers(){let e=De(null),n=ei(this),r=Cn(void 0),i;try{let o=this.get(zo,Wn,{self:!0});for(let a of o)a()}finally{ei(n),Cn(r),De(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push($i(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=sn(e);let n=Xs(e)?e:sn(e&&e.provide),r=AL(e);if(!Xs(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Hc(void 0,Dp,!0),i.factory=()=>ly(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=De(null);try{if(n.value===m0)throw Dy($i(e));return n.value===Dp&&(n.value=m0,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&ML(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{De(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=sn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function dy(t){let e=rd(t),n=e!==null?e.factory:Uo(t);if(n!==null)return n;if(t instanceof X)throw new Z(204,!1);if(t instanceof Function)return SL(t);throw new Z(204,!1)}function SL(t){if(t.length>0)throw new Z(204,!1);let n=gL(t);return n!==null?()=>n.factory(t):()=>new t}function AL(t){if(A0(t))return Hc(void 0,t.useValue);{let e=ky(t);return Hc(e,Dp)}}function ky(t,e,n){let r;if(Xs(t)){let i=sn(t);return Uo(i)||dy(i)}else if(A0(t))r=()=>sn(t.useValue);else if(DL(t))r=()=>t.useFactory(...ly(t.deps||[]));else if(CL(t))r=(i,o)=>Se(sn(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=sn(t&&(t.useClass||t.provide));if(RL(t))r=()=>new i(...ly(t.deps));else return Uo(i)||dy(i)}return r}function ed(t){if(t.destroyed)throw new Z(205,!1)}function Hc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function RL(t){return!!t.deps}function ML(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function PL(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function hy(t,e){for(let n of t)Array.isArray(n)?hy(n,e):n&&wy(n)?hy(n.\u0275providers,e):e(n)}function Lt(t,e){let n;t instanceof ea?(ed(t),n=t):n=new uy(t);let r,i=ei(n),o=Cn(void 0);try{return e()}finally{ei(i),Cn(o)}}function M0(){return w0()!==void 0||$f()!=null}var Rr=0,_e=1,ye=2,an=3,lr=4,dr=5,ad=6,Gc=7,mn=8,Go=9,ri=10,ot=11,Wc=12,Ly=13,ra=14,hr=15,ia=16,oa=17,sa=18,cd=19,Fy=20,Ui=21,Op=22,ud=23,Kn=24,aa=25,ld=26,Ft=27,P0=1;var Wo=7,dd=8,hd=9,Ln=10;function ii(t){return Array.isArray(t)&&typeof t[P0]=="object"}function Mr(t){return Array.isArray(t)&&t[P0]===!0}function Vy(t){return(t.flags&4)!==0}function Ko(t){return t.componentOffset>-1}function Kc(t){return(t.flags&1)===1}function oi(t){return!!t.template}function Zc(t){return(t[ye]&512)!==0}function ca(t){return(t[ye]&256)===256}var x0="svg",N0="math";function fr(t){for(;Array.isArray(t);)t=t[Rr];return t}function By(t,e){return fr(e[t])}function Pr(t,e){return fr(e[t.index])}function kp(t,e){return t.data[e]}function Lp(t,e){return t[e]}function jy(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function pr(t,e){let n=e[t];return ii(n)?n:n[Rr]}function Fp(t){return(t[ye]&128)===128}function O0(t){return Mr(t[an])}function ua(t,e){return e==null?null:t[e]}function Uy(t){t[oa]=0}function $y(t){t[ye]&1024||(t[ye]|=1024,Fp(t)&&Qc(t))}function k0(t,e){for(;t>0;)e=e[ra],t--;return e}function fd(t){return!!(t[ye]&9216||t[Kn]?.dirty)}function Vp(t){t[ri].changeDetectionScheduler?.notify(8),t[ye]&64&&(t[ye]|=1024),fd(t)&&Qc(t)}function Qc(t){t[ri].changeDetectionScheduler?.notify(0);let e=$o(t);for(;e!==null&&!(e[ye]&8192||(e[ye]|=8192,!Fp(e)));)e=$o(e)}function Hy(t,e){if(ca(t))throw new Z(911,!1);t[Ui]===null&&(t[Ui]=[]),t[Ui].push(e)}function L0(t,e){if(t[Ui]===null)return;let n=t[Ui].indexOf(e);n!==-1&&t[Ui].splice(n,1)}function $o(t){let e=t[an];return Mr(e)?e[an]:e}function F0(t){return t[Gc]??=[]}function V0(t){return t.cleanup??=[]}var Re={lFrame:J0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var fy=!1;function B0(){return Re.lFrame.elementDepthCount}function j0(){Re.lFrame.elementDepthCount++}function zy(){Re.lFrame.elementDepthCount--}function Bp(){return Re.bindingsEnabled}function U0(){return Re.skipHydrationRootTNode!==null}function qy(t){return Re.skipHydrationRootTNode===t}function Gy(){Re.skipHydrationRootTNode=null}function Be(){return Re.lFrame.lView}function cn(){return Re.lFrame.tView}function Dn(t){return Re.lFrame.contextLView=t,t[mn]}function Sn(t){return Re.lFrame.contextLView=null,t}function Vt(){let t=Wy();for(;t!==null&&t.type===64;)t=t.parent;return t}function Wy(){return Re.lFrame.currentTNode}function $0(){let t=Re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Yc(t,e){let n=Re.lFrame;n.currentTNode=t,n.isParent=e}function Ky(){return Re.lFrame.isParent}function H0(){Re.lFrame.isParent=!1}function z0(){return Re.lFrame.contextLView}function Zy(){return fy}function Qy(t){let e=fy;return fy=t,e}function Yy(){let t=Re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function q0(){return Re.lFrame.bindingIndex}function G0(t){return Re.lFrame.bindingIndex=t}function Jc(){return Re.lFrame.bindingIndex++}function Jy(t){let e=Re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function W0(){return Re.lFrame.inI18n}function K0(t,e){let n=Re.lFrame;n.bindingIndex=n.bindingRootIndex=t,jp(e)}function Z0(){return Re.lFrame.currentDirectiveIndex}function jp(t){Re.lFrame.currentDirectiveIndex=t}function Q0(t){let e=Re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Xy(t){Re.lFrame.currentQueryIndex=t}function xL(t){let e=t[_e];return e.type===2?e.declTNode:e.type===1?t[dr]:null}function eE(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=xL(o),i===null||(o=o[ra],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Re.lFrame=Y0();return r.currentTNode=e,r.lView=t,!0}function Up(t){let e=Y0(),n=t[_e];Re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Y0(){let t=Re.lFrame,e=t===null?null:t.child;return e===null?J0(t):e}function J0(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function X0(){let t=Re.lFrame;return Re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var tE=X0;function $p(){let t=X0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function eS(t){return(Re.lFrame.contextLView=k0(t,Re.lFrame.contextLView))[mn]}function Zo(){return Re.lFrame.selectedIndex}function Qo(t){Re.lFrame.selectedIndex=t}function pd(){let t=Re.lFrame;return kp(t.tView,t.selectedIndex)}function tS(){return Re.lFrame.currentNamespace}var nS=!0;function Hp(){return nS}function gd(t){nS=t}function py(t,e=null,n=null,r){let i=nE(t,e,n,r);return i.resolveInjectorInitializers(),i}function nE(t,e=null,n=null,r,i=new Set){let o=[n||Wn,D0(t)];return r=r||(typeof t=="object"?void 0:$i(t)),new ea(o,e||sd(),r||null,i)}var Ct=class t{static THROW_IF_NOT_FOUND=Qs;static NULL=new nd;static create(e,n){if(Array.isArray(e))return py({name:""},n,e,"");{let r=e.name??"";return py({name:r},e.parent,e.providers,r)}}static \u0275prov=ee({token:t,providedIn:"any",factory:()=>Se(Ry)});static __NG_ELEMENT_ID__=-1},un=new X(""),si=(()=>{class t{static __NG_ELEMENT_ID__=NL;static __NG_ENV_ID__=n=>n}return t})(),gy=class extends si{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ca(this._lView)}onDestroy(e){let n=this._lView;return Hy(n,e),()=>L0(n,e)}};function NL(){return new gy(Be())}var Ar=class{_console=console;handleError(e){this._console.error("ERROR",e)}},An=new X("",{providedIn:"root",factory:()=>{let t=B(Tt),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Ar),e.handleError(n))}}}),rS={provide:zo,useValue:()=>void B(Ar),multi:!0};function rE(t){return typeof t=="function"&&t[gn]!==void 0}function gr(t,e){let[n,r,i]=$v(t,e?.equal),o=n,a=o[gn];return o.set=r,o.update=i,o.asReadonly=iS.bind(o),o}function iS(){let t=this[gn];if(t.readonlyFn===void 0){let e=()=>this();e[gn]=t,t.readonlyFn=e}return t.readonlyFn}function iE(t){return rE(t)&&typeof t.set=="function"}var zp=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=OL}return t})();function OL(){return new zp(Be(),Vt())}var Hi=class{},qp=new X("",{providedIn:"root",factory:()=>!1});var oE=new X(""),sE=new X(""),ai=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new on(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new le(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}return t})(),Xc=(()=>{class t{internalPendingTasks=B(ai);scheduler=B(Hi);errorHandler=B(An);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}return t})();function md(...t){}var aE=(()=>{class t{static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new my})}return t})(),my=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function au(t){return{toString:t}.toString()}var Gp="__parameters__";function $L(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function HL(t,e,n){return au(()=>{let r=$L(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return u.annotation=a,u;function u(d,f,m){let y=d.hasOwnProperty(Gp)?d[Gp]:Object.defineProperty(d,Gp,{value:[]})[Gp];for(;y.length<=m;)y.push(null);return(y[m]=y[m]||[]).push(a),d}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Zn=I0(HL("Optional"),8);function zL(t){return typeof t=="function"}var eg=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function LS(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Wi=(()=>{let t=()=>FS;return t.ngInherit=!0,t})();function FS(t){return t.type.prototype.ngOnChanges&&(t.setInput=GL),qL}function qL(){let t=BS(this),e=t?.current;if(e){let n=t.previous;if(n===Ho)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function GL(t,e,n,r,i){let o=this.declaredInputs[r],a=BS(t)||WL(t,{previous:Ho,current:null}),u=a.current||(a.current={}),d=a.previous,f=d[o];u[o]=new eg(f&&f.currentValue,n,d===Ho),LS(t,e,i,n)}var VS="__ngSimpleChanges__";function BS(t){return t[VS]||null}function WL(t,e){return t[VS]=e}var oS=[];var Ye=function(t,e=null,n){for(let r=0;r<oS.length;r++){let i=oS[r];i(t,e,n)}};function KL(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let a=FS(e);(n.preOrderHooks??=[]).push(t,a),(n.preOrderCheckHooks??=[]).push(t,a)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function jS(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:u,ngAfterViewInit:d,ngAfterViewChecked:f,ngOnDestroy:m}=o;a&&(t.contentHooks??=[]).push(-n,a),u&&((t.contentHooks??=[]).push(n,u),(t.contentCheckHooks??=[]).push(n,u)),d&&(t.viewHooks??=[]).push(-n,d),f&&((t.viewHooks??=[]).push(n,f),(t.viewCheckHooks??=[]).push(n,f)),m!=null&&(t.destroyHooks??=[]).push(n,m)}}function Qp(t,e,n){US(t,e,3,n)}function Yp(t,e,n,r){(t[ye]&3)===n&&US(t,e,n,r)}function cE(t,e){let n=t[ye];(n&3)===e&&(n&=16383,n+=1,t[ye]=n)}function US(t,e,n,r){let i=r!==void 0?t[oa]&65535:0,o=r??-1,a=e.length-1,u=0;for(let d=i;d<a;d++)if(typeof e[d+1]=="number"){if(u=e[d],r!=null&&u>=r)break}else e[d]<0&&(t[oa]+=65536),(u<o||o==-1)&&(ZL(t,n,e,d),t[oa]=(t[oa]&4294901760)+d+2),d++}function sS(t,e){Ye(4,t,e);let n=De(null);try{e.call(t)}finally{De(n),Ye(5,t,e)}}function ZL(t,e,n,r){let i=n[r]<0,o=n[r+1],a=i?-n[r]:n[r],u=t[a];i?t[ye]>>14<t[oa]>>16&&(t[ye]&3)===e&&(t[ye]+=16384,sS(u,o)):sS(u,o)}var tu=-1,da=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function QL(t){return(t.flags&8)!==0}function YL(t){return(t.flags&16)!==0}function JL(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],a=n[r++],u=n[r++];t.setAttribute(e,a,u,o)}else{let o=i,a=n[++r];XL(o)?t.setProperty(e,o,a):t.setAttribute(e,o,a),r++}}return r}function $S(t){return t===3||t===4||t===6}function XL(t){return t.charCodeAt(0)===64}function nu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?aS(t,n,i,null,e[++r]):aS(t,n,i,null,null))}}return t}function aS(t,e,n,r,i){let o=0,a=t.length;if(e===-1)a=-1;else for(;o<t.length;){let u=t[o++];if(typeof u=="number"){if(u===e){a=-1;break}else if(u>e){a=o-1;break}}}for(;o<t.length;){let u=t[o];if(typeof u=="number")break;if(u===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}a!==-1&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function HS(t){return t!==tu}function tg(t){return t&32767}function eF(t){return t>>16}function ng(t,e){let n=eF(t),r=e;for(;n>0;)r=r[ra],n--;return r}var vE=!0;function rg(t){let e=vE;return vE=t,e}var tF=256,zS=tF-1,qS=5,nF=0,ci={};function rF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ta)&&(r=n[ta]),r==null&&(r=n[ta]=nF++);let i=r&zS,o=1<<i;e.data[t+(i>>qS)]|=o}function ig(t,e){let n=GS(t,e);if(n!==-1)return n;let r=e[_e];r.firstCreatePass&&(t.injectorIndex=e.length,uE(r.data,t),uE(e,null),uE(r.blueprint,null));let i=FE(t,e),o=t.injectorIndex;if(HS(i)){let a=tg(i),u=ng(i,e),d=u[_e].data;for(let f=0;f<8;f++)e[o+f]=u[a+f]|d[a+f]}return e[o+8]=i,o}function uE(t,e){t.push(0,0,0,0,0,0,0,0,e)}function GS(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function FE(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=YS(i),r===null)return tu;if(n++,i=i[ra],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return tu}function yE(t,e,n){rF(t,e,n)}function iF(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if($S(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function WS(t,e,n){if(n&8||t!==void 0)return t;Pp(e,"NodeInjector")}function KS(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Go],o=Cn(void 0);try{return i?i.get(e,r,n&8):Sy(e,r,n&8)}finally{Cn(o)}}return WS(r,e,n)}function ZS(t,e,n,r=0,i){if(t!==null){if(e[ye]&2048&&!(r&2)){let a=uF(t,e,n,r,ci);if(a!==ci)return a}let o=QS(t,e,n,r,ci);if(o!==ci)return o}return KS(e,n,r,i)}function QS(t,e,n,r,i){let o=aF(n);if(typeof o=="function"){if(!eE(e,t,r))return r&1?WS(i,n,r):KS(e,n,r,i);try{let a;if(a=o(r),a==null&&!(r&8))Pp(n);else return a}finally{tE()}}else if(typeof o=="number"){let a=null,u=GS(t,e),d=tu,f=r&1?e[hr][dr]:null;for((u===-1||r&4)&&(d=u===-1?FE(t,e):e[u+8],d===tu||!uS(r,!1)?u=-1:(a=e[_e],u=tg(d),e=ng(d,e)));u!==-1;){let m=e[_e];if(cS(o,u,m.data)){let y=oF(u,e,n,a,r,f);if(y!==ci)return y}d=e[u+8],d!==tu&&uS(r,e[_e].data[u+8]===f)&&cS(o,u,e)?(a=m,u=tg(d),e=ng(d,e)):u=-1}}return i}function oF(t,e,n,r,i,o){let a=e[_e],u=a.data[t+8],d=r==null?Ko(u)&&vE:r!=a&&(u.type&3)!==0,f=i&1&&o===u,m=sF(u,a,n,d,f);return m!==null?og(e,a,m,u,i):ci}function sF(t,e,n,r,i){let o=t.providerIndexes,a=e.data,u=o&1048575,d=t.directiveStart,f=t.directiveEnd,m=o>>20,y=r?u:u+m,I=i?u+m:f;for(let b=y;b<I;b++){let k=a[b];if(b<d&&n===k||b>=d&&k.type===n)return b}if(i){let b=a[d];if(b&&oi(b)&&b.type===n)return d}return null}function og(t,e,n,r,i){let o=t[n],a=e.data;if(o instanceof da){let u=o;if(u.resolving){let b=v0(a[n]);throw Dy(b)}let d=rg(u.canSeeViewProviders);u.resolving=!0;let f=a[n].type||a[n],m,y=u.injectImpl?Cn(u.injectImpl):null,I=eE(t,r,0);try{o=t[n]=u.factory(void 0,i,a,t,r),e.firstCreatePass&&n>=r.directiveStart&&KL(n,a[n],e)}finally{y!==null&&Cn(y),rg(d),u.resolving=!1,tE()}}return o}function aF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ta)?t[ta]:void 0;return typeof e=="number"?e>=0?e&zS:cF:e}function cS(t,e,n){let r=1<<t;return!!(n[e+(t>>qS)]&r)}function uS(t,e){return!(t&2)&&!(t&1&&e)}var la=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ZS(this._tNode,this._lView,e,Js(r),n)}};function cF(){return new la(Vt(),Be())}function li(t){return au(()=>{let e=t.prototype.constructor,n=e[td]||EE(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[td]||EE(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function EE(t){return yy(t)?()=>{let e=EE(sn(t));return e&&e()}:Uo(t)}function uF(t,e,n,r,i){let o=t,a=e;for(;o!==null&&a!==null&&a[ye]&2048&&!Zc(a);){let u=QS(o,a,n,r|2,ci);if(u!==ci)return u;let d=o.parent;if(!d){let f=a[Fy];if(f){let m=f.get(n,ci,r);if(m!==ci)return m}d=YS(a),a=a[ra]}o=d}return i}function YS(t){let e=t[_e],n=e.type;return n===2?e.declTNode:n===1?t[dr]:null}function Id(t){return iF(Vt(),t)}function lF(){return vg(Vt(),Be())}function vg(t,e){return new Nr(Pr(t,e))}var Nr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=lF}return t})();function JS(t){return(t.flags&128)===128}var VE=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(VE||{}),XS=new Map,dF=0;function hF(){return dF++}function fF(t){XS.set(t[cd],t)}function wE(t){XS.delete(t[cd])}var lS="__ngContext__";function ru(t,e){ii(e)?(t[lS]=e[cd],fF(e)):t[lS]=e}function eA(t){return nA(t[Wc])}function tA(t){return nA(t[lr])}function nA(t){for(;t!==null&&!Mr(t);)t=t[lr];return t}var IE;function BE(t){IE=t}function rA(){if(IE!==void 0)return IE;if(typeof document<"u")return document;throw new Z(210,!1)}var yg=new X("",{providedIn:"root",factory:()=>pF}),pF="ng",Eg=new X(""),ga=new X("",{providedIn:"platform",factory:()=>"unknown"});var wg=new X("",{providedIn:"root",factory:()=>rA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var gF="h",mF="b";var iA=!1,oA=new X("",{providedIn:"root",factory:()=>iA});var _F=(t,e,n,r)=>{};function vF(t,e,n,r){_F(t,e,n,r)}function jE(t){return(t.flags&32)===32}var yF=()=>null;function sA(t,e,n=!1){return yF(t,e,n)}function aA(t,e){let n=t.contentQueries;if(n!==null){let r=De(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a!==-1){let u=t.data[a];Xy(o),u.contentQueries(2,e[a],a)}}}finally{De(r)}}}function bE(t,e,n){Xy(0);let r=De(null);try{e(t,n)}finally{De(r)}}function UE(t,e,n){if(Vy(e)){let r=De(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let a=i;a<o;a++){let u=t.data[a];if(u.contentQueries){let d=n[a];u.contentQueries(1,d,a)}}}finally{De(r)}}}var qi=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(qi||{});var Wp;function EF(){if(Wp===void 0&&(Wp=null,zi.trustedTypes))try{Wp=zi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Wp}function dS(t){return EF()?.createScriptURL(t)||t}var sg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Rp})`}};function Ig(t){return t instanceof sg?t.changingThisBreaksApplicationSecurity:t}function $E(t,e){let n=cA(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Rp})`)}return n===e}function cA(t){return t instanceof sg&&t.getTypeName()||null}var wF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function uA(t){return t=String(t),t.match(wF)?t:"unsafe:"+t}var bg=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(bg||{});function lA(t){let e=hA();return e?e.sanitize(bg.URL,t)||"":$E(t,"URL")?Ig(t):uA(na(t))}function dA(t){let e=hA();if(e)return dS(e.sanitize(bg.RESOURCE_URL,t)||"");if($E(t,"ResourceURL"))return dS(Ig(t));throw new Z(904,!1)}function IF(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?dA:lA}function HE(t,e,n){return IF(e,n)(t)}function hA(){let t=Be();return t&&t[ri].sanitizer}var bF=/^>|^->|<!--|-->|--!>|<!-$/g,TF=/(<|>)/g,CF="\u200B$1\u200B";function DF(t){return t.replace(bF,e=>e.replace(TF,CF))}function fA(t){return t instanceof Function?t():t}function SF(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var pA="ng-template";function AF(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SF(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(zE(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function zE(t){return t.type===4&&t.value!==pA}function RF(t,e,n){let r=t.type===4&&!n?pA:t.value;return e===r}function MF(t,e,n){let r=4,i=t.attrs,o=i!==null?NF(i):0,a=!1;for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="number"){if(!a&&!xr(r)&&!xr(d))return!1;if(a&&xr(d))continue;a=!1,r=d|r&1;continue}if(!a)if(r&4){if(r=2|r&1,d!==""&&!RF(t,d,n)||d===""&&e.length===1){if(xr(r))return!1;a=!0}}else if(r&8){if(i===null||!AF(t,i,d,n)){if(xr(r))return!1;a=!0}}else{let f=e[++u],m=PF(d,i,zE(t),n);if(m===-1){if(xr(r))return!1;a=!0;continue}if(f!==""){let y;if(m>o?y="":y=i[m+1].toLowerCase(),r&2&&f!==y){if(xr(r))return!1;a=!0}}}}return xr(r)||a}function xr(t){return(t&1)===0}function PF(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let a=e[i];if(a===t)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let u=e[++i];for(;typeof u=="string";)u=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return OF(e,t)}function xF(t,e,n=!1){for(let r=0;r<e.length;r++)if(MF(t,e[r],n))return!0;return!1}function NF(t){for(let e=0;e<t.length;e++){let n=t[e];if($S(n))return e}return t.length}function OF(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function hS(t,e){return t?":not("+e.trim()+")":e}function kF(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let a=t[n];if(typeof a=="string")if(r&2){let u=t[++n];i+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!xr(a)&&(e+=hS(o,i),i=""),r=a,o=o||!xr(r);n++}return i!==""&&(e+=hS(o,i)),e}function LF(t){return t.map(kF).join(",")}function FF(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!xr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Or={};function VF(t,e){return t.createText(e)}function BF(t,e,n){t.setValue(e,n)}function jF(t,e){return t.createComment(DF(e))}function gA(t,e,n){return t.createElement(e,n)}function ag(t,e,n,r,i){t.insertBefore(e,n,r,i)}function mA(t,e,n){t.appendChild(e,n)}function fS(t,e,n,r,i){r!==null?ag(t,e,n,r,i):mA(t,e,n)}function UF(t,e,n,r){t.removeChild(null,e,n,r)}function $F(t,e,n){t.setAttribute(e,"style",n)}function HF(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function _A(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&JL(t,e,r),i!==null&&HF(t,e,i),o!==null&&$F(t,e,o)}function qE(t,e,n,r,i,o,a,u,d,f,m){let y=Ft+r,I=y+i,b=zF(y,I),k=typeof f=="function"?f():f;return b[_e]={type:t,blueprint:b,template:n,queries:null,viewQuery:u,declTNode:e,data:b.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:d,consts:k,incompleteFirstPass:!1,ssrId:m}}function zF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Or);return n}function qF(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=qE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function GE(t,e,n,r,i,o,a,u,d,f,m){let y=e.blueprint.slice();return y[Rr]=i,y[ye]=r|4|128|8|64|1024,(f!==null||t&&t[ye]&2048)&&(y[ye]|=2048),Uy(y),y[an]=y[ra]=t,y[mn]=n,y[ri]=a||t&&t[ri],y[ot]=u||t&&t[ot],y[Go]=d||t&&t[Go]||null,y[dr]=o,y[cd]=hF(),y[ad]=m,y[Fy]=f,y[hr]=e.type==2?t[hr]:y,y}function GF(t,e,n){let r=Pr(e,t),i=qF(n),o=t[ri].rendererFactory,a=WE(t,GE(t,i,null,vA(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=a}function vA(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function yA(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function WE(t,e){return t[Wc]?t[Ly][lr]=e:t[Wc]=e,t[Ly]=e,e}function xe(t=1){EA(cn(),Be(),Zo()+t,!1)}function EA(t,e,n,r){if(!r)if((e[ye]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Qp(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Yp(e,o,0,n)}Qo(n)}var Tg=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Tg||{});function TE(t,e,n,r){let i=De(null);try{let[o,a,u]=t.inputs[n],d=null;(a&Tg.SignalBased)!==0&&(d=e[o][gn]),d!==null&&d.transformFn!==void 0?r=d.transformFn(r):u!==null&&(r=u.call(e,r)),t.setInput!==null?t.setInput(e,d,r,n,o):LS(e,d,o,r)}finally{De(i)}}var ui=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(ui||{}),WF;function KE(t,e){return WF(t,e)}var iu=new Set,Cg=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Cg||{}),ma=new X(""),pS=new Set;function Dg(t){pS.has(t)||(pS.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var wA=!1,CE=class extends It{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,M0()&&(this.destroyRef=B(si,{optional:!0})??void 0,this.pendingTasks=B(ai,{optional:!0})??void 0)}emit(e){let n=De(null);try{super.next(e)}finally{De(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),a=r;if(e&&typeof e=="object"){let d=e;i=d.next?.bind(d),o=d.error?.bind(d),a=d.complete?.bind(d)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let u=super.subscribe({next:i,error:o,complete:a});return e instanceof mt&&e.add(u),u}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Dt=CE;function IA(t){let e,n;function r(){t=md;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function gS(t){return queueMicrotask(()=>t()),()=>{t=md}}var ZE="isAngularZone",cg=ZE+"_ID",KF=0,Je=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Dt(!1);onMicrotaskEmpty=new Dt(!1);onStable=new Dt(!1);onError=new Dt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=wA}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=o,YF(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ZE)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,ZF,md,md);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},ZF={};function QE(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function QF(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){IA(()=>{t.callbackScheduled=!1,DE(t),t.isCheckStableRunning=!0,QE(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),DE(t)}function YF(t){let e=()=>{QF(t)},n=KF++;t._inner=t._inner.fork({name:"angular",properties:{[ZE]:!0,[cg]:n,[cg+n]:!0},onInvokeTask:(r,i,o,a,u,d)=>{if(JF(d))return r.invokeTask(o,a,u,d);try{return mS(t),r.invokeTask(o,a,u,d)}finally{(t.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),_S(t)}},onInvoke:(r,i,o,a,u,d,f)=>{try{return mS(t),r.invoke(o,a,u,d,f)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!XF(d)&&e(),_S(t)}},onHasTask:(r,i,o,a)=>{r.hasTask(o,a),i===o&&(a.change=="microTask"?(t._hasPendingMicrotasks=a.microTask,DE(t),QE(t)):a.change=="macroTask"&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,o,a)=>(r.handleError(o,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}function DE(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function mS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _S(t){t._nesting--,QE(t)}var ug=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Dt;onMicrotaskEmpty=new Dt;onStable=new Dt;onError=new Dt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function JF(t){return bA(t,"__ignore_ng_zone__")}function XF(t){return bA(t,"__scheduler_tick__")}function bA(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var YE=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}return t})(),TA=[0,1,2,3],CA=(()=>{class t{ngZone=B(Je);scheduler=B(Hi);errorHandler=B(Ar,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){B(ma,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Ye(16),this.executing=!0;for(let r of TA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Ye(17)}register(n){let{view:r}=n;r!==void 0?((r[aa]??=[]).push(n),Qc(r),r[ye]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Cg.AFTER_NEXT_RENDER,n):n()}static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}return t})(),lg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,a=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[aa];e&&(this.view[aa]=e.filter(n=>n!==this))}};function Sg(t,e){let n=e?.injector??B(Ct);return Dg("NgAfterNextRender"),tV(t,n,e,!0)}function eV(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function tV(t,e,n,r){let i=e.get(YE);i.impl??=e.get(CA);let o=e.get(ma,null,{optional:!0}),a=n?.manualCleanup!==!0?e.get(si):null,u=e.get(zp,null,{optional:!0}),d=new lg(i.impl,eV(t),u?.view,r,a,o?.snapshot(null));return i.impl.register(d),d}var nV=new X("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function DA(t,e,n){let r=t.get(nV);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function rV(t,e){for(let[n,r]of e)DA(t,r.animateFns)}function vS(t,e,n,r){let i=t?.[ld]?.enter;e!==null&&i&&i.has(n.index)&&rV(r,i)}function eu(t,e,n,r,i,o,a,u){if(i!=null){let d,f=!1;Mr(i)?d=i:ii(i)&&(f=!0,i=i[Rr]);let m=fr(i);t===0&&r!==null?(vS(u,r,o,n),a==null?mA(e,r,m):ag(e,r,m,a||null,!0)):t===1&&r!==null?(vS(u,r,o,n),ag(e,r,m,a||null,!0)):t===2?yS(u,o,n,y=>{UF(e,m,f,y)}):t===3&&yS(u,o,n,()=>{e.destroyNode(m)}),d!=null&&mV(e,t,n,d,o,r,a)}}function iV(t,e){SA(t,e),e[Rr]=null,e[dr]=null}function oV(t,e,n,r,i,o){r[Rr]=i,r[dr]=e,Ag(t,r,n,1,i,o)}function SA(t,e){e[ri].changeDetectionScheduler?.notify(9),Ag(t,e,e[ot],2,null,null)}function sV(t){let e=t[Wc];if(!e)return lE(t[_e],t);for(;e;){let n=null;if(ii(e))n=e[Wc];else{let r=e[Ln];r&&(n=r)}if(!n){for(;e&&!e[lr]&&e!==t;)ii(e)&&lE(e[_e],e),e=e[an];e===null&&(e=t),ii(e)&&lE(e[_e],e),n=e&&e[lr]}e=n}}function JE(t,e){let n=t[hd],r=n.indexOf(e);n.splice(r,1)}function AA(t,e){if(ca(e))return;let n=e[ot];n.destroyNode&&Ag(t,e,n,3,null,null),sV(e)}function lE(t,e){if(ca(e))return;let n=De(null);try{e[ye]&=-129,e[ye]|=256,e[Kn]&&Zl(e[Kn]),uV(t,e),cV(t,e),e[_e].type===1&&e[ot].destroy();let r=e[ia];if(r!==null&&Mr(e[an])){r!==e[an]&&JE(r,e);let i=e[sa];i!==null&&i.detachView(t)}wE(e)}finally{De(n)}}function yS(t,e,n,r){let i=t?.[ld];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&iu.add(t),DA(n,()=>{if(i.leave&&i.leave.has(e.index)){let a=i.leave.get(e.index),u=[];if(a){for(let d=0;d<a.animateFns.length;d++){let f=a.animateFns[d],{promise:m}=f();u.push(m)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(u),aV(t,r)}else t&&iu.delete(t),r(!1)},i)}function aV(t,e){let n=t[ld]?.running;if(n){n.then(()=>{t[ld].running=void 0,iu.delete(t),e(!0)});return}e(!1)}function cV(t,e){let n=t.cleanup,r=e[Gc];if(n!==null)for(let a=0;a<n.length-1;a+=2)if(typeof n[a]=="string"){let u=n[a+3];u>=0?r[u]():r[-u].unsubscribe(),a+=2}else{let u=r[n[a+1]];n[a].call(u)}r!==null&&(e[Gc]=null);let i=e[Ui];if(i!==null){e[Ui]=null;for(let a=0;a<i.length;a++){let u=i[a];u()}}let o=e[ud];if(o!==null){e[ud]=null;for(let a of o)a.destroy()}}function uV(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof da)){let o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let u=i[o[a]],d=o[a+1];Ye(4,u,d);try{d.call(u)}finally{Ye(5,u,d)}}else{Ye(4,i,o);try{o.call(i)}finally{Ye(5,i,o)}}}}}function lV(t,e,n){return dV(t,e.parent,n)}function dV(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Rr];if(Ko(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===qi.None||i===qi.Emulated)return null}return Pr(r,n)}function hV(t,e,n){return pV(t,e,n)}function fV(t,e,n){return t.type&40?Pr(t,n):null}var pV=fV,ES;function XE(t,e,n,r){let i=lV(t,r,e),o=e[ot],a=r.parent||e[dr],u=hV(a,r,e);if(i!=null)if(Array.isArray(n))for(let d=0;d<n.length;d++)fS(o,i,n[d],u,!1);else fS(o,i,n,u,!1);ES!==void 0&&ES(o,r,e,n,i)}function _d(t,e){if(e!==null){let n=e.type;if(n&3)return Pr(e,t);if(n&4)return SE(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return _d(t,r);{let i=t[e.index];return Mr(i)?SE(-1,i):fr(i)}}else{if(n&128)return _d(t,e.next);if(n&32)return KE(e,t)()||fr(t[e.index]);{let r=RA(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$o(t[hr]);return _d(i,r)}else return _d(t,e.next)}}}return null}function RA(t,e){if(e!==null){let r=t[hr][dr],i=e.projection;return r.projection[i]}return null}function SE(t,e){let n=Ln+t+1;if(n<e.length){let r=e[n],i=r[_e].firstChild;if(i!==null)return _d(r,i)}return e[Wo]}function ew(t,e,n,r,i,o,a){for(;n!=null;){let u=r[Go];if(n.type===128){n=n.next;continue}let d=r[n.index],f=n.type;if(a&&e===0&&(d&&ru(fr(d),r),n.flags|=2),!jE(n))if(f&8)ew(t,e,n.child,r,i,o,!1),eu(e,t,u,i,d,n,o,r);else if(f&32){let m=KE(n,r),y;for(;y=m();)eu(e,t,u,i,y,n,o,r);eu(e,t,u,i,d,n,o,r)}else f&16?gV(t,e,r,n,i,o):eu(e,t,u,i,d,n,o,r);n=a?n.projectionNext:n.next}}function Ag(t,e,n,r,i,o){ew(n,r,t.firstChild,e,i,o,!1)}function gV(t,e,n,r,i,o){let a=n[hr],d=a[dr].projection[r.projection];if(Array.isArray(d))for(let f=0;f<d.length;f++){let m=d[f];eu(e,t,n[Go],i,m,r,o,n)}else{let f=d,m=a[an];JS(r)&&(f.flags|=128),ew(t,e,f,m,i,o,!0)}}function mV(t,e,n,r,i,o,a){let u=r[Wo],d=fr(r);u!==d&&eu(e,t,n,o,u,i,a);for(let f=Ln;f<r.length;f++){let m=r[f];Ag(m[_e],m,t,e,o,u)}}function _V(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:ui.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ui.Important),t.setStyle(n,r,i,o))}}function MA(t,e,n,r,i){let o=Zo(),a=r&2;try{Qo(-1),a&&e.length>Ft&&EA(t,e,Ft,!1),Ye(a?2:0,i,n),n(r,i)}finally{Qo(o),Ye(a?3:1,i,n)}}function Rg(t,e,n){bV(t,e,n),(n.flags&64)===64&&TV(t,e,n)}function Mg(t,e,n=Pr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],u=a===-1?n(e,t):t[a];t[i++]=u}}}function vV(t,e,n,r){let o=r.get(oA,iA)||n===qi.ShadowDom,a=t.selectRootElement(e,o);return yV(a),a}function yV(t){EV(t)}var EV=()=>null;function wV(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function PA(t,e,n,r,i,o){let a=e[_e];if(iw(t,a,e,n,r)){Ko(t)&&IV(e,t.index);return}t.type&3&&(n=wV(n)),xA(t,e,n,r,i,o)}function xA(t,e,n,r,i,o){if(t.type&3){let a=Pr(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(a,n,r)}else t.type&12}function IV(t,e){let n=pr(e,t);n[ye]&16||(n[ye]|=64)}function bV(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Ko(n)&&GF(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||ig(n,e);let o=n.initialInputs;for(let a=r;a<i;a++){let u=t.data[a],d=og(e,t,a,n);if(ru(d,e),o!==null&&AV(e,a-r,d,u,n,o),oi(u)){let f=pr(n.index,e);f[mn]=og(e,t,a,n)}}}function TV(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,a=Z0();try{Qo(o);for(let u=r;u<i;u++){let d=t.data[u],f=e[u];jp(u),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&CV(d,f)}}finally{Qo(-1),jp(a)}}function CV(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function tw(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];xF(e,o.selectors,!1)&&(r??=[],oi(o)?r.unshift(o):r.push(o))}return r}function DV(t,e,n,r,i,o){let a=Pr(t,e);SV(e[ot],a,o,t.value,n,r,i)}function SV(t,e,n,r,i,o,a){if(o==null)t.removeAttribute(e,i,n);else{let u=a==null?na(o):a(o,r||"",i);t.setAttribute(e,i,u,n)}}function AV(t,e,n,r,i,o){let a=o[e];if(a!==null)for(let u=0;u<a.length;u+=2){let d=a[u],f=a[u+1];TE(r,n,d,f)}}function nw(t,e,n,r,i){let o=Ft+n,a=e[_e],u=i(a,e,t,r,n);e[o]=u,Yc(t,!0);let d=t.type===2;return d?(_A(e[ot],u,t),(B0()===0||Kc(t))&&ru(u,e),j0()):ru(u,e),Hp()&&(!d||!jE(t))&&XE(a,e,u,t),t}function rw(t){let e=t;return Ky()?H0():(e=e.parent,Yc(e,!1)),e}function RV(t,e){let n=t[Go];if(!n)return;let r;try{r=n.get(An,null)}catch{r=null}r?.(e)}function iw(t,e,n,r,i){let o=t.inputs?.[r],a=t.hostDirectiveInputs?.[r],u=!1;if(a)for(let d=0;d<a.length;d+=2){let f=a[d],m=a[d+1],y=e.data[f];TE(y,n[f],m,i),u=!0}if(o)for(let d of o){let f=n[d],m=e.data[d];TE(m,f,r,i),u=!0}return u}function MV(t,e){let n=pr(e,t),r=n[_e];PV(r,n);let i=n[Rr];i!==null&&n[ad]===null&&(n[ad]=sA(i,n[Go])),Ye(18),ow(r,n,n[mn]),Ye(19,n[mn])}function PV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ow(t,e,n){Up(e);try{let r=t.viewQuery;r!==null&&bE(1,r,n);let i=t.template;i!==null&&MA(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[sa]?.finishViewCreation(t),t.staticContentQueries&&aA(t,e),t.staticViewQueries&&bE(2,t.viewQuery,n);let o=t.components;o!==null&&xV(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ye]&=-5,$p()}}function xV(t,e){for(let n=0;n<e.length;n++)MV(t,e[n])}function NV(t,e,n,r){let i=De(null);try{let o=e.tView,u=t[ye]&4096?4096:16,d=GE(t,o,n,u,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),f=t[e.index];d[ia]=f;let m=t[sa];return m!==null&&(d[sa]=m.createEmbeddedView(o)),ow(o,d,n),d}finally{De(i)}}function wS(t,e){return!e||e.firstChild===null||JS(t)}function yd(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(fr(o)),Mr(o)&&NA(o,r);let a=n.type;if(a&8)yd(t,e,n.child,r);else if(a&32){let u=KE(n,e),d;for(;d=u();)r.push(d)}else if(a&16){let u=RA(e,n);if(Array.isArray(u))r.push(...u);else{let d=$o(e[hr]);yd(d[_e],d,u,r,!0)}}n=i?n.projectionNext:n.next}return r}function NA(t,e){for(let n=Ln;n<t.length;n++){let r=t[n],i=r[_e].firstChild;i!==null&&yd(r[_e],r,i,e)}t[Wo]!==t[Rr]&&e.push(t[Wo])}function OA(t){if(t[aa]!==null){for(let e of t[aa])e.impl.addSequence(e);t[aa].length=0}}var kA=[];function OV(t){return t[Kn]??kV(t)}function kV(t){let e=kA.pop()??Object.create(FV);return e.lView=t,e}function LV(t){t.lView[Kn]!==t&&(t.lView=null,kA.push(t))}var FV=be(G({},bc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Qc(t.lView)},consumerOnSignalRead(){this.lView[Kn]=this}});function VV(t){let e=t[Kn]??Object.create(BV);return e.lView=t,e}var BV=be(G({},bc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=$o(t.lView);for(;e&&!LA(e[_e]);)e=$o(e);e&&$y(e)},consumerOnSignalRead(){this.lView[Kn]=this}});function LA(t){return t.type!==2}function FA(t){if(t[ud]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[ud])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ye]&8192)}}var jV=100;function VA(t,e=0){let r=t[ri].rendererFactory,i=!1;i||r.begin?.();try{UV(t,e)}finally{i||r.end?.()}}function UV(t,e){let n=Zy();try{Qy(!0),AE(t,e);let r=0;for(;fd(t);){if(r===jV)throw new Z(103,!1);r++,AE(t,1)}}finally{Qy(n)}}function $V(t,e,n,r){if(ca(e))return;let i=e[ye],o=!1,a=!1;Up(e);let u=!0,d=null,f=null;o||(LA(t)?(f=OV(e),d=Cc(f)):Wf()===null?(u=!1,f=VV(e),d=Cc(f)):e[Kn]&&(Zl(e[Kn]),e[Kn]=null));try{Uy(e),G0(t.bindingStartIndex),n!==null&&MA(t,e,n,2,r);let m=(i&3)===3;if(!o)if(m){let b=t.preOrderCheckHooks;b!==null&&Qp(e,b,null)}else{let b=t.preOrderHooks;b!==null&&Yp(e,b,0,null),cE(e,0)}if(a||HV(e),FA(e),BA(e,0),t.contentQueries!==null&&aA(t,e),!o)if(m){let b=t.contentCheckHooks;b!==null&&Qp(e,b)}else{let b=t.contentHooks;b!==null&&Yp(e,b,1),cE(e,1)}qV(t,e);let y=t.components;y!==null&&UA(e,y,0);let I=t.viewQuery;if(I!==null&&bE(2,I,r),!o)if(m){let b=t.viewCheckHooks;b!==null&&Qp(e,b)}else{let b=t.viewHooks;b!==null&&Yp(e,b,2),cE(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Op]){for(let b of e[Op])b();e[Op]=null}o||(OA(e),e[ye]&=-73)}catch(m){throw o||Qc(e),m}finally{f!==null&&(Wl(f,d),u&&LV(f)),$p()}}function BA(t,e){for(let n=eA(t);n!==null;n=tA(n))for(let r=Ln;r<n.length;r++){let i=n[r];jA(i,e)}}function HV(t){for(let e=eA(t);e!==null;e=tA(e)){if(!(e[ye]&2))continue;let n=e[hd];for(let r=0;r<n.length;r++){let i=n[r];$y(i)}}}function zV(t,e,n){Ye(18);let r=pr(e,t);jA(r,n),Ye(19,r[mn])}function jA(t,e){Fp(t)&&AE(t,e)}function AE(t,e){let r=t[_e],i=t[ye],o=t[Kn],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(o?.dirty&&Kl(o)),a||=!1,o&&(o.dirty=!1),t[ye]&=-9217,a)$V(r,t,r.template,t[mn]);else if(i&8192){let u=De(null);try{FA(t),BA(t,1);let d=r.components;d!==null&&UA(t,d,1),OA(t)}finally{De(u)}}}function UA(t,e,n){for(let r=0;r<e.length;r++)zV(t,e[r],n)}function qV(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Qo(~i);else{let o=i,a=n[++r],u=n[++r];K0(a,o);let d=e[o];Ye(24,d),u(2,d),Ye(25,d)}}}finally{Qo(-1)}}function sw(t,e){let n=Zy()?64:1088;for(t[ri].changeDetectionScheduler?.notify(e);t;){t[ye]|=n;let r=$o(t);if(Zc(t)&&!r)return t;t=r}return null}function $A(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function GV(t,e,n,r=!0){let i=e[_e];if(WV(i,e,t,n),r){let a=SE(n,t),u=e[ot],d=u.parentNode(t[Wo]);d!==null&&oV(i,t[dr],u,e,d,a)}let o=e[ad];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function RE(t,e){if(t.length<=Ln)return;let n=Ln+e,r=t[n];if(r){let i=r[ia];i!==null&&i!==t&&JE(i,r),e>0&&(t[n-1][lr]=r[lr]);let o=id(t,Ln+e);iV(r[_e],r);let a=o[sa];a!==null&&a.detachView(o[_e]),r[an]=null,r[lr]=null,r[ye]&=-129}return r}function WV(t,e,n,r){let i=Ln+r,o=n.length;r>0&&(n[i-1][lr]=e),r<o-Ln?(e[lr]=n[i],Ay(n,Ln+r,e)):(n.push(e),e[lr]=null),e[an]=n;let a=e[ia];a!==null&&n!==a&&HA(a,e);let u=e[sa];u!==null&&u.insertView(t),Vp(e),e[ye]|=128}function HA(t,e){let n=t[hd],r=e[an];if(ii(r))t[ye]|=2;else{let i=r[an][hr];e[hr]!==i&&(t[ye]|=2)}n===null?t[hd]=[e]:n.push(e)}var Yo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[_e];return yd(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[mn]}set context(e){this._lView[mn]=e}get destroyed(){return ca(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[an];if(Mr(e)){let n=e[dd],r=n?n.indexOf(this):-1;r>-1&&(RE(e,r),id(n,r))}this._attachedToViewContainer=!1}AA(this._lView[_e],this._lView)}onDestroy(e){Hy(this._lView,e)}markForCheck(){sw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ye]&=-129}reattach(){Vp(this._lView),this._lView[ye]|=128}detectChanges(){this._lView[ye]|=1024,VA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Zc(this._lView),n=this._lView[ia];n!==null&&!e&&JE(n,this._lView),SA(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let n=Zc(this._lView),r=this._lView[ia];r!==null&&!n&&HA(r,this._lView),Vp(this._lView)}};var bd=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=KV;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=NV(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Yo(o)}}return t})();function KV(){return zA(Vt(),Be())}function zA(t,e){return t.type&4?new bd(e,t,vg(t,e)):null}function Pg(t,e,n,r,i){let o=t.data[e];if(o===null)o=ZV(t,e,n,r,i),W0()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let a=$0();o.injectorIndex=a===null?-1:a.injectorIndex}return Yc(o,!0),o}function ZV(t,e,n,r,i){let o=Wy(),a=Ky(),u=a?o:o&&o.parent,d=t.data[e]=YV(t,u,n,e,r,i);return QV(t,d,o,a),d}function QV(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function YV(t,e,n,r,i,o){let a=e?e.injectorIndex:-1,u=0;return U0()&&(u|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:u,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var KQ=new RegExp(`^(\\d+)*(${mF}|${gF})*(.*)`);var JV=()=>null;function IS(t,e){return JV(t,e)}var qA=class{},xg=class{},ME=class{resolveComponentFactory(e){throw new Z(917,!1)}},Td=class{static NULL=new ME},ha=class{},di=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>XV()}return t})();function XV(){let t=Be(),e=Vt(),n=pr(e.index,t);return(ii(n)?n:t)[ot]}var GA=(()=>{class t{static \u0275prov=ee({token:t,providedIn:"root",factory:()=>null})}return t})();var Jp={},PE=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Jp,r);return i!==Jp||n===Jp?i:this.parentInjector.get(e,n,r)}};function dg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number")o=u;else if(o==1)i=vy(i,u);else if(o==2){let d=u,f=e[++a];r=vy(r,d+": "+f+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function fe(t,e=0){let n=Be();if(n===null)return Se(t,e);let r=Vt();return ZS(r,n,sn(t),e)}function WA(t,e,n,r,i){let o=r===null?null:{"":-1},a=i(t,n);if(a!==null){let u=a,d=null,f=null;for(let m of a)if(m.resolveHostDirectives!==null){[u,d,f]=m.resolveHostDirectives(a);break}n2(t,e,n,u,o,d,f)}o!==null&&r!==null&&e2(n,r,o)}function e2(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new Z(-301,!1);r.push(e[i],o)}}function t2(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function n2(t,e,n,r,i,o,a){let u=r.length,d=!1;for(let I=0;I<u;I++){let b=r[I];!d&&oi(b)&&(d=!0,t2(t,n,I)),yE(ig(n,e),t,b.type)}c2(n,t.data.length,u);for(let I=0;I<u;I++){let b=r[I];b.providersResolver&&b.providersResolver(b)}let f=!1,m=!1,y=yA(t,e,u,null);u>0&&(n.directiveToIndex=new Map);for(let I=0;I<u;I++){let b=r[I];if(n.mergedAttrs=nu(n.mergedAttrs,b.hostAttrs),i2(t,n,e,y,b),a2(y,b,i),a!==null&&a.has(b)){let[U,j]=a.get(b);n.directiveToIndex.set(b.type,[y,U+n.directiveStart,j+n.directiveStart])}else(o===null||!o.has(b))&&n.directiveToIndex.set(b.type,y);b.contentQueries!==null&&(n.flags|=4),(b.hostBindings!==null||b.hostAttrs!==null||b.hostVars!==0)&&(n.flags|=64);let k=b.type.prototype;!f&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),f=!0),!m&&(k.ngOnChanges||k.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),m=!0),y++}r2(t,n,o)}function r2(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))bS(0,e,i,r),bS(1,e,i,r),CS(e,r,!1);else{let o=n.get(i);TS(0,e,o,r),TS(1,e,o,r),CS(e,r,!0)}}}function bS(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a;t===0?a=e.inputs??={}:a=e.outputs??={},a[o]??=[],a[o].push(r),KA(e,o)}}function TS(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a=i[o],u;t===0?u=e.hostDirectiveInputs??={}:u=e.hostDirectiveOutputs??={},u[a]??=[],u[a].push(r,o),KA(e,a)}}function KA(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function CS(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||zE(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let a=null,u=0;for(;u<r.length;){let d=r[u];if(d===0){u+=4;continue}else if(d===5){u+=2;continue}else if(typeof d=="number")break;if(!n&&i.hasOwnProperty(d)){let f=i[d];for(let m of f)if(m===e){a??=[],a.push(d,r[u+1]);break}}else if(n&&o.hasOwnProperty(d)){let f=o[d];for(let m=0;m<f.length;m+=2)if(f[m]===e){a??=[],a.push(f[m+1],r[u+1]);break}}u+=2}t.initialInputs??=[],t.initialInputs.push(a)}function i2(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Uo(i.type,!0)),a=new da(o,oi(i),fe,null);t.blueprint[r]=a,n[r]=a,o2(t,e,r,yA(t,n,i.hostVars,Or),i)}function o2(t,e,n,r,i){let o=i.hostBindings;if(o){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let u=~e.index;s2(a)!=u&&a.push(u),a.push(n,r,o)}}function s2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function a2(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;oi(e)&&(n[""]=t)}}function c2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function aw(t,e,n,r,i,o,a,u){let d=e[_e],f=d.consts,m=ua(f,a),y=Pg(d,t,n,r,m);return o&&WA(d,e,y,ua(f,u),i),y.mergedAttrs=nu(y.mergedAttrs,y.attrs),y.attrs!==null&&dg(y,y.attrs,!1),y.mergedAttrs!==null&&dg(y,y.mergedAttrs,!0),d.queries!==null&&d.queries.elementStart(d,y),y}function cw(t,e){jS(t,e),Vy(e)&&t.queries.elementEnd(e)}function u2(t,e,n,r,i,o){let a=e.consts,u=ua(a,i),d=Pg(e,t,n,r,u);if(d.mergedAttrs=nu(d.mergedAttrs,d.attrs),o!=null){let f=ua(a,o);d.localNames=[];for(let m=0;m<f.length;m+=2)d.localNames.push(f[m],-1)}return d.attrs!==null&&dg(d,d.attrs,!1),d.mergedAttrs!==null&&dg(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function uw(t){return QA(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function ZA(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function QA(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function YA(t,e,n){return t[e]=n}function Gi(t,e,n){if(n===Or)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function JA(t,e,n,r){let i=Gi(t,e,n);return Gi(t,e+1,r)||i}function Xp(t,e,n){return function r(i){let o=Ko(t)?pr(t.index,e):e;sw(o,5);let a=e[mn],u=DS(e,a,n,i),d=r.__ngNextListenerFn__;for(;d;)u=DS(e,a,d,i)&&u,d=d.__ngNextListenerFn__;return u}}function DS(t,e,n,r){let i=De(null);try{return Ye(6,e,n),n(r)!==!1}catch(o){return RV(t,o),!1}finally{Ye(7,e,n),De(i)}}function XA(t,e,n,r,i,o,a,u){let d=Kc(t),f=!1,m=null;if(!r&&d&&(m=d2(e,n,o,t.index)),m!==null){let y=m.__ngLastListenerFn__||m;y.__ngNextListenerFn__=a,m.__ngLastListenerFn__=a,f=!0}else{let y=Pr(t,n),I=r?r(y):y;vF(n,I,o,u);let b=i.listen(I,o,u);if(!l2(o)){let k=r?U=>r(fr(U[t.index])):t.index;eR(k,e,n,o,u,b,!1)}}return f}function l2(t){return t.startsWith("animation")||t.startsWith("transition")}function d2(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===n&&i[o+1]===r){let u=e[Gc],d=i[o+2];return u&&u.length>d?u[d]:null}typeof a=="string"&&(o+=2)}return null}function eR(t,e,n,r,i,o,a){let u=e.firstCreatePass?V0(e):null,d=F0(n),f=d.length;d.push(i,o),u&&u.push(r,t,f,(f+1)*(a?-1:1))}function SS(t,e,n,r,i,o){let a=e[n],u=e[_e],f=u.data[n].outputs[r],y=a[f].subscribe(o);eR(t.index,u,e,i,o,y,!0)}var xE=Symbol("BINDING");var hg=class extends Td{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=qo(e);return new ou(n,this.ngModule)}};function h2(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Tg.SignalBased)!==0};return i&&(o.transform=i),o})}function f2(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function p2(t,e,n){let r=e instanceof Tt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new PE(n,r):n}function g2(t){let e=t.get(ha,null);if(e===null)throw new Z(407,!1);let n=t.get(GA,null),r=t.get(Hi,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function m2(t,e){let n=tR(t);return gA(e,n,n==="svg"?x0:n==="math"?N0:null)}function tR(t){return(t.selectors[0][0]||"div").toLowerCase()}var ou=class extends xg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=h2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=f2(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=LF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,a){Ye(22);let u=De(null);try{let d=this.componentDef,f=_2(r,d,a,o),m=p2(d,i||this.ngModule,e),y=g2(m),I=y.rendererFactory.createRenderer(null,d),b=r?vV(I,r,d.encapsulation,m):m2(d,I),k=a?.some(AS)||o?.some(q=>typeof q!="function"&&q.bindings.some(AS)),U=GE(null,f,null,512|vA(d),null,null,y,I,m,null,sA(b,m,!0));U[Ft]=b,Up(U);let j=null;try{let q=aw(Ft,U,2,"#host",()=>f.directiveRegistry,!0,0);_A(I,b,q),ru(b,U),Rg(f,U,q),UE(f,q,U),cw(f,q),n!==void 0&&y2(q,this.ngContentSelectors,n),j=pr(q.index,U),U[mn]=j[mn],ow(f,U,null)}catch(q){throw j!==null&&wE(j),wE(U),q}finally{Ye(23),$p()}return new fg(this.componentType,U,!!k)}finally{De(u)}}};function _2(t,e,n,r){let i=t?["ng-version","20.3.14"]:FF(e.selectors[0]),o=null,a=null,u=0;if(n)for(let m of n)u+=m[xE].requiredVars,m.create&&(m.targetIdx=0,(o??=[]).push(m)),m.update&&(m.targetIdx=0,(a??=[]).push(m));if(r)for(let m=0;m<r.length;m++){let y=r[m];if(typeof y!="function")for(let I of y.bindings){u+=I[xE].requiredVars;let b=m+1;I.create&&(I.targetIdx=b,(o??=[]).push(I)),I.update&&(I.targetIdx=b,(a??=[]).push(I))}}let d=[e];if(r)for(let m of r){let y=typeof m=="function"?m:m.type,I=xy(y);d.push(I)}return qE(0,null,v2(o,a),1,u,d,null,null,null,[i],null)}function v2(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function AS(t){let e=t[xE].kind;return e==="input"||e==="twoWay"}var fg=class extends qA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=kp(n[_e],Ft),this.location=vg(this._tNode,n),this.instance=pr(this._tNode.index,n)[mn],this.hostView=this.changeDetectorRef=new Yo(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=iw(r,i[_e],i,e,n);this.previousInputValues.set(e,n);let a=pr(r.index,i);sw(a,1)}get injector(){return new la(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function y2(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var _a=(()=>{class t{static __NG_ELEMENT_ID__=E2}return t})();function E2(){let t=Vt();return I2(t,Be())}var w2=_a,nR=class extends w2{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return vg(this._hostTNode,this._hostLView)}get injector(){return new la(this._hostTNode,this._hostLView)}get parentInjector(){let e=FE(this._hostTNode,this._hostLView);if(HS(e)){let n=ng(e,this._hostLView),r=tg(e),i=n[_e].data[r+8];return new la(i,n)}else return new la(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=RS(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ln}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=IS(this._lContainer,e.ssrId),u=e.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(u,i,wS(this._hostTNode,a)),u}createComponent(e,n,r,i,o,a,u){let d=e&&!zL(e),f;if(d)f=n;else{let j=n||{};f=j.index,r=j.injector,i=j.projectableNodes,o=j.environmentInjector||j.ngModuleRef,a=j.directives,u=j.bindings}let m=d?e:new ou(qo(e)),y=r||this.parentInjector;if(!o&&m.ngModule==null){let q=(d?y:this.parentInjector).get(Tt,null);q&&(o=q)}let I=qo(m.componentType??{}),b=IS(this._lContainer,I?.id??null),k=b?.firstChild??null,U=m.create(y,i,k,o,a,u);return this.insertImpl(U.hostView,f,wS(this._hostTNode,b)),U}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(O0(i)){let u=this.indexOf(e);if(u!==-1)this.detach(u);else{let d=i[an],f=new nR(d,d[dr],d[an]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(n),a=this._lContainer;return GV(a,i,o,r),e.attachToViewContainerRef(),Ay(dE(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=RS(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=RE(this._lContainer,n);r&&(id(dE(this._lContainer),n),AA(r[_e],r))}detach(e){let n=this._adjustIndex(e,-1),r=RE(this._lContainer,n);return r&&id(dE(this._lContainer),n)!=null?new Yo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function RS(t){return t[dd]}function dE(t){return t[dd]||(t[dd]=[])}function I2(t,e){let n,r=e[t.index];return Mr(r)?n=r:(n=$A(r,e,null,t),e[t.index]=n,WE(e,n)),T2(n,e,t,r),new nR(n,t,e)}function b2(t,e){let n=t[ot],r=n.createComment(""),i=Pr(e,t),o=n.parentNode(i);return ag(n,o,r,n.nextSibling(i),!1),r}var T2=S2,C2=()=>!1;function D2(t,e,n){return C2(t,e,n)}function S2(t,e,n,r){if(t[Wo])return;let i;n.type&8?i=fr(r):i=b2(e,n),t[Wo]=i}var fa=class{},Ng=class{};var pg=class extends fa{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new hg(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Py(e);this._bootstrapComponents=fA(o.bootstrap),this._r3Injector=nE(e,n,[{provide:fa,useValue:this},{provide:Td,useValue:this.componentFactoryResolver},...r],$i(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gg=class extends Ng{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new pg(this.moduleType,e,[])}};var Ed=class extends fa{injector;componentFactoryResolver=new hg(this);instance=null;constructor(e){super();let n=new ea([...e.providers,{provide:fa,useValue:this},{provide:Td,useValue:this.componentFactoryResolver}],e.parent||sd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Cd(t,e,n=null){return new Ed({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var A2=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Ny(!1,n.type),i=r.length>0?Cd([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:t,providedIn:"environment",factory:()=>new t(Se(Tt))})}return t})();function Bt(t){return au(()=>{let e=rR(t),n=be(G({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===VE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(A2).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||qi.Emulated,styles:t.styles||Wn,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Dg("NgStandalone"),iR(n);let r=t.dependencies;return n.directiveDefs=MS(r,R2),n.pipeDefs=MS(r,C0),n.id=x2(n),n})}function R2(t){return qo(t)||xy(t)}function Ki(t){return au(()=>({type:t.type,bootstrap:t.bootstrap||Wn,declarations:t.declarations||Wn,imports:t.imports||Wn,exports:t.exports||Wn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function M2(t,e){if(t==null)return Ho;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,a,u,d;Array.isArray(i)?(u=i[0],o=i[1],a=i[2]??o,d=i[3]||null):(o=i,a=i,u=Tg.None,d=null),n[o]=[r,u,d],e[o]=a}return n}function P2(t){if(t==null)return Ho;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function st(t){return au(()=>{let e=rR(t);return iR(e),e})}function Dd(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function rR(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Ho,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Wn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:M2(t.inputs,e),outputs:P2(t.outputs),debugInfo:null}}function iR(t){t.features?.forEach(e=>e(t))}function MS(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function x2(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function N2(t){return Object.getPrototypeOf(t.prototype).constructor}function Qn(t){let e=N2(t.type),n=!0,r=[t];for(;e;){let i;if(oi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let a=t;a.inputs=hE(t.inputs),a.declaredInputs=hE(t.declaredInputs),a.outputs=hE(t.outputs);let u=i.hostBindings;u&&V2(t,u);let d=i.viewQuery,f=i.contentQueries;if(d&&L2(t,d),f&&F2(t,f),O2(t,i),_0(t.outputs,i.outputs),oi(i)&&i.data.animation){let m=t.data;m.animation=(m.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let u=o[a];u&&u.ngInherit&&u(t),u===Qn&&(n=!1)}}e=Object.getPrototypeOf(e)}k2(r)}function O2(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function k2(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=nu(i.hostAttrs,n=nu(n,i.hostAttrs))}}function hE(t){return t===Ho?{}:t===Wn?[]:t}function L2(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function F2(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function V2(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function B2(t,e,n,r,i,o,a,u){if(n.firstCreatePass){t.mergedAttrs=nu(t.mergedAttrs,t.attrs);let m=t.tView=qE(2,t,i,o,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),m.queries=n.queries.embeddedTView(t))}u&&(t.flags|=u),Yc(t,!1);let d=U2(n,e,t,r);Hp()&&XE(n,e,d,t),ru(d,e);let f=$A(d,e,d,t);e[r+Ft]=f,WE(e,f),D2(f,t,e)}function j2(t,e,n,r,i,o,a,u,d,f,m){let y=n+Ft,I;return e.firstCreatePass?(I=Pg(e,y,4,a||null,u||null),Bp()&&WA(e,t,I,ua(e.consts,f),tw),jS(e,I)):I=e.data[y],B2(I,t,e,n,r,i,o,d),Kc(I)&&Rg(e,t,I),f!=null&&Mg(t,I,m),I}function jt(t,e,n,r,i,o,a,u){let d=Be(),f=cn(),m=ua(f.consts,o);return j2(d,f,t,e,n,r,i,m,void 0,a,u),jt}var U2=$2;function $2(t,e,n,r){return gd(!0),e[ot].createComment("")}var lw=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var dw=new X("");function Zi(t){return!!t&&typeof t.then=="function"}function Og(t){return!!t&&typeof t.subscribe=="function"}var oR=new X("");var hw=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=B(oR,{optional:!0})??[];injector=B(Ct);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Lt(this.injector,i);if(Zi(o))n.push(o);else if(Og(o)){let a=new Promise((u,d)=>{o.subscribe({complete:u,error:d})});n.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kg=new X("");function sR(){Uv(()=>{let t="";throw new Z(600,t)})}function aR(t){return t.isBoundToModule}var H2=10;var Qi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=B(An);afterRenderManager=B(YE);zonelessEnabled=B(qp);rootEffectScheduler=B(aE);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new It;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=B(ai);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(he(n=>!n))}constructor(){B(ma,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=B(Tt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ct.NULL){return this._injector.get(Je).run(()=>{Ye(10);let a=n instanceof xg;if(!this._injector.get(hw).done){let k="";throw new Z(405,k)}let d;a?d=n:d=this._injector.get(Td).resolveComponentFactory(n),this.componentTypes.push(d.componentType);let f=aR(d)?void 0:this._injector.get(fa),m=r||d.selector,y=d.create(i,[],m,f),I=y.location.nativeElement,b=y.injector.get(dw,null);return b?.registerApplication(I),y.onDestroy(()=>{this.detachView(y.hostView),vd(this.components,y),b?.unregisterApplication(I)}),this._loadComponent(y),Ye(11,y),y})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ye(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Cg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Z(101,!1);let n=De(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,De(n),this.afterTick.next(),Ye(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ha,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<H2;)Ye(14),this.synchronizeOnce(),Ye(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!fd(i))continue;let o=r&&!this.zonelessEnabled?0:1;VA(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>fd(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;vd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(kg,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>vd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Z(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function cu(t,e,n,r){let i=Be(),o=Jc();if(Gi(i,o,e)){let a=cn(),u=pd();DV(u,i,t,e,n,r)}return cu}var tY=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function gt(t,e,n){let r=Be(),i=Jc();if(Gi(r,i,e)){let o=cn(),a=pd();PA(a,r,t,e,r[ot],n)}return gt}function PS(t,e,n,r,i){iw(e,t,n,i?"class":"style",r)}function ne(t,e,n,r){let i=Be(),o=i[_e],a=t+Ft,u=o.firstCreatePass?aw(a,i,2,e,tw,Bp(),n,r):o.data[a];if(nw(u,i,t,e,cR),Kc(u)){let d=i[_e];Rg(d,i,u),UE(d,u,i)}return r!=null&&Mg(i,u),ne}function te(){let t=cn(),e=Vt(),n=rw(e);return t.firstCreatePass&&cw(t,n),qy(n)&&Gy(),zy(),n.classesWithoutHost!=null&&QL(n)&&PS(t,n,Be(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&YL(n)&&PS(t,n,Be(),n.stylesWithoutHost,!1),te}function Yn(t,e,n,r){return ne(t,e,n,r),te(),Yn}function uu(t,e,n,r){let i=Be(),o=i[_e],a=t+Ft,u=o.firstCreatePass?u2(a,o,2,e,n,r):o.data[a];return nw(u,i,t,e,cR),r!=null&&Mg(i,u),uu}function lu(){let t=Vt(),e=rw(t);return qy(e)&&Gy(),zy(),lu}var cR=(t,e,n,r,i)=>(gd(!0),gA(e[ot],r,tS()));function Yi(t,e,n){let r=Be(),i=r[_e],o=t+Ft,a=i.firstCreatePass?aw(o,r,8,"ng-container",tw,Bp(),e,n):i.data[o];if(nw(a,r,t,"ng-container",z2),Kc(a)){let u=r[_e];Rg(u,r,a),UE(u,a,r)}return n!=null&&Mg(r,a),Yi}function Ji(){let t=cn(),e=Vt(),n=rw(e);return t.firstCreatePass&&cw(t,n),Ji}var z2=(t,e,n,r,i)=>(gd(!0),jF(e[ot],""));function va(){return Be()}function Lg(t,e,n){let r=Be(),i=Jc();if(Gi(r,i,e)){let o=cn(),a=pd();xA(a,r,t,e,r[ot],n)}return Lg}var Kp=void 0;function q2(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var G2=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kp,"{1} 'at' {0}",Kp],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",q2],fE={};function Jn(t){let e=W2(t),n=xS(e);if(n)return n;let r=e.split("-")[0];if(n=xS(r),n)return n;if(r==="en")return G2;throw new Z(701,!1)}function xS(t){return t in fE||(fE[t]=zi.ng&&zi.ng.common&&zi.ng.common.locales&&zi.ng.common.locales[t]),fE[t]}var yt=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(yt||{});function W2(t){return t.toLowerCase().replace(/_/g,"-")}var Sd="en-US";var K2=Sd;function uR(t){typeof t=="string"&&(K2=t.toLowerCase().replace(/_/g,"-"))}function ln(t,e,n){let r=Be(),i=cn(),o=Vt();return lR(i,r,r[ot],o,t,e,n),ln}function Fg(t,e,n){let r=Be(),i=cn(),o=Vt();return(o.type&3||n)&&XA(o,i,r,n,r[ot],t,e,Xp(o,r,e)),Fg}function lR(t,e,n,r,i,o,a){let u=!0,d=null;if((r.type&3||a)&&(d??=Xp(r,e,o),XA(r,t,e,a,n,i,o,d)&&(u=!1)),u){let f=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let y=0;y<m.length;y+=2){let I=m[y],b=m[y+1];d??=Xp(r,e,o),SS(r,e,I,b,i,d)}if(f&&f.length)for(let y of f)d??=Xp(r,e,o),SS(r,e,y,i,i,d)}}function Kt(t=1){return eS(t)}function Xi(t){let e=z0();return Lp(e,Ft+t)}function Zp(t,e){return t<<17|e<<2}function pa(t){return t>>17&32767}function Z2(t){return(t&2)==2}function Q2(t,e){return t&131071|e<<17}function NE(t){return t|2}function su(t){return(t&131068)>>2}function pE(t,e){return t&-131069|e<<2}function Y2(t){return(t&1)===1}function OE(t){return t|1}function J2(t,e,n,r,i,o){let a=o?e.classBindings:e.styleBindings,u=pa(a),d=su(a);t[r]=n;let f=!1,m;if(Array.isArray(n)){let y=n;m=y[1],(m===null||qc(y,m)>0)&&(f=!0)}else m=n;if(i)if(d!==0){let I=pa(t[u+1]);t[r+1]=Zp(I,u),I!==0&&(t[I+1]=pE(t[I+1],r)),t[u+1]=Q2(t[u+1],r)}else t[r+1]=Zp(u,0),u!==0&&(t[u+1]=pE(t[u+1],r)),u=r;else t[r+1]=Zp(d,0),u===0?u=r:t[d+1]=pE(t[d+1],r),d=r;f&&(t[r+1]=NE(t[r+1])),NS(t,m,r,!0),NS(t,m,r,!1),X2(e,m,t,r,o),a=Zp(u,d),o?e.classBindings=a:e.styleBindings=a}function X2(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&qc(o,e)>=0&&(n[r+1]=OE(n[r+1]))}function NS(t,e,n,r){let i=t[n+1],o=e===null,a=r?pa(i):su(i),u=!1;for(;a!==0&&(u===!1||o);){let d=t[a],f=t[a+1];eB(d,e)&&(u=!0,t[a+1]=r?OE(f):NE(f)),a=r?pa(f):su(f)}u&&(t[n+1]=r?NE(i):OE(i))}function eB(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?qc(t,e)>=0:!1}function Ad(t,e){return tB(t,e,null,!0),Ad}function tB(t,e,n,r){let i=Be(),o=cn(),a=Jy(2);if(o.firstUpdatePass&&rB(o,t,a,r),e!==Or&&Gi(i,a,e)){let u=o.data[Zo()];cB(o,u,i,i[ot],t,i[a+1]=uB(e,n),r,a)}}function nB(t,e){return e>=t.expandoStartIndex}function rB(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Zo()],a=nB(t,n);lB(o,r)&&e===null&&!a&&(e=!1),e=iB(i,o,e,r),J2(i,o,e,n,a,r)}}function iB(t,e,n,r){let i=Q0(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=gE(null,t,e,n,r),n=wd(n,e.attrs,r),o=null);else{let a=e.directiveStylingLast;if(a===-1||t[a]!==i)if(n=gE(i,t,e,n,r),o===null){let d=oB(t,e,r);d!==void 0&&Array.isArray(d)&&(d=gE(null,t,e,d[1],r),d=wd(d,e.attrs,r),sB(t,e,r,d))}else o=aB(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function oB(t,e,n){let r=n?e.classBindings:e.styleBindings;if(su(r)!==0)return t[pa(r)]}function sB(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[pa(i)]=r}function aB(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let a=t[o].hostAttrs;r=wd(r,a,n)}return wd(r,e.attrs,n)}function gE(t,e,n,r,i){let o=null,a=n.directiveEnd,u=n.directiveStylingLast;for(u===-1?u=n.directiveStart:u++;u<a&&(o=e[u],r=wd(r,o.hostAttrs,i),o!==t);)u++;return t!==null&&(n.directiveStylingLast=u),r}function wd(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?i=a:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),T0(t,a,n?!0:e[++o]))}return t===void 0?null:t}function cB(t,e,n,r,i,o,a,u){if(!(e.type&3))return;let d=t.data,f=d[u+1],m=Y2(f)?OS(d,e,n,i,su(f),a):void 0;if(!mg(m)){mg(o)||Z2(f)&&(o=OS(d,null,n,i,u,a));let y=By(Zo(),n);_V(r,a,y,i,o)}}function OS(t,e,n,r,i,o){let a=e===null,u;for(;i>0;){let d=t[i],f=Array.isArray(d),m=f?d[1]:d,y=m===null,I=n[i+1];I===Or&&(I=y?Wn:void 0);let b=y?Np(I,r):m===r?I:void 0;if(f&&!mg(b)&&(b=Np(d,r)),mg(b)&&(u=b,a))return u;let k=t[i+1];i=a?pa(k):su(k)}if(e!==null){let d=o?e.residualClasses:e.residualStyles;d!=null&&(u=Np(d,r))}return u}function mg(t){return t!==void 0}function uB(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=$i(Ig(t)))),t}function lB(t,e){return(t.flags&(e?8:16))!==0}function pe(t,e=""){let n=Be(),r=cn(),i=t+Ft,o=r.firstCreatePass?Pg(r,i,1,e,null):r.data[i],a=dB(r,n,o,e,t);n[i]=a,Hp()&&XE(r,n,a,o),Yc(o,!1)}var dB=(t,e,n,r,i)=>(gd(!0),VF(e[ot],r));function hB(t,e,n,r=""){return Gi(t,Jc(),n)?e+na(n)+r:Or}function fB(t,e,n,r,i,o=""){let a=q0(),u=JA(t,a,n,i);return Jy(2),u?e+na(n)+r+na(i)+o:Or}function Vg(t){return _n("",t),Vg}function _n(t,e,n){let r=Be(),i=hB(r,t,e,n);return i!==Or&&dR(r,Zo(),i),_n}function Bg(t,e,n,r,i){let o=Be(),a=fB(o,t,e,n,r,i);return a!==Or&&dR(o,Zo(),a),Bg}function dR(t,e,n){let r=By(e,t);BF(t[ot],r,n)}function hi(t,e,n){iE(e)&&(e=e());let r=Be(),i=Jc();if(Gi(r,i,e)){let o=cn(),a=pd();PA(a,r,t,e,r[ot],n)}return hi}function eo(t,e){let n=iE(t);return n&&t.set(e),n}function fi(t,e){let n=Be(),r=cn(),i=Vt();return lR(r,n,n[ot],i,t,e),fi}function pB(t,e,n){let r=cn();if(r.firstCreatePass){let i=oi(t);kE(n,r.data,r.blueprint,i,!0),kE(e,r.data,r.blueprint,i,!1)}}function kE(t,e,n,r,i){if(t=sn(t),Array.isArray(t))for(let o=0;o<t.length;o++)kE(t[o],e,n,r,i);else{let o=cn(),a=Be(),u=Vt(),d=Xs(t)?t:sn(t.provide),f=ky(t),m=u.providerIndexes&1048575,y=u.directiveStart,I=u.providerIndexes>>20;if(Xs(t)||!t.multi){let b=new da(f,i,fe,null),k=_E(d,e,i?m:m+I,y);k===-1?(yE(ig(u,a),o,d),mE(o,t,e.length),e.push(d),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(b),a.push(b)):(n[k]=b,a[k]=b)}else{let b=_E(d,e,m+I,y),k=_E(d,e,m,m+I),U=b>=0&&n[b],j=k>=0&&n[k];if(i&&!j||!i&&!U){yE(ig(u,a),o,d);let q=_B(i?mB:gB,n.length,i,r,f,t);!i&&j&&(n[k].providerFactory=q),mE(o,t,e.length,0),e.push(d),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(q),a.push(q)}else{let q=hR(n[i?k:b],f,!i&&r);mE(o,t,b>-1?b:k,q)}!i&&r&&j&&n[k].componentProviders++}}}function mE(t,e,n,r){let i=Xs(e),o=R0(e);if(i||o){let d=(o?sn(e.useClass):e).prototype.ngOnDestroy;if(d){let f=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let m=f.indexOf(n);m===-1?f.push(n,[r,d]):f[m+1].push(r,d)}else f.push(n,d)}}}function hR(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function _E(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function gB(t,e,n,r,i){return LE(this.multi,[])}function mB(t,e,n,r,i){let o=this.multi,a;if(this.providerFactory){let u=this.providerFactory.componentProviders,d=og(r,r[_e],this.providerFactory.index,i);a=d.slice(0,u),LE(o,a);for(let f=u;f<d.length;f++)a.push(d[f])}else a=[],LE(o,a);return a}function LE(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function _B(t,e,n,r,i,o){let a=new da(t,n,fe,null);return a.multi=[],a.index=e,a.componentProviders=0,hR(a,i,r&&!n),a}function to(t,e=[]){return n=>{n.providersResolver=(r,i)=>pB(r,i?i(t):t,e)}}function fR(t,e){let n=t[e];return n===Or?void 0:n}function vB(t,e,n,r,i,o){let a=e+n;return Gi(t,a,i)?YA(t,a+1,o?r.call(o,i):r(i)):fR(t,a+1)}function yB(t,e,n,r,i,o,a){let u=e+n;return JA(t,u,i,o)?YA(t,u+2,a?r.call(a,i,o):r(i,o)):fR(t,u+2)}function mr(t,e){let n=cn(),r,i=t+Ft;n.firstCreatePass?(r=EB(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Uo(r.type,!0)),a,u=Cn(fe);try{let d=rg(!1),f=o();return rg(d),jy(n,Be(),i,f),f}finally{Cn(u)}}function EB(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function kr(t,e,n){let r=t+Ft,i=Be(),o=Lp(i,r);return pR(i,r)?vB(i,Yy(),e,o.transform,n,o):o.transform(n)}function fw(t,e,n,r){let i=t+Ft,o=Be(),a=Lp(o,i);return pR(o,i)?yB(o,Yy(),e,a.transform,n,r,a):a.transform(n,r)}function pR(t,e){return t[_e].data[e].pure}function Rd(t,e){return zA(t,e)}var _g=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},pw=(()=>{class t{compileModuleSync(n){return new gg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Py(n),o=fA(i.declarations).reduce((a,u)=>{let d=qo(u);return d&&a.push(new ou(d)),a},[]);return new _g(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var wB=(()=>{class t{zone=B(Je);changeDetectionScheduler=B(Hi);applicationRef=B(Qi);applicationErrorHandler=B(An);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gR({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Je(be(G({},mR()),{scheduleInRootZone:n})),[{provide:Je,useFactory:t},{provide:zo,multi:!0,useFactory:()=>{let r=B(wB,{optional:!0});return()=>r.initialize()}},{provide:zo,multi:!0,useFactory:()=>{let r=B(IB);return()=>{r.initialize()}}},e===!0?{provide:oE,useValue:!0}:[],{provide:sE,useValue:n??wA},{provide:An,useFactory:()=>{let r=B(Je),i=B(Tt),o;return a=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw a}):(o??=i.get(Ar),o.handleError(a))})}}}]}function mR(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var IB=(()=>{class t{subscription=new mt;initialized=!1;zone=B(Je);pendingTasks=B(ai);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Je.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Je.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var _R=(()=>{class t{applicationErrorHandler=B(An);appRef=B(Qi);taskService=B(ai);ngZone=B(Je);zonelessEnabled=B(qp);tracing=B(ma,{optional:!0});disableScheduling=B(oE,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(cg):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(sE,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ug||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?gS:IA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(cg+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bB(){return typeof $localize<"u"&&$localize.locale||Sd}var Md=new X("",{providedIn:"root",factory:()=>B(Md,{optional:!0,skipSelf:!0})||bB()});function St(t){return p0(t)}function du(t,e){return Yf(t,e?.equal)}var vR=class{[gn];constructor(e){this[gn]=e}destroy(){this[gn].destroy()}};var IR=Symbol("InputSignalNode#UNSET"),jB=be(G({},Jf),{transformFn:void 0,applyValueToInputSignal(t,e){Sc(t,e)}});function bR(t,e){let n=Object.create(jB);n.value=t,n.transformFn=e?.transform;function r(){if(Tc(n),n.value===IR){let i=null;throw new Z(-950,i)}return n.value}return r[gn]=n,r}var Ug=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Id(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},UB=new X("");UB.__NG_ELEMENT_ID__=t=>{let e=Vt();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new Z(204,!1)};function yR(t,e){return bR(t,e)}function $B(t){return bR(IR,t)}var TR=(yR.required=$B,yR);var gw=new X(""),HB=new X("");function Pd(t){return!t.moduleRef}function zB(t){let e=Pd(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Je);return n.run(()=>{Pd(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(An),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Pd(t)){let o=()=>e.destroy(),a=t.platformInjector.get(gw);a.add(o),e.onDestroy(()=>{i.unsubscribe(),a.delete(o)})}else{let o=()=>t.moduleRef.destroy(),a=t.platformInjector.get(gw);a.add(o),t.moduleRef.onDestroy(()=>{vd(t.allPlatformModules,t.moduleRef),i.unsubscribe(),a.delete(o)})}return GB(r,n,()=>{let o=e.get(ai),a=o.add(),u=e.get(hw);return u.runInitializers(),u.donePromise.then(()=>{let d=e.get(Md,Sd);if(uR(d||Sd),!e.get(HB,!0))return Pd(t)?e.get(Qi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Pd(t)){let m=e.get(Qi);return t.rootComponent!==void 0&&m.bootstrap(t.rootComponent),m}else return qB?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(a))})})}var qB;function GB(t,e,n){try{let r=n();return Zi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var jg=null;function WB(t=[],e){return Ct.create({name:e,providers:[{provide:od,useValue:"platform"},{provide:gw,useValue:new Set([()=>jg=null])},...t]})}function KB(t=[]){if(jg)return jg;let e=WB(t);return jg=e,sR(),ZB(e),e}function ZB(t){let e=t.get(Eg,null);Lt(t,()=>{e?.forEach(n=>n())})}function Ew(){return!1}var Xo=(()=>{class t{static __NG_ELEMENT_ID__=QB}return t})();function QB(t){return YB(Vt(),Be(),(t&16)===16)}function YB(t,e,n){if(Ko(t)&&!n){let r=pr(t.index,e);return new Yo(r,r)}else if(t.type&175){let r=e[hr];return new Yo(r,e)}return null}var mw=class{constructor(){}supports(e){return uw(e)}create(e){return new _w(e)}},JB=(t,e)=>e,_w=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||JB}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let a=!r||n&&n.currentIndex<ER(r,i,o)?n:r,u=ER(a,i,o),d=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,a.previousIndex==null)i++;else{o||(o=[]);let f=u-i,m=d-i;if(f!=m){for(let I=0;I<f;I++){let b=I<o.length?o[I]:o[I]=0,k=b+I;m<=k&&k<f&&(o[I]=b+1)}let y=a.previousIndex;o[y]=m-f}}u!==d&&e(a,u,d)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!uw(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,a;if(Array.isArray(e)){this.length=e.length;for(let u=0;u<this.length;u++)o=e[u],a=this._trackByFn(u,o),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,o,a,u),r=!0):(r&&(n=this._verifyReinsertion(n,o,a,u)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,ZA(e,u=>{a=this._trackByFn(i,u),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,u,a,i),r=!0):(r&&(n=this._verifyReinsertion(n,u,a,i)),Object.is(n.item,u)||this._addIdentityChange(n,u)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new vw(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new $g),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new $g),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},vw=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},yw=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},$g=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new yw,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ER(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function wR(){return new ww([new mw])}var ww=(()=>{class t{factories;static \u0275prov=ee({token:t,providedIn:"root",factory:wR});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=B(t,{optional:!0,skipSelf:!0});return t.create(n,r||wR())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new Z(901,!1)}}return t})();function CR(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ye(8);try{let o=i?.injector??KB(r),a=[gR({}),{provide:Hi,useExisting:_R},rS,...n||[]],u=new Ed({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return zB({r3Injector:u.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ye(9)}}function ya(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var AR=null;function _r(){return AR}function Iw(t){AR??=t}var xd=class{},bw=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>B(RR),providedIn:"platform"})}return t})();var RR=(()=>{class t extends bw{_location;_history;_doc=B(un);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _r().getBaseHref(this._doc)}onPopState(n){let r=_r().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=_r().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function MR(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function DR(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function es(t){return t&&t[0]!=="?"?`?${t}`:t}var hu=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>B(xR),providedIn:"root"})}return t})(),PR=new X(""),xR=(()=>{class t extends hu{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B(un).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return MR(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+es(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let a=this.prepareExternalUrl(i+es(o));this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,o){let a=this.prepareExternalUrl(i+es(o));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Se(bw),Se(PR,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fu=(()=>{class t{_subject=new It;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=tj(DR(SR(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+es(r))}normalize(n){return t.stripTrailingSlash(ej(this._basePath,SR(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+es(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+es(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=es;static joinWithSlash=MR;static stripTrailingSlash=DR;static \u0275fac=function(r){return new(r||t)(Se(hu))};static \u0275prov=ee({token:t,factory:()=>XB(),providedIn:"root"})}return t})();function XB(){return new fu(Se(hu))}function ej(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function SR(t){return t.replace(/\/index.html$/,"")}function tj(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var vn=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(vn||{}),Xe=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(Xe||{}),Fn=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(Fn||{}),ro={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function FR(t){return Jn(t)[yt.LocaleId]}function VR(t,e,n){let r=Jn(t),i=[r[yt.DayPeriodsFormat],r[yt.DayPeriodsStandalone]],o=vr(i,e);return vr(o,n)}function BR(t,e,n){let r=Jn(t),i=[r[yt.DaysFormat],r[yt.DaysStandalone]],o=vr(i,e);return vr(o,n)}function jR(t,e,n){let r=Jn(t),i=[r[yt.MonthsFormat],r[yt.MonthsStandalone]],o=vr(i,e);return vr(o,n)}function UR(t,e){let r=Jn(t)[yt.Eras];return vr(r,e)}function Nd(t,e){let n=Jn(t);return vr(n[yt.DateFormat],e)}function Od(t,e){let n=Jn(t);return vr(n[yt.TimeFormat],e)}function kd(t,e){let r=Jn(t)[yt.DateTimeFormat];return vr(r,e)}function Ld(t,e){let n=Jn(t),r=n[yt.NumberSymbols][e];if(typeof r>"u"){if(e===ro.CurrencyDecimal)return n[yt.NumberSymbols][ro.Decimal];if(e===ro.CurrencyGroup)return n[yt.NumberSymbols][ro.Group]}return r}function $R(t){if(!t[yt.ExtraData])throw new Z(2303,!1)}function HR(t){let e=Jn(t);return $R(e),(e[yt.ExtraData][2]||[]).map(r=>typeof r=="string"?Tw(r):[Tw(r[0]),Tw(r[1])])}function zR(t,e,n){let r=Jn(t);$R(r);let i=[r[yt.ExtraData][0],r[yt.ExtraData][1]],o=vr(i,e)||[];return vr(o,n)||[]}function vr(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Z(2304,!1)}function Tw(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var nj=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Hg={},rj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function qR(t,e,n,r){let i=hj(t);e=no(n,e)||e;let a=[],u;for(;e;)if(u=rj.exec(e),u){a=a.concat(u.slice(1));let m=a.pop();if(!m)break;e=m}else{a.push(e);break}let d=i.getTimezoneOffset();r&&(d=WR(r,d),i=dj(i,r));let f="";return a.forEach(m=>{let y=uj(m);f+=y?y(i,n,d):m==="''"?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function Kg(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function no(t,e){let n=FR(t);if(Hg[n]??={},Hg[n][e])return Hg[n][e];let r="";switch(e){case"shortDate":r=Nd(t,Fn.Short);break;case"mediumDate":r=Nd(t,Fn.Medium);break;case"longDate":r=Nd(t,Fn.Long);break;case"fullDate":r=Nd(t,Fn.Full);break;case"shortTime":r=Od(t,Fn.Short);break;case"mediumTime":r=Od(t,Fn.Medium);break;case"longTime":r=Od(t,Fn.Long);break;case"fullTime":r=Od(t,Fn.Full);break;case"short":let i=no(t,"shortTime"),o=no(t,"shortDate");r=zg(kd(t,Fn.Short),[i,o]);break;case"medium":let a=no(t,"mediumTime"),u=no(t,"mediumDate");r=zg(kd(t,Fn.Medium),[a,u]);break;case"long":let d=no(t,"longTime"),f=no(t,"longDate");r=zg(kd(t,Fn.Long),[d,f]);break;case"full":let m=no(t,"fullTime"),y=no(t,"fullDate");r=zg(kd(t,Fn.Full),[m,y]);break}return r&&(Hg[n][e]=r),r}function zg(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Lr(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let a=String(t);for(;a.length<e;)a="0"+a;return r&&(a=a.slice(a.length-e)),o+a}function ij(t,e){return Lr(t,3).substring(0,e)}function At(t,e,n=0,r=!1,i=!1){return function(o,a){let u=oj(t,o);if((n>0||u>-n)&&(u+=n),t===3)u===0&&n===-12&&(u=12);else if(t===6)return ij(u,e);let d=Ld(a,ro.MinusSign);return Lr(u,e,d,r,i)}}function oj(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Z(2301,!1)}}function rt(t,e,n=vn.Format,r=!1){return function(i,o){return sj(i,o,t,e,n,r)}}function sj(t,e,n,r,i,o){switch(n){case 2:return jR(e,i,r)[t.getMonth()];case 1:return BR(e,i,r)[t.getDay()];case 0:let a=t.getHours(),u=t.getMinutes();if(o){let f=HR(e),m=zR(e,i,r),y=f.findIndex(I=>{if(Array.isArray(I)){let[b,k]=I,U=a>=b.hours&&u>=b.minutes,j=a<k.hours||a===k.hours&&u<k.minutes;if(b.hours<k.hours){if(U&&j)return!0}else if(U||j)return!0}else if(I.hours===a&&I.minutes===u)return!0;return!1});if(y!==-1)return m[y]}return VR(e,i,r)[a<12?0:1];case 3:return UR(e,r)[t.getFullYear()<=0?0:1];default:let d=n;throw new Z(2302,!1)}}function qg(t){return function(e,n,r){let i=-1*r,o=Ld(n,ro.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+Lr(a,2,o)+Lr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Lr(a,1,o);case 2:return"GMT"+(i>=0?"+":"")+Lr(a,2,o)+":"+Lr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Lr(a,2,o)+":"+Lr(Math.abs(i%60),2,o);default:throw new Z(2310,!1)}}}var aj=0,Wg=4;function cj(t){let e=Kg(t,aj,1).getDay();return Kg(t,0,1+(e<=Wg?Wg:Wg+7)-e)}function GR(t){let e=t.getDay(),n=e===0?-3:Wg-e;return Kg(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Cw(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,a=n.getDate();i=1+Math.floor((a+o)/7)}else{let o=GR(n),a=cj(o.getFullYear()),u=o.getTime()-a.getTime();i=1+Math.round(u/6048e5)}return Lr(i,t,Ld(r,ro.MinusSign))}}function Gg(t,e=!1){return function(n,r){let o=GR(n).getFullYear();return Lr(o,t,Ld(r,ro.MinusSign),e)}}var Dw={};function uj(t){if(Dw[t])return Dw[t];let e;switch(t){case"G":case"GG":case"GGG":e=rt(3,Xe.Abbreviated);break;case"GGGG":e=rt(3,Xe.Wide);break;case"GGGGG":e=rt(3,Xe.Narrow);break;case"y":e=At(0,1,0,!1,!0);break;case"yy":e=At(0,2,0,!0,!0);break;case"yyy":e=At(0,3,0,!1,!0);break;case"yyyy":e=At(0,4,0,!1,!0);break;case"Y":e=Gg(1);break;case"YY":e=Gg(2,!0);break;case"YYY":e=Gg(3);break;case"YYYY":e=Gg(4);break;case"M":case"L":e=At(1,1,1);break;case"MM":case"LL":e=At(1,2,1);break;case"MMM":e=rt(2,Xe.Abbreviated);break;case"MMMM":e=rt(2,Xe.Wide);break;case"MMMMM":e=rt(2,Xe.Narrow);break;case"LLL":e=rt(2,Xe.Abbreviated,vn.Standalone);break;case"LLLL":e=rt(2,Xe.Wide,vn.Standalone);break;case"LLLLL":e=rt(2,Xe.Narrow,vn.Standalone);break;case"w":e=Cw(1);break;case"ww":e=Cw(2);break;case"W":e=Cw(1,!0);break;case"d":e=At(2,1);break;case"dd":e=At(2,2);break;case"c":case"cc":e=At(7,1);break;case"ccc":e=rt(1,Xe.Abbreviated,vn.Standalone);break;case"cccc":e=rt(1,Xe.Wide,vn.Standalone);break;case"ccccc":e=rt(1,Xe.Narrow,vn.Standalone);break;case"cccccc":e=rt(1,Xe.Short,vn.Standalone);break;case"E":case"EE":case"EEE":e=rt(1,Xe.Abbreviated);break;case"EEEE":e=rt(1,Xe.Wide);break;case"EEEEE":e=rt(1,Xe.Narrow);break;case"EEEEEE":e=rt(1,Xe.Short);break;case"a":case"aa":case"aaa":e=rt(0,Xe.Abbreviated);break;case"aaaa":e=rt(0,Xe.Wide);break;case"aaaaa":e=rt(0,Xe.Narrow);break;case"b":case"bb":case"bbb":e=rt(0,Xe.Abbreviated,vn.Standalone,!0);break;case"bbbb":e=rt(0,Xe.Wide,vn.Standalone,!0);break;case"bbbbb":e=rt(0,Xe.Narrow,vn.Standalone,!0);break;case"B":case"BB":case"BBB":e=rt(0,Xe.Abbreviated,vn.Format,!0);break;case"BBBB":e=rt(0,Xe.Wide,vn.Format,!0);break;case"BBBBB":e=rt(0,Xe.Narrow,vn.Format,!0);break;case"h":e=At(3,1,-12);break;case"hh":e=At(3,2,-12);break;case"H":e=At(3,1);break;case"HH":e=At(3,2);break;case"m":e=At(4,1);break;case"mm":e=At(4,2);break;case"s":e=At(5,1);break;case"ss":e=At(5,2);break;case"S":e=At(6,1);break;case"SS":e=At(6,2);break;case"SSS":e=At(6,3);break;case"Z":case"ZZ":case"ZZZ":e=qg(0);break;case"ZZZZZ":e=qg(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=qg(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=qg(2);break;default:return null}return Dw[t]=e,e}function WR(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function lj(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function dj(t,e,n){let i=t.getTimezoneOffset(),o=WR(e,i);return lj(t,-1*(o-i))}function hj(t){if(NR(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,a=1]=t.split("-").map(u=>+u);return Kg(i,o-1,a)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(nj))return fj(r)}let e=new Date(t);if(!NR(e))throw new Z(2311,!1);return e}function fj(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let a=Number(t[4]||0)-n,u=Number(t[5]||0)-r,d=Number(t[6]||0),f=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,a,u,d,f),e}function NR(t){return t instanceof Date&&!isNaN(t.valueOf())}var Sw=/\s+/,OR=[],Fd=(()=>{class t{_ngEl;_renderer;initialClasses=OR;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(Sw):OR}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Sw):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Sw).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(fe(Nr),fe(di))};static \u0275dir=st({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var Zg=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},pu=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,a)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Zg(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let u=r.get(o);r.move(u,a),kR(u,i)}});for(let i=0,o=r.length;i<o;i++){let u=r.get(i).context;u.index=i,u.count=o,u.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);kR(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(fe(_a),fe(bd),fe(ww))};static \u0275dir=st({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function kR(t,e){t.context.$implicit=e.item}var Fr=(()=>{class t{_viewContainer;_context=new Qg;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){LR(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){LR(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(fe(_a),fe(bd))};static \u0275dir=st({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Qg=class{$implicit=null;ngIf=null};function LR(t,e){if(t&&!t.createEmbeddedView)throw new Z(2020,!1)}function Mw(t,e){return new Z(2100,!1)}var Aw=class{createSubscription(e,n,r){return St(()=>e.subscribe({next:n,error:r}))}dispose(e){St(()=>e.unsubscribe())}},Rw=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},pj=new Rw,gj=new Aw,Ea=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=B(An);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(Zi(n))return pj;if(Og(n))return gj;throw Mw(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(fe(Xo,16))};static \u0275pipe=Dd({name:"async",type:t,pure:!1})}return t})();var Pw=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw Mw(t,n);return n.toUpperCase()}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=Dd({name:"uppercase",type:t,pure:!0})}return t})(),mj="mediumDate",KR=new X(""),ZR=new X(""),xw=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let a=r??this.defaultOptions?.dateFormat??mj,u=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return qR(n,a,o||this.locale,u)}catch(a){throw Mw(t,a.message)}}static \u0275fac=function(r){return new(r||t)(fe(Md,16),fe(KR,24),fe(ZR,24))};static \u0275pipe=Dd({name:"date",type:t,pure:!0})}return t})();var Zt=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ki({type:t});static \u0275inj=ti({})}return t})();function Nw(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Vd=class{};var QR="browser";var Bd=class{_doc;constructor(e){this._doc=e}manager},Yg=(()=>{class t extends Bd{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(Se(un))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),Xg=new X(""),Vw=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(a=>{a.manager=this});let i=n.filter(a=>!(a instanceof Yg));this._plugins=i.slice().reverse();let o=n.find(a=>a instanceof Yg);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Se(Xg),Se(Je))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),Ow="ng-app-id";function YR(t){for(let e of t)e.remove()}function JR(t,e){let n=e.createElement("style");return n.textContent=t,n}function _j(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Ow}="${e}"],link[${Ow}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ow),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Lw(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Bw=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,_j(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,JR);r?.forEach(i=>this.addUsage(i,this.external,Lw))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(YR(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])YR(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,JR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Lw(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Se(un),Se(yg),Se(wg,8),Se(ga))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),kw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},jw=/%COMP%/g;var eM="%COMP%",vj=`_nghost-${eM}`,yj=`_ngcontent-${eM}`,Ej=!0,wj=new X("",{providedIn:"root",factory:()=>Ej});function Ij(t){return yj.replace(jw,t)}function bj(t){return vj.replace(jw,t)}function tM(t,e){return e.map(n=>n.replace(jw,t))}var Uw=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,a,u,d=null,f=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=u,this.nonce=d,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new jd(n,a,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Jg?i.applyToHost(n):i instanceof Ud&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,u=this.ngZone,d=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,y=this.platformIsServer,I=this.tracingService;switch(r.encapsulation){case qi.Emulated:o=new Jg(d,f,r,this.appId,m,a,u,y,I);break;case qi.ShadowDom:return new Fw(d,f,n,r,a,u,this.nonce,y,I);default:o=new Ud(d,f,r,m,a,u,y,I);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Se(Vw),Se(Bw),Se(yg),Se(wj),Se(un),Se(Je),Se(wg),Se(ma,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),jd=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(kw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(XR(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(XR(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=kw[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=kw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ui.DashCase|ui.Important)?e.style.setProperty(n,r,i&ui.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ui.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=_r().getGlobalEventTarget(this.doc,e),!e))throw new Z(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function XR(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Fw=class extends jd{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,a,u,d,f){super(e,o,a,d,f),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=i.styles;m=tM(i.id,m);for(let I of m){let b=document.createElement("style");u&&b.setAttribute("nonce",u),b.textContent=I,this.shadowRoot.appendChild(b)}let y=i.getExternalStyles?.();if(y)for(let I of y){let b=Lw(I,o);u&&b.setAttribute("nonce",u),this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ud=class extends jd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,a,u,d,f){super(e,o,a,u,d),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let m=r.styles;this.styles=f?tM(f,m):m,this.styleUrls=r.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&iu.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Jg=class extends Ud{contentAttr;hostAttr;constructor(e,n,r,i,o,a,u,d,f){let m=i+"-"+r.id;super(e,n,r,o,a,u,d,f,m),this.contentAttr=Ij(m),this.hostAttr=bj(m)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var em=class t extends xd{supportsDOMEvents=!0;static makeCurrent(){Iw(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Tj();return n==null?null:Cj(n)}resetBaseElement(){$d=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Nw(document.cookie,e)}},$d=null;function Tj(){return $d=$d||document.head.querySelector("base"),$d?$d.getAttribute("href"):null}function Cj(t){return new URL(t,document.baseURI).pathname}var Dj=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),nM=["alt","control","meta","shift"],Sj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Aj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},rM=(()=>{class t extends Bd{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let a=t.parseEventName(r),u=t.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_r().onAndCancel(n,a.domEventName,u,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),a="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),a="code."),nM.forEach(f=>{let m=r.indexOf(f);m>-1&&(r.splice(m,1),a+=f+".")}),a+=o,r.length!=0||o.length===0)return null;let d={};return d.domEventName=i,d.fullKey=a,d}static matchEventFullKeyCode(n,r){let i=Sj[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),nM.forEach(a=>{if(a!==i){let u=Aj[a];u(n)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(Se(un))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})();function $w(t,e,n){let r=G({rootComponent:t,platformRef:n?.platformRef},Rj(e));return CR(r)}function Rj(t){return{appProviders:[...Oj,...t?.providers??[]],platformProviders:Nj}}function Mj(){em.makeCurrent()}function Pj(){return new Ar}function xj(){return BE(document),document}var Nj=[{provide:ga,useValue:QR},{provide:Eg,useValue:Mj,multi:!0},{provide:un,useFactory:xj}];var Oj=[{provide:od,useValue:"root"},{provide:Ar,useFactory:Pj},{provide:Xg,useClass:Yg,multi:!0,deps:[un]},{provide:Xg,useClass:rM,multi:!0,deps:[un]},Uw,Bw,Vw,{provide:ha,useExisting:Uw},{provide:Vd,useClass:Dj},[]];var iM=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Se(un))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ee="primary",rh=Symbol("RouteTitle"),Ww=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ba(t){return new Ww(t)}function hM(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],u=t[o];if(a[0]===":")i[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Lj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!pi(t[n],e[n]))return!1;return!0}function pi(t,e){let n=t?Kw(t):void 0,r=e?Kw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!fM(t[i],e[i]))return!1;return!0}function Kw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function fM(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function pM(t){return t.length>0?t[t.length-1]:null}function so(t){return ny(t)?t:Zi(t)?ut(Promise.resolve(t)):de(t)}var Fj={exact:mM,subset:_M},gM={exact:Vj,subset:Bj,ignored:()=>!0};function oM(t,e,n){return Fj[n.paths](t.root,e.root,n.matrixParams)&&gM[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Vj(t,e){return pi(t,e)}function mM(t,e,n){if(!wa(t.segments,e.segments)||!rm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!mM(t.children[r],e.children[r],n))return!1;return!0}function Bj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>fM(t[n],e[n]))}function _M(t,e,n){return vM(t,e,e.segments,n)}function vM(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!wa(i,n)||e.hasChildren()||!rm(i,n,r))}else if(t.segments.length===n.length){if(!wa(t.segments,n)||!rm(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!_M(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!wa(t.segments,i)||!rm(t.segments,i,r)||!t.children[Ee]?!1:vM(t.children[Ee],e,o,r)}}function rm(t,e,n){return e.every((r,i)=>gM[n](t[i].parameters,r.parameters))}var mi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ge([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ba(this.queryParams),this._queryParamMap}toString(){return $j.serialize(this)}},Ge=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return im(this)}},ts=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ba(this.parameters),this._parameterMap}toString(){return EM(this)}};function jj(t,e){return wa(t,e)&&t.every((n,r)=>pi(n.parameters,e[r].parameters))}function wa(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Uj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ee&&(n=n.concat(e(i,r)))}),n}var ih=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>new Ta,providedIn:"root"})}return t})(),Ta=class{parse(e){let n=new Qw(e);return new mi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Hd(e.root,!0)}`,r=qj(e.queryParams),i=typeof e.fragment=="string"?`#${Hj(e.fragment)}`:"";return`${n}${r}${i}`}},$j=new Ta;function im(t){return t.segments.map(e=>EM(e)).join("/")}function Hd(t,e){if(!t.hasChildren())return im(t);if(e){let n=t.children[Ee]?Hd(t.children[Ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Ee&&r.push(`${i}:${Hd(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Uj(t,(r,i)=>i===Ee?[Hd(t.children[Ee],!1)]:[`${i}:${Hd(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ee]!=null?`${im(t)}/${n[0]}`:`${im(t)}/(${n.join("//")})`}}function yM(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tm(t){return yM(t).replace(/%3B/gi,";")}function Hj(t){return encodeURI(t)}function Zw(t){return yM(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function om(t){return decodeURIComponent(t)}function sM(t){return om(t.replace(/\+/g,"%20"))}function EM(t){return`${Zw(t.path)}${zj(t.parameters)}`}function zj(t){return Object.entries(t).map(([e,n])=>`;${Zw(e)}=${Zw(n)}`).join("")}function qj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${tm(n)}=${tm(i)}`).join("&"):`${tm(n)}=${tm(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Gj=/^[^\/()?;#]+/;function Hw(t){let e=t.match(Gj);return e?e[0]:""}var Wj=/^[^\/()?;=#]+/;function Kj(t){let e=t.match(Wj);return e?e[0]:""}var Zj=/^[^=?&#]+/;function Qj(t){let e=t.match(Zj);return e?e[0]:""}var Yj=/^[^&#]+/;function Jj(t){let e=t.match(Yj);return e?e[0]:""}var Qw=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ge([],{}):new Ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ee]=new Ge(e,n)),r}parseSegment(){let e=Hw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new ts(om(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Kj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Hw(this.remaining);i&&(r=i,this.capture(r))}e[om(n)]=om(r)}parseQueryParam(e){let n=Qj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=Jj(this.remaining);a&&(r=a,this.capture(r))}let i=sM(n),o=sM(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Hw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ee);let a=this.parseChildren();n[o??Ee]=Object.keys(a).length===1&&a[Ee]?a[Ee]:new Ge([],a),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function wM(t){return t.segments.length>0?new Ge([],{[Ee]:t}):t}function IM(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=IM(i);if(r===Ee&&o.segments.length===0&&o.hasChildren())for(let[a,u]of Object.entries(o.children))e[a]=u;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ge(t.segments,e);return Xj(n)}function Xj(t){if(t.numberOfChildren===1&&t.children[Ee]){let e=t.children[Ee];return new Ge(t.segments.concat(e.segments),e.children)}return t}function ns(t){return t instanceof mi}function bM(t,e,n=null,r=null){let i=TM(t);return CM(i,e,n,r)}function TM(t){let e;function n(o){let a={};for(let d of o.children){let f=n(d);a[d.outlet]=f}let u=new Ge(o.url,a);return o===t&&(e=u),u}let r=n(t.root),i=wM(r);return e??i}function CM(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return zw(i,i,i,n,r);let o=eU(e);if(o.toRoot())return zw(i,i,new Ge([],{}),n,r);let a=tU(o,i,t),u=a.processChildren?qd(a.segmentGroup,a.index,o.commands):SM(a.segmentGroup,a.index,o.commands);return zw(i,a.segmentGroup,u,n,r)}function sm(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Kd(t){return typeof t=="object"&&t!=null&&t.outlets}function zw(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([d,f])=>{o[d]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let a;t===e?a=n:a=DM(t,e,n);let u=wM(IM(a));return new mi(u,o,i)}function DM(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=DM(o,e,n)}),new Ge(t.segments,r)}var am=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&sm(r[0]))throw new Z(4003,!1);let i=r.find(Kd);if(i&&i!==pM(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function eU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new am(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let u={};return Object.entries(o.outlets).forEach(([d,f])=>{u[d]=typeof f=="string"?f.split("/"):f}),[...i,{outlets:u}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((u,d)=>{d==0&&u==="."||(d==0&&u===""?n=!0:u===".."?e++:u!=""&&i.push(u))}),i):[...i,o]},[]);return new am(n,e,r)}var vu=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function tU(t,e,n){if(t.isAbsolute)return new vu(e,!0,0);if(!n)return new vu(e,!1,NaN);if(n.parent===null)return new vu(n,!0,0);let r=sm(t.commands[0])?0:1,i=n.segments.length-1+r;return nU(n,i,t.numberOfDoubleDots)}function nU(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new vu(r,!1,i-o)}function rU(t){return Kd(t[0])?t[0].outlets:{[Ee]:t}}function SM(t,e,n){if(t??=new Ge([],{}),t.segments.length===0&&t.hasChildren())return qd(t,e,n);let r=iU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ge(t.segments.slice(0,r.pathIndex),{});return o.children[Ee]=new Ge(t.segments.slice(r.pathIndex),t.children),qd(o,0,i)}else return r.match&&i.length===0?new Ge(t.segments,{}):r.match&&!t.hasChildren()?Yw(t,e,n):r.match?qd(t,0,i):Yw(t,e,n)}function qd(t,e,n){if(n.length===0)return new Ge(t.segments,{});{let r=rU(n),i={};if(Object.keys(r).some(o=>o!==Ee)&&t.children[Ee]&&t.numberOfChildren===1&&t.children[Ee].segments.length===0){let o=qd(t.children[Ee],e,n);return new Ge(t.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=SM(t.children[o],e,a))}),Object.entries(t.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new Ge(t.segments,i)}}function iU(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let a=t.segments[i],u=n[r];if(Kd(u))break;let d=`${u}`,f=r<n.length-1?n[r+1]:null;if(i>0&&d===void 0)break;if(d&&f&&typeof f=="object"&&f.outlets===void 0){if(!cM(d,f,a))return o;r+=2}else{if(!cM(d,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Yw(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Kd(o)){let d=oU(o.outlets);return new Ge(r,d)}if(i===0&&sm(n[0])){let d=t.segments[e];r.push(new ts(d.path,aM(n[0]))),i++;continue}let a=Kd(o)?o.outlets[Ee]:`${o}`,u=i<n.length-1?n[i+1]:null;a&&u&&sm(u)?(r.push(new ts(a,aM(u))),i+=2):(r.push(new ts(a,{})),i++)}return new Ge(r,{})}function oU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Yw(new Ge([],{}),0,r))}),e}function aM(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function cM(t,e,n){return t==n.path&&pi(e,n.parameters)}var Gd="imperative",Qt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Qt||{}),er=class{id;url;constructor(e,n){this.id=e,this.url=n}},Ca=class extends er{type=Qt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},_i=class extends er{urlAfterRedirects;type=Qt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Rn=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Rn||{}),Zd=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Zd||{}),gi=class extends er{reason;code;type=Qt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},io=class extends er{reason;code;type=Qt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Eu=class extends er{error;target;type=Qt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qd=class extends er{urlAfterRedirects;state;type=Qt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cm=class extends er{urlAfterRedirects;state;type=Qt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},um=class extends er{urlAfterRedirects;state;shouldActivate;type=Qt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},lm=class extends er{urlAfterRedirects;state;type=Qt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dm=class extends er{urlAfterRedirects;state;type=Qt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hm=class{route;type=Qt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},fm=class{route;type=Qt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},pm=class{snapshot;type=Qt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gm=class{snapshot;type=Qt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mm=class{snapshot;type=Qt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_m=class{snapshot;type=Qt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Yd=class{},wu=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function sU(t){return!(t instanceof Yd)&&!(t instanceof wu)}function aU(t,e){return t.providers&&!t._injector&&(t._injector=Cd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Vr(t){return t.outlet||Ee}function cU(t,e){let n=t.filter(r=>Vr(r)===e);return n.push(...t.filter(r=>Vr(r)!==e)),n}function Tu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var vm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Tu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Cu(this.rootInjector)}},Cu=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new vm(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Se(Tt))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ym=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Jw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Jw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Xw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Xw(e,this._root).map(n=>n.value)}};function Jw(t,e){if(t===e.value)return e;for(let n of e.children){let r=Jw(t,n);if(r)return r}return null}function Xw(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Xw(t,n);if(r.length)return r.unshift(e),r}return[]}var Xn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function _u(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Jd=class extends ym{snapshot;constructor(e,n){super(e),this.snapshot=n,aI(this,e)}toString(){return this.snapshot.toString()}};function AM(t){let e=uU(t),n=new on([new ts("",{})]),r=new on({}),i=new on({}),o=new on({}),a=new on(""),u=new oo(n,r,o,a,i,Ee,t,e.root);return u.snapshot=e.root,new Jd(new Xn(u,[]),e)}function uU(t){let e={},n={},r={},o=new Ia([],e,r,"",n,Ee,t,null,{});return new Xd("",new Xn(o,[]))}var oo=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,a,u,d){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=u,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(he(f=>f[rh]))??de(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(he(e=>ba(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(he(e=>ba(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Em(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:G(G({},e.params),t.params),data:G(G({},e.data),t.data),resolve:G(G(G(G({},t.data),e.data),i?.data),t._resolvedData)}:r={params:G({},t.params),data:G({},t.data),resolve:G(G({},t.data),t._resolvedData??{})},i&&MM(i)&&(r.resolve[rh]=i.title),r}var Ia=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[rh]}constructor(e,n,r,i,o,a,u,d,f){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this.routeConfig=d,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ba(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ba(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Xd=class extends ym{url;constructor(e,n){super(n),this.url=e,aI(this,n)}toString(){return RM(this._root)}};function aI(t,e){e.value._routerState=t,e.children.forEach(n=>aI(t,n))}function RM(t){let e=t.children.length>0?` { ${t.children.map(RM).join(", ")} } `:"";return`${t.value}${e}`}function qw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,pi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),pi(e.params,n.params)||t.paramsSubject.next(n.params),Lj(e.url,n.url)||t.urlSubject.next(n.url),pi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function eI(t,e){let n=pi(t.params,e.params)&&jj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||eI(t.parent,e.parent))}function MM(t){return typeof t.title=="string"||t.title===null}var PM=new X(""),oh=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ee;activateEvents=new Dt;deactivateEvents=new Dt;attachEvents=new Dt;detachEvents=new Dt;routerOutletData=TR();parentContexts=B(Cu);location=B(_a);changeDetector=B(Xo);inputBinder=B(Tm,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=n;let i=this.location,a=n.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,d=new tI(n,u,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=st({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Wi]})}return t})(),tI=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===oo?this.route:e===Cu?this.childContexts:e===PM?this.outletData:this.parent.get(e,n)}},Tm=new X("");var cI=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Bt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Yn(0,"router-outlet")},dependencies:[oh],encapsulation:2})}return t})();function uI(t){let e=t.children&&t.children.map(uI),n=e?be(G({},t),{children:e}):G({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ee&&(n.component=cI),n}function lU(t,e,n){let r=eh(t,e._root,n?n._root:void 0);return new Jd(r,e)}function eh(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=dU(t,e,n);return new Xn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(u=>eh(t,u)),a}}let r=hU(e.value),i=e.children.map(o=>eh(t,o));return new Xn(r,i)}}function dU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return eh(t,r,i);return eh(t,r)})}function hU(t){return new oo(new on(t.url),new on(t.params),new on(t.queryParams),new on(t.fragment),new on(t.data),t.outlet,t.component,t)}var Iu=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},xM="ngNavigationCancelingError";function wm(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ns(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=NM(!1,Rn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function NM(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[xM]=!0,n.cancellationCode=e,n}function fU(t){return OM(t)&&ns(t.url)}function OM(t){return!!t&&t[xM]}var pU=(t,e,n,r)=>he(i=>(new nI(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),nI=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),qw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=_u(n);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,n,a.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=_u(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:u})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=_u(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=_u(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new _m(o.value.snapshot))}),e.children.length&&this.forwardEvent(new gm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(qw(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,a.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),qw(u.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},Im=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},yu=class{component;route;constructor(e,n){this.component=e,this.route=n}};function gU(t,e,n){let r=t._root,i=e?e._root:null;return zd(r,i,n,[r.value])}function mU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Du(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Ey(t)?t:e.get(t):r}function zd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=_u(e);return t.children.forEach(a=>{_U(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,u])=>Wd(u,n.getContext(a),i)),i}function _U(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=e?e.value:null,u=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let d=vU(a,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new Im(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?zd(t,e,u?u.children:null,r,i):zd(t,e,n,r,i),d&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new yu(u.outlet.component,a))}else a&&Wd(e,u,i),i.canActivateChecks.push(new Im(r)),o.component?zd(t,null,u?u.children:null,r,i):zd(t,null,n,r,i);return i}function vU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!wa(t.url,e.url);case"pathParamsOrQueryParamsChange":return!wa(t.url,e.url)||!pi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eI(t,e)||!pi(t.queryParams,e.queryParams);case"paramsChange":default:return!eI(t,e)}}function Wd(t,e,n){let r=_u(t),i=t.value;Object.entries(r).forEach(([o,a])=>{i.component?e?Wd(a,e.children.getContext(o),n):Wd(a,null,n):Wd(a,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new yu(e.outlet.component,i)):n.canDeactivateChecks.push(new yu(null,i)):n.canDeactivateChecks.push(new yu(null,i))}function sh(t){return typeof t=="function"}function yU(t){return typeof t=="boolean"}function EU(t){return t&&sh(t.canLoad)}function wU(t){return t&&sh(t.canActivate)}function IU(t){return t&&sh(t.canActivateChild)}function bU(t){return t&&sh(t.canDeactivate)}function TU(t){return t&&sh(t.canMatch)}function kM(t){return t instanceof Vi||t?.name==="EmptyError"}var nm=Symbol("INITIAL_VALUE");function bu(){return kn(t=>Bc(t.map(e=>e.pipe(Bi(1),Tp(nm)))).pipe(he(e=>{for(let n of e)if(n!==!0){if(n===nm)return nm;if(n===!1||CU(n))return n}return!0}),Gn(e=>e!==nm),Bi(1)))}function CU(t){return ns(t)||t instanceof Iu}function DU(t,e){return kt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?de(be(G({},n),{guardsResult:!0})):SU(a,r,i,t).pipe(kt(u=>u&&yU(u)?AU(r,o,t,e):de(u)),he(u=>be(G({},n),{guardsResult:u})))})}function SU(t,e,n,r){return ut(t).pipe(kt(i=>NU(i.component,i.route,n,e,r)),ji(i=>i!==!0,!0))}function AU(t,e,n,r){return ut(e).pipe(Uc(i=>jc(MU(i.route.parent,r),RU(i.route,r),xU(t,i.path,n),PU(t,i.route,n))),ji(i=>i!==!0,!0))}function RU(t,e){return t!==null&&e&&e(new mm(t)),de(!0)}function MU(t,e){return t!==null&&e&&e(new pm(t)),de(!0)}function PU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let i=r.map(o=>Jl(()=>{let a=Tu(e)??n,u=Du(o,a),d=wU(u)?u.canActivate(e,t):Lt(a,()=>u(e,t));return so(d).pipe(ji())}));return de(i).pipe(bu())}function xU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>mU(a)).filter(a=>a!==null).map(a=>Jl(()=>{let u=a.guards.map(d=>{let f=Tu(a.node)??n,m=Du(d,f),y=IU(m)?m.canActivateChild(r,t):Lt(f,()=>m(r,t));return so(y).pipe(ji())});return de(u).pipe(bu())}));return de(o).pipe(bu())}function NU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return de(!0);let a=o.map(u=>{let d=Tu(e)??i,f=Du(u,d),m=bU(f)?f.canDeactivate(t,e,n,r):Lt(d,()=>f(t,e,n,r));return so(m).pipe(ji())});return de(a).pipe(bu())}function OU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return de(!0);let o=i.map(a=>{let u=Du(a,t),d=EU(u)?u.canLoad(e,n):Lt(t,()=>u(e,n));return so(d)});return de(o).pipe(bu(),LM(r))}function LM(t){return rp(Wt(e=>{if(typeof e!="boolean")throw wm(t,e)}),he(e=>e===!0))}function kU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return de(!0);let o=i.map(a=>{let u=Du(a,t),d=TU(u)?u.canMatch(e,n):Lt(t,()=>u(e,n));return so(d)});return de(o).pipe(bu(),LM(r))}var th=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},nh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function mu(t){return Vc(new th(t))}function LU(t){return Vc(new Z(4e3,!1))}function FU(t){return Vc(NM(!1,Rn.GuardRejected))}var rI=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return de(r);if(i.numberOfChildren>1||!i.children[Ee])return LU(`${e.redirectTo}`);i=i.children[Ee]}}applyRedirectCommands(e,n,r,i,o){return VU(n,i,o).pipe(he(a=>{if(a instanceof mi)throw new nh(a);let u=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,r);if(a[0]==="/")throw new nh(u);return u}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new mi(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let u=o.substring(1);r[i]=n[u]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),a={};return Object.entries(n.children).forEach(([u,d])=>{a[u]=this.createSegmentGroup(e,d,r,i)}),new Ge(o,a)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function VU(t,e,n){if(typeof t=="string")return de(t);let r=t,{queryParams:i,fragment:o,routeConfig:a,url:u,outlet:d,params:f,data:m,title:y}=e;return so(Lt(n,()=>r({params:f,data:m,queryParams:i,fragment:o,routeConfig:a,url:u,outlet:d,title:y})))}var iI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BU(t,e,n,r,i){let o=FM(t,e,n);return o.matched?(r=aU(e,r),kU(r,e,n,i).pipe(he(a=>a===!0?o:G({},iI)))):de(o)}function FM(t,e,n){if(e.path==="**")return jU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?G({},iI):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||hM)(n,t,e);if(!i)return G({},iI);let o={};Object.entries(i.posParams??{}).forEach(([u,d])=>{o[u]=d.path});let a=i.consumed.length>0?G(G({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function jU(t){return{matched:!0,parameters:t.length>0?pM(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function uM(t,e,n,r){return n.length>0&&HU(t,n,r)?{segmentGroup:new Ge(e,$U(r,new Ge(n,t.children))),slicedSegments:[]}:n.length===0&&zU(t,n,r)?{segmentGroup:new Ge(t.segments,UU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ge(t.segments,t.children),slicedSegments:n}}function UU(t,e,n,r){let i={};for(let o of n)if(Cm(t,e,o)&&!r[Vr(o)]){let a=new Ge([],{});i[Vr(o)]=a}return G(G({},r),i)}function $U(t,e){let n={};n[Ee]=e;for(let r of t)if(r.path===""&&Vr(r)!==Ee){let i=new Ge([],{});n[Vr(r)]=i}return n}function HU(t,e,n){return n.some(r=>Cm(t,e,r)&&Vr(r)!==Ee)}function zU(t,e,n){return n.some(r=>Cm(t,e,r))}function Cm(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function qU(t,e,n){return e.length===0&&!t.children[n]}var oI=class{};function GU(t,e,n,r,i,o,a="emptyOnly"){return new sI(t,e,n,r,i,a,o).recognize()}var WU=31,sI=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,a,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=u,this.applyRedirects=new rI(this.urlSerializer,this.urlTree)}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=uM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(he(({children:n,rootSnapshot:r})=>{let i=new Xn(r,n),o=new Xd("",i),a=bM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let n=new Ia([],Object.freeze({}),Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ee,n).pipe(he(r=>({children:r,rootSnapshot:n})),Bo(r=>{if(r instanceof nh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof th?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(he(a=>a instanceof Xn?[a]:[]))}processChildren(e,n,r,i){let o=[];for(let a of Object.keys(r.children))a==="primary"?o.unshift(a):o.push(a);return ut(o).pipe(Uc(a=>{let u=r.children[a],d=cU(n,a);return this.processSegmentGroup(e,d,u,a,i)}),bp((a,u)=>(a.push(...u),a)),jo(null),iy(),kt(a=>{if(a===null)return mu(r);let u=VM(a);return KU(u),de(u)}))}processSegment(e,n,r,i,o,a,u){return ut(n).pipe(Uc(d=>this.processSegmentAgainstRoute(d._injector??e,n,d,r,i,o,a,u).pipe(Bo(f=>{if(f instanceof th)return de(null);throw f}))),ji(d=>!!d),Bo(d=>{if(kM(d))return qU(r,i,o)?de(new oI):mu(r);throw d}))}processSegmentAgainstRoute(e,n,r,i,o,a,u,d){return Vr(r)!==a&&(a===Ee||!Cm(i,o,r))?mu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,a,d):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,a,d):mu(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,a,u){let{matched:d,parameters:f,consumedSegments:m,positionalParamSegments:y,remainingSegments:I}=FM(n,i,o);if(!d)return mu(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>WU&&(this.allowRedirects=!1));let b=new Ia(o,f,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,lM(i),Vr(i),i.component??i._loadedComponent??null,i,dM(i)),k=Em(b,u,this.paramsInheritanceStrategy);return b.params=Object.freeze(k.params),b.data=Object.freeze(k.data),this.applyRedirects.applyRedirectCommands(m,i.redirectTo,y,b,e).pipe(kn(j=>this.applyRedirects.lineralizeSegments(i,j)),kt(j=>this.processSegment(e,r,n,j.concat(I),a,!1,u)))}matchSegmentAgainstRoute(e,n,r,i,o,a){let u=BU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),u.pipe(kn(d=>d.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(kn(({routes:f})=>{let m=r._loadedInjector??e,{parameters:y,consumedSegments:I,remainingSegments:b}=d,k=new Ia(I,y,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,lM(r),Vr(r),r.component??r._loadedComponent??null,r,dM(r)),U=Em(k,a,this.paramsInheritanceStrategy);k.params=Object.freeze(U.params),k.data=Object.freeze(U.data);let{segmentGroup:j,slicedSegments:q}=uM(n,I,b,f);if(q.length===0&&j.hasChildren())return this.processChildren(m,f,j,k).pipe(he(oe=>new Xn(k,oe)));if(f.length===0&&q.length===0)return de(new Xn(k,[]));let ie=Vr(r)===o;return this.processSegment(m,f,j,q,ie?Ee:o,!0,k).pipe(he(oe=>new Xn(k,oe instanceof Xn?[oe]:[])))}))):mu(n)))}getChildConfig(e,n,r){return n.children?de({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?de({routes:n._loadedRoutes,injector:n._loadedInjector}):OU(e,n,r,this.urlSerializer).pipe(kt(i=>i?this.configLoader.loadChildren(e,n).pipe(Wt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):FU(n))):de({routes:[],injector:e})}};function KU(t){t.sort((e,n)=>e.value.outlet===Ee?-1:n.value.outlet===Ee?1:e.value.outlet.localeCompare(n.value.outlet))}function ZU(t){let e=t.value.routeConfig;return e&&e.path===""}function VM(t){let e=[],n=new Set;for(let r of t){if(!ZU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=VM(r.children);e.push(new Xn(r.value,i))}return e.filter(r=>!n.has(r))}function lM(t){return t.data||{}}function dM(t){return t.resolve||{}}function QU(t,e,n,r,i,o){return kt(a=>GU(t,e,n,r,a.extractedUrl,i,o).pipe(he(({state:u,tree:d})=>be(G({},a),{targetSnapshot:u,urlAfterRedirects:d}))))}function YU(t,e){return kt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return de(n);let o=new Set(i.map(d=>d.route)),a=new Set;for(let d of o)if(!a.has(d))for(let f of BM(d))a.add(f);let u=0;return ut(a).pipe(Uc(d=>o.has(d)?JU(d,r,t,e):(d.data=Em(d,d.parent,t).resolve,de(void 0))),Wt(()=>u++),$c(1),kt(d=>u===a.size?de(n):Nn))})}function BM(t){let e=t.children.map(n=>BM(n)).flat();return[t,...e]}function JU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!MM(i)&&(o[rh]=i.title),Jl(()=>(t.data=Em(t,t.parent,n).resolve,XU(o,t,e,r).pipe(he(a=>(t._resolvedData=a,t.data=G(G({},t.data),a),null)))))}function XU(t,e,n,r){let i=Kw(t);if(i.length===0)return de({});let o={};return ut(i).pipe(kt(a=>e$(t[a],e,n,r).pipe(ji(),Wt(u=>{if(u instanceof Iu)throw wm(new Ta,u);o[a]=u}))),$c(1),he(()=>o),Bo(a=>kM(a)?Nn:Vc(a)))}function e$(t,e,n,r){let i=Tu(e)??r,o=Du(t,i),a=o.resolve?o.resolve(e,n):Lt(i,()=>o(e,n));return so(a)}function Gw(t){return kn(e=>{let n=t(e);return n?ut(n).pipe(he(()=>e)):de(e)})}var lI=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ee);return r}getResolvedTitleForRoute(n){return n.data[rh]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>B(jM),providedIn:"root"})}return t})(),jM=(()=>{class t extends lI{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Se(iM))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Su=new X("",{providedIn:"root",factory:()=>({})}),ah=new X(""),UM=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=B(pw);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return de(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=so(Lt(n,()=>r.loadComponent())).pipe(he(HM),kn(zM),Wt(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),Xl(()=>{this.componentLoaders.delete(r)})),o=new Oc(i,()=>new It).pipe(Nc());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return de({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=$M(r,this.compiler,n,this.onLoadEndListener).pipe(Xl(()=>{this.childrenLoaders.delete(r)})),a=new Oc(o,()=>new It).pipe(Nc());return this.childrenLoaders.set(r,a),a}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $M(t,e,n,r){return so(Lt(n,()=>t.loadChildren())).pipe(he(HM),kn(zM),kt(i=>i instanceof Ng||Array.isArray(i)?de(i):ut(e.compileModuleAsync(i))),he(i=>{r&&r(t);let o,a,u=!1;return Array.isArray(i)?(a=i,u=!0):(o=i.create(n).injector,a=o.get(ah,[],{optional:!0,self:!0}).flat()),{routes:a.map(uI),injector:o}}))}function t$(t){return t&&typeof t=="object"&&"default"in t}function HM(t){return t$(t)?t.default:t}function zM(t){return de(t)}var Dm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>B(n$),providedIn:"root"})}return t})(),n$=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),qM=new X("");var GM=new X(""),WM=(()=>{class t{currentNavigation=gr(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new It;transitionAbortWithErrorSubject=new It;configLoader=B(UM);environmentInjector=B(Tt);destroyRef=B(si);urlSerializer=B(ih);rootContexts=B(Cu);location=B(fu);inputBindingEnabled=B(Tm,{optional:!0})!==null;titleStrategy=B(lI);options=B(Su,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=B(Dm);createViewTransition=B(qM,{optional:!0});navigationErrorHandler=B(GM,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>de(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new hm(i)),r=i=>this.events.next(new fm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;St(()=>{this.transitions?.next(be(G({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new on(null),this.transitions.pipe(Gn(r=>r!==null),kn(r=>{let i=!1;return de(r).pipe(kn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Rn.SupersededByNewNavigation),Nn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?be(G({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let a=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!a&&u!=="reload")return this.events.next(new io(o.id,this.urlSerializer.serialize(o.rawUrl),"",Zd.IgnoredSameUrlNavigation)),o.resolve(!1),Nn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return de(o).pipe(kn(d=>(this.events.next(new Ca(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Nn:Promise.resolve(d))),QU(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Wt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=d.urlAfterRedirects,m));let f=new Qd(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:d,extractedUrl:f,source:m,restoredState:y,extras:I}=o,b=new Ca(d,this.urlSerializer.serialize(f),m,y);this.events.next(b);let k=AM(this.rootComponentType).snapshot;return this.currentTransition=r=be(G({},o),{targetSnapshot:k,urlAfterRedirects:f,extras:be(G({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(U=>(U.finalUrl=f,U)),de(r)}else return this.events.next(new io(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Zd.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Nn}),Wt(o=>{let a=new cm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),he(o=>(this.currentTransition=r=be(G({},o),{guards:gU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),DU(this.environmentInjector,o=>this.events.next(o)),Wt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw wm(this.urlSerializer,o.guardsResult);let a=new um(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Gn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Rn.GuardRejected),!1)),Gw(o=>{if(o.guards.canActivateChecks.length!==0)return de(o).pipe(Wt(a=>{let u=new lm(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),kn(a=>{let u=!1;return de(a).pipe(YU(this.paramsInheritanceStrategy,this.environmentInjector),Wt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Rn.NoDataFromResolver)}}))}),Wt(a=>{let u=new dm(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Gw(o=>{let a=u=>{let d=[];if(u.routeConfig?.loadComponent){let f=Tu(u)??this.environmentInjector;d.push(this.configLoader.loadComponent(f,u.routeConfig).pipe(Wt(m=>{u.component=m}),he(()=>{})))}for(let f of u.children)d.push(...a(f));return d};return Bc(a(o.targetSnapshot.root)).pipe(jo(null),Bi(1))}),Gw(()=>this.afterPreactivation()),kn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return u?ut(u).pipe(he(()=>r)):de(r)}),he(o=>{let a=lU(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=be(G({},o),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),Wt(()=>{this.events.next(new Yd)}),pU(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Bi(1),Cp(new le(o=>{let a=r.abortController.signal,u=()=>o.next();return a.addEventListener("abort",u),()=>a.removeEventListener("abort",u)}).pipe(Gn(()=>!i&&!r.targetRouterState),Wt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Rn.Aborted)}))),Wt({next:o=>{i=!0,this.lastSuccessfulNavigation=St(this.currentNavigation),this.events.next(new _i(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Cp(this.transitionAbortWithErrorSubject.pipe(Wt(o=>{throw o}))),Xl(()=>{i||this.cancelNavigationTransition(r,"",Rn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Bo(o=>{if(this.destroyed)return r.resolve(!1),Nn;if(i=!0,OM(o))this.events.next(new gi(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),fU(o)?this.events.next(new wu(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Eu(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let u=Lt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Iu){let{message:d,cancellationCode:f}=wm(this.urlSerializer,u);this.events.next(new gi(r.id,this.urlSerializer.serialize(r.extractedUrl),d,f)),this.events.next(new wu(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Nn}))}))}cancelNavigationTransition(n,r,i){let o=new gi(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=St(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function r$(t){return t!==Gd}var KM=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>B(i$),providedIn:"root"})}return t})(),bm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},i$=(()=>{class t extends bm{static \u0275fac=(()=>{let n;return function(i){return(n||(n=li(t)))(i||t)}})();static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ZM=(()=>{class t{urlSerializer=B(ih);options=B(Su,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=B(fu);urlHandlingStrategy=B(Dm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,a=i??o;return a instanceof mi?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=AM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>B(o$),providedIn:"root"})}return t})(),o$=(()=>{class t extends ZM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Ca?this.updateStateMemento():n instanceof io?this.commitTransition(r):n instanceof Qd?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Yd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof gi&&n.code!==Rn.SupersededByNewNavigation&&n.code!==Rn.Redirect?this.restoreHistory(r):n instanceof Eu?this.restoreHistory(r,!0):n instanceof _i&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:a}=r;if(this.location.isCurrentPathEqualTo(n)||o){let u=this.browserPageId,d=G(G({},a),this.generateNgRouterState(i,u));this.location.replaceState(n,"",d)}else{let u=G(G({},a),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",u)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=li(t)))(i||t)}})();static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dI(t,e){t.events.pipe(Gn(n=>n instanceof _i||n instanceof gi||n instanceof Eu||n instanceof io),he(n=>n instanceof _i||n instanceof io?0:(n instanceof gi?n.code===Rn.Redirect||n.code===Rn.SupersededByNewNavigation:!1)?2:1),Gn(n=>n!==2),Bi(1)).subscribe(()=>{e()})}var s$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},a$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ao=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=B(lw);stateManager=B(ZM);options=B(Su,{optional:!0})||{};pendingTasks=B(ai);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=B(WM);urlSerializer=B(ih);location=B(fu);urlHandlingStrategy=B(Dm);injector=B(Tt);_events=new It;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=B(KM);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=B(ah,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!B(Tm,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new mt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=St(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof gi&&r.code!==Rn.Redirect&&r.code!==Rn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof _i)this.navigated=!0;else if(r instanceof wu){let a=r.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),d=G({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||r$(i.source)},a);this.scheduleNavigation(u,Gd,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}sU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Gd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let d=G({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let u=this.parseUrl(n);this.scheduleNavigation(u,r,a,o).catch(d=>{this.disposed||this.injector.get(An)(d)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return St(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(uI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:d}=r,f=d?this.currentUrlTree.fragment:a,m=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":m=G(G({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let y;try{let I=i?i.snapshot:this.routerState.snapshot.root;y=TM(I)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),y=this.currentUrlTree.root}return CM(y,n,m,f??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=ns(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Gd,null,r)}navigate(n,r={skipLocationChange:!1}){return c$(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(zc(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=G({},s$):r===!1?i=G({},a$):i=r,ns(n))return oM(this.currentUrlTree,n,i);let o=this.parseUrl(n);return oM(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let u,d,f;a?(u=a.resolve,d=a.reject,f=a.promise):f=new Promise((y,I)=>{u=y,d=I});let m=this.pendingTasks.add();return dI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:u,reject:d,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function c$(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Z(4008,!1)}var Sm=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=gr(null);get href(){return St(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new It;applicationErrorHandler=B(An);options=B(Su,{optional:!0});constructor(n,r,i,o,a,u){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=u,this.reactiveHref.set(B(new Ug("href"),{optional:!0}));let d=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area"||!!(typeof customElements=="object"&&customElements.get(d)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof _i&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ns(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(n!==0||r||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,d)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:ns(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(fe(ao),fe(oo),Id("tabindex"),fe(di),fe(Nr),fe(hu))};static \u0275dir=st({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ln("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&cu("href",i.reactiveHref(),HE)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ya],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ya],replaceUrl:[2,"replaceUrl","replaceUrl",ya],routerLink:"routerLink"},features:[Wi]})}return t})();var l$=new X("");function hI(t,...e){return ni([{provide:ah,multi:!0,useValue:t},[],{provide:oo,useFactory:d$,deps:[ao]},{provide:kg,multi:!0,useFactory:h$},e.map(n=>n.\u0275providers)])}function d$(t){return t.routerState.root}function h$(){let t=B(Ct);return e=>{let n=t.get(Qi);if(e!==n.components[0])return;let r=t.get(ao),i=t.get(f$);t.get(p$)===1&&r.initialNavigation(),t.get(g$,null,{optional:!0})?.setUpPreloading(),t.get(l$,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var f$=new X("",{factory:()=>new It}),p$=new X("",{providedIn:"root",factory:()=>1});var g$=new X("");var wr=F1(YM());var JM=()=>{};var tP=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},m$=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],a=t[n++],u=t[n++],d=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{let o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Rm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],a=i+1<t.length,u=a?t[i+1]:0,d=i+2<t.length,f=d?t[i+2]:0,m=o>>2,y=(o&3)<<4|u>>4,I=(u&15)<<2|f>>6,b=f&63;d||(b=64,a||(I=64)),r.push(n[m],n[y],n[I],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):m$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;let f=i<t.length?n[t.charAt(i)]:64;++i;let y=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||f==null||y==null)throw new pI;let I=o<<2|u>>4;if(r.push(I),f!==64){let b=u<<4&240|f>>2;if(r.push(b),y!==64){let k=f<<6&192|y;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},pI=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_$=function(t){let e=tP(t);return Rm.encodeByteArray(e,!0)},uh=function(t){return _$(t).replace(/\./g,"")},Mm=function(t){try{return Rm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var v$=()=>mI().__FIREBASE_DEFAULTS__,y$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},E$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Mm(t[1]);return e&&JSON.parse(e)},Pm=()=>{try{return JM()||v$()||y$()||E$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_I=t=>{var e,n;return(n=(e=Pm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nP=t=>{let e=_I(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vI=()=>{var t;return(t=Pm())===null||t===void 0?void 0:t.config},yI=t=>{var e;return(e=Pm())===null||e===void 0?void 0:e[`_${t}`]};var Da=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function rs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function xm(t){return T(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function rP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[uh(JSON.stringify(n)),uh(JSON.stringify(a)),""].join(".")}var ch={};function w$(){let t={prod:[],emulator:[]};for(let e of Object.keys(ch))ch[e]?t.emulator.push(e):t.prod.push(e);return t}function I$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var XM=!1;function Nm(t,e){if(typeof window>"u"||typeof document>"u"||!rs(window.location.host)||ch[t]===e||ch[t]||XM)return;ch[t]=e;function n(I){return`__firebase__banner__${I}`}let r="__firebase__banner",o=w$().prod.length>0;function a(){let I=document.getElementById(r);I&&I.remove()}function u(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function d(I,b){I.setAttribute("width","24"),I.setAttribute("id",b),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function f(){let I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{XM=!0,a()},I}function m(I,b){I.setAttribute("id",b),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function y(){let I=I$(r),b=n("text"),k=document.getElementById(b)||document.createElement("span"),U=n("learnmore"),j=document.getElementById(U)||document.createElement("a"),q=n("preprendIcon"),ie=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){let oe=I.element;u(oe),m(j,U);let ze=f();d(ie,q),oe.append(ie,k,j,ze),document.body.appendChild(oe)}o?(k.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function b$(){var t;let e=(t=Pm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sP(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cP(){let t=Yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uP(){return!b$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lh(){try{return typeof indexedDB=="object"}catch{return!1}}function lP(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var T$="FirebaseError",tr=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=T$,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Br.prototype.create)}},Br=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?C$(o,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new tr(i,u,r)}};function C$(t,e){return t.replace(D$,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var D$=/\{\$([^}]+)}/g;function dP(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],a=e[i];if(eP(o)&&eP(a)){if(!vi(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function eP(t){return t!==null&&typeof t=="object"}function dh(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Au(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ru(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function hP(t,e){let n=new gI(t,e);return n.subscribe.bind(n)}var gI=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");S$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=fI),i.error===void 0&&(i.error=fI),i.complete===void 0&&(i.complete=fI);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function S$(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fI(){}var fse=14400*1e3;function Et(t){return t&&t._delegate?t._delegate:t}var Mn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Sa="[DEFAULT]";var EI=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Da;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R$(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return T(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:A$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function A$(t){return t===Sa?void 0:t}function R$(t){return t.instantiationMode==="EAGER"}var Om=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new EI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var M$=[],Ne=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(Ne||{}),P$={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},x$=Ne.INFO,N$={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},O$=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=N$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},yi=class{constructor(e){this.name=e,this._logLevel=x$,this._logHandler=O$,this._userLogHandler=null,M$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?P$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}};var k$=(t,e)=>e.some(n=>t instanceof n),fP,pP;function L$(){return fP||(fP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F$(){return pP||(pP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var gP=new WeakMap,II=new WeakMap,mP=new WeakMap,wI=new WeakMap,TI=new WeakMap;function V$(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Ei(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&gP.set(n,t)}).catch(()=>{}),TI.set(e,t),e}function B$(t){if(II.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});II.set(t,e)}var bI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return II.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ei(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _P(t){bI=t(bI)}function j$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(km(this),e,...n);return mP.set(r,e.sort?e.sort():[e]),Ei(r)}:F$().includes(t)?function(...e){return t.apply(km(this),e),Ei(gP.get(this))}:function(...e){return Ei(t.apply(km(this),e))}}function U$(t){return typeof t=="function"?j$(t):(t instanceof IDBTransaction&&B$(t),k$(t,L$())?new Proxy(t,bI):t)}function Ei(t){if(t instanceof IDBRequest)return V$(t);if(wI.has(t))return wI.get(t);let e=U$(t);return e!==t&&(wI.set(t,e),TI.set(e,t)),e}var km=t=>TI.get(t);function yP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(t,e),u=Ei(a);return r&&a.addEventListener("upgradeneeded",d=>{r(Ei(a.result),d.oldVersion,d.newVersion,Ei(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}var $$=["get","getKey","getAll","getAllKeys","count"],H$=["put","add","delete","clear"],CI=new Map;function vP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(CI.get(e))return CI.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=H$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$$.includes(n)))return;let o=function(a,...u){return T(this,null,function*(){let d=this.transaction(a,i?"readwrite":"readonly"),f=d.store;return r&&(f=f.index(u.shift())),(yield Promise.all([f[n](...u),i&&d.done]))[0]})};return CI.set(e,o),o}_P(t=>be(G({},t),{get:(e,n,r)=>vP(e,n)||t.get(e,n,r),has:(e,n)=>!!vP(e,n)||t.has(e,n)}));var SI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(z$(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function z$(t){let e=t.getComponent();return e?.type==="VERSION"}var AI="@firebase/app",EP="0.13.2";var co=new yi("@firebase/app"),q$="@firebase/app-compat",G$="@firebase/analytics-compat",W$="@firebase/analytics",K$="@firebase/app-check-compat",Z$="@firebase/app-check",Q$="@firebase/auth",Y$="@firebase/auth-compat",J$="@firebase/database",X$="@firebase/data-connect",eH="@firebase/database-compat",tH="@firebase/functions",nH="@firebase/functions-compat",rH="@firebase/installations",iH="@firebase/installations-compat",oH="@firebase/messaging",sH="@firebase/messaging-compat",aH="@firebase/performance",cH="@firebase/performance-compat",uH="@firebase/remote-config",lH="@firebase/remote-config-compat",dH="@firebase/storage",hH="@firebase/storage-compat",fH="@firebase/firestore",pH="@firebase/ai",gH="@firebase/firestore-compat",mH="firebase",_H="11.10.0";var RI="[DEFAULT]",vH={[AI]:"fire-core",[q$]:"fire-core-compat",[W$]:"fire-analytics",[G$]:"fire-analytics-compat",[Z$]:"fire-app-check",[K$]:"fire-app-check-compat",[Q$]:"fire-auth",[Y$]:"fire-auth-compat",[J$]:"fire-rtdb",[X$]:"fire-data-connect",[eH]:"fire-rtdb-compat",[tH]:"fire-fn",[nH]:"fire-fn-compat",[rH]:"fire-iid",[iH]:"fire-iid-compat",[oH]:"fire-fcm",[sH]:"fire-fcm-compat",[aH]:"fire-perf",[cH]:"fire-perf-compat",[uH]:"fire-rc",[lH]:"fire-rc-compat",[dH]:"fire-gcs",[hH]:"fire-gcs-compat",[fH]:"fire-fst",[gH]:"fire-fst-compat",[pH]:"fire-vertex","fire-js":"fire-js",[mH]:"fire-js-all"};var hh=new Map,yH=new Map,MI=new Map;function wP(t,e){try{t.container.addComponent(e)}catch(n){co.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jr(t){let e=t.name;if(MI.has(e))return co.debug(`There were multiple attempts to register component ${e}.`),!1;MI.set(e,t);for(let n of hh.values())wP(n,t);for(let n of yH.values())wP(n,t);return!0}function Mu(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nr(t){return t==null?!1:t.settings!==void 0}var EH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new Br("app","Firebase",EH);var PI=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}};var os=_H;function OI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:RI,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw is.create("bad-app-name",{appName:String(i)});if(n||(n=vI()),!n)throw is.create("no-options");let o=hh.get(i);if(o){if(vi(n,o.options)&&vi(r,o.config))return o;throw is.create("duplicate-app",{appName:i})}let a=new Om(i);for(let d of MI.values())a.addComponent(d);let u=new PI(n,r,a);return hh.set(i,u),u}function Aa(t=RI){let e=hh.get(t);if(!e&&t===RI&&vI())return OI();if(!e)throw is.create("no-app",{appName:t});return e}function Lm(){return Array.from(hh.values())}function _t(t,e,n){var r;let i=(r=vH[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),co.warn(u.join(" "));return}jr(new Mn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var wH="firebase-heartbeat-database",IH=1,fh="firebase-heartbeat-store",DI=null;function CP(){return DI||(DI=yP(wH,IH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fh)}catch(n){console.warn(n)}}}}).catch(t=>{throw is.create("idb-open",{originalErrorMessage:t.message})})),DI}function bH(t){return T(this,null,function*(){try{let n=(yield CP()).transaction(fh),r=yield n.objectStore(fh).get(DP(t));return yield n.done,r}catch(e){if(e instanceof tr)co.warn(e.message);else{let n=is.create("idb-get",{originalErrorMessage:e?.message});co.warn(n.message)}}})}function IP(t,e){return T(this,null,function*(){try{let r=(yield CP()).transaction(fh,"readwrite");yield r.objectStore(fh).put(e,DP(t)),yield r.done}catch(n){if(n instanceof tr)co.warn(n.message);else{let r=is.create("idb-set",{originalErrorMessage:n?.message});co.warn(r.message)}}})}function DP(t){return`${t.name}!${t.options.appId}`}var TH=1024,CH=30,xI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new NI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return T(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=bP();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>CH){let a=SH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){co.warn(r)}})}getHeartbeatsHeader(){return T(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=bP(),{heartbeatsToSend:r,unsentEntries:i}=DH(this._heartbeatsCache.heartbeats),o=uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return co.warn(n),""}})}};function bP(){return new Date().toISOString().substring(0,10)}function DH(t,e=TH){let n=[],r=t.slice();for(let i of t){let o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),TP(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),TP(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var NI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return lh()?lP().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield bH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return IP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return IP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function TP(t){return uh(JSON.stringify({version:2,heartbeats:t})).length}function SH(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function AH(t){jr(new Mn("platform-logger",e=>new SI(e),"PRIVATE")),jr(new Mn("heartbeat",e=>new xI(e),"PRIVATE")),_t(AI,EP,t),_t(AI,EP,"esm2017"),_t("fire-js","")}AH("");var RH="firebase",MH="11.10.0";_t(RH,MH,"app");function SP(t){t===void 0&&(t=B(Ct));let e=t.get(Xc);return n=>new le(r=>{let i=e.add(),o=!1;function a(){o||(i(),o=!0)}let u=n.subscribe({next:d=>{r.next(d),a()},complete:()=>{r.complete(),a()},error:d=>{r.error(d),a()}});return u.add(()=>{r.unsubscribe(),a()}),u})}var ss=new Ys("ANGULARFIRE2_VERSION");function ph(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var xu=(t,e)=>{let n=e?[e]:Lm(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},Pu=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(Pu||{}),AP=Ew()&&typeof Zone<"u"?Pu.WARN:Pu.SILENT;var Fm=class{zone;delegate;constructor(e,n=ey){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(a){i?i.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(o,n,r)}},as=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=B(Je);this.outsideAngular=n.runOutsideAngular(()=>new Fm(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Fm(typeof Zone>"u"?void 0:Zone.current,Xv))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),RP=!1;function PH(t,e){!RP&&(AP>Pu.SILENT||Ew())&&(RP=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),AP>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function xH(t){let e=B(Je,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Ra(t){let e=B(Je,{optional:!0});return e?e.run(()=>t()):t()}var NH=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Lt(n,()=>Ra(()=>t.apply(void 0,r)))),dn=(t,e,n)=>(n||=e?Pu.WARN:Pu.VERBOSE,function(){let r,i=arguments,o,a,u;try{o=B(as),a=B(Xc),u=B(Tt)}catch{return PH(t,n),t.apply(this,i)}for(let f=0;f<arguments.length;f++)typeof i[f]=="function"&&(e&&(r||=Ra(()=>a.add())),i[f]=NH(i[f],r,u));let d=xH(()=>t.apply(this,i));return e?d instanceof le?d.pipe(Vo(o.outsideAngular),Fo(o.insideAngular),SP(u)):d instanceof Promise?Ra(()=>{let f=a.add();return new Promise((m,y)=>{d.then(I=>Lt(u,()=>Ra(()=>m(I))),I=>Lt(u,()=>Ra(()=>y(I)))).finally(f)})}):typeof d=="function"&&r?function(){return setTimeout(r,0),d.apply(this,arguments)}:Ra(()=>d):d instanceof le?d.pipe(Vo(o.outsideAngular),Fo(o.insideAngular)):Ra(()=>d)});var uo=class{constructor(e){return e}},Ma=class{constructor(){return Lm()}};function OH(t){return t&&t.length===1?t[0]:new uo(Aa())}var kI=new X("angularfire2._apps"),kH={provide:uo,useFactory:OH,deps:[[new Zn,kI]]},LH={provide:Ma,deps:[[new Zn,kI]]};function FH(t){return(e,n)=>{let r=n.get(ga);_t("angularfire",ss.full,"core"),_t("angularfire",ss.full,"app"),_t("angular",_y.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new uo(i)}}function MP(t,...e){return ni([kH,LH,{provide:kI,useFactory:FH(t),multi:!0,deps:[Je,Ct,as,...e]}])}var PP=dn(OI,!0);var VH=new Map,BH={activated:!1,tokenObservers:[]},jH={initialized:!1,enabled:!1};function Ur(t){return VH.get(t)||Object.assign({},BH)}function kP(){return jH}var UH="https://content-firebaseappcheck.googleapis.com/v1";var $H="exchangeDebugToken",xP={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},mae=1440*60*1e3;var VI=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return T(this,null,function*(){this.stop();try{this.pending=new Da,this.pending.promise.catch(n=>{}),yield HH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Da,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function HH(t){return new Promise(e=>{setTimeout(e,t)})}var zH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},cs=new Br("appCheck","AppCheck",zH);function LP(t){if(!Ur(t).activated)throw cs.create("use-before-activation",{appName:t.name})}function FP(r,i){return T(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},a=n.getImmediate({optional:!0});if(a){let b=yield a.getHeartbeatsHeader();b&&(o["X-Firebase-Client"]=b)}let u={method:"POST",body:JSON.stringify(e),headers:o},d;try{d=yield fetch(t,u)}catch(b){throw cs.create("fetch-network-error",{originalErrorMessage:b?.message})}if(d.status!==200)throw cs.create("fetch-status-error",{httpStatus:d.status});let f;try{f=yield d.json()}catch(b){throw cs.create("fetch-parse-error",{originalErrorMessage:b?.message})}let m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw cs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let y=Number(m[1])*1e3,I=Date.now();return{token:f.token,expireTimeMillis:I+y,issuedAtTimeMillis:I}})}function VP(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${UH}/projects/${n}/apps/${r}:${$H}?key=${i}`,body:{debug_token:e}}}var qH="firebase-app-check-database",GH=1,BI="firebase-app-check-store";var Vm=null;function WH(){return Vm||(Vm=new Promise((t,e)=>{try{let n=indexedDB.open(qH,GH);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(cs.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(BI,{keyPath:"compositeKey"})}}}catch(n){e(cs.create("storage-open",{originalErrorMessage:n?.message}))}}),Vm)}function KH(t,e){return ZH(QH(t),e)}function ZH(t,e){return T(this,null,function*(){let r=(yield WH()).transaction(BI,"readwrite"),o=r.objectStore(BI).put({compositeKey:t,value:e});return new Promise((a,u)=>{o.onsuccess=d=>{a()},r.onerror=d=>{var f;u(cs.create("storage-set",{originalErrorMessage:(f=d.target.error)===null||f===void 0?void 0:f.message}))}})})}function QH(t){return`${t.options.appId}-${t.name}`}var gh=new yi("@firebase/app-check");function LI(t,e){return lh()?KH(t,e).catch(n=>{gh.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function BP(){return kP().enabled}function jP(){return T(this,null,function*(){let t=kP();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var YH={error:"UNKNOWN_ERROR"};function JH(t){return Rm.encodeString(JSON.stringify(t),!1)}function jI(t,e=!1,n=!1){return T(this,null,function*(){let r=t.app;LP(r);let i=Ur(r),o=i.token,a;if(o&&!mh(o)&&(i.token=void 0,o=void 0),!o){let f=yield i.cachedTokenPromise;f&&(mh(f)?o=f:yield LI(r,void 0))}if(!e&&o&&mh(o))return{token:o.token};let u=!1;if(BP())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=FP(VP(r,yield jP()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);let f=yield i.exchangeTokenPromise;return yield LI(r,f),i.token=f,{token:f.token}}catch(f){return f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?gh.warn(f.message):n&&gh.error(f),FI(f)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),o=yield Ur(r).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?gh.warn(f.message):n&&gh.error(f),a=f}let d;return o?a?mh(o)?d={token:o.token,internalError:a}:d=FI(a):(d={token:o.token},i.token=o,yield LI(r,o)):d=FI(a),u&&nz(r,d),d})}function XH(t){return T(this,null,function*(){let e=t.app;LP(e);let{provider:n}=Ur(e);if(BP()){let r=yield jP(),{token:i}=yield FP(VP(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function ez(t,e,n,r){let{app:i}=t,o=Ur(i),a={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&mh(o.token)){let u=o.token;Promise.resolve().then(()=>{n({token:u.token}),NP(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>NP(t))}function UP(t,e){let n=Ur(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function NP(t){let{app:e}=t,n=Ur(e),r=n.tokenRefresher;r||(r=tz(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function tz(t){let{app:e}=t;return new VI(()=>T(null,null,function*(){let n=Ur(e),r;if(n.token?r=yield jI(t,!0):r=yield jI(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Ur(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xP.RETRIAL_MIN_WAIT,xP.RETRIAL_MAX_WAIT)}function nz(t,e){let n=Ur(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function mh(t){return t.expireTimeMillis-Date.now()>0}function FI(t){return{token:JH(YH),error:t}}var UI=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Ur(this.app);for(let n of e)UP(this.app,n.next);return Promise.resolve()}};function rz(t,e){return new UI(t,e)}function iz(t){return{getToken:e=>jI(t,e),getLimitedUseToken:()=>XH(t),addTokenListener:e=>ez(t,"INTERNAL",e),removeTokenListener:e=>UP(t.app,e)}}var oz="@firebase/app-check",sz="0.10.1";var az="app-check",OP="app-check-internal";function cz(){jr(new Mn(az,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return rz(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(OP).initialize()})),jr(new Mn(OP,t=>{let e=t.getProvider("app-check").getImmediate();return iz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),_t(oz,sz)}cz();var uz="app-check";var Nu=class{constructor(){return xu(uz)}};var lz=["localhost","0.0.0.0","127.0.0.1"],Rae=typeof window<"u"&&lz.includes(window.location.hostname);function ix(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ox=ix,sx=new Br("auth","Firebase",ix());var zm=new yi("@firebase/auth");function dz(t,...e){zm.logLevel<=Ne.WARN&&zm.warn(`Auth (${os}): ${t}`,...e)}function jm(t,...e){zm.logLevel<=Ne.ERROR&&zm.error(`Auth (${os}): ${t}`,...e)}function Ii(t,...e){throw db(t,...e)}function Pa(t,...e){return db(t,...e)}function ax(t,e,n){let r=Object.assign(Object.assign({},ox()),{[e]:n});return new Br("auth","Firebase",r).create(e,{appName:t.name})}function ds(t){return ax(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function db(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sx.create(t,...e)}function ue(t,e,...n){if(!t)throw db(e,...n)}function lo(t){let e="INTERNAL ASSERTION FAILED: "+t;throw jm(e),new Error(e)}function hs(t,e){t||lo(e)}function qI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function hz(){return $P()==="http:"||$P()==="https:"}function $P(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function fz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hz()||sP()||"connection"in navigator)?navigator.onLine:!0}function pz(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var xa=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,hs(n>e,"Short delay should be less than long delay!"),this.isMobile=iP()||aP()}get(){return fz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hb(t,e){hs(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var qm=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var gz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var mz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_z=new xa(3e4,6e4);function Oa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function fs(o,a,u,d){return T(this,arguments,function*(t,e,n,r,i={}){return cx(t,i,()=>T(null,null,function*(){let f={},m={};r&&(e==="GET"?m=r:f={body:JSON.stringify(r)});let y=dh(Object.assign({key:t.config.apiKey},m)).slice(1),I=yield t._getAdditionalHeaders();I["Content-Type"]="application/json",t.languageCode&&(I["X-Firebase-Locale"]=t.languageCode);let b=Object.assign({method:e,headers:I},f);return oP()||(b.referrerPolicy="no-referrer"),t.emulatorConfig&&rs(t.emulatorConfig.host)&&(b.credentials="include"),qm.fetch()(yield ux(t,t.config.apiHost,n,y),b)}))})}function cx(t,e,n){return T(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},gz),e);try{let i=new GI(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw Bm(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let u=o.ok?a.errorMessage:a.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bm(t,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Bm(t,"email-already-in-use",a);if(d==="USER_DISABLED")throw Bm(t,"user-disabled",a);let m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ax(t,m,f);Ii(t,m)}}catch(i){if(i instanceof tr)throw i;Ii(t,"network-request-failed",{message:String(i)})}})}function n_(o,a,u,d){return T(this,arguments,function*(t,e,n,r,i={}){let f=yield fs(t,e,n,r,i);return"mfaPendingCredential"in f&&Ii(t,"multi-factor-auth-required",{_serverResponse:f}),f})}function ux(t,e,n,r){return T(this,null,function*(){let i=`${e}${n}?${r}`,o=t,a=o.config.emulator?hb(t.config,i):`${t.config.apiScheme}://${i}`;return mz.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a})}function vz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var GI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pa(this.auth,"network-request-failed")),_z.get())})}};function Bm(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Pa(t,e,r);return i.customData._tokenResponse=n,i}function HP(t){return t!==void 0&&t.enterprise!==void 0}var WI=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return vz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function yz(t,e){return T(this,null,function*(){return fs(t,"GET","/v2/recaptchaConfig",Oa(t,e))})}function Ez(t,e){return T(this,null,function*(){return fs(t,"POST","/v1/accounts:delete",e)})}function Gm(t,e){return T(this,null,function*(){return fs(t,"POST","/v1/accounts:lookup",e)})}function vh(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function fb(t,e=!1){return T(this,null,function*(){let n=Et(t),r=yield n.getIdToken(e),i=pb(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:vh($I(i.auth_time)),issuedAtTime:vh($I(i.iat)),expirationTime:vh($I(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function $I(t){return Number(t)*1e3}function pb(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jm("JWT malformed, contained fewer than 3 sections"),null;try{let i=Mm(n);return i?JSON.parse(i):(jm("Failed to decode base64 JWT payload"),null)}catch(i){return jm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zP(t){let e=pb(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Eh(t,e,n=!1){return T(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof tr&&wz(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function wz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var KI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),n)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wh=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vh(this.lastLoginAt),this.creationTime=vh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Wm(t){return T(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Eh(t,Gm(n,{idToken:r}));ue(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?lx(o.providerUserInfo):[],u=Iz(t.providerData,a),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!u?.length,m=d?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new wh(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,y)})}function gb(t){return T(this,null,function*(){let e=Et(t);yield Wm(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Iz(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lx(t){return t.map(e=>{var{providerId:n}=e,r=ty(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function bz(t,e){return T(this,null,function*(){let n=yield cx(t,{},()=>T(null,null,function*(){let r=dh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,a=yield ux(t,i,"/v1/token",`key=${o}`),u=yield t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";let d={method:"POST",headers:u,body:r};return t.emulatorConfig&&rs(t.emulatorConfig.host)&&(d.credentials="include"),qm.fetch()(a,d)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Tz(t,e){return T(this,null,function*(){return fs(t,"POST","/v2/accounts:revokeToken",Oa(t,e))})}var yh=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");let n=zP(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return T(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return T(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield bz(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,a=new t;return r&&(ue(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(ue(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return lo("not implemented")}};function us(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ls=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=ty(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new wh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let n=yield Eh(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return fb(this,e)}reload(){return gb(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return T(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Wm(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(nr(this.auth.app))return Promise.reject(ds(this.auth));let e=yield this.getIdToken();return yield Eh(this,Ez(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,a,u,d,f,m;let y=(r=n.displayName)!==null&&r!==void 0?r:void 0,I=(i=n.email)!==null&&i!==void 0?i:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,k=(a=n.photoURL)!==null&&a!==void 0?a:void 0,U=(u=n.tenantId)!==null&&u!==void 0?u:void 0,j=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,q=(f=n.createdAt)!==null&&f!==void 0?f:void 0,ie=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:oe,emailVerified:ze,isAnonymous:$t,providerData:He,stsTokenManager:M}=n;ue(oe&&M,e,"internal-error");let C=yh.fromJSON(this.name,M);ue(typeof oe=="string",e,"internal-error"),us(y,e.name),us(I,e.name),ue(typeof ze=="boolean",e,"internal-error"),ue(typeof $t=="boolean",e,"internal-error"),us(b,e.name),us(k,e.name),us(U,e.name),us(j,e.name),us(q,e.name),us(ie,e.name);let D=new t({uid:oe,auth:e,email:I,emailVerified:ze,displayName:y,isAnonymous:$t,photoURL:k,phoneNumber:b,tenantId:U,stsTokenManager:C,createdAt:q,lastLoginAt:ie});return He&&Array.isArray(He)&&(D.providerData=He.map(R=>Object.assign({},R))),j&&(D._redirectEventId=j),D}static _fromIdTokenResponse(e,n,r=!1){return T(this,null,function*(){let i=new yh;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Wm(o),o})}static _fromGetAccountInfoResponse(e,n,r){return T(this,null,function*(){let i=n.users[0];ue(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?lx(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,u=new yh;u.updateFromIdToken(r);let d=new t({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new wh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(d,f),d})}};var qP=new Map;function ho(t){hs(t instanceof Function,"Expected a class definition");let e=qP.get(t);return e?(hs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qP.set(t,e),e)}var Cz=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(n,r){return T(this,null,function*(){this.storage[n]=r})}_get(n){return T(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return T(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ZI=Cz;function Um(t,e,n){return`firebase:${t}:${e}:${n}`}var Km=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Um(this.userKey,i.apiKey,o),this.fullPersistenceKey=Um("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Gm(this.auth,{idToken:e}).catch(()=>{});return n?ls._fromGetAccountInfoResponse(this.auth,n,e):null}return ls._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return T(this,null,function*(){if(!n.length)return new t(ho(ZI),e,r);let i=(yield Promise.all(n.map(f=>T(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=i[0]||ho(ZI),a=Um(r,e.config.apiKey,e.name),u=null;for(let f of n)try{let m=yield f._get(a);if(m){let y;if(typeof m=="string"){let I=yield Gm(e,{idToken:m}).catch(()=>{});if(!I)break;y=yield ls._fromGetAccountInfoResponse(e,I,m)}else y=ls._fromJSON(e,m);f!==o&&(u=y),o=f;break}}catch{}let d=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new t(o,e,r):(o=d[0],u&&(yield o._set(a,u.toJSON())),yield Promise.all(n.map(f=>T(null,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new t(o,e,r))})}};function GP(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(px(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mx(e))return"Blackberry";if(_x(e))return"Webos";if(hx(e))return"Safari";if((e.includes("chrome/")||fx(e))&&!e.includes("edge/"))return"Chrome";if(gx(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function dx(t=Yt()){return/firefox\//i.test(t)}function hx(t=Yt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fx(t=Yt()){return/crios\//i.test(t)}function px(t=Yt()){return/iemobile/i.test(t)}function gx(t=Yt()){return/android/i.test(t)}function mx(t=Yt()){return/blackberry/i.test(t)}function _x(t=Yt()){return/webos/i.test(t)}function mb(t=Yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Dz(t=Yt()){var e;return mb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Sz(){return cP()&&document.documentMode===10}function vx(t=Yt()){return mb(t)||gx(t)||_x(t)||mx(t)||/windows phone/i.test(t)||px(t)}function yx(t,e=[]){let n;switch(t){case"Browser":n=GP(Yt());break;case"Worker":n=`${GP(Yt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${os}/${r}`}var QI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((a,u)=>{try{let d=e(o);a(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Az(n){return T(this,arguments,function*(t,e={}){return fs(t,"GET","/v2/passwordPolicy",Oa(t,e))})}var Rz=6,YI=class{constructor(e){var n,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:Rz,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,a,u;let d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var JI=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zm(this),this.idTokenSubscription=new Zm(this),this.beforeStateQueue=new QI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ho(n)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Km.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let n=yield Gm(this,{idToken:e}),r=yield ls._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){var n;if(nr(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i?._redirectEventId,d=yield this.tryRedirectSignIn(e);(!a||a===u)&&d?.user&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return T(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield Wm(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=pz()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(nr(this.app))return Promise.reject(ds(this));let n=e?Et(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return T(this,null,function*(){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return nr(this.app)?Promise.reject(ds(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return nr(this.app)?Promise.reject(ds(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(ho(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield Az(this),n=new YI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Br("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Tz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return T(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ho(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=yield Km.create(this,[ho(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),a=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){let d=e.addObserver(n,r,i);return()=>{a=!0,d()}}else{let d=e.addObserver(n);return()=>{a=!0,d()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return T(this,null,function*(){var e;if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&dz(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ou(t){return Et(t)}var Zm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=hP(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var r_={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mz(t){r_=t}function Ex(t){return r_.loadJS(t)}function Pz(){return r_.recaptchaEnterpriseScript}function xz(){return r_.gapiScript}function wx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var XI=class{constructor(){this.enterprise=new eb}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},eb=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var Nz="recaptcha-enterprise",Ix="NO_RECAPTCHA",tb=class{constructor(e){this.type=Nz,this.auth=Ou(e)}verify(e="verify",n=!1){return T(this,null,function*(){function r(o){return T(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,u)=>T(null,null,function*(){yz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{let f=new WI(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(d=>{u(d)})}))})}function i(o,a,u){let d=window.grecaptcha;HP(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(Ix)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XI().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{r(this.auth).then(u=>{if(!n&&HP(window.grecaptcha))i(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=Pz();d.length!==0&&(d+=u),Ex(d).then(()=>{i(u,o,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})})}};function _h(t,e,n,r=!1,i=!1){return T(this,null,function*(){let o=new tb(t),a;if(i)a=Ix;else try{a=yield o.verify(n)}catch{a=yield o.verify(n,!0)}let u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){let d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){let d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u})}function WP(t,e,n,r,i){return T(this,null,function*(){var o,a;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let u=yield _h(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(u=>T(null,null,function*(){if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let d=yield _h(t,e,n,n==="getOobCode");return r(t,d)}else return Promise.reject(u)}));else if(i==="PHONE_PROVIDER")if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("PHONE_PROVIDER")){let u=yield _h(t,e,n);return r(t,u).catch(d=>T(null,null,function*(){var f;if(((f=t._getRecaptchaConfig())===null||f===void 0?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let m=yield _h(t,e,n,!1,!0);return r(t,m)}return Promise.reject(d)}))}else{let u=yield _h(t,e,n,!1,!0);return r(t,u)}else return Promise.reject(i+" provider is not supported.")})}function _b(t,e){let n=Mu(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(vi(o,e??{}))return i;Ii(i,"already-initialized")}return n.initialize({options:e})}function Oz(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ho);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function vb(t,e,n){let r=Ou(t);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=bx(e),{host:a,port:u}=kz(e),d=u===null?"":`:${u}`,f={url:`${o}//${a}${d}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(vi(f,r.config.emulator)&&vi(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,rs(a)?(xm(`${o}//${a}${d}`),Nm("Auth",!0)):i||Lz()}function bx(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kz(t){let e=bx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:KP(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:KP(a)}}}function KP(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Lz(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ih=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lo("not implemented")}_getIdTokenResponse(e){return lo("not implemented")}_linkToIdToken(e,n){return lo("not implemented")}_getReauthenticationResolver(e){return lo("not implemented")}};function Fz(t,e){return T(this,null,function*(){return fs(t,"POST","/v1/accounts:signUp",e)})}function Vz(t,e){return T(this,null,function*(){return n_(t,"POST","/v1/accounts:signInWithPassword",Oa(t,e))})}function Bz(t,e){return T(this,null,function*(){return n_(t,"POST","/v1/accounts:signInWithEmailLink",Oa(t,e))})}function jz(t,e){return T(this,null,function*(){return n_(t,"POST","/v1/accounts:signInWithEmailLink",Oa(t,e))})}var bh=class t extends Ih{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return T(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return WP(e,n,"signInWithPassword",Vz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Bz(e,{email:this._email,oobCode:this._password});default:Ii(e,"internal-error")}})}_linkToIdToken(e,n){return T(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return WP(e,r,"signUpPassword",Fz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return jz(e,{idToken:n,email:this._email,oobCode:this._password});default:Ii(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function HI(t,e){return T(this,null,function*(){return n_(t,"POST","/v1/accounts:signInWithIdp",Oa(t,e))})}function Uz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $z(t){let e=Au(Ru(t)).link,n=e?Au(Ru(e)).deep_link_id:null,r=Au(Ru(t)).deep_link_id;return(r?Au(Ru(r)).link:null)||r||n||e||t}var Qm=class t{constructor(e){var n,r,i,o,a,u;let d=Au(Ru(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,m=(r=d.oobCode)!==null&&r!==void 0?r:null,y=Uz((i=d.mode)!==null&&i!==void 0?i:null);ue(f&&m&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=m,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=d.lang)!==null&&a!==void 0?a:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){let n=$z(e);try{return new t(n)}catch{return null}}};var Tx=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return bh._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Qm.parseLink(r);return ue(i,"argument-error"),bh._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Ym=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var nb=class extends Ym{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Th=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return T(this,null,function*(){let o=yield ls._fromIdTokenResponse(e,r,i),a=ZP(r);return new t({user:o,providerId:a,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return T(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=ZP(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function ZP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var rb=class t extends tr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function Cx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?rb._fromErrorAndOperation(t,o,e,r):o})}function Hz(t,e,n=!1){return T(this,null,function*(){let r=yield Eh(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Th._forOperation(t,"link",r)})}function zz(t,e,n=!1){return T(this,null,function*(){let{auth:r}=t;if(nr(r.app))return Promise.reject(ds(r));let i="reauthenticate";try{let o=yield Eh(t,Cx(r,i,e,t),n);ue(o.idToken,r,"internal-error");let a=pb(o.idToken);ue(a,r,"internal-error");let{sub:u}=a;return ue(t.uid===u,r,"user-mismatch"),Th._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ii(r,"user-mismatch"),o}})}function Dx(t,e,n=!1){return T(this,null,function*(){if(nr(t.app))return Promise.reject(ds(t));let r="signIn",i=yield Cx(t,r,e),o=yield Th._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function yb(t,e){return T(this,null,function*(){return Dx(Ou(t),e)})}function qz(t){return T(this,null,function*(){let e=Ou(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Eb(t,e,n){return nr(t.app)?Promise.reject(ds(t)):yb(Et(t),Tx.credential(e,n)).catch(r=>T(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&qz(t),r}))}function Dh(t,e,n,r){return Et(t).onIdTokenChanged(e,n,r)}function wb(t,e,n){return Et(t).beforeAuthStateChanged(e,n)}function Ib(t){return Et(t).signOut()}var Jm="__sak";var Xm=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jm,"1"),this.storage.removeItem(Jm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Gz=1e3,Wz=10,Kz=(()=>{class t extends Xm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vx(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let u=this.storage.getItem(i);!r&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);Sz()&&a!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,Wz):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Gz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return T(this,null,function*(){yield ko(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return T(this,null,function*(){let r=yield ko(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return T(this,null,function*(){yield ko(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Sx=Kz;var Zz=(()=>{class t extends Xm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),bb=Zz;function Qz(t){return Promise.all(t.map(e=>T(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var Yz=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return T(this,null,function*(){let r=n,{eventId:i,eventType:o,data:a}=r.data,u=this.handlersMap[o];if(!u?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let d=Array.from(u).map(m=>T(this,null,function*(){return m(r.origin,a)})),f=yield Qz(d);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Ax(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var ib=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return T(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((u,d)=>{let f=Ax("",20);i.port1.start();let m=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){let I=y;if(I.data.eventId===f)switch(I.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(I.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function wi(){return window}function Jz(t){wi().location.href=t}function Rx(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}function Xz(){return T(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function e3(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function t3(){return Rx()?self:null}var Mx="firebaseLocalStorageDb",n3=1,e_="firebaseLocalStorage",Px="fbase_key",Na=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function i_(t,e){return t.transaction([e_],e?"readwrite":"readonly").objectStore(e_)}function r3(){let t=indexedDB.deleteDatabase(Mx);return new Na(t).toPromise()}function ob(){let t=indexedDB.open(Mx,n3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(e_,{keyPath:Px})}catch(i){n(i)}}),t.addEventListener("success",()=>T(null,null,function*(){let r=t.result;r.objectStoreNames.contains(e_)?e(r):(r.close(),yield r3(),e(yield ob()))}))})}function QP(t,e,n){return T(this,null,function*(){let r=i_(t,!0).put({[Px]:e,value:n});return new Na(r).toPromise()})}function i3(t,e){return T(this,null,function*(){let n=i_(t,!1).get(e),r=yield new Na(n).toPromise();return r===void 0?null:r.value})}function YP(t,e){let n=i_(t,!0).delete(e);return new Na(n).toPromise()}var o3=800,s3=3,a3=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return T(this,null,function*(){return this.db?this.db:(this.db=yield ob(),this.db)})}_withRetries(n){return T(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>s3)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return T(this,null,function*(){return Rx()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return T(this,null,function*(){this.receiver=Yz._getInstance(t3()),this.receiver._subscribe("keyChanged",(n,r)=>T(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>T(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return T(this,null,function*(){var n,r;if(this.activeServiceWorker=yield Xz(),!this.activeServiceWorker)return;this.sender=new ib(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return T(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||e3()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return T(this,null,function*(){try{if(!indexedDB)return!1;let n=yield ob();return yield QP(n,Jm,"1"),yield YP(n,Jm),!0}catch{}return!1})}_withPendingWrite(n){return T(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(i=>QP(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return T(this,null,function*(){let r=yield this._withRetries(i=>i3(i,n));return this.localCache[n]=r,r})}_remove(n){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(r=>YP(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return T(this,null,function*(){let n=yield this._withRetries(o=>{let a=i_(o,!1).getAll();return new Na(a).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:a}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>T(this,null,function*(){return this._poll()}),o3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),xx=a3;var Fae=wx("rcb"),Vae=new xa(3e4,6e4);function c3(t,e){return e?ho(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ch=class extends Ih{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return HI(e,this._buildIdpRequest())}_linkToIdToken(e,n){return HI(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return HI(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function u3(t){return Dx(t.auth,new Ch(t),t.bypassAuthState)}function l3(t){let{auth:e,user:n}=t;return ue(n,e,"internal-error"),zz(n,new Ch(t),t.bypassAuthState)}function d3(t){return T(this,null,function*(){let{auth:e,user:n}=t;return ue(n,e,"internal-error"),Hz(n,new Ch(t),t.bypassAuthState)})}var sb=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>T(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return T(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}let d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(u)(d))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return u3;case"linkViaPopup":case"linkViaRedirect":return d3;case"reauthViaPopup":case"reauthViaRedirect":return l3;default:Ii(this.auth,"internal-error")}}resolve(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Bae=new xa(2e3,1e4);var h3="pendingRedirect",$m=new Map,ab=class t extends sb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return T(this,null,function*(){let e=$m.get(this.auth._key());if(!e){try{let r=(yield f3(this.resolver,this.auth))?yield ko(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$m.set(this.auth._key(),e)}return this.bypassAuthState||$m.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return T(this,null,function*(){if(e.type==="signInViaRedirect")return ko(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,ko(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return T(this,null,function*(){})}cleanUp(){}};function f3(t,e){return T(this,null,function*(){let n=m3(e),r=g3(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function p3(t,e){$m.set(t._key(),e)}function g3(t){return ho(t._redirectPersistence)}function m3(t){return Um(h3,t.config.apiKey,t.name)}function _3(t,e,n=!1){return T(this,null,function*(){if(nr(t.app))return Promise.reject(ds(t));let r=Ou(t),i=c3(r,e),a=yield new ab(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var v3=600*1e3,cb=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!y3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Nx(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pa(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=v3&&this.cachedEventUids.clear(),this.cachedEventUids.has(JP(e))}saveEventToCache(e){this.cachedEventUids.add(JP(e)),this.lastProcessedEventTime=Date.now()}};function JP(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Nx({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function y3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nx(t);default:return!1}}function E3(n){return T(this,arguments,function*(t,e={}){return fs(t,"GET","/v1/projects",e)})}var w3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I3=/^https?/;function b3(t){return T(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield E3(t);for(let n of e)try{if(T3(n))return}catch{}Ii(t,"unauthorized-domain")})}function T3(t){let e=qI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!I3.test(n))return!1;if(w3.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var C3=new xa(3e4,6e4);function XP(){let t=wi().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function D3(t){return new Promise((e,n)=>{var r,i,o;function a(){XP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XP(),n(Pa(t,"network-request-failed"))},timeout:C3.get()})}if(!((i=(r=wi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=wi().gapi)===null||o===void 0)&&o.load)a();else{let u=wx("iframefcb");return wi()[u]=()=>{gapi.load?a():n(Pa(t,"network-request-failed"))},Ex(`${xz()}?onload=${u}`).catch(d=>n(d))}}).catch(e=>{throw Hm=null,e})}var Hm=null;function S3(t){return Hm=Hm||D3(t),Hm}var A3=new xa(5e3,15e3),R3="__/auth/iframe",M3="emulator/auth/iframe",P3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},x3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N3(t){let e=t.config;ue(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?hb(e,M3):`https://${t.config.authDomain}/${R3}`,r={apiKey:e.apiKey,appName:t.name,v:os},i=x3.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${dh(r).slice(1)}`}function O3(t){return T(this,null,function*(){let e=yield S3(t),n=wi().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:N3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P3,dontclear:!0},r=>new Promise((i,o)=>T(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=Pa(t,"network-request-failed"),u=wi().setTimeout(()=>{o(a)},A3.get());function d(){wi().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{o(a)})})))})}var k3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L3=500,F3=600,V3="_blank",B3="http://localhost",t_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function j3(t,e,n,r=L3,i=F3){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",d=Object.assign(Object.assign({},k3),{width:r.toString(),height:i.toString(),top:o,left:a}),f=Yt().toLowerCase();n&&(u=fx(f)?V3:n),dx(f)&&(e=e||B3,d.scrollbars="yes");let m=Object.entries(d).reduce((I,[b,k])=>`${I}${b}=${k},`,"");if(Dz(f)&&u!=="_self")return U3(e||"",u),new t_(null);let y=window.open(e||"",u,m);ue(y,t,"popup-blocked");try{y.focus()}catch{}return new t_(y)}function U3(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var $3="__/auth/handler",H3="emulator/auth/handler",z3=encodeURIComponent("fac");function ex(t,e,n,r,i,o){return T(this,null,function*(){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");let a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:os,eventId:i};if(e instanceof Ym){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",dP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[m,y]of Object.entries(o||{}))a[m]=y}if(e instanceof nb){let m=e.getScopes().filter(y=>y!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);let u=a;for(let m of Object.keys(u))u[m]===void 0&&delete u[m];let d=yield t._getAppCheckToken(),f=d?`#${z3}=${encodeURIComponent(d)}`:"";return`${q3(t)}?${dh(u).slice(1)}${f}`})}function q3({config:t}){return t.emulator?hb(t,H3):`https://${t.authDomain}/${$3}`}var zI="webStorageSupport",ub=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bb,this._completeRedirectFn=_3,this._overrideRedirectResult=p3}_openPopup(e,n,r,i){return T(this,null,function*(){var o;hs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield ex(e,n,r,qI(),i);return j3(e,a,Ax())})}_openRedirect(e,n,r,i){return T(this,null,function*(){yield this._originValidation(e);let o=yield ex(e,n,r,qI(),i);return Jz(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(hs(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return T(this,null,function*(){let n=yield O3(e),r=new cb(e);return n.register("authEvent",i=>(ue(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zI,{type:zI},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[zI];a!==void 0&&n(!!a),Ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=b3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vx()||hx()||mb()}},Ox=ub;var tx="@firebase/auth",nx="1.10.8";var lb=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function G3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W3(t){jr(new Mn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;ue(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let d={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yx(t)},f=new JI(r,i,o,d);return Oz(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jr(new Mn("auth-internal",e=>{let n=Ou(e.getProvider("auth").getImmediate());return(r=>new lb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_t(tx,nx,G3(t)),_t(tx,nx,"esm2017")}var K3=300,Z3=yI("authIdTokenMaxAge")||K3,rx=null,Q3=t=>e=>T(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Z3)return;let i=n?.token;rx!==i&&(rx=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Tb(t=Aa()){let e=Mu(t,"auth");if(e.isInitialized())return e.getImmediate();let n=_b(t,{popupRedirectResolver:Ox,persistence:[xx,Sx,bb]}),r=yI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=Q3(o.toString());wb(n,a,()=>a(n.currentUser)),Dh(n,u=>a(u))}}let i=_I("auth");return i&&vb(n,`http://${i}`),n}function Y3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Mz({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Pa("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Y3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W3("Browser");function Fx(t){return new le(function(e){var n=Dh(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var Vx="auth",ka=class{constructor(e){return e}},Sh=class{constructor(){return xu(Vx)}};var Cb=new X("angularfire2.auth-instances");function B4(t,e){let n=ph(Vx,t,e);return n&&new ka(n)}function j4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ka(r)}}var U4={provide:Sh,deps:[[new Zn,Cb]]},$4={provide:ka,useFactory:B4,deps:[[new Zn,Cb],uo]};function Bx(t,...e){return _t("angularfire",ss.full,"auth"),ni([$4,U4,{provide:Cb,useFactory:j4(t),multi:!0,deps:[Je,Ct,as,Ma,[new Zn,Nu],...e]}])}var jx=dn(Fx,!0);var Ux=dn(Tb,!0);var $x=dn(Eb,!0,2);var Hx=dn(Ib,!0,2);var zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qx={};var fo,Db;(function(){var t;function e(M,C){function D(){}D.prototype=C.prototype,M.D=C.prototype,M.prototype=new D,M.prototype.constructor=M,M.C=function(R,P,N){for(var A=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)A[ht-2]=arguments[ht];return C.prototype[P].apply(R,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,C,D){D||(D=0);var R=Array(16);if(typeof C=="string")for(var P=0;16>P;++P)R[P]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(P=0;16>P;++P)R[P]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=M.g[0],D=M.g[1],P=M.g[2];var N=M.g[3],A=C+(N^D&(P^N))+R[0]+3614090360&4294967295;C=D+(A<<7&4294967295|A>>>25),A=N+(P^C&(D^P))+R[1]+3905402710&4294967295,N=C+(A<<12&4294967295|A>>>20),A=P+(D^N&(C^D))+R[2]+606105819&4294967295,P=N+(A<<17&4294967295|A>>>15),A=D+(C^P&(N^C))+R[3]+3250441966&4294967295,D=P+(A<<22&4294967295|A>>>10),A=C+(N^D&(P^N))+R[4]+4118548399&4294967295,C=D+(A<<7&4294967295|A>>>25),A=N+(P^C&(D^P))+R[5]+1200080426&4294967295,N=C+(A<<12&4294967295|A>>>20),A=P+(D^N&(C^D))+R[6]+2821735955&4294967295,P=N+(A<<17&4294967295|A>>>15),A=D+(C^P&(N^C))+R[7]+4249261313&4294967295,D=P+(A<<22&4294967295|A>>>10),A=C+(N^D&(P^N))+R[8]+1770035416&4294967295,C=D+(A<<7&4294967295|A>>>25),A=N+(P^C&(D^P))+R[9]+2336552879&4294967295,N=C+(A<<12&4294967295|A>>>20),A=P+(D^N&(C^D))+R[10]+4294925233&4294967295,P=N+(A<<17&4294967295|A>>>15),A=D+(C^P&(N^C))+R[11]+2304563134&4294967295,D=P+(A<<22&4294967295|A>>>10),A=C+(N^D&(P^N))+R[12]+1804603682&4294967295,C=D+(A<<7&4294967295|A>>>25),A=N+(P^C&(D^P))+R[13]+4254626195&4294967295,N=C+(A<<12&4294967295|A>>>20),A=P+(D^N&(C^D))+R[14]+2792965006&4294967295,P=N+(A<<17&4294967295|A>>>15),A=D+(C^P&(N^C))+R[15]+1236535329&4294967295,D=P+(A<<22&4294967295|A>>>10),A=C+(P^N&(D^P))+R[1]+4129170786&4294967295,C=D+(A<<5&4294967295|A>>>27),A=N+(D^P&(C^D))+R[6]+3225465664&4294967295,N=C+(A<<9&4294967295|A>>>23),A=P+(C^D&(N^C))+R[11]+643717713&4294967295,P=N+(A<<14&4294967295|A>>>18),A=D+(N^C&(P^N))+R[0]+3921069994&4294967295,D=P+(A<<20&4294967295|A>>>12),A=C+(P^N&(D^P))+R[5]+3593408605&4294967295,C=D+(A<<5&4294967295|A>>>27),A=N+(D^P&(C^D))+R[10]+38016083&4294967295,N=C+(A<<9&4294967295|A>>>23),A=P+(C^D&(N^C))+R[15]+3634488961&4294967295,P=N+(A<<14&4294967295|A>>>18),A=D+(N^C&(P^N))+R[4]+3889429448&4294967295,D=P+(A<<20&4294967295|A>>>12),A=C+(P^N&(D^P))+R[9]+568446438&4294967295,C=D+(A<<5&4294967295|A>>>27),A=N+(D^P&(C^D))+R[14]+3275163606&4294967295,N=C+(A<<9&4294967295|A>>>23),A=P+(C^D&(N^C))+R[3]+4107603335&4294967295,P=N+(A<<14&4294967295|A>>>18),A=D+(N^C&(P^N))+R[8]+1163531501&4294967295,D=P+(A<<20&4294967295|A>>>12),A=C+(P^N&(D^P))+R[13]+2850285829&4294967295,C=D+(A<<5&4294967295|A>>>27),A=N+(D^P&(C^D))+R[2]+4243563512&4294967295,N=C+(A<<9&4294967295|A>>>23),A=P+(C^D&(N^C))+R[7]+1735328473&4294967295,P=N+(A<<14&4294967295|A>>>18),A=D+(N^C&(P^N))+R[12]+2368359562&4294967295,D=P+(A<<20&4294967295|A>>>12),A=C+(D^P^N)+R[5]+4294588738&4294967295,C=D+(A<<4&4294967295|A>>>28),A=N+(C^D^P)+R[8]+2272392833&4294967295,N=C+(A<<11&4294967295|A>>>21),A=P+(N^C^D)+R[11]+1839030562&4294967295,P=N+(A<<16&4294967295|A>>>16),A=D+(P^N^C)+R[14]+4259657740&4294967295,D=P+(A<<23&4294967295|A>>>9),A=C+(D^P^N)+R[1]+2763975236&4294967295,C=D+(A<<4&4294967295|A>>>28),A=N+(C^D^P)+R[4]+1272893353&4294967295,N=C+(A<<11&4294967295|A>>>21),A=P+(N^C^D)+R[7]+4139469664&4294967295,P=N+(A<<16&4294967295|A>>>16),A=D+(P^N^C)+R[10]+3200236656&4294967295,D=P+(A<<23&4294967295|A>>>9),A=C+(D^P^N)+R[13]+681279174&4294967295,C=D+(A<<4&4294967295|A>>>28),A=N+(C^D^P)+R[0]+3936430074&4294967295,N=C+(A<<11&4294967295|A>>>21),A=P+(N^C^D)+R[3]+3572445317&4294967295,P=N+(A<<16&4294967295|A>>>16),A=D+(P^N^C)+R[6]+76029189&4294967295,D=P+(A<<23&4294967295|A>>>9),A=C+(D^P^N)+R[9]+3654602809&4294967295,C=D+(A<<4&4294967295|A>>>28),A=N+(C^D^P)+R[12]+3873151461&4294967295,N=C+(A<<11&4294967295|A>>>21),A=P+(N^C^D)+R[15]+530742520&4294967295,P=N+(A<<16&4294967295|A>>>16),A=D+(P^N^C)+R[2]+3299628645&4294967295,D=P+(A<<23&4294967295|A>>>9),A=C+(P^(D|~N))+R[0]+4096336452&4294967295,C=D+(A<<6&4294967295|A>>>26),A=N+(D^(C|~P))+R[7]+1126891415&4294967295,N=C+(A<<10&4294967295|A>>>22),A=P+(C^(N|~D))+R[14]+2878612391&4294967295,P=N+(A<<15&4294967295|A>>>17),A=D+(N^(P|~C))+R[5]+4237533241&4294967295,D=P+(A<<21&4294967295|A>>>11),A=C+(P^(D|~N))+R[12]+1700485571&4294967295,C=D+(A<<6&4294967295|A>>>26),A=N+(D^(C|~P))+R[3]+2399980690&4294967295,N=C+(A<<10&4294967295|A>>>22),A=P+(C^(N|~D))+R[10]+4293915773&4294967295,P=N+(A<<15&4294967295|A>>>17),A=D+(N^(P|~C))+R[1]+2240044497&4294967295,D=P+(A<<21&4294967295|A>>>11),A=C+(P^(D|~N))+R[8]+1873313359&4294967295,C=D+(A<<6&4294967295|A>>>26),A=N+(D^(C|~P))+R[15]+4264355552&4294967295,N=C+(A<<10&4294967295|A>>>22),A=P+(C^(N|~D))+R[6]+2734768916&4294967295,P=N+(A<<15&4294967295|A>>>17),A=D+(N^(P|~C))+R[13]+1309151649&4294967295,D=P+(A<<21&4294967295|A>>>11),A=C+(P^(D|~N))+R[4]+4149444226&4294967295,C=D+(A<<6&4294967295|A>>>26),A=N+(D^(C|~P))+R[11]+3174756917&4294967295,N=C+(A<<10&4294967295|A>>>22),A=P+(C^(N|~D))+R[2]+718787259&4294967295,P=N+(A<<15&4294967295|A>>>17),A=D+(N^(P|~C))+R[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,M.g[2]=M.g[2]+P&4294967295,M.g[3]=M.g[3]+N&4294967295}r.prototype.u=function(M,C){C===void 0&&(C=M.length);for(var D=C-this.blockSize,R=this.B,P=this.h,N=0;N<C;){if(P==0)for(;N<=D;)i(this,M,N),N+=this.blockSize;if(typeof M=="string"){for(;N<C;)if(R[P++]=M.charCodeAt(N++),P==this.blockSize){i(this,R),P=0;break}}else for(;N<C;)if(R[P++]=M[N++],P==this.blockSize){i(this,R),P=0;break}}this.h=P,this.o+=C},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;var D=8*this.o;for(C=M.length-8;C<M.length;++C)M[C]=D&255,D/=256;for(this.u(M),M=Array(16),C=D=0;4>C;++C)for(var R=0;32>R;R+=8)M[D++]=this.g[C]>>>R&255;return M};function o(M,C){var D=u;return Object.prototype.hasOwnProperty.call(D,M)?D[M]:D[M]=C(M)}function a(M,C){this.h=C;for(var D=[],R=!0,P=M.length-1;0<=P;P--){var N=M[P]|0;R&&N==C||(D[P]=N,R=!1)}this.g=D}var u={};function d(M){return-128<=M&&128>M?o(M,function(C){return new a([C|0],0>C?-1:0)}):new a([M|0],0>M?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return y;if(0>M)return j(f(-M));for(var C=[],D=1,R=0;M>=D;R++)C[R]=M/D|0,D*=4294967296;return new a(C,0)}function m(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return j(m(M.substring(1),C));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(C,8)),R=y,P=0;P<M.length;P+=8){var N=Math.min(8,M.length-P),A=parseInt(M.substring(P,P+N),C);8>N?(N=f(Math.pow(C,N)),R=R.j(N).add(f(A))):(R=R.j(D),R=R.add(f(A)))}return R}var y=d(0),I=d(1),b=d(16777216);t=a.prototype,t.m=function(){if(U(this))return-j(this).m();for(var M=0,C=1,D=0;D<this.g.length;D++){var R=this.i(D);M+=(0<=R?R:4294967296+R)*C,C*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(U(this))return"-"+j(this).toString(M);for(var C=f(Math.pow(M,6)),D=this,R="";;){var P=ze(D,C).g;D=q(D,P.j(C));var N=((0<D.g.length?D.g[0]:D.h)>>>0).toString(M);if(D=P,k(D))return N+R;for(;6>N.length;)N="0"+N;R=N+R}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(var C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function U(M){return M.h==-1}t.l=function(M){return M=q(this,M),U(M)?-1:k(M)?0:1};function j(M){for(var C=M.g.length,D=[],R=0;R<C;R++)D[R]=~M.g[R];return new a(D,~M.h).add(I)}t.abs=function(){return U(this)?j(this):this},t.add=function(M){for(var C=Math.max(this.g.length,M.g.length),D=[],R=0,P=0;P<=C;P++){var N=R+(this.i(P)&65535)+(M.i(P)&65535),A=(N>>>16)+(this.i(P)>>>16)+(M.i(P)>>>16);R=A>>>16,N&=65535,A&=65535,D[P]=A<<16|N}return new a(D,D[D.length-1]&-2147483648?-1:0)};function q(M,C){return M.add(j(C))}t.j=function(M){if(k(this)||k(M))return y;if(U(this))return U(M)?j(this).j(j(M)):j(j(this).j(M));if(U(M))return j(this.j(j(M)));if(0>this.l(b)&&0>M.l(b))return f(this.m()*M.m());for(var C=this.g.length+M.g.length,D=[],R=0;R<2*C;R++)D[R]=0;for(R=0;R<this.g.length;R++)for(var P=0;P<M.g.length;P++){var N=this.i(R)>>>16,A=this.i(R)&65535,ht=M.i(P)>>>16,Ir=M.i(P)&65535;D[2*R+2*P]+=A*Ir,ie(D,2*R+2*P),D[2*R+2*P+1]+=N*Ir,ie(D,2*R+2*P+1),D[2*R+2*P+1]+=A*ht,ie(D,2*R+2*P+1),D[2*R+2*P+2]+=N*ht,ie(D,2*R+2*P+2)}for(R=0;R<C;R++)D[R]=D[2*R+1]<<16|D[2*R];for(R=C;R<2*C;R++)D[R]=0;return new a(D,0)};function ie(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function oe(M,C){this.g=M,this.h=C}function ze(M,C){if(k(C))throw Error("division by zero");if(k(M))return new oe(y,y);if(U(M))return C=ze(j(M),C),new oe(j(C.g),j(C.h));if(U(C))return C=ze(M,j(C)),new oe(j(C.g),C.h);if(30<M.g.length){if(U(M)||U(C))throw Error("slowDivide_ only works with positive integers.");for(var D=I,R=C;0>=R.l(M);)D=$t(D),R=$t(R);var P=He(D,1),N=He(R,1);for(R=He(R,2),D=He(D,2);!k(R);){var A=N.add(R);0>=A.l(M)&&(P=P.add(D),N=A),R=He(R,1),D=He(D,1)}return C=q(M,P.j(C)),new oe(P,C)}for(P=y;0<=M.l(C);){for(D=Math.max(1,Math.floor(M.m()/C.m())),R=Math.ceil(Math.log(D)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),N=f(D),A=N.j(C);U(A)||0<A.l(M);)D-=R,N=f(D),A=N.j(C);k(N)&&(N=I),P=P.add(N),M=q(M,A)}return new oe(P,M)}t.A=function(M){return ze(this,M).h},t.and=function(M){for(var C=Math.max(this.g.length,M.g.length),D=[],R=0;R<C;R++)D[R]=this.i(R)&M.i(R);return new a(D,this.h&M.h)},t.or=function(M){for(var C=Math.max(this.g.length,M.g.length),D=[],R=0;R<C;R++)D[R]=this.i(R)|M.i(R);return new a(D,this.h|M.h)},t.xor=function(M){for(var C=Math.max(this.g.length,M.g.length),D=[],R=0;R<C;R++)D[R]=this.i(R)^M.i(R);return new a(D,this.h^M.h)};function $t(M){for(var C=M.g.length+1,D=[],R=0;R<C;R++)D[R]=M.i(R)<<1|M.i(R-1)>>>31;return new a(D,M.h)}function He(M,C){var D=C>>5;C%=32;for(var R=M.g.length-D,P=[],N=0;N<R;N++)P[N]=0<C?M.i(N+D)>>>C|M.i(N+D+1)<<32-C:M.i(N+D);return new a(P,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Db=qx.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,fo=qx.Integer=a}).apply(typeof zx<"u"?zx:typeof self<"u"?self:typeof window<"u"?window:{});var o_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},po={};var Sb,H4,ku,Ab,Ah,s_,Rb,Mb,Pb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,g,v){return l==Array.prototype||l==Object.prototype||(l[g]=v.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof o_=="object"&&o_];for(var g=0;g<l.length;++g){var v=l[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(l,g){if(g)e:{var v=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var x=l[w];if(!(x in v))break e;v=v[x]}l=l[l.length-1],w=v[l],g=g(w),g!=w&&g!=null&&e(v,l,{configurable:!0,writable:!0,value:g})}}function o(l,g){l instanceof String&&(l+="");var v=0,w=!1,x={next:function(){if(!w&&v<l.length){var V=v++;return{value:g(V,l[V]),done:!1}}return w=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(l){return l||function(){return o(this,function(g,v){return v})}});var a=a||{},u=this||self;function d(l){var g=typeof l;return g=g!="object"?g:l?Array.isArray(l)?"array":g:"null",g=="array"||g=="object"&&typeof l.length=="number"}function f(l){var g=typeof l;return g=="object"&&l!=null||g=="function"}function m(l,g,v){return l.call.apply(l.bind,arguments)}function y(l,g,v){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,w),l.apply(g,x)}}return function(){return l.apply(g,arguments)}}function I(l,g,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,I.apply(null,arguments)}function b(l,g){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function k(l,g){function v(){}v.prototype=g.prototype,l.aa=g.prototype,l.prototype=new v,l.prototype.constructor=l,l.Qb=function(w,x,V){for(var W=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)W[Ae-2]=arguments[Ae];return g.prototype[x].apply(w,W)}}function U(l){let g=l.length;if(0<g){let v=Array(g);for(let w=0;w<g;w++)v[w]=l[w];return v}return[]}function j(l,g){for(let v=1;v<arguments.length;v++){let w=arguments[v];if(d(w)){let x=l.length||0,V=w.length||0;l.length=x+V;for(let W=0;W<V;W++)l[x+W]=w[W]}else l.push(w)}}class q{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ie(l){return/^[\s\xa0]*$/.test(l)}function oe(){var l=u.navigator;return l&&(l=l.userAgent)?l:""}function ze(l){return ze[" "](l),l}ze[" "]=function(){};var $t=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function He(l,g,v){for(let w in l)g.call(v,l[w],w,l)}function M(l,g){for(let v in l)g.call(void 0,l[v],v,l)}function C(l){let g={};for(let v in l)g[v]=l[v];return g}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(l,g){let v,w;for(let x=1;x<arguments.length;x++){w=arguments[x];for(v in w)l[v]=w[v];for(let V=0;V<D.length;V++)v=D[V],Object.prototype.hasOwnProperty.call(w,v)&&(l[v]=w[v])}}function P(l){var g=1;l=l.split(":");let v=[];for(;0<g&&l.length;)v.push(l.shift()),g--;return l.length&&v.push(l.join(":")),v}function N(l){u.setTimeout(()=>{throw l},0)}function A(){var l=et;let g=null;return l.g&&(g=l.g,l.g=l.g.next,l.g||(l.h=null),g.next=null),g}class ht{constructor(){this.h=this.g=null}add(g,v){let w=Ir.get();w.set(g,v),this.h?this.h.next=w:this.g=w,this.h=w}}var Ir=new q(()=>new ve,l=>l.reset());class ve{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let wo,se=!1,et=new ht,tn=()=>{let l=u.Promise.resolve(void 0);wo=()=>{l.then(hn)}};var hn=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(v){N(v)}var g=Ir;g.j(l),100>g.h&&(g.h++,l.next=g.g,g.g=l)}se=!1};function Ze(){this.s=this.s,this.C=this.C}Ze.prototype.s=!1,Ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(l,g){this.type=l,this.g=this.target=g,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Oe=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var l=!1,g=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let v=()=>{};u.addEventListener("test",v,g),u.removeEventListener("test",v,g)}catch{}return l})();function wn(l,g){if(ge.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var v=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=g,g=l.relatedTarget){if($t){e:{try{ze(g.nodeName);var x=!0;break e}catch{}x=!1}x||(g=null)}}else v=="mouseover"?g=l.fromElement:v=="mouseout"&&(g=l.toElement);this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:zr[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&wn.aa.h.call(this)}}k(wn,ge);var zr={2:"touch",3:"pen",4:"mouse"};wn.prototype.h=function(){wn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Io="closure_listenable_"+(1e6*Math.random()|0),hl=0;function fl(l,g,v,w,x){this.listener=l,this.proxy=null,this.src=g,this.type=v,this.capture=!!w,this.ha=x,this.key=++hl,this.da=this.fa=!1}function qr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function bo(l){this.src=l,this.g={},this.h=0}bo.prototype.add=function(l,g,v,w,x){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var W=Ja(l,g,w,x);return-1<W?(g=l[W],v||(g.fa=!1)):(g=new fl(g,this.src,V,!!w,x),g.fa=v,l.push(g)),g};function pl(l,g){var v=g.type;if(v in l.g){var w=l.g[v],x=Array.prototype.indexOf.call(w,g,void 0),V;(V=0<=x)&&Array.prototype.splice.call(w,x,1),V&&(qr(g),l.g[v].length==0&&(delete l.g[v],l.h--))}}function Ja(l,g,v,w){for(var x=0;x<l.length;++x){var V=l[x];if(!V.da&&V.listener==g&&V.capture==!!v&&V.ha==w)return x}return-1}var Xa="closure_lm_"+(1e6*Math.random()|0),As={};function Rs(l,g,v,w,x){if(w&&w.once)return ec(l,g,v,w,x);if(Array.isArray(g)){for(var V=0;V<g.length;V++)Rs(l,g[V],v,w,x);return null}return v=rc(v),l&&l[Io]?l.K(g,v,f(w)?!!w.capture:!!w,x):of(l,g,v,!1,w,x)}function of(l,g,v,w,x,V){if(!g)throw Error("Invalid event type");var W=f(x)?!!x.capture:!!x,Ae=Ms(l);if(Ae||(l[Xa]=Ae=new bo(l)),v=Ae.add(g,v,w,W,V),v.proxy)return v;if(w=sf(),v.proxy=w,w.src=l,w.listener=v,l.addEventListener)Oe||(x=W),x===void 0&&(x=!1),l.addEventListener(g.toString(),w,x);else if(l.attachEvent)l.attachEvent(af(g.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function sf(){function l(v){return g.call(l.src,l.listener,v)}let g=Dv;return l}function ec(l,g,v,w,x){if(Array.isArray(g)){for(var V=0;V<g.length;V++)ec(l,g[V],v,w,x);return null}return v=rc(v),l&&l[Io]?l.L(g,v,f(w)?!!w.capture:!!w,x):of(l,g,v,!0,w,x)}function gl(l,g,v,w,x){if(Array.isArray(g))for(var V=0;V<g.length;V++)gl(l,g[V],v,w,x);else w=f(w)?!!w.capture:!!w,v=rc(v),l&&l[Io]?(l=l.i,g=String(g).toString(),g in l.g&&(V=l.g[g],v=Ja(V,v,w,x),-1<v&&(qr(V[v]),Array.prototype.splice.call(V,v,1),V.length==0&&(delete l.g[g],l.h--)))):l&&(l=Ms(l))&&(g=l.g[g.toString()],l=-1,g&&(l=Ja(g,v,w,x)),(v=-1<l?g[l]:null)&&tc(v))}function tc(l){if(typeof l!="number"&&l&&!l.da){var g=l.src;if(g&&g[Io])pl(g.i,l);else{var v=l.type,w=l.proxy;g.removeEventListener?g.removeEventListener(v,w,l.capture):g.detachEvent?g.detachEvent(af(v),w):g.addListener&&g.removeListener&&g.removeListener(w),(v=Ms(g))?(pl(v,l),v.h==0&&(v.src=null,g[Xa]=null)):qr(l)}}}function af(l){return l in As?As[l]:As[l]="on"+l}function Dv(l,g){if(l.da)l=!0;else{g=new wn(g,this);var v=l.listener,w=l.ha||l.src;l.fa&&tc(l),l=v.call(w,g)}return l}function Ms(l){return l=l[Xa],l instanceof bo?l:null}var nc="__closure_events_fn_"+(1e9*Math.random()>>>0);function rc(l){return typeof l=="function"?l:(l[nc]||(l[nc]=function(g){return l.handleEvent(g)}),l[nc])}function Ht(){Ze.call(this),this.i=new bo(this),this.M=this,this.F=null}k(Ht,Ze),Ht.prototype[Io]=!0,Ht.prototype.removeEventListener=function(l,g,v,w){gl(this,l,g,v,w)};function zt(l,g){var v,w=l.F;if(w)for(v=[];w;w=w.F)v.push(w);if(l=l.M,w=g.type||g,typeof g=="string")g=new ge(g,l);else if(g instanceof ge)g.target=g.target||l;else{var x=g;g=new ge(w,l),R(g,x)}if(x=!0,v)for(var V=v.length-1;0<=V;V--){var W=g.g=v[V];x=Ps(W,w,!0,g)&&x}if(W=g.g=l,x=Ps(W,w,!0,g)&&x,x=Ps(W,w,!1,g)&&x,v)for(V=0;V<v.length;V++)W=g.g=v[V],x=Ps(W,w,!1,g)&&x}Ht.prototype.N=function(){if(Ht.aa.N.call(this),this.i){var l=this.i,g;for(g in l.g){for(var v=l.g[g],w=0;w<v.length;w++)qr(v[w]);delete l.g[g],l.h--}}this.F=null},Ht.prototype.K=function(l,g,v,w){return this.i.add(String(l),g,!1,v,w)},Ht.prototype.L=function(l,g,v,w){return this.i.add(String(l),g,!0,v,w)};function Ps(l,g,v,w){if(g=l.i.g[String(g)],!g)return!0;g=g.concat();for(var x=!0,V=0;V<g.length;++V){var W=g[V];if(W&&!W.da&&W.capture==v){var Ae=W.listener,ct=W.ha||W.src;W.fa&&pl(l.i,W),x=Ae.call(ct,w)!==!1&&x}}return x&&!w.defaultPrevented}function cf(l,g,v){if(typeof l=="function")v&&(l=I(l,v));else if(l&&typeof l.handleEvent=="function")l=I(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:u.setTimeout(l,g||0)}function ml(l){l.g=cf(()=>{l.g=null,l.i&&(l.i=!1,ml(l))},l.l);let g=l.h;l.h=null,l.m.apply(null,g)}class _l extends Ze{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ml(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function To(l){Ze.call(this),this.h=l,this.g={}}k(To,Ze);var uf=[];function Co(l){He(l.g,function(g,v){this.g.hasOwnProperty(v)&&tc(g)},l),l.g={}}To.prototype.N=function(){To.aa.N.call(this),Co(this)},To.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vl=u.JSON.stringify,Sv=u.JSON.parse,lf=class{stringify(l){return u.JSON.stringify(l,void 0)}parse(l){return u.JSON.parse(l,void 0)}};function ic(){}ic.prototype.h=null;function yl(l){return l.h||(l.h=l.i())}function df(){}var xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function El(){ge.call(this,"d")}k(El,ge);function wl(){ge.call(this,"c")}k(wl,ge);var Ai={},hf=null;function Do(){return hf=hf||new Ht}Ai.La="serverreachability";function ff(l){ge.call(this,Ai.La,l)}k(ff,ge);function Ns(l){let g=Do();zt(g,new ff(g))}Ai.STAT_EVENT="statevent";function pf(l,g){ge.call(this,Ai.STAT_EVENT,l),this.stat=g}k(pf,ge);function nn(l){let g=Do();zt(g,new pf(g,l))}Ai.Ma="timingevent";function Bn(l,g){ge.call(this,Ai.Ma,l),this.size=g}k(Bn,ge);function J(l,g){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){l()},g)}function So(){this.g=!0}So.prototype.xa=function(){this.g=!1};function gf(l,g,v,w,x,V){l.info(function(){if(l.g)if(V)for(var W="",Ae=V.split("&"),ct=0;ct<Ae.length;ct++){var je=Ae[ct].split("=");if(1<je.length){var nt=je[0];je=je[1];var qt=nt.split("_");W=2<=qt.length&&qt[1]=="type"?W+(nt+"="+je+"&"):W+(nt+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+w+") [attempt "+x+"]: "+g+`
`+v+`
`+W})}function mf(l,g,v,w,x,V,W){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+x+"]: "+g+`
`+v+`
`+V+" "+W})}function Ri(l,g,v,w){l.info(function(){return"XMLHTTP TEXT ("+g+"): "+_f(l,v)+(w?" "+w:"")})}function Il(l,g){l.info(function(){return"TIMEOUT: "+g})}So.prototype.info=function(){};function _f(l,g){if(!l.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(l=0;l<v.length;l++)if(Array.isArray(v[l])){var w=v[l];if(!(2>w.length)){var x=w[1];if(Array.isArray(x)&&!(1>x.length)){var V=x[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<x.length;W++)x[W]=""}}}}return vl(v)}catch{return g}}var br={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tl;function oc(){}k(oc,ic),oc.prototype.g=function(){return new XMLHttpRequest},oc.prototype.i=function(){return{}},Tl=new oc;function Gr(l,g,v,w){this.j=l,this.i=g,this.l=v,this.R=w||1,this.U=new To(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vf}function vf(){this.i=null,this.g="",this.h=!1}var Cl={},Dl={};function Ao(l,g,v){l.L=1,l.v=Mo(rn(g)),l.m=v,l.P=!0,yf(l,null)}function yf(l,g){l.F=Date.now(),sc(l),l.A=rn(l.v);var v=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Qe(v.i,"t",w),l.C=0,v=l.j.J,l.h=new vf,l.g=qs(l.j,v?g:null,!l.m),0<l.O&&(l.M=new _l(I(l.Y,l,l.g),l.O)),g=l.U,v=l.g,w=l.ca;var x="readystatechange";Array.isArray(x)||(x&&(uf[0]=x.toString()),x=uf);for(var V=0;V<x.length;V++){var W=Rs(v,x[V],w||g.handleEvent,!1,g.h||g);if(!W)break;g.g[W.key]=W}g=l.H?C(l.H):{},l.m?(l.u||(l.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,g)):(l.u="GET",l.g.ea(l.A,l.u,null,g)),Ns(),gf(l.i,l.u,l.A,l.l,l.R,l.m)}Gr.prototype.ca=function(l){l=l.target;let g=this.M;g&&Un(l)==3?g.j():this.Y(l)},Gr.prototype.Y=function(l){try{if(l==this.g)e:{let qt=Un(this.g);var g=this.g.Ba();let Hn=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Df(this.g)))){this.J||qt!=4||g==7||(g==8||0>=Hn?Ns(3):Ns(2)),Os(this);var v=this.g.Z();this.X=v;t:if(Ef(this)){var w=Df(this.g);l="";var x=w.length,V=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),Tr(this);var W="";break t}this.h.i=new u.TextDecoder}for(g=0;g<x;g++)this.h.h=!0,l+=this.h.i.decode(w[g],{stream:!(V&&g==x-1)});w.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=v==200,mf(this.i,this.u,this.A,this.l,this.R,qt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,ct=this.g;if((Ae=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Ae)){var je=Ae;break t}}je=null}if(v=je)Ri(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ac(this,v);else{this.o=!1,this.s=3,nn(12),Wr(this),Tr(this);break e}}if(this.P){v=!0;let zn;for(;!this.J&&this.C<W.length;)if(zn=Av(this,W),zn==Dl){qt==4&&(this.s=4,nn(14),v=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==Cl){this.s=4,nn(15),Ri(this.i,this.l,W,"[Invalid Chunk]"),v=!1;break}else Ri(this.i,this.l,zn,null),ac(this,zn);if(Ef(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||W.length!=0||this.h.h||(this.s=1,nn(16),v=!1),this.o=this.o&&v,!v)Ri(this.i,this.l,W,"[Invalid Chunked Response]"),Wr(this),Tr(this);else if(0<W.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),fc(nt),nt.M=!0,nn(11))}}else Ri(this.i,this.l,W,null),ac(this,W);qt==4&&Wr(this),this.o&&!this.J&&(qt==4?Mf(this.j,this):(this.o=!1,sc(this)))}else Sf(this.g),v==400&&0<W.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),Wr(this),Tr(this)}}}catch{}finally{}};function Ef(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Av(l,g){var v=l.C,w=g.indexOf(`
`,v);return w==-1?Dl:(v=Number(g.substring(v,w)),isNaN(v)?Cl:(w+=1,w+v>g.length?Dl:(g=g.slice(w,w+v),l.C=w+v,g)))}Gr.prototype.cancel=function(){this.J=!0,Wr(this)};function sc(l){l.S=Date.now()+l.I,wf(l,l.I)}function wf(l,g){if(l.B!=null)throw Error("WatchDog timer not null");l.B=J(I(l.ba,l),g)}function Os(l){l.B&&(u.clearTimeout(l.B),l.B=null)}Gr.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(Il(this.i,this.A),this.L!=2&&(Ns(),nn(17)),Wr(this),this.s=2,Tr(this)):wf(this,this.S-l)};function Tr(l){l.j.G==0||l.J||Mf(l.j,l)}function Wr(l){Os(l);var g=l.M;g&&typeof g.ma=="function"&&g.ma(),l.M=null,Co(l.U),l.g&&(g=l.g,l.g=null,g.abort(),g.ma())}function ac(l,g){try{var v=l.j;if(v.G!=0&&(v.g==l||Kr(v.h,l))){if(!l.K&&Kr(v.h,l)&&v.G==3){try{var w=v.Da.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var x=w;if(x[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<l.F)pc(v),lc(v);else break e;Vl(v),nn(18)}}else v.za=x[1],0<v.za-v.T&&37500>x[2]&&v.F&&v.v==0&&!v.C&&(v.C=J(I(v.Za,v),6e3));if(1>=Ls(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ni(v,11)}else if((l.K||v.g==l)&&pc(v),!ie(g))for(x=v.Da.g.parse(g),g=0;g<x.length;g++){let je=x[g];if(v.T=je[0],je=je[1],v.G==2)if(je[0]=="c"){v.K=je[1],v.ia=je[2];let nt=je[3];nt!=null&&(v.la=nt,v.j.info("VER="+v.la));let qt=je[4];qt!=null&&(v.Aa=qt,v.j.info("SVER="+v.Aa));let Hn=je[5];Hn!=null&&typeof Hn=="number"&&0<Hn&&(w=1.5*Hn,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;let zn=l.g;if(zn){let Jr=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var V=w.h;V.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Zr(V,V.h),V.h=null))}if(w.D){let _c=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;_c&&(w.ya=_c,qe(w.I,w.D,_c))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-l.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var W=l;if(w.qa=Ul(w,w.J?w.ia:null,w.W),W.K){cc(w.h,W);var Ae=W,ct=w.L;ct&&(Ae.I=ct),Ae.B&&(Os(Ae),sc(Ae)),w.g=W}else hc(w);0<v.i.length&&dc(v)}else je[0]!="stop"&&je[0]!="close"||Ni(v,7);else v.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Ni(v,7):zs(v):je[0]!="noop"&&v.l&&v.l.ta(je),v.v=0)}}Ns(4)}catch{}}var ks=class{constructor(l,g){this.g=l,this.map=g}};function Ve(l){this.l=l||10,u.PerformanceNavigationTiming?(l=u.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ls(l){return l.h?1:l.g?l.g.size:0}function Kr(l,g){return l.h?l.h==g:l.g?l.g.has(g):!1}function Zr(l,g){l.g?l.g.add(g):l.h=g}function cc(l,g){l.h&&l.h==g?l.h=null:l.g&&l.g.has(g)&&l.g.delete(g)}Ve.prototype.cancel=function(){if(this.i=Ie(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Ie(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let g=l.i;for(let v of l.g.values())g=g.concat(v.D);return g}return U(l.i)}function ft(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(d(l)){for(var g=[],v=l.length,w=0;w<v;w++)g.push(l[w]);return g}g=[],v=0;for(w in l)g[v++]=l[w];return g}function Sl(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(d(l)||typeof l=="string"){var g=[];l=l.length;for(var v=0;v<l;v++)g.push(v);return g}g=[],v=0;for(let w in l)g[v++]=w;return g}}}function Fs(l,g){if(l.forEach&&typeof l.forEach=="function")l.forEach(g,void 0);else if(d(l)||typeof l=="string")Array.prototype.forEach.call(l,g,void 0);else for(var v=Sl(l),w=ft(l),x=w.length,V=0;V<x;V++)g.call(void 0,w[V],v&&v[V],l)}var In=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rv(l,g){if(l){l=l.split("&");for(var v=0;v<l.length;v++){var w=l[v].indexOf("="),x=null;if(0<=w){var V=l[v].substring(0,w);x=l[v].substring(w+1)}else V=l[v];g(V,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function or(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof or){this.h=l.h,it(this,l.j),this.o=l.o,this.g=l.g,sr(this,l.s),this.l=l.l;var g=l.i,v=new Pi;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),Ro(this,v),this.m=l.m}else l&&(g=String(l).match(In))?(this.h=!1,it(this,g[1]||"",!0),this.o=Cr(g[2]||""),this.g=Cr(g[3]||"",!0),sr(this,g[4]),this.l=Cr(g[5]||"",!0),Ro(this,g[6]||"",!0),this.m=Cr(g[7]||"")):(this.h=!1,this.i=new Pi(null,this.h))}or.prototype.toString=function(){var l=[],g=this.j;g&&l.push(Mi(g,Vs,!0),":");var v=this.g;return(v||g=="file")&&(l.push("//"),(g=this.o)&&l.push(Mi(g,Vs,!0),"@"),l.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&l.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(Mi(v,v.charAt(0)=="/"?Ml:Rl,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",Mi(v,If)),l.join("")};function rn(l){return new or(l)}function it(l,g,v){l.j=v?Cr(g,!0):g,l.j&&(l.j=l.j.replace(/:$/,""))}function sr(l,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);l.s=g}else l.s=null}function Ro(l,g,v){g instanceof Pi?(l.i=g,Pl(l.i,l.h)):(v||(g=Mi(g,uc)),l.i=new Pi(g,l.h))}function qe(l,g,v){l.i.set(g,v)}function Mo(l){return qe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Cr(l,g){return l?g?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Mi(l,g,v){return typeof l=="string"?(l=encodeURI(l).replace(g,Al),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Al(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Vs=/[#\/\?@]/g,Rl=/[#\?:]/g,Ml=/[#\?]/g,uc=/[#\?@]/g,If=/#/g;function Pi(l,g){this.h=this.g=null,this.i=l||null,this.j=!!g}function Qr(l){l.g||(l.g=new Map,l.h=0,l.i&&Rv(l.i,function(g,v){l.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}t=Pi.prototype,t.add=function(l,g){Qr(this),this.i=null,l=xi(this,l);var v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(g),this.h+=1,this};function me(l,g){Qr(l),g=xi(l,g),l.g.has(g)&&(l.i=null,l.h-=l.g.get(g).length,l.g.delete(g))}function jn(l,g){return Qr(l),g=xi(l,g),l.g.has(g)}t.forEach=function(l,g){Qr(this),this.g.forEach(function(v,w){v.forEach(function(x){l.call(g,x,w,this)},this)},this)},t.na=function(){Qr(this);let l=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let w=0;w<g.length;w++){let x=l[w];for(let V=0;V<x.length;V++)v.push(g[w])}return v},t.V=function(l){Qr(this);let g=[];if(typeof l=="string")jn(this,l)&&(g=g.concat(this.g.get(xi(this,l))));else{l=Array.from(this.g.values());for(let v=0;v<l.length;v++)g=g.concat(l[v])}return g},t.set=function(l,g){return Qr(this),this.i=null,l=xi(this,l),jn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[g]),this.h+=1,this},t.get=function(l,g){return l?(l=this.V(l),0<l.length?String(l[0]):g):g};function Qe(l,g,v){me(l,g),0<v.length&&(l.i=null,l.g.set(xi(l,g),U(v)),l.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var w=g[v];let V=encodeURIComponent(String(w)),W=this.V(w);for(w=0;w<W.length;w++){var x=V;W[w]!==""&&(x+="="+encodeURIComponent(String(W[w]))),l.push(x)}}return this.i=l.join("&")};function xi(l,g){return g=String(g),l.j&&(g=g.toLowerCase()),g}function Pl(l,g){g&&!l.j&&(Qr(l),l.i=null,l.g.forEach(function(v,w){var x=w.toLowerCase();w!=x&&(me(this,w),Qe(this,x,v))},l)),l.j=g}function xl(l,g){let v=new So;if(u.Image){let w=new Image;w.onload=b(fn,v,"TestLoadImage: loaded",!0,g,w),w.onerror=b(fn,v,"TestLoadImage: error",!1,g,w),w.onabort=b(fn,v,"TestLoadImage: abort",!1,g,w),w.ontimeout=b(fn,v,"TestLoadImage: timeout",!1,g,w),u.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else g(!1)}function Nl(l,g){let v=new So,w=new AbortController,x=setTimeout(()=>{w.abort(),fn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(l,{signal:w.signal}).then(V=>{clearTimeout(x),V.ok?fn(v,"TestPingServer: ok",!0,g):fn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(x),fn(v,"TestPingServer: error",!1,g)})}function fn(l,g,v,w,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),w(v)}catch{}}function Ol(){this.g=new lf}function Bs(l,g,v){let w=v||"";try{Fs(l,function(x,V){let W=x;f(x)&&(W=vl(x)),g.push(w+V+"="+encodeURIComponent(W))})}catch(x){throw g.push(w+"type="+encodeURIComponent("_badmap")),x}}function pt(l){this.l=l.Ub||null,this.j=l.eb||!1}k(pt,ic),pt.prototype.g=function(){return new ar(this.l,this.j)},pt.prototype.i=(function(l){return function(){return l}})({});function ar(l,g){Ht.call(this),this.D=l,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(ar,Ht),t=ar.prototype,t.open=function(l,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=g,this.readyState=1,js(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(g.body=l),(this.D||u).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kl(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function kl(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var g=l.value?l.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!l.done}))&&(this.response=this.responseText+=g)}l.done?Po(this):js(this),this.readyState==3&&kl(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Po(this))},t.Qa=function(l){this.g&&(this.response=l,Po(this))},t.ga=function(){this.g&&Po(this)};function Po(l){l.readyState=4,l.l=null,l.j=null,l.v=null,js(l)}t.setRequestHeader=function(l,g){this.u.append(l,g)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=g.next();return l.join(`\r
`)};function js(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ar.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ll(l){let g="";return He(l,function(v,w){g+=w,g+=":",g+=v,g+=`\r
`}),g}function Us(l,g,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Ll(v),typeof l=="string"?v!=null&&encodeURIComponent(String(v)):qe(l,g,v))}function at(l){Ht.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(at,Ht);var bf=/^https?$/i,ke=["POST","PUT"];t=at.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,g,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);g=g?g.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tl.g(),this.v=this.o?yl(this.o):yl(Tl),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(l),!0),this.B=!1}catch(V){Tf(this,V);return}if(l=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var x in w)v.set(x,w[x]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let V of w.keys())v.set(V,w.get(V));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(V=>V.toLowerCase()=="content-type"),x=u.FormData&&l instanceof u.FormData,!(0<=Array.prototype.indexOf.call(ke,g,void 0))||w||x||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,W]of v)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cf(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Tf(this,V)}};function Tf(l,g){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=g,l.m=5,Pn(l),$s(l)}function Pn(l){l.A||(l.A=!0,zt(l,"complete"),zt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,zt(this,"complete"),zt(this,"abort"),$s(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$s(this,!0)),at.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xo(this):this.bb())},t.bb=function(){xo(this)};function xo(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Un(l)!=4||l.Z()!=2)){if(l.u&&Un(l)==4)cf(l.Ea,0,l);else if(zt(l,"readystatechange"),Un(l)==4){l.h=!1;try{let W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var w;if(w=W===0){var x=String(l.D).match(In)[1]||null;!x&&u.self&&u.self.location&&(x=u.self.location.protocol.slice(0,-1)),w=!bf.test(x?x.toLowerCase():"")}v=w}if(v)zt(l,"complete"),zt(l,"success");else{l.m=6;try{var V=2<Un(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",Pn(l)}}finally{$s(l)}}}}function $s(l,g){if(l.g){Cf(l);let v=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,g||zt(l,"ready");try{v.onreadystatechange=w}catch{}}}function Cf(l){l.I&&(u.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Un(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var g=this.g.responseText;return l&&g.indexOf(l)==0&&(g=g.substring(l.length)),Sv(g)}};function Df(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Sf(l){let g={};l=(l.g&&2<=Un(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(ie(l[w]))continue;var v=P(l[w]);let x=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let V=g[x]||[];g[x]=V,V.push(v)}M(g,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(l,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||g}function Af(l){this.Aa=0,this.i=[],this.j=new So,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hs("baseRetryDelayMs",5e3,l),this.cb=Hs("retryDelaySeedMs",1e4,l),this.Wa=Hs("forwardChannelMaxRetries",2,l),this.wa=Hs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ve(l&&l.concurrentRequestLimit),this.Da=new Ol,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Af.prototype,t.la=8,t.G=1,t.connect=function(l,g,v,w){nn(0),this.W=l,this.H=g||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Ul(this,null,this.W),dc(this)};function zs(l){if($n(l),l.G==3){var g=l.U++,v=rn(l.I);if(qe(v,"SID",l.K),qe(v,"RID",g),qe(v,"TYPE","terminate"),No(l,v),g=new Gr(l,l.j,g),g.L=2,g.v=Mo(rn(v)),v=!1,u.navigator&&u.navigator.sendBeacon)try{v=u.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&u.Image&&(new Image().src=g.v,v=!0),v||(g.g=qs(g.j,null),g.g.ea(g.v)),g.F=Date.now(),sc(g)}jl(l)}function lc(l){l.g&&(fc(l),l.g.cancel(),l.g=null)}function $n(l){lc(l),l.u&&(u.clearTimeout(l.u),l.u=null),pc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&u.clearTimeout(l.s),l.s=null)}function dc(l){if(!tt(l.h)&&!l.s){l.s=!0;var g=l.Ga;wo||tn(),se||(wo(),se=!0),et.add(g,l),l.B=0}}function Rf(l,g){return Ls(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=g.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=J(I(l.Ga,l,g),gc(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let x=new Gr(this,this.j,l),V=this.o;if(this.S&&(V?(V=C(V),R(V,this.S)):V=this.S),this.m!==null||this.O||(x.H=V,V=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Fl(this,x,g),v=rn(this.I),qe(v,"RID",l),qe(v,"CVER",22),this.D&&qe(v,"X-HTTP-Session-Id",this.D),No(this,v),V&&(this.O?g="headers="+encodeURIComponent(String(Ll(V)))+"&"+g:this.m&&Us(v,this.m,V)),Zr(this.h,x),this.Ua&&qe(v,"TYPE","init"),this.P?(qe(v,"$req",g),qe(v,"SID","null"),x.T=!0,Ao(x,v,null)):Ao(x,v,g),this.G=2}}else this.G==3&&(l?Dr(this,l):this.i.length==0||tt(this.h)||Dr(this))};function Dr(l,g){var v;g?v=g.l:v=l.U++;let w=rn(l.I);qe(w,"SID",l.K),qe(w,"RID",v),qe(w,"AID",l.T),No(l,w),l.m&&l.o&&Us(w,l.m,l.o),v=new Gr(l,l.j,v,l.B+1),l.m===null&&(v.H=l.o),g&&(l.i=g.D.concat(l.i)),g=Fl(l,v,1e3),v.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Zr(l.h,v),Ao(v,w,g)}function No(l,g){l.H&&He(l.H,function(v,w){qe(g,w,v)}),l.l&&Fs({},function(v,w){qe(g,w,v)})}function Fl(l,g,v){v=Math.min(l.i.length,v);var w=l.l?I(l.l.Na,l.l,l):null;e:{var x=l.i;let V=-1;for(;;){let W=["count="+v];V==-1?0<v?(V=x[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let Ae=!0;for(let ct=0;ct<v;ct++){let je=x[ct].g,nt=x[ct].map;if(je-=V,0>je)V=Math.max(0,x[ct].g-100),Ae=!1;else try{Bs(nt,W,"req"+je+"_")}catch{w&&w(nt)}}if(Ae){w=W.join("&");break e}}}return l=l.i.splice(0,v),g.D=l,w}function hc(l){if(!l.g&&!l.u){l.Y=1;var g=l.Fa;wo||tn(),se||(wo(),se=!0),et.add(g,l),l.v=0}}function Vl(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=J(I(l.Fa,l),gc(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Bl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=J(I(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),lc(this),Bl(this))};function fc(l){l.A!=null&&(u.clearTimeout(l.A),l.A=null)}function Bl(l){l.g=new Gr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var g=rn(l.qa);qe(g,"RID","rpc"),qe(g,"SID",l.K),qe(g,"AID",l.T),qe(g,"CI",l.F?"0":"1"),!l.F&&l.ja&&qe(g,"TO",l.ja),qe(g,"TYPE","xmlhttp"),No(l,g),l.m&&l.o&&Us(g,l.m,l.o),l.L&&(l.g.I=l.L);var v=l.g;l=l.ia,v.L=1,v.v=Mo(rn(g)),v.m=null,v.P=!0,yf(v,l)}t.Za=function(){this.C!=null&&(this.C=null,lc(this),Vl(this),nn(19))};function pc(l){l.C!=null&&(u.clearTimeout(l.C),l.C=null)}function Mf(l,g){var v=null;if(l.g==g){pc(l),fc(l),l.g=null;var w=2}else if(Kr(l.h,g))v=g.D,cc(l.h,g),w=1;else return;if(l.G!=0){if(g.o)if(w==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var x=l.B;w=Do(),zt(w,new Bn(w,v)),dc(l)}else hc(l);else if(x=g.s,x==3||x==0&&0<g.X||!(w==1&&Rf(l,g)||w==2&&Vl(l)))switch(v&&0<v.length&&(g=l.h,g.i=g.i.concat(v)),x){case 1:Ni(l,5);break;case 4:Ni(l,10);break;case 3:Ni(l,6);break;default:Ni(l,2)}}}function gc(l,g){let v=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(v*=2),v*g}function Ni(l,g){if(l.j.info("Error code "+g),g==2){var v=I(l.fb,l),w=l.Xa;let x=!w;w=new or(w||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||it(w,"https"),Mo(w),x?xl(w.toString(),v):Nl(w.toString(),v)}else nn(2);l.G=0,l.l&&l.l.sa(g),jl(l),$n(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function jl(l){if(l.G=0,l.ka=[],l.l){let g=Ie(l.h);(g.length!=0||l.i.length!=0)&&(j(l.ka,g),j(l.ka,l.i),l.h.i.length=0,U(l.i),l.i.length=0),l.l.ra()}}function Ul(l,g,v){var w=v instanceof or?rn(v):new or(v);if(w.g!="")g&&(w.g=g+"."+w.g),sr(w,w.s);else{var x=u.location;w=x.protocol,g=g?g+"."+x.hostname:x.hostname,x=+x.port;var V=new or(null);w&&it(V,w),g&&(V.g=g),x&&sr(V,x),v&&(V.l=v),w=V}return v=l.D,g=l.ya,v&&g&&qe(w,v,g),qe(w,"VER",l.la),No(l,w),w}function qs(l,g,v){if(g&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=l.Ca&&!l.pa?new at(new pt({eb:v})):new at(l.pa),g.Ha(l.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yr(){}t=Yr.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function mc(){}mc.prototype.g=function(l,g){return new Ot(l,g)};function Ot(l,g){Ht.call(this),this.g=new Af(g),this.l=l,this.h=g&&g.messageUrlParams||null,l=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(l?l["X-WebChannel-Content-Type"]=g.messageContentType:l={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(l?l["X-WebChannel-Client-Profile"]=g.va:l={"X-WebChannel-Client-Profile":g.va}),this.g.S=l,(l=g&&g.Sb)&&!ie(l)&&(this.g.m=l),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ie(g)&&(this.g.D=g,l=this.h,l!==null&&g in l&&(l=this.h,g in l&&delete l[g])),this.j=new Oi(this)}k(Ot,Ht),Ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){zs(this.g)},Ot.prototype.o=function(l){var g=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.u&&(v={},v.__data__=vl(l),l=v);g.i.push(new ks(g.Ya++,l)),g.G==3&&dc(g)},Ot.prototype.N=function(){this.g.l=null,delete this.j,zs(this.g),delete this.g,Ot.aa.N.call(this)};function bn(l){El.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var g=l.__sm__;if(g){e:{for(let v in g){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,g=g!==null&&l in g?g[l]:void 0),this.data=g}else this.data=l}k(bn,El);function $l(){wl.call(this),this.status=1}k($l,wl);function Oi(l){this.g=l}k(Oi,Yr),Oi.prototype.ua=function(){zt(this.g,"a")},Oi.prototype.ta=function(l){zt(this.g,new bn(l))},Oi.prototype.sa=function(l){zt(this.g,new $l)},Oi.prototype.ra=function(){zt(this.g,"b")},mc.prototype.createWebChannel=mc.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,Pb=po.createWebChannelTransport=function(){return new mc},Mb=po.getStatEventTarget=function(){return Do()},Rb=po.Event=Ai,s_=po.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,Ah=po.ErrorCode=br,bl.COMPLETE="complete",Ab=po.EventType=bl,df.EventType=xs,xs.OPEN="a",xs.CLOSE="b",xs.ERROR="c",xs.MESSAGE="d",Ht.prototype.listen=Ht.prototype.K,ku=po.WebChannel=df,H4=po.FetchXmlHttpFactory=pt,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,Sb=po.XhrIo=at}).apply(typeof o_<"u"?o_:typeof self<"u"?self:typeof window<"u"?window:{});var Gx="@firebase/firestore",Wx="4.8.0";var Jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");var nl="11.10.0";var ja=new yi("@firebase/firestore");function Lu(){return ja.logLevel}function Y(t,...e){if(ja.logLevel<=Ne.DEBUG){let n=e.map(TC);ja.debug(`Firestore (${nl}): ${t}`,...n)}}function mo(t,...e){if(ja.logLevel<=Ne.ERROR){let n=e.map(TC);ja.error(`Firestore (${nl}): ${t}`,...n)}}function Es(t,...e){if(ja.logLevel<=Ne.WARN){let n=e.map(TC);ja.warn(`Firestore (${nl}): ${t}`,...n)}}function TC(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ae(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,jN(t,r,n)}function jN(t,e,n){let r=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mo(r),new Error(r)}function Ke(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||jN(e,i,r)}function we(t,e){return t}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var go=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var f_=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Lb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}},Fb=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Vb=class{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let r=this.i,i=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve(),o=new go;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new go,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let d=o;e.enqueueRetryable(()=>T(this,null,function*(){yield d.promise,yield i(this.currentUser)}))},u=d=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?u(d):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new go)}},0),a()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new f_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}},Bb=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},jb=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Bb(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},p_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ub=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);let r=o=>{o.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new p_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new p_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function z4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function UN(){return new TextEncoder}var Oh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=z4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function Me(t,e){return t<e?-1:t>e?1:0}function $b(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Me(r,i);{let o=UN(),a=q4(o.encode(Kx(t,n)),o.encode(Kx(e,n)));return a!==0?a:Me(r,i)}}n+=r>65535?2:1}return Me(t.length,e.length)}function Kx(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function q4(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Me(t[n],e[n]);return Me(t.length,e.length)}function zu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Zx="__name__",g_=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Me(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):$b(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fo.fromString(e.substring(4,e.length-2))}},dt=class t extends g_{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new K($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},G4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ir=class t extends g_{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return G4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zx}static keyField(){return new t([Zx])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new K($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new K($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new K($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new K($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var re=class t{constructor(e){this.path=e}static fromPath(e){return new t(dt.fromString(e))}static fromName(e){return new t(dt.fromString(e).popFirst(5))}static empty(){return new t(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new dt(e.slice()))}};function $N(t,e,n){if(!n)throw new K($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function W4(t,e,n,r){if(e===!0&&r===!0)throw new K($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Qx(t){if(!re.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yx(t){if(re.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function HN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function W_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae(12329,{type:typeof t})}function ps(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=W_(t);throw new K($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xt(t,e){let n={typeString:t};return e&&(n.value=e),n}function zh(t,e){if(!HN(t))throw new K($.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new K($.INVALID_ARGUMENT,n);return!0}var Jx=-62135596800,Xx=1e6,Nt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Xx);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Jx)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xx}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zh(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Jx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:xt("string",Nt._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};var Ce=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Nt(0,0))}static max(){return new t(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var kh=-1,Hb=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Hb.UNKNOWN_ID=-1;function K4(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new Nt(n+1,0):new Nt(n,r));return new Ua(i,re.empty(),e)}function Z4(t){return new Ua(t.readTime,t.key,kh)}var Ua=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Ce.min(),re.empty(),kh)}static max(){return new t(Ce.max(),re.empty(),kh)}};function Q4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}var Y4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function rl(t){return T(this,null,function*(){if(t.code!==$.FAILED_PRECONDITION||t.message!==Y4)throw t;Y("LocalStore","Unexpectedly lost primary lease")})}var z=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++o,a&&o===i&&n()},d=>r(d))}),a=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,a=new Array(o),u=0;for(let d=0;d<o;d++){let f=d;n(e[f]).next(m=>{a[f]=m,++u,u===o&&r(a)},m=>i(m))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function J4(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function il(t){return t.name==="IndexedDbTransactionError"}var CC=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),DC=-1;function K_(t){return t==null}function Lh(t){return t===0&&1/t==-1/0}function X4(t){return typeof t=="number"&&Number.isInteger(t)&&!Lh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var zN="";function eq(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=eN(e)),e=tq(t.get(n),e);return eN(e)}function tq(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case zN:n+="";break;default:n+=o}}return n}function eN(t){return t+zN+""}var nq="remoteDocuments",qN="owner";var GN="mutationQueues";var WN="mutations";var KN="documentMutations",rq="remoteDocumentsV14";var ZN="remoteDocumentGlobal";var QN="targets";var YN="targetDocuments";var JN="targetGlobal",XN="collectionParents";var eO="clientMetadata";var tO="bundles";var nO="namedQueries";var iq="indexConfiguration";var oq="indexState";var sq="indexEntries";var rO="documentOverlays";var aq="globals";var cq=[GN,WN,KN,nq,QN,qN,JN,YN,eO,ZN,XN,tO,nO],qce=[...cq,rO],uq=[GN,WN,KN,rq,QN,qN,JN,YN,eO,ZN,XN,tO,nO,rO],lq=uq,dq=[...lq,iq,oq,sq];var Gce=[...dq,aq];function tN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iO(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var vt=class t{constructor(e,n){this.comparator=e,this.root=n||bi.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ju(this.root,e,this.comparator,!0)}},ju=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},bi=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}};bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1;bi.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new bi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xt=class t{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new m_(this.data.getIterator())}getIteratorFrom(e){return new m_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},m_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Er=class t{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new t([])}unionWith(e){let n=new Xt(ir.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zu(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var __=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var En=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new __("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};En.EMPTY_BYTE_STRING=new En("");var hq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _o(t){if(Ke(!!t,39018),typeof t=="string"){let e=0,n=hq.exec(t);if(Ke(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vo(t){return typeof t=="string"?En.fromBase64String(t):En.fromUint8Array(t)}var oO="server_timestamp",sO="__type__",aO="__previous_value__",cO="__local_write_time__";function SC(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[sO])===null||n===void 0?void 0:n.stringValue)===oO}function Z_(t){let e=t.mapValue.fields[aO];return SC(e)?Z_(e):e}function Fh(t){let e=_o(t.mapValue.fields[cO].timestampValue);return new Nt(e.seconds,e.nanos)}var qb=class{constructor(e,n,r,i,o,a,u,d,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=m}},v_="(default)",y_=class t{constructor(e,n){this.projectId=e,this.database=n||v_}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===v_}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var AC="__type__",uO="__max__",a_={mapValue:{fields:{__type__:{stringValue:uO}}}},RC="__vector__",qu="value";function ws(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?SC(t)?4:dO(t)?9007199254740991:lO(t)?10:11:ae(28295,{value:t})}function Di(t,e){if(t===e)return!0;let n=ws(t);if(n!==ws(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fh(t).isEqual(Fh(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=_o(i.timestampValue),u=_o(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return vo(i.bytesValue).isEqual(vo(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return lt(i.geoPointValue.latitude)===lt(o.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return lt(i.integerValue)===lt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=lt(i.doubleValue),u=lt(o.doubleValue);return a===u?Lh(a)===Lh(u):isNaN(a)&&isNaN(u)}return!1})(t,e);case 9:return zu(t.arrayValue.values||[],e.arrayValue.values||[],Di);case 10:case 11:return(function(i,o){let a=i.mapValue.fields||{},u=o.mapValue.fields||{};if(tN(a)!==tN(u))return!1;for(let d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!Di(a[d],u[d])))return!1;return!0})(t,e);default:return ae(52216,{left:t})}}function Vh(t,e){return(t.values||[]).find(n=>Di(n,e))!==void 0}function Gu(t,e){if(t===e)return 0;let n=ws(t),r=ws(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return(function(o,a){let u=lt(o.integerValue||o.doubleValue),d=lt(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(t,e);case 3:return nN(t.timestampValue,e.timestampValue);case 4:return nN(Fh(t),Fh(e));case 5:return $b(t.stringValue,e.stringValue);case 6:return(function(o,a){let u=vo(o),d=vo(a);return u.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,a){let u=o.split("/"),d=a.split("/");for(let f=0;f<u.length&&f<d.length;f++){let m=Me(u[f],d[f]);if(m!==0)return m}return Me(u.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,a){let u=Me(lt(o.latitude),lt(a.latitude));return u!==0?u:Me(lt(o.longitude),lt(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return rN(t.arrayValue,e.arrayValue);case 10:return(function(o,a){var u,d,f,m;let y=o.fields||{},I=a.fields||{},b=(u=y[qu])===null||u===void 0?void 0:u.arrayValue,k=(d=I[qu])===null||d===void 0?void 0:d.arrayValue,U=Me(((f=b?.values)===null||f===void 0?void 0:f.length)||0,((m=k?.values)===null||m===void 0?void 0:m.length)||0);return U!==0?U:rN(b,k)})(t.mapValue,e.mapValue);case 11:return(function(o,a){if(o===a_.mapValue&&a===a_.mapValue)return 0;if(o===a_.mapValue)return 1;if(a===a_.mapValue)return-1;let u=o.fields||{},d=Object.keys(u),f=a.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let y=0;y<d.length&&y<m.length;++y){let I=$b(d[y],m[y]);if(I!==0)return I;let b=Gu(u[d[y]],f[m[y]]);if(b!==0)return b}return Me(d.length,m.length)})(t.mapValue,e.mapValue);default:throw ae(23264,{le:n})}}function nN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);let n=_o(t),r=_o(e),i=Me(n.seconds,r.seconds);return i!==0?i:Me(n.nanos,r.nanos)}function rN(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Gu(n[i],r[i]);if(o)return o}return Me(n.length,r.length)}function Wu(t){return Gb(t)}function Gb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=_o(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return vo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return re.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Gb(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${Gb(n.fields[a])}`;return i+"}"})(t.mapValue):ae(61005,{value:t})}function l_(t){switch(ws(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Z_(t);return e?16+l_(e):16;case 5:return 2*t.stringValue.length;case 6:return vo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+l_(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Cs(r.fields,(o,a)=>{i+=o.length+l_(a)}),i})(t.mapValue);default:throw ae(13486,{value:t})}}function iN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wb(t){return!!t&&"integerValue"in t}function MC(t){return!!t&&"arrayValue"in t}function oN(t){return!!t&&"nullValue"in t}function sN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function d_(t){return!!t&&"mapValue"in t}function lO(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[AC])===null||n===void 0?void 0:n.stringValue)===RC}function Mh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Mh(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uO}var Kce={mapValue:{fields:{[AC]:{stringValue:RC},[qu]:{arrayValue:{}}}}};var rr=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!d_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mh(n)}setAll(e){let n=ir.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){let d=this.getFieldsMap(n);this.applyChanges(d,r,i),r={},i=[],n=u.popLast()}a?r[u.lastSegment()]=Mh(a):i.push(u.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());d_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];d_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Cs(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Mh(this.value))}};function hO(t){let e=[];return Cs(t.fields,(n,r)=>{let i=new ir([n]);if(d_(r)){let o=hO(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new Er(e)}var $r=class t{constructor(e,n,r,i,o,a,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new t(e,0,Ce.min(),Ce.min(),Ce.min(),rr.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Ce.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Ce.min(),Ce.min(),rr.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Ce.min(),Ce.min(),rr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ku=class{constructor(e,n){this.position=e,this.inclusive=n}};function aN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],a=t.position[i];if(o.field.isKeyField()?r=re.comparator(re.fromName(a.referenceValue),n.key):r=Gu(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function cN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Di(t.position[n],e.position[n]))return!1;return!0}var $a=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function fq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var E_=class{},Pt=class t extends E_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Zb(e,n,r):n==="array-contains"?new Jb(e,r):n==="in"?new Xb(e,r):n==="not-in"?new eT(e,r):n==="array-contains-any"?new tT(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Qb(e,r):new Yb(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Gu(n,this.value)):n!==null&&ws(this.value)===ws(n)&&this.matchesComparison(Gu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Hr=class t extends E_{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return fO(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function fO(t){return t.op==="and"}function pO(t){return pq(t)&&fO(t)}function pq(t){for(let e of t.filters)if(e instanceof Hr)return!1;return!0}function Kb(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+Wu(t.value);if(pO(t))return t.filters.map(e=>Kb(e)).join(",");{let e=t.filters.map(n=>Kb(n)).join(",");return`${t.op}(${e})`}}function gO(t,e){return t instanceof Pt?(function(r,i){return i instanceof Pt&&r.op===i.op&&r.field.isEqual(i.field)&&Di(r.value,i.value)})(t,e):t instanceof Hr?(function(r,i){return i instanceof Hr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,u)=>o&&gO(a,i.filters[u]),!0):!1})(t,e):void ae(19439)}function mO(t){return t instanceof Pt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Wu(n.value)}`})(t):t instanceof Hr?(function(n){return n.op.toString()+" {"+n.getFilters().map(mO).join(" ,")+"}"})(t):"Filter"}var Zb=class extends Pt{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){let n=re.comparator(e.key,this.key);return this.matchesComparison(n)}},Qb=class extends Pt{constructor(e,n){super(e,"in",n),this.keys=_O("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Yb=class extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=_O("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function _O(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}var Jb=class extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return MC(n)&&Vh(n.arrayValue,this.value)}},Xb=class extends Pt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Vh(this.value.arrayValue,n)}},eT=class extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vh(this.value.arrayValue,n)}},tT=class extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!MC(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vh(this.value.arrayValue,r))}};var nT=class{constructor(e,n=null,r=[],i=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.Pe=null}};function uN(t,e=null,n=[],r=[],i=null,o=null,a=null){return new nT(t,e,n,r,i,o,a)}function PC(t){let e=we(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Kb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),K_(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wu(r)).join(",")),e.Pe=n}return e.Pe}function xC(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cN(t.startAt,e.startAt)&&cN(t.endAt,e.endAt)}function rT(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Is=class{constructor(e,n=null,r=[],i=[],o=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function gq(t,e,n,r,i,o,a,u){return new Is(t,e,n,r,i,o,a,u)}function NC(t){return new Is(t)}function lN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vO(t){return t.collectionGroup!==null}function Ph(t){let e=we(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Xt(ir.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new $a(o,r))}),n.has(ir.keyField().canonicalString())||e.Te.push(new $a(ir.keyField(),r))}return e.Te}function Ti(t){let e=we(t);return e.Ie||(e.Ie=mq(e,Ph(t))),e.Ie}function mq(t,e){if(t.limitType==="F")return uN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new $a(i.field,o)});let n=t.endAt?new Ku(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ku(t.startAt.position,t.startAt.inclusive):null;return uN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function iT(t,e){let n=t.filters.concat([e]);return new Is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function oT(t,e,n){return new Is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Q_(t,e){return xC(Ti(t),Ti(e))&&t.limitType===e.limitType}function yO(t){return`${PC(Ti(t))}|lt:${t.limitType}`}function Fu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>mO(i)).join(", ")}]`),K_(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Wu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Wu(i)).join(",")),`Target(${r})`})(Ti(t))}; limitType=${t.limitType})`}function Y_(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Ph(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,d){let f=aN(a,u,d);return a.inclusive?f<=0:f<0})(r.startAt,Ph(r),i)||r.endAt&&!(function(a,u,d){let f=aN(a,u,d);return a.inclusive?f>=0:f>0})(r.endAt,Ph(r),i))})(t,e)}function _q(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EO(t){return(e,n)=>{let r=!1;for(let i of Ph(t)){let o=vq(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function vq(t,e,n){let r=t.field.isKeyField()?re.comparator(e.key,n.key):(function(o,a,u){let d=a.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Gu(d,f):ae(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae(19790,{direction:t.dir})}}var yo=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return iO(this.inner)}size(){return this.innerSize}};var yq=new vt(re.comparator);function Eo(){return yq}var wO=new vt(re.comparator);function Rh(...t){let e=wO;for(let n of t)e=e.insert(n.key,n);return e}function IO(t){let e=wO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function La(){return xh()}function bO(){return xh()}function xh(){return new yo(t=>t.toString(),(t,e)=>t.isEqual(e))}var Eq=new vt(re.comparator),wq=new Xt(re.comparator);function Fe(...t){let e=wq;for(let n of t)e=e.add(n);return e}var Iq=new Xt(Me);function bq(){return Iq}function OC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function TO(t){return{integerValue:""+t}}function Tq(t,e){return X4(e)?TO(e):OC(t,e)}var Zu=class{constructor(){this._=void 0}};function Cq(t,e,n){return t instanceof Ha?(function(i,o){let a={fields:{[sO]:{stringValue:oO},[cO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&SC(o)&&(o=Z_(o)),o&&(a.fields[aO]=o),{mapValue:a}})(n,e):t instanceof za?DO(t,e):t instanceof qa?SO(t,e):(function(i,o){let a=CO(i,o),u=dN(a)+dN(i.Ee);return Wb(a)&&Wb(i.Ee)?TO(u):OC(i.serializer,u)})(t,e)}function Dq(t,e,n){return t instanceof za?DO(t,e):t instanceof qa?SO(t,e):n}function CO(t,e){return t instanceof Qu?(function(r){return Wb(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ha=class extends Zu{},za=class extends Zu{constructor(e){super(),this.elements=e}};function DO(t,e){let n=AO(e);for(let r of t.elements)n.some(i=>Di(i,r))||n.push(r);return{arrayValue:{values:n}}}var qa=class extends Zu{constructor(e){super(),this.elements=e}};function SO(t,e){let n=AO(e);for(let r of t.elements)n=n.filter(i=>!Di(i,r));return{arrayValue:{values:n}}}var Qu=class extends Zu{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function dN(t){return lt(t.integerValue||t.doubleValue)}function AO(t){return MC(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var sT=class{constructor(e,n){this.field=e,this.transform=n}};function Sq(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof za&&i instanceof za||r instanceof qa&&i instanceof qa?zu(r.elements,i.elements,Di):r instanceof Qu&&i instanceof Qu?Di(r.Ee,i.Ee):r instanceof Ha&&i instanceof Ha})(t.transform,e.transform)}var aT=class{constructor(e,n){this.version=e,this.transformResults=n}},gs=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function h_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Yu=class{};function RO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new w_(t.key,gs.none()):new Ga(t.key,t.data,gs.none());{let n=t.data,r=rr.empty(),i=new Xt(ir.comparator);for(let o of e.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new Si(t.key,r,new Er(i.toArray()),gs.none())}}function Aq(t,e,n){t instanceof Ga?(function(i,o,a){let u=i.value.clone(),d=fN(i.fieldTransforms,o,a.transformResults);u.setAll(d),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(t,e,n):t instanceof Si?(function(i,o,a){if(!h_(i.precondition,o))return void o.convertToUnknownDocument(a.version);let u=fN(i.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(MO(i)),d.setAll(u),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(t,e,n):(function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function Nh(t,e,n,r){return t instanceof Ga?(function(o,a,u,d){if(!h_(o.precondition,a))return u;let f=o.value.clone(),m=pN(o.fieldTransforms,d,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof Si?(function(o,a,u,d){if(!h_(o.precondition,a))return u;let f=pN(o.fieldTransforms,d,a),m=a.data;return m.setAll(MO(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))})(t,e,n,r):(function(o,a,u){return h_(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(t,e,n)}function Rq(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=CO(r.transform,i||null);o!=null&&(n===null&&(n=rr.empty()),n.set(r.field,o))}return n||null}function hN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zu(r,i,(o,a)=>Sq(o,a))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ga=class extends Yu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Si=class extends Yu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function MO(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function fN(t,e,n){let r=new Map;Ke(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],a=o.transform,u=e.data.field(o.field);r.set(o.field,Dq(a,u,n[i]))}return r}function pN(t,e,n){let r=new Map;for(let i of t){let o=i.transform,a=n.data.field(i.field);r.set(i.field,Cq(o,a,e))}return r}var w_=class extends Yu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},cT=class extends Yu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var uT=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Aq(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Nh(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Nh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=bO();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,u=this.applyToLocalView(a,o.mutatedFields);u=n.has(i.key)?null:u;let d=RO(a,u);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Fe())}isEqual(e){return this.batchId===e.batchId&&zu(this.mutations,e.mutations,(n,r)=>hN(n,r))&&zu(this.baseMutations,e.baseMutations,(n,r)=>hN(n,r))}},lT=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ke(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return Eq})(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)}};var dT=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var hT=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Rt,$e;function Mq(t){switch(t){case $.OK:return ae(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ae(15467,{code:t})}}function PO(t){if(t===void 0)return mo("GRPC error has no .code"),$.UNKNOWN;switch(t){case Rt.OK:return $.OK;case Rt.CANCELLED:return $.CANCELLED;case Rt.UNKNOWN:return $.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return $.INTERNAL;case Rt.UNAVAILABLE:return $.UNAVAILABLE;case Rt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Rt.NOT_FOUND:return $.NOT_FOUND;case Rt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Rt.ABORTED:return $.ABORTED;case Rt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Rt.DATA_LOSS:return $.DATA_LOSS;default:return ae(39323,{code:t})}}($e=Rt||(Rt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";var gN=null;var Pq=new fo([4294967295,4294967295],0);function mN(t){let e=UN().encode(t),n=new Db;return n.update(e),new Uint8Array(n.digest())}function _N(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new fo([n,r],0),new fo([i,o],0)]}var fT=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fa(`Invalid padding: ${n}`);if(r<0)throw new Fa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fa(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=fo.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(fo.fromNumber(r)));return i.compare(Pq)===1&&(i=new fo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=mN(e),[r,i]=_N(n);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);if(!this.ye(a))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new t(o,i,n);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.fe===0)return;let n=mN(e),[r,i]=_N(n);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);this.we(a)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Fa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var I_=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Bh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Ce.min(),i,new vt(Me),Eo(),Fe())}},Bh=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Fe(),Fe(),Fe())}};var Uu=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},b_=class{constructor(e,n){this.targetId=e,this.De=n}},T_=class{constructor(e,n,r=En.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},C_=class{constructor(){this.ve=0,this.Ce=vN(),this.Fe=En.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Fe(),n=Fe(),r=Fe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae(38017,{changeType:o})}}),new Bh(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=vN()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},pT=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Eo(),this.je=c_(),this.Je=c_(),this.He=new vt(Me)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(rT(o))if(r===0){let a=new re(o.path);this.Xe(n,a,$r.newNoDocument(a,Ce.min()))}else Ke(r===1,20013,{expectedCount:r});else{let a=this.ot(n);if(a!==r){let u=this._t(e),d=u?this.ut(u,e,a):1;if(d!==0){this.rt(n);let f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}gN?.ct((function(m,y,I,b,k){var U,j,q,ie,oe,ze;let $t={localCacheCount:m,existenceFilterCount:y.count,databaseId:I.database,projectId:I.projectId},He=y.unchangedNames;return He&&($t.bloomFilter={applied:k===0,hashCount:(U=He?.hashCount)!==null&&U!==void 0?U:0,bitmapLength:(ie=(q=(j=He?.bits)===null||j===void 0?void 0:j.bitmap)===null||q===void 0?void 0:q.length)!==null&&ie!==void 0?ie:0,padding:(ze=(oe=He?.bits)===null||oe===void 0?void 0:oe.padding)!==null&&ze!==void 0?ze:0,mightContain:M=>{var C;return(C=b?.mightContain(M))!==null&&C!==void 0&&C}}),$t})(a,e.De,this.We.lt(),u,d))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,a,u;try{a=vo(r).toUint8Array()}catch(d){if(d instanceof __)return Es("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new fT(a,i,o)}catch(d){return Es(d instanceof Fa?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let a=this.We.lt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,a)=>{let u=this.st(a);if(u){if(o.current&&rT(u.target)){let d=new re(u.target.path);this.Tt(d).has(a)||this.It(a,d)||this.Xe(a,d,$r.newNoDocument(d,e))}o.Ne&&(n.set(a,o.Le()),o.ke())}});let r=Fe();this.Je.forEach((o,a)=>{let u=!0;a.forEachWhile(d=>{let f=this.st(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ze.forEach((o,a)=>a.setReadTime(e));let i=new I_(e,n,this.He,this.ze,r);return this.ze=Eo(),this.je=c_(),this.Je=c_(),this.He=new vt(Me),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new C_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Xt(Me),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Xt(Me),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new C_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function c_(){return new vt(re.comparator)}function vN(){return new vt(re.comparator)}var xq={asc:"ASCENDING",desc:"DESCENDING"},Nq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oq={and:"AND",or:"OR"},gT=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function mT(t,e){return t.useProto3Json||K_(e)?e:{value:e}}function D_(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kq(t,e){return D_(t,e.toTimestamp())}function Ci(t){return Ke(!!t,49232),Ce.fromTimestamp((function(n){let r=_o(n);return new Nt(r.seconds,r.nanos)})(t))}function kC(t,e){return _T(t,e).canonicalString()}function _T(t,e){let n=(function(i){return new dt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function NO(t){let e=dt.fromString(t);return Ke(VO(e),10190,{key:e.toString()}),e}function vT(t,e){return kC(t.databaseId,e.path)}function xb(t,e){let n=NO(e);if(n.get(1)!==t.databaseId.projectId)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(kO(n))}function OO(t,e){return kC(t.databaseId,e)}function Lq(t){let e=NO(t);return e.length===4?dt.emptyPath():kO(e)}function yT(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kO(t){return Ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function yN(t,e,n){return{name:vT(t,e),fields:n.value.mapValue.fields}}function Fq(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ae(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,m){return f.useProto3Json?(Ke(m===void 0||typeof m=="string",58123),En.fromBase64String(m||"")):(Ke(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),En.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(f){let m=f.code===void 0?$.UNKNOWN:PO(f.code);return new K(m,f.message||"")})(a);n=new T_(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xb(t,r.document.name),o=Ci(r.document.updateTime),a=r.document.createTime?Ci(r.document.createTime):Ce.min(),u=new rr({mapValue:{fields:r.document.fields}}),d=$r.newFoundDocument(i,o,a,u),f=r.targetIds||[],m=r.removedTargetIds||[];n=new Uu(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xb(t,r.document),o=r.readTime?Ci(r.readTime):Ce.min(),a=$r.newNoDocument(i,o),u=r.removedTargetIds||[];n=new Uu([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xb(t,r.document),o=r.removedTargetIds||[];n=new Uu([],o,i,null)}else{if(!("filter"in e))return ae(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new hT(i,o),u=r.targetId;n=new b_(u,a)}}return n}function Vq(t,e){let n;if(e instanceof Ga)n={update:yN(t,e.key,e.value)};else if(e instanceof w_)n={delete:vT(t,e.key)};else if(e instanceof Si)n={update:yN(t,e.key,e.data),updateMask:Wq(e.fieldMask)};else{if(!(e instanceof cT))return ae(16599,{Rt:e.type});n={verify:vT(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,a){let u=a.transform;if(u instanceof Ha)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof za)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof qa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Qu)return{fieldPath:a.field.canonicalString(),increment:u.Ee};throw ae(20930,{transform:a.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:kq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ae(27497)})(t,e.precondition)),n}function Bq(t,e){return t&&t.length>0?(Ke(e!==void 0,14353),t.map(n=>(function(i,o){let a=i.updateTime?Ci(i.updateTime):Ci(o);return a.isEqual(Ce.min())&&(a=Ci(o)),new aT(a,i.transformResults||[])})(n,e))):[]}function jq(t,e){return{documents:[OO(t,e.path)]}}function Uq(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OO(t,i);let o=(function(f){if(f.length!==0)return FO(Hr.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let a=(function(f){if(f.length!==0)return f.map(m=>(function(I){return{field:Vu(I.field),direction:zq(I.dir)}})(m))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);let u=mT(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:n,parent:i}}function $q(t){let e=Lq(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ke(r===1,65062);let m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=(function(y){let I=LO(y);return I instanceof Hr&&pO(I)?I.getFilters():[I]})(n.where));let a=[];n.orderBy&&(a=(function(y){return y.map(I=>(function(k){return new $a(Bu(k.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(I))})(n.orderBy));let u=null;n.limit&&(u=(function(y){let I;return I=typeof y=="object"?y.value:y,K_(I)?null:I})(n.limit));let d=null;n.startAt&&(d=(function(y){let I=!!y.before,b=y.values||[];return new Ku(b,I)})(n.startAt));let f=null;return n.endAt&&(f=(function(y){let I=!y.before,b=y.values||[];return new Ku(b,I)})(n.endAt)),gq(e,i,a,o,u,"F",d,f)}function Hq(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LO(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Bu(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Bu(n.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Bu(n.unaryFilter.field);return Pt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Bu(n.unaryFilter.field);return Pt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Pt.create(Bu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Hr.create(n.compositeFilter.filters.map(r=>LO(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae(1026)}})(n.compositeFilter.op))})(t):ae(30097,{filter:t})}function zq(t){return xq[t]}function qq(t){return Nq[t]}function Gq(t){return Oq[t]}function Vu(t){return{fieldPath:t.canonicalString()}}function Bu(t){return ir.fromServerFormat(t.fieldPath)}function FO(t){return t instanceof Pt?(function(n){if(n.op==="=="){if(sN(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NAN"}};if(oN(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sN(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NOT_NAN"}};if(oN(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vu(n.field),op:qq(n.op),value:n.value}}})(t):t instanceof Hr?(function(n){let r=n.getFilters().map(i=>FO(i));return r.length===1?r[0]:{compositeFilter:{op:Gq(n.op),filters:r}}})(t):ae(54877,{filter:t})}function Wq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var jh=class t{constructor(e,n,r,i,o=Ce.min(),a=Ce.min(),u=En.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ET=class{constructor(e){this.gt=e}};function Kq(t){let e=$q({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?oT(e,e.limit,"L"):e}var S_=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(lt(e.integerValue));else if("doubleValue"in e){let r=lt(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Lh(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=_o(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(vo(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?dO(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):lO(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):ae(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let a=qu,u=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(lt(u)),this.xt(a,n),this.Dt(o[a],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),re.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};S_.Ut=new S_;var wT=class{constructor(){this.Dn=new IT}addToCollectionParentIndex(e,n){return this.Dn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Ua.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Ua.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}},IT=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xt(dt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xt(dt.comparator)).toArray()}};var Zce=new Uint8Array(0);var EN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BO=41943040,yr=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};yr.DEFAULT_COLLECTION_PERCENTILE=10,yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yr.DEFAULT=new yr(BO,yr.DEFAULT_COLLECTION_PERCENTILE,yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yr.DISABLED=new yr(-1,0,0);var Uh=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var wN="LruGarbageCollector",Zq=1048576;function IN([t,e],[n,r]){let i=Me(t,n);return i===0?Me(e,r):i}var bT=class{constructor(e){this.Tr=e,this.buffer=new Xt(IN),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();IN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},TT=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Y(wN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>T(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){il(n)?Y(wN,"Ignoring IndexedDB error during garbage collection: ",n):yield rl(n)}yield this.Rr(3e5)}))}},CT=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(CC.ue);let r=new bT(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(EN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),EN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,a,u,d,f,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,a=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),Lu()<=Ne.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}};function Qq(t,e){return new CT(t,e)}var DT=class{constructor(){this.changes=new yo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$r.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ST=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var AT=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Nh(r.mutation,i,Er.empty(),Nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Fe()){let i=La();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let a=Rh();return o.forEach((u,d)=>{a=a.insert(u,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){let r=La();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Fe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,r,i){let o=Eo(),a=xh(),u=(function(){return xh()})();return n.forEach((d,f)=>{let m=r.get(f.key);i.has(f.key)&&(m===void 0||m.mutation instanceof Si)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Nh(m.mutation,f,m.mutation.getFieldMask(),Nt.now())):a.set(f.key,Er.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>{var y;return u.set(f,new ST(m,(y=a.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){let r=xh(),i=new vt((a,u)=>a-u),o=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(let u of a)u.keys().forEach(d=>{let f=n.get(d);if(f===null)return;let m=r.get(d)||Er.empty();m=u.applyToLocalView(f,m),r.set(d,m);let y=(i.get(u.batchId)||Fe()).add(d);i=i.insert(u.batchId,y)})}).next(()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let d=u.getNext(),f=d.key,m=d.value,y=bO();m.forEach(I=>{if(!o.has(I)){let b=RO(n.get(I),r.get(I));b!==null&&y.set(I,b),o=o.add(I)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return z.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(a){return re.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):z.resolve(La()),u=kh,d=o;return a.next(f=>z.forEach(f,(m,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(m)?z.resolve():this.remoteDocumentCache.getEntry(e,m).next(I=>{d=d.insert(m,I)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,Fe())).next(m=>({batchId:u,changes:IO(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let i=Rh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,a=Rh();return this.indexManager.getCollectionParents(e,o).next(u=>z.forEach(u,d=>{let f=(function(y,I){return new Is(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(m=>{m.forEach((y,I)=>{a=a.insert(y,I)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(a=>{o.forEach((d,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,$r.newInvalidDocument(m)))});let u=Rh();return a.forEach((d,f)=>{let m=o.get(d);m!==void 0&&Nh(m.mutation,f,Er.empty(),Nt.now()),Y_(n,f)&&(u=u.insert(d,f))}),u})}};var RT=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return z.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ci(i.createTime)}})(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:Kq(i.bundledQuery),readTime:Ci(i.readTime)}})(n)),z.resolve()}};var MT=class{constructor(){this.overlays=new vt(re.comparator),this.kr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){let r=La();return z.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),z.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){let i=La(),o=n.length+1,a=new re(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new vt((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=La(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let u=La(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=i)););return z.resolve(u)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new dT(n,r));let o=this.kr.get(n);o===void 0&&(o=Fe(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var PT=class{constructor(){this.sessionToken=En.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}};var $h=class{constructor(){this.qr=new Xt(Mt.Qr),this.$r=new Xt(Mt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Mt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Mt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new re(new dt([])),r=new Mt(n,e),i=new Mt(n,e+1),o=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),o.push(a.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new re(new dt([])),r=new Mt(n,e),i=new Mt(n,e+1),o=Fe();return this.$r.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let n=new Mt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Mt=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return re.comparator(e.key,n.key)||Me(e.Hr,n.Hr)}static Ur(e,n){return Me(e.Hr,n.Hr)||re.comparator(e.key,n.key)}};var xT=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Xt(Mt.Qr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new uT(o,n,r,i);this.mutationQueue.push(a);for(let u of i)this.Yr=this.Yr.add(new Mt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,n){return z.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?DC:this.er-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Mt(n,0),i=new Mt(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],a=>{let u=this.Zr(a.Hr);o.push(u)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(Me);return n.forEach(i=>{let o=new Mt(i,0),a=new Mt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,a],u=>{r=r.add(u.Hr)})}),z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;re.isDocumentKey(o)||(o=o.child(""));let a=new Mt(new re(o),0),u=new Xt(Me);return this.Yr.forEachWhile(d=>{let f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(d.Hr)),!0)},a),z.resolve(this.ei(u))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ke(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return z.forEach(n.mutations,i=>{let o=new Mt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Mt(n,0),i=this.Yr.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var NT=class{constructor(e){this.ni=e,this.docs=(function(){return new vt(re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():$r.newInvalidDocument(n))}getEntries(e,n){let r=Eo();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():$r.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Eo(),a=n.path,u=new re(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){let{key:f,value:{document:m}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Q4(Z4(m),r)<=0||(i.has(m.key)||Y_(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ae(9500)}ri(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new OT(this)}getSize(e){return z.resolve(this.size)}},OT=class extends DT{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var kT=class{constructor(e){this.persistence=e,this.ii=new yo(n=>PC(n),xC),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.si=0,this.oi=new $h,this.targetCount=0,this._i=Uh.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),z.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Uh(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.hr(n),z.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((a,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),z.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.oi.containsKey(n))}};var A_=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new CC(0),this.ci=!1,this.ci=!0,this.li=new PT,this.referenceDelegate=e(this),this.hi=new kT(this),this.indexManager=new wT,this.remoteDocumentCache=(function(i){return new NT(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new ET(n),this.Ti=new RT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new xT(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);let i=new LT(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},LT=class extends zb{constructor(e){super(),this.currentSequenceNumber=e}},FT=class t{constructor(e){this.persistence=e,this.Ai=new $h,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw ae(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.mi,r=>{let i=re.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,Ce.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return z.or([()=>z.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},R_=class t{constructor(e,n){this.persistence=e,this.gi=new yo(r=>eq(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Qq(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?z.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,n).next(u=>{u||(r++,o.removeEntry(a,Ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),z.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=l_(e.data.value)),n}Sr(e,n,r){return z.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var VT=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Fe(),i=Fe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var BT=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var jT=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return uP()?8:J4(Yt())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new BT;return this.ws(e,n,a).next(u=>{if(o.result=u,this.Rs)return this.Ss(e,n,a,u.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Lu()<=Ne.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Fu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(Lu()<=Ne.DEBUG&&Y("QueryEngine","Query:",Fu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Lu()<=Ne.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Fu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(n))):z.resolve())}ps(e,n){if(lN(n))return z.resolve(null);let r=Ti(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=oT(n,null,"F"),r=Ti(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=Fe(...o);return this.gs.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(d=>{let f=this.bs(n,u);return this.Ds(n,f,a,d.readTime)?this.ps(e,oT(n,null,"F")):this.vs(e,f,n,d)}))})))}ys(e,n,r,i){return lN(n)||i.isEqual(Ce.min())?z.resolve(null):this.gs.getDocuments(e,r).next(o=>{let a=this.bs(n,o);return this.Ds(n,a,r,i)?z.resolve(null):(Lu()<=Ne.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fu(n)),this.vs(e,a,n,K4(i,kh)).next(u=>u))})}bs(e,n){let r=new Xt(EO(e));return n.forEach((i,o)=>{Y_(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Lu()<=Ne.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Fu(n)),this.gs.getDocumentsMatchingQuery(e,n,Ua.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}};var LC="LocalStore",Yq=3e8,UT=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new vt(Me),this.Ms=new yo(o=>PC(o),xC),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AT(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function Jq(t,e,n,r){return new UT(t,e,n,r)}function jO(t,e){return T(this,null,function*(){let n=we(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],u=[],d=Fe();for(let f of i){a.push(f.batchId);for(let m of f.mutations)d=d.add(m.key)}for(let f of o){u.push(f.batchId);for(let m of f.mutations)d=d.add(m.key)}return n.localDocuments.getDocuments(r,d).next(f=>({Bs:f,removedBatchIds:a,addedBatchIds:u}))})})})}function Xq(t,e){let n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,m){let y=f.batch,I=y.keys(),b=z.resolve();return I.forEach(k=>{b=b.next(()=>m.getEntry(d,k)).next(U=>{let j=f.docVersions.get(k);Ke(j!==null,48541),U.version.compareTo(j)<0&&(y.applyToRemoteDocument(U,f),U.isValidDocument()&&(U.setReadTime(f.commitVersion),m.addEntry(U)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(d,y))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=Fe();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function UO(t){let e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function eG(t,e){let n=we(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let u=[];e.targetChanges.forEach((m,y)=>{let I=i.get(y);if(!I)return;u.push(n.hi.removeMatchingKeys(o,m.removedDocuments,y).next(()=>n.hi.addMatchingKeys(o,m.addedDocuments,y)));let b=I.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(En.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,r)),i=i.insert(y,b),(function(U,j,q){return U.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=Yq?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(I,b,m)&&u.push(n.hi.updateTargetData(o,b))});let d=Eo(),f=Fe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(tG(o,a,e.documentUpdates).next(m=>{d=m.Ls,f=m.ks})),!r.isEqual(Ce.min())){let m=n.hi.getLastRemoteSnapshotVersion(o).next(y=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(m)}return z.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.Fs=i,o))}function tG(t,e,n){let r=Fe(),i=Fe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=Eo();return n.forEach((u,d)=>{let f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(Ce.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):Y(LC,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{Ls:a,ks:i}})}function nG(t,e){let n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=DC),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rG(t,e){let n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,z.resolve(i)):n.hi.allocateTargetId(r).next(a=>(i=new jh(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function $T(t,e,n){return T(this,null,function*(){let r=we(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!il(a))throw a;Y(LC,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function bN(t,e,n){let r=we(t),i=Ce.min(),o=Fe();return r.persistence.runTransaction("Execute query","readwrite",a=>(function(d,f,m){let y=we(d),I=y.Ms.get(m);return I!==void 0?z.resolve(y.Fs.get(I)):y.hi.getTargetData(f,m)})(r,a,Ti(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,u.targetId).next(d=>{o=d})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?i:Ce.min(),n?o:Fe())).next(u=>(iG(r,_q(e),u),{documents:u,qs:o})))}function iG(t,e,n){let r=t.xs.get(e)||Ce.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var M_=class{constructor(){this.activeTargetIds=bq()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var HT=class{constructor(){this.Fo=new M_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new M_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var zT=class{xo(e){}shutdown(){}};var TN="ConnectivityMonitor",P_=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Y(TN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){Y(TN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var u_=null;function qT(){return u_===null?u_=(function(){return 268435456+Math.round(2147483648*Math.random())})():u_++,"0x"+u_.toString(16)}var Nb="RestConnection",oG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},GT=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===v_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let a=qT(),u=this.Go(e,n.toUriEncodedString());Y(Nb,`Sending RPC '${e}' ${a}:`,u,r);let d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,i,o);let{host:f}=new URL(u),m=rs(f);return this.jo(e,u,d,r,m).then(y=>(Y(Nb,`Received RPC '${e}' ${a}: `,y),y),y=>{throw Es(Nb,`RPC '${e}' ${a} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,i,o,a){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=oG[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var WT=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var yn="WebChannelConnection",KT=class extends GT{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let a=qT();return new Promise((u,d)=>{let f=new Sb;f.setWithCredentials(!0),f.listenOnce(Ab.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Ah.NO_ERROR:let y=f.getResponseJson();Y(yn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),u(y);break;case Ah.TIMEOUT:Y(yn,`RPC '${e}' ${a} timed out`),d(new K($.DEADLINE_EXCEEDED,"Request time out"));break;case Ah.HTTP_ERROR:let I=f.getStatus();if(Y(yn,`RPC '${e}' ${a} failed with status:`,I,"response text:",f.getResponseText()),I>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);let k=b?.error;if(k&&k.status&&k.message){let U=(function(q){let ie=q.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ie)>=0?ie:$.UNKNOWN})(k.status);d(new K(U,k.message))}else d(new K($.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new K($.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{c_:e,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Y(yn,`RPC '${e}' ${a} completed.`)}});let m=JSON.stringify(i);Y(yn,`RPC '${e}' ${a} sending request:`,i),f.send(n,"POST",m,r,15)})}P_(e,n,r){let i=qT(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Pb(),u=Mb(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;let m=o.join("");Y(yn,`Creating RPC '${e}' stream ${i}: ${m}`,d);let y=a.createWebChannel(m,d);this.T_(y);let I=!1,b=!1,k=new WT({Ho:j=>{b?Y(yn,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(I||(Y(yn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),I=!0),Y(yn,`RPC '${e}' stream ${i} sending:`,j),y.send(j))},Yo:()=>y.close()}),U=(j,q,ie)=>{j.listen(q,oe=>{try{ie(oe)}catch(ze){setTimeout(()=>{throw ze},0)}})};return U(y,ku.EventType.OPEN,()=>{b||(Y(yn,`RPC '${e}' stream ${i} transport opened.`),k.s_())}),U(y,ku.EventType.CLOSE,()=>{b||(b=!0,Y(yn,`RPC '${e}' stream ${i} transport closed`),k.__(),this.I_(y))}),U(y,ku.EventType.ERROR,j=>{b||(b=!0,Es(yn,`RPC '${e}' stream ${i} transport errored. Name:`,j.name,"Message:",j.message),k.__(new K($.UNAVAILABLE,"The operation could not be completed")))}),U(y,ku.EventType.MESSAGE,j=>{var q;if(!b){let ie=j.data[0];Ke(!!ie,16349);let oe=ie,ze=oe?.error||((q=oe[0])===null||q===void 0?void 0:q.error);if(ze){Y(yn,`RPC '${e}' stream ${i} received error:`,ze);let $t=ze.status,He=(function(D){let R=Rt[D];if(R!==void 0)return PO(R)})($t),M=ze.message;He===void 0&&(He=$.INTERNAL,M="Unknown error status: "+$t+" with message "+ze.message),b=!0,k.__(new K(He,M)),y.close()}else Y(yn,`RPC '${e}' stream ${i} received:`,ie),k.a_(ie)}}),U(u,Rb.STAT_EVENT,j=>{j.stat===s_.PROXY?Y(yn,`RPC '${e}' stream ${i} detected buffering proxy`):j.stat===s_.NOPROXY&&Y(yn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function Ob(){return typeof document<"u"?document:null}function J_(t){return new gT(t,!0)}var x_=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var CN="PersistentStream",N_=class{constructor(e,n,r,i,o,a,u,d){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new x_(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return T(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return T(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return T(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(mo(n.toString()),mo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new K($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>T(this,null,function*(){this.state=0,this.start()}))}G_(e){return Y(CN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Y(CN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ZT=class extends N_{constructor(e,n,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=Fq(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ce.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?Ce.min():a.readTime?Ci(a.readTime):Ce.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=yT(this.serializer),n.addTarget=(function(o,a){let u,d=a.target;if(u=rT(d)?{documents:jq(o,d)}:{query:Uq(o,d).Vt},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=xO(o,a.resumeToken);let f=mT(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Ce.min())>0){u.readTime=D_(o,a.snapshotVersion.toTimestamp());let f=mT(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);let r=Hq(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=yT(this.serializer),n.removeTarget=e,this.k_(n)}},QT=class extends N_{constructor(e,n,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=Bq(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=yT(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Vq(this.serializer,r))};this.k_(n)}};var YT=class{},JT=class extends YT{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,_T(n,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K($.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Jo(e,_T(n,r),i,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K($.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},XT=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(mo(n),this._a=!1):Y("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Wa="RemoteStore",eC=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(()=>T(this,null,function*(){Qa(this)&&(Y(Wa,"Restarting streams for network reachability change."),yield(function(d){return T(this,null,function*(){let f=we(d);f.Ia.add(4),yield qh(f),f.Aa.set("Unknown"),f.Ia.delete(4),yield X_(f)})})(this))}))}),this.Aa=new XT(r,i)}};function X_(t){return T(this,null,function*(){if(Qa(t))for(let e of t.da)yield e(!0)})}function qh(t){return T(this,null,function*(){for(let e of t.da)yield e(!1)})}function $O(t,e){let n=we(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),jC(n)?BC(n):ol(n).x_()&&VC(n,e))}function FC(t,e){let n=we(t),r=ol(n);n.Ta.delete(e),r.x_()&&HO(n,e),n.Ta.size===0&&(r.x_()?r.B_():Qa(n)&&n.Aa.set("Unknown"))}function VC(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(t).H_(e)}function HO(t,e){t.Ra.$e(e),ol(t).Y_(e)}function BC(t){t.Ra=new pT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ol(t).start(),t.Aa.aa()}function jC(t){return Qa(t)&&!ol(t).M_()&&t.Ta.size>0}function Qa(t){return we(t).Ia.size===0}function zO(t){t.Ra=void 0}function sG(t){return T(this,null,function*(){t.Aa.set("Online")})}function aG(t){return T(this,null,function*(){t.Ta.forEach((e,n)=>{VC(t,e)})})}function cG(t,e){return T(this,null,function*(){zO(t),jC(t)?(t.Aa.la(e),BC(t)):t.Aa.set("Unknown")})}function uG(t,e,n){return T(this,null,function*(){if(t.Aa.set("Online"),e instanceof T_&&e.state===2&&e.cause)try{yield(function(i,o){return T(this,null,function*(){let a=o.cause;for(let u of o.targetIds)i.Ta.has(u)&&(yield i.remoteSyncer.rejectListen(u,a),i.Ta.delete(u),i.Ra.removeTarget(u))})})(t,e)}catch(r){Y(Wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield O_(t,r)}else if(e instanceof Uu?t.Ra.Ye(e):e instanceof b_?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ce.min()))try{let r=yield UO(t.localStore);n.compareTo(r)>=0&&(yield(function(o,a){let u=o.Ra.Pt(a);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){let m=o.Ta.get(f);m&&o.Ta.set(f,m.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach((d,f)=>{let m=o.Ta.get(d);if(!m)return;o.Ta.set(d,m.withResumeToken(En.EMPTY_BYTE_STRING,m.snapshotVersion)),HO(o,d);let y=new jh(m.target,d,f,m.sequenceNumber);VC(o,y)}),o.remoteSyncer.applyRemoteEvent(u)})(t,n))}catch(r){Y(Wa,"Failed to raise snapshot:",r),yield O_(t,r)}})}function O_(t,e,n){return T(this,null,function*(){if(!il(e))throw e;t.Ia.add(1),yield qh(t),t.Aa.set("Offline"),n||(n=()=>UO(t.localStore)),t.asyncQueue.enqueueRetryable(()=>T(null,null,function*(){Y(Wa,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield X_(t)}))})}function qO(t,e){return e().catch(n=>O_(t,n,e))}function ev(t){return T(this,null,function*(){let e=we(t),n=bs(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:DC;for(;lG(e);)try{let i=yield nG(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,dG(e,i)}catch(i){yield O_(e,i)}GO(e)&&WO(e)})}function lG(t){return Qa(t)&&t.Pa.length<10}function dG(t,e){t.Pa.push(e);let n=bs(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function GO(t){return Qa(t)&&!bs(t).M_()&&t.Pa.length>0}function WO(t){bs(t).start()}function hG(t){return T(this,null,function*(){bs(t).na()})}function fG(t){return T(this,null,function*(){let e=bs(t);for(let n of t.Pa)e.X_(n.mutations)})}function pG(t,e,n){return T(this,null,function*(){let r=t.Pa.shift(),i=lT.from(r,e,n);yield qO(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ev(t)})}function gG(t,e){return T(this,null,function*(){e&&bs(t).Z_&&(yield(function(r,i){return T(this,null,function*(){if((function(a){return Mq(a)&&a!==$.ABORTED})(i.code)){let o=r.Pa.shift();bs(r).N_(),yield qO(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ev(r)}})})(t,e)),GO(t)&&WO(t)})}function DN(t,e){return T(this,null,function*(){let n=we(t);n.asyncQueue.verifyOperationInProgress(),Y(Wa,"RemoteStore received new credentials");let r=Qa(n);n.Ia.add(3),yield qh(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield X_(n)})}function mG(t,e){return T(this,null,function*(){let n=we(t);e?(n.Ia.delete(2),yield X_(n)):e||(n.Ia.add(2),yield qh(n),n.Aa.set("Unknown"))})}function ol(t){return t.Va||(t.Va=(function(n,r,i){let o=we(n);return o.ia(),new ZT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:sG.bind(null,t),e_:aG.bind(null,t),n_:cG.bind(null,t),J_:uG.bind(null,t)}),t.da.push(e=>T(null,null,function*(){e?(t.Va.N_(),jC(t)?BC(t):t.Aa.set("Unknown")):(yield t.Va.stop(),zO(t))}))),t.Va}function bs(t){return t.ma||(t.ma=(function(n,r,i){let o=we(n);return o.ia(),new QT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:hG.bind(null,t),n_:gG.bind(null,t),ea:fG.bind(null,t),ta:pG.bind(null,t)}),t.da.push(e=>T(null,null,function*(){e?(t.ma.N_(),yield ev(t)):(yield t.ma.stop(),t.Pa.length>0&&(Y(Wa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var tC=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let a=Date.now()+r,u=new t(e,n,a,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function UC(t,e){if(mo("AsyncQueue",`${e}: ${t}`),il(t))return new K($.UNAVAILABLE,`${e}: ${t}`);throw t}var k_=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=Rh(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var L_=class{constructor(){this.fa=new vt(re.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ae(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Ju=class t{constructor(e,n,r,i,o,a,u,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){let a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new t(e,n,k_.emptySet(n),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Q_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var nC=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},rC=class{constructor(){this.queries=SN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=we(n),o=i.queries;i.queries=SN(),o.forEach((a,u)=>{for(let d of u.wa)d.onError(r)})})(this,new K($.ABORTED,"Firestore shutting down"))}};function SN(){return new yo(t=>yO(t),Q_)}function _G(t,e){return T(this,null,function*(){let n=we(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new nC,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(a){let u=UC(a,`Initialization of query '${Fu(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&$C(n)})}function vG(t,e){return T(this,null,function*(){let n=we(t),r=e.query,i=3,o=n.queries.get(r);if(o){let a=o.wa.indexOf(e);a>=0&&(o.wa.splice(a,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function yG(t,e){let n=we(t),r=!1;for(let i of e){let o=i.query,a=n.queries.get(o);if(a){for(let u of a.wa)u.Ca(i)&&(r=!0);a.ya=i}}r&&$C(n)}function EG(t,e,n){let r=we(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function $C(t){t.Da.forEach(e=>{e.next()})}var iC,AN;(AN=iC||(iC={})).Fa="default",AN.Cache="cache";var oC=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ju(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ju.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==iC.Cache}};var F_=class{constructor(e){this.key=e}},V_=class{constructor(e){this.key=e}},sC=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Fe(),this.mutatedKeys=Fe(),this.Xa=EO(e),this.eu=new k_(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new L_,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,a=i,u=!1,d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{let I=i.get(m),b=Y_(this.query,y)?y:null,k=!!I&&this.mutatedKeys.has(I.key),U=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),j=!1;I&&b?I.data.isEqual(b.data)?k!==U&&(r.track({type:3,doc:b}),j=!0):this.iu(I,b)||(r.track({type:2,doc:b}),j=!0,(d&&this.Xa(b,d)>0||f&&this.Xa(b,f)<0)&&(u=!0)):!I&&b?(r.track({type:0,doc:b}),j=!0):I&&!b&&(r.track({type:1,doc:I}),j=!0,(d||f)&&(u=!0)),j&&(b?(a=a.add(b),o=U?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{eu:a,ru:r,Ds:u,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort((m,y)=>(function(b,k){let U=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{At:j})}};return U(b)-U(k)})(m.type,y.type)||this.Xa(m.doc,y.doc)),this.su(r),i=i!=null&&i;let u=n&&!i?this.ou():[],d=this.Za.size===0&&this.current&&!i?1:0,f=d!==this.Ya;return this.Ya=d,a.length!==0||f?{snapshot:new Ju(this.query,e.eu,o,a,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new L_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new V_(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new F_(r))}),n}uu(e){this.Ha=e.qs,this.Za=Fe();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ju.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},HC="SyncEngine",aC=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},cC=class{constructor(e){this.key=e,this.lu=!1}},uC=class{constructor(e,n,r,i,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new yo(u=>yO(u),Q_),this.Tu=new Map,this.Iu=new Set,this.du=new vt(re.comparator),this.Eu=new Map,this.Au=new $h,this.Ru={},this.Vu=new Map,this.mu=Uh.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function wG(t,e,n=!0){return T(this,null,function*(){let r=XO(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield KO(r,e,n,!0),i})}function IG(t,e){return T(this,null,function*(){let n=XO(t);yield KO(n,e,!0,!1)})}function KO(t,e,n,r){return T(this,null,function*(){let i=yield rG(t.localStore,Ti(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n),u;return r&&(u=yield bG(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&$O(t.remoteStore,i),u})}function bG(t,e,n,r,i){return T(this,null,function*(){t.gu=(y,I,b)=>(function(U,j,q,ie){return T(this,null,function*(){let oe=j.view.nu(q);oe.Ds&&(oe=yield bN(U.localStore,j.query,!1).then(({documents:M})=>j.view.nu(M,oe)));let ze=ie&&ie.targetChanges.get(j.targetId),$t=ie&&ie.targetMismatches.get(j.targetId)!=null,He=j.view.applyChanges(oe,U.isPrimaryClient,ze,$t);return MN(U,j.targetId,He._u),He.snapshot})})(t,y,I,b);let o=yield bN(t.localStore,e,!0),a=new sC(e,o.qs),u=a.nu(o.documents),d=Bh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=a.applyChanges(u,t.isPrimaryClient,d);MN(t,n,f._u);let m=new aC(e,n,a);return t.Pu.set(e,m),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot})}function TG(t,e,n){return T(this,null,function*(){let r=we(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(a=>!Q_(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $T(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&FC(r.remoteStore,i.targetId),lC(r,i.targetId)}).catch(rl))):(lC(r,i.targetId),yield $T(r.localStore,i.targetId,!0))})}function CG(t,e){return T(this,null,function*(){let n=we(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),FC(n.remoteStore,r.targetId))})}function DG(t,e,n){return T(this,null,function*(){let r=NG(t);try{let i=yield(function(a,u){let d=we(a),f=Nt.now(),m=u.reduce((b,k)=>b.add(k.key),Fe()),y,I;return d.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=Eo(),U=Fe();return d.Os.getEntries(b,m).next(j=>{k=j,k.forEach((q,ie)=>{ie.isValidDocument()||(U=U.add(q))})}).next(()=>d.localDocuments.getOverlayedDocuments(b,k)).next(j=>{y=j;let q=[];for(let ie of u){let oe=Rq(ie,y.get(ie.key).overlayedDocument);oe!=null&&q.push(new Si(ie.key,oe,hO(oe.value.mapValue),gs.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,q,u)}).next(j=>{I=j;let q=j.applyToLocalDocumentSet(y,U);return d.documentOverlayCache.saveOverlays(b,j.batchId,q)})}).then(()=>({batchId:I.batchId,changes:IO(y)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,d){let f=a.Ru[a.currentUser.toKey()];f||(f=new vt(Me)),f=f.insert(u,d),a.Ru[a.currentUser.toKey()]=f})(r,i.batchId,n),yield Gh(r,i.changes),yield ev(r.remoteStore)}catch(i){let o=UC(i,"Failed to persist write");n.reject(o)}})}function ZO(t,e){return T(this,null,function*(){let n=we(t);try{let r=yield eG(n.localStore,e);e.targetChanges.forEach((i,o)=>{let a=n.Eu.get(o);a&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?Ke(a.lu,14607):i.removedDocuments.size>0&&(Ke(a.lu,42227),a.lu=!1))}),yield Gh(n,r,e)}catch(r){yield rl(r)}})}function RN(t,e,n){let r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,a)=>{let u=a.view.va(e);u.snapshot&&i.push(u.snapshot)}),(function(a,u){let d=we(a);d.onlineState=u;let f=!1;d.queries.forEach((m,y)=>{for(let I of y.wa)I.va(u)&&(f=!0)}),f&&$C(d)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SG(t,e,n){return T(this,null,function*(){let r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let a=new vt(re.comparator);a=a.insert(o,$r.newNoDocument(o,Ce.min()));let u=Fe().add(o),d=new I_(Ce.min(),new Map,new vt(Me),a,u);yield ZO(r,d),r.du=r.du.remove(o),r.Eu.delete(e),zC(r)}else yield $T(r.localStore,e,!1).then(()=>lC(r,e,n)).catch(rl)})}function AG(t,e){return T(this,null,function*(){let n=we(t),r=e.batch.batchId;try{let i=yield Xq(n.localStore,e);YO(n,r,null),QO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Gh(n,i)}catch(i){yield rl(i)}})}function RG(t,e,n){return T(this,null,function*(){let r=we(t);try{let i=yield(function(a,u){let d=we(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,u).next(y=>(Ke(y!==null,37113),m=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})})(r.localStore,e);YO(r,e,n),QO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Gh(r,i)}catch(i){yield rl(i)}})}function QO(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function YO(t,e,n){let r=we(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function lC(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||JO(t,r)})}function JO(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(FC(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),zC(t))}function MN(t,e,n){for(let r of n)r instanceof F_?(t.Au.addReference(r.key,e),MG(t,r)):r instanceof V_?(Y(HC,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||JO(t,r.key)):ae(19791,{yu:r})}function MG(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Y(HC,"New document in limbo: "+n),t.Iu.add(r),zC(t))}function zC(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new re(dt.fromString(e)),r=t.mu.next();t.Eu.set(r,new cC(n)),t.du=t.du.insert(n,r),$O(t.remoteStore,new jh(Ti(NC(n.path)),r,"TargetPurposeLimboResolution",CC.ue))}}function Gh(t,e,n){return T(this,null,function*(){let r=we(t),i=[],o=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((u,d)=>{a.push(r.gu(d,e,n).then(f=>{var m;if((f||n)&&r.isPrimaryClient){let y=f?!f.fromCache:(m=n?.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){i.push(f);let y=VT.Es(d.targetId,f);o.push(y)}}))}),yield Promise.all(a),r.hu.J_(i),yield(function(d,f){return T(this,null,function*(){let m=we(d);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>z.forEach(f,I=>z.forEach(I.Is,b=>m.persistence.referenceDelegate.addReference(y,I.targetId,b)).next(()=>z.forEach(I.ds,b=>m.persistence.referenceDelegate.removeReference(y,I.targetId,b)))))}catch(y){if(!il(y))throw y;Y(LC,"Failed to update sequence numbers: "+y)}for(let y of f){let I=y.targetId;if(!y.fromCache){let b=m.Fs.get(I),k=b.snapshotVersion,U=b.withLastLimboFreeSnapshotVersion(k);m.Fs=m.Fs.insert(I,U)}}})})(r.localStore,o))})}function PG(t,e){return T(this,null,function*(){let n=we(t);if(!n.currentUser.isEqual(e)){Y(HC,"User change. New user:",e.toKey());let r=yield jO(n.localStore,e);n.currentUser=e,(function(o,a){o.Vu.forEach(u=>{u.forEach(d=>{d.reject(new K($.CANCELLED,a))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gh(n,r.Bs)}})}function xG(t,e){let n=we(t),r=n.Eu.get(e);if(r&&r.lu)return Fe().add(r.key);{let i=Fe(),o=n.Tu.get(e);if(!o)return i;for(let a of o){let u=n.Pu.get(a);i=i.unionWith(u.view.tu)}return i}}function XO(t){let e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SG.bind(null,e),e.hu.J_=yG.bind(null,e.eventManager),e.hu.pu=EG.bind(null,e.eventManager),e}function NG(t){let e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RG.bind(null,e),e}var ek=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return T(this,null,function*(){this.serializer=J_(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return Jq(this.persistence,new jT,n.initialUser,this.serializer)}Du(n){return new A_(FT.Vi,this.serializer)}bu(n){return new HT}terminate(){return T(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),dC=class extends ek{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ke(this.persistence.referenceDelegate instanceof R_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new TT(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?yr.withCacheSize(this.cacheSizeBytes):yr.DEFAULT;return new A_(r=>R_.Vi(r,n),this.serializer)}};var OG=(()=>{class t{initialize(n,r){return T(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>RN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=PG.bind(null,this.syncEngine),yield mG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new rC})()}createDatastore(n){let r=J_(n.databaseInfo.databaseId),i=(function(a){return new KT(a)})(n.databaseInfo);return(function(a,u,d,f){return new JT(a,u,d,f)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,a,u,d){return new eC(i,o,a,u,d)})(this.localStore,this.datastore,n.asyncQueue,r=>RN(this.syncEngine,r,0),(function(){return P_.C()?new P_:new zT})())}createSyncEngine(n,r){return(function(o,a,u,d,f,m,y){let I=new uC(o,a,u,d,f,m);return y&&(I.fu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return T(this,null,function*(){var n,r;yield(function(o){return T(this,null,function*(){let a=we(o);Y(Wa,"RemoteStore shutting down."),a.Ia.add(5),yield qh(a),a.Ea.shutdown(),a.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var hC=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):mo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Ts="FirestoreClient",fC=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Jt.UNAUTHENTICATED,this.clientId=Oh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,a=>T(this,null,function*(){Y(Ts,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(Y(Ts,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=UC(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function kb(t,e){return T(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),Y(Ts,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>T(null,null,function*(){r.isEqual(i)||(yield jO(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Es("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Y("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Es("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function PN(t,e){return T(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield kG(t);Y(Ts,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>DN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>DN(e.remoteStore,i)),t._onlineComponents=e})}function kG(t){return T(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Ts,"Using user provided OfflineComponentProvider");try{yield kb(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Es("Error using user provided cache. Falling back to memory cache: "+n),yield kb(t,new ek)}}else Y(Ts,"Using default OfflineComponentProvider"),yield kb(t,new dC(void 0));return t._offlineComponents})}function tk(t){return T(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Ts,"Using user provided OnlineComponentProvider"),yield PN(t,t._uninitializedComponentsProvider._online)):(Y(Ts,"Using default OnlineComponentProvider"),yield PN(t,new OG))),t._onlineComponents})}function LG(t){return tk(t).then(e=>e.syncEngine)}function xN(t){return T(this,null,function*(){let e=yield tk(t),n=e.eventManager;return n.onListen=wG.bind(null,e.syncEngine),n.onUnlisten=TG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CG.bind(null,e.syncEngine),n})}function nk(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var NN=new Map;var rk="firestore.googleapis.com",ON=!0,B_=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rk,this.ssl=ON}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:ON;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Zq)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xu=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Lb;switch(r.type){case"firstParty":return new jb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=NN.get(n);r&&(Y("ComponentProvider","Removing Datastore"),NN.delete(n),r.terminate())})(this),Promise.resolve()}};function ik(t,e,n,r={}){var i;t=ps(t,Xu);let o=rs(e),a=t._getSettings(),u=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(xm(`https://${d}`),Nm("Firestore",!0)),a.host!==rk&&a.host!==d&&Es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let f=Object.assign(Object.assign({},a),{host:d,ssl:o,emulatorOptions:r});if(!vi(f,u)&&(t._setSettings(f),r.mockUserToken)){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=Jt.MOCK_USER;else{m=rP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new K($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Jt(I)}t._authCredentials=new Fb(new f_(m,y))}}var Ka=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},en=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zh(n,t._jsonSchema))return new t(e,r||null,new re(dt.fromString(n.referencePath)))}};en._jsonSchemaVersion="firestore/documentReference/1.0",en._jsonSchema={type:xt("string",en._jsonSchemaVersion),referencePath:xt("string")};var ms=class t extends Ka{constructor(e,n,r){super(e,n,NC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new re(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function ok(t,e,...n){if(t=Et(t),$N("collection","path",e),t instanceof Xu){let r=dt.fromString(e,...n);return Yx(r),new ms(t,null,r)}{if(!(t instanceof en||t instanceof ms))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(dt.fromString(e,...n));return Yx(r),new ms(t.firestore,null,r)}}function sk(t,e,...n){if(t=Et(t),arguments.length===1&&(e=Oh.newId()),$N("doc","path",e),t instanceof Xu){let r=dt.fromString(e,...n);return Qx(r),new en(t,null,new re(r))}{if(!(t instanceof en||t instanceof ms))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(dt.fromString(e,...n));return Qx(r),new en(t.firestore,t instanceof ms?t.converter:null,new re(r))}}var kN="AsyncQueue",j_=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new x_(this,"async_queue_retry"),this.oc=()=>{let r=Ob();r&&Y(kN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=Ob();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=Ob();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new go;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return T(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!il(e))throw e;Y(kN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,mo("INTERNAL UNHANDLED ERROR: ",LN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=tC.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ae(47125,{hc:LN(this.tc)})}verifyOperationInProgress(){}Pc(){return T(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function LN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function FN(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var Za=class extends Xu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new j_,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new j_(e),this._firestoreClient=void 0,yield e}})}};function ak(t,e){let n=typeof t=="object"?t:Aa(),r=typeof t=="string"?t:e||v_,i=Mu(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=nP("firestore");o&&ik(i,...o)}return i}function ck(t){if(t._terminated)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FG(t),t._firestoreClient}function FG(t){var e,n,r;let i=t._freezeSettings(),o=(function(u,d,f,m){return new qb(u,d,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,nk(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new fC(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(u){let d=u?._online.build();return{_offline:u?._offline.build(d),_online:d}})(t._componentsProvider))}var _s=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(En.fromBase64String(e))}catch(n){throw new K($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(En.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zh(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};_s._jsonSchemaVersion="firestore/bytes/1.0",_s._jsonSchema={type:xt("string",_s._jsonSchemaVersion),bytes:xt("string")};var el=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var tl=class{constructor(e){this._methodName=e}};var vs=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(zh(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};vs._jsonSchemaVersion="firestore/geoPoint/1.0",vs._jsonSchema={type:xt("string",vs._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};var ys=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zh(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new K($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ys._jsonSchemaVersion="firestore/vectorValue/1.0",ys._jsonSchema={type:xt("string",ys._jsonSchemaVersion),vectorValues:xt("object")};var VG=/^__.*__$/,pC=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Si(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ga(e,this.data,n,this.fieldTransforms)}},U_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Si(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function uk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ec:t})}}var gC=class t{constructor(e,n,r,i,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return H_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(uk(this.Ec)&&VG.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},mC=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||J_(e)}Dc(e,n,r,i=!1){return new gC({Ec:e,methodName:n,bc:r,path:ir.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qC(t){let e=t._freezeSettings(),n=J_(t._databaseId);return new mC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BG(t,e,n,r,i,o={}){let a=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);GC("Data must be an object, but it was:",a,r);let u=lk(r,a),d,f;if(o.merge)d=new Er(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let y of o.mergeFields){let I=vC(e,y,n);if(!a.contains(I))throw new K($.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);hk(m,I)||m.push(I)}d=new Er(m),f=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=a.fieldTransforms;return new pC(new rr(u),d,f)}var $_=class t extends tl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var _C=class t extends tl{_toFieldTransform(e){return new sT(e.path,new Ha)}isEqual(e){return e instanceof t}};function jG(t,e,n,r){let i=t.Dc(1,e,n);GC("Data must be an object, but it was:",i,r);let o=[],a=rr.empty();Cs(r,(d,f)=>{let m=WC(e,d,n);f=Et(f);let y=i.gc(m);if(f instanceof $_)o.push(m);else{let I=Wh(f,y);I!=null&&(o.push(m),a.set(m,I))}});let u=new Er(o);return new U_(a,u,i.fieldTransforms)}function UG(t,e,n,r,i,o){let a=t.Dc(1,e,n),u=[vC(e,r,n)],d=[i];if(o.length%2!=0)throw new K($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<o.length;I+=2)u.push(vC(e,o[I])),d.push(o[I+1]);let f=[],m=rr.empty();for(let I=u.length-1;I>=0;--I)if(!hk(f,u[I])){let b=u[I],k=d[I];k=Et(k);let U=a.gc(b);if(k instanceof $_)f.push(b);else{let j=Wh(k,U);j!=null&&(f.push(b),m.set(b,j))}}let y=new Er(f);return new U_(m,y,a.fieldTransforms)}function $G(t,e,n,r=!1){return Wh(n,t.Dc(r?4:3,e))}function Wh(t,e){if(dk(t=Et(t)))return GC("Unsupported field value:",e,t),lk(t,e);if(t instanceof tl)return(function(r,i){if(!uk(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],a=0;for(let u of r){let d=Wh(u,i.yc(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Tq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Nt.fromDate(r);return{timestampValue:D_(i.serializer,o)}}if(r instanceof Nt){let o=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:D_(i.serializer,o)}}if(r instanceof vs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _s)return{bytesValue:xO(i.serializer,r._byteString)};if(r instanceof en){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ys)return(function(a,u){return{mapValue:{fields:{[AC]:{stringValue:RC},[qu]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return OC(u.serializer,f)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${W_(r)}`)})(t,e)}function lk(t,e){let n={};return iO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(r,i)=>{let o=Wh(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function dk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nt||t instanceof vs||t instanceof _s||t instanceof en||t instanceof tl||t instanceof ys)}function GC(t,e,n){if(!dk(n)||!HN(n)){let r=W_(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function vC(t,e,n){if((e=Et(e))instanceof el)return e._internalPath;if(typeof e=="string")return WC(t,e);throw H_("Field path arguments must be of type string or ",t,!1,void 0,n)}var HG=new RegExp("[~\\*/\\[\\]]");function WC(t,e,n){if(e.search(HG)>=0)throw H_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new el(...e.split("."))._internalPath}catch{throw H_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function H_(t,e,n,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new K($.INVALID_ARGUMENT,u+t+d)}function hk(t,e){return t.some(n=>n.isEqual(e))}var z_=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(KC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},yC=class extends z_{data(){return super.data()}};function KC(t,e){return typeof e=="string"?WC(t,e):e instanceof el?e._internalPath:e._delegate._internalPath}function zG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hh=class{},q_=class extends Hh{};function fk(t,e,...n){let r=[];e instanceof Hh&&r.push(e),r=r.concat(n),(function(o){let a=o.filter(d=>d instanceof wC).length,u=o.filter(d=>d instanceof EC).length;if(a>1||a>0&&u>0)throw new K($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var EC=class t extends q_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return gk(e._query,n),new Ka(e.firestore,e.converter,iT(e._query,n))}_parse(e){let n=qC(e.firestore);return(function(o,a,u,d,f,m,y){let I;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new K($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){BN(y,m);let k=[];for(let U of y)k.push(VN(d,o,U));I={arrayValue:{values:k}}}else I=VN(d,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||BN(y,m),I=$G(u,a,y,m==="in"||m==="not-in");return Pt.create(f,m,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var wC=class t extends Hh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Hr.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let a=i,u=o.getFlattenedFilters();for(let d of u)gk(a,d),a=iT(a,d)})(e._query,n),new Ka(e.firestore,e.converter,iT(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var IC=class t extends q_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,a){if(i.startAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $a(o,a)})(e._query,this._field,this._direction);return new Ka(e.firestore,e.converter,(function(i,o){let a=i.explicitOrderBy.concat([o]);return new Is(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function pk(t,e="asc"){let n=e,r=KC("orderBy",t);return IC._create(r,n)}function VN(t,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new K($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vO(e)&&n.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(dt.fromString(n));if(!re.isDocumentKey(r))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return iN(t,new re(r))}if(n instanceof en)return iN(t,n._key);throw new K($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${W_(n)}.`)}function BN(t,e){if(!Array.isArray(t)||t.length===0)throw new K($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gk(t,e){let n=(function(i,o){for(let a of i)for(let u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new K($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var bC=class{convertValue(e,n="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Cs(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[qu].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>lt(a.doubleValue));return new ys(o)}convertGeoPoint(e){return new vs(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Z_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fh(e));default:return null}}convertTimestamp(e){let n=_o(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=dt.fromString(e);Ke(VO(r),9688,{name:e});let i=new y_(r.get(1),r.get(3)),o=new re(r.popFirst(5));return i.isEqual(n)||mo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function qG(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Va=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ba=class t extends z_{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(KC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ba._jsonSchema={type:xt("string",Ba._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};var $u=class extends Ba{data(e={}){return super.data(e)}},Hu=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Va(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $u(this._firestore,this._userDataWriter,r.key,r,new Va(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{let d=new $u(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Va(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{let d=new $u(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Va(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:GG(u.type),doc:d,oldIndex:f,newIndex:m}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Oh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function GG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:t})}}Hu._jsonSchemaVersion="firestore/querySnapshot/1.0",Hu._jsonSchema={type:xt("string",Hu._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};var G_=class extends bC{constructor(e){super(),this.firestore=e}convertBytes(e){return new _s(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,n)}};function mk(t,e,n){t=ps(t,en);let r=ps(t.firestore,Za),i=qG(t.converter,e,n);return vk(r,[BG(qC(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gs.none())])}function _k(t,e,n,...r){t=ps(t,en);let i=ps(t.firestore,Za),o=qC(i),a;return a=typeof(e=Et(e))=="string"||e instanceof el?UG(o,"updateDoc",t._key,e,n,r):jG(o,"updateDoc",t._key,e),vk(i,[a.toMutation(t._key,gs.exists(!0))])}function ZC(t,...e){var n,r,i;t=Et(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||FN(e[a])||(o=e[a++]);let u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(FN(e[a])){let y=e[a];e[a]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let d,f,m;if(t instanceof en)f=ps(t.firestore,Za),m=NC(t._key.path),d={next:y=>{e[a]&&e[a](WG(f,t,y))},error:e[a+1],complete:e[a+2]};else{let y=ps(t,Ka);f=ps(y.firestore,Za),m=y._query;let I=new G_(f);d={next:b=>{e[a]&&e[a](new Hu(f,I,y,b))},error:e[a+1],complete:e[a+2]},zG(t._query)}return(function(I,b,k,U){let j=new hC(U),q=new oC(b,j,k);return I.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return _G(yield xN(I),q)})),()=>{j.Ou(),I.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return vG(yield xN(I),q)}))}})(ck(f),m,u,d)}function vk(t,e){return(function(r,i){let o=new go;return r.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return DG(yield LG(r),i,o)})),o.promise})(ck(t),e)}function WG(t,e,n){let r=n.docs.get(e._key),i=new G_(t);return new Ba(t,i,e._key,r,new Va(n.hasPendingWrites,n.fromCache),e.converter)}function QC(){return new _C("serverTimestamp")}(function(e,n=!0){(function(i){nl=i})(os),jr(new Mn("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),u=new Za(new Vb(r.getProvider("auth-internal")),new Ub(a,r.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new K($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new y_(f.options.projectId,m)})(a,i),a);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),_t(Gx,Wx,e),_t(Gx,Wx,"esm2017")})();var tv=function(){return tv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},tv.apply(this,arguments)};var QG={includeMetadataChanges:!1};function yk(t,e){return e===void 0&&(e=QG),new le(function(n){var r=ZC(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Ek(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:tv(tv({},r),(n={},n[e.idField]=t.id,n))}function wk(t){return yk(t,{includeMetadataChanges:!0}).pipe(he(function(e){return e.docs}))}function Ik(t,e){return e===void 0&&(e={}),wk(t).pipe(he(function(n){return n.map(function(r){return Ek(r,e)})}))}var Ya=class{constructor(e){return e}},bk="firestore",YC=class{constructor(){return xu(bk)}};var JC=new X("angularfire2.firestore-instances");function YG(t,e){let n=ph(bk,t,e);return n&&new Ya(n)}function JG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ya(r)}}var XG={provide:YC,deps:[[new Zn,JC]]},eW={provide:Ya,useFactory:YG,deps:[[new Zn,JC],uo]};function Tk(t,...e){return _t("angularfire",ss.full,"fst"),ni([eW,XG,{provide:JC,useFactory:JG(t),multi:!0,deps:[Je,Ct,as,Ma,[new Zn,Sh],[new Zn,Nu],...e]}])}var nv=dn(Ik,!0);var rv=dn(ok,!0,2);var sl=dn(sk,!0,2);var Ck=dn(ak,!0);var XC=dn(pk,!0,2),eD=dn(fk,!0,2);var tD=dn(mk,!0,2);var Dk=dn(_k,!0,2);var Vn=class t{firestore=B(Ya);incidentsCollection=rv(this.firestore,"incidents");alertsCollection=rv(this.firestore,"alerts");riskZonesCollection=rv(this.firestore,"riskZones");getSafetyFeed(){let e=nv(eD(this.incidentsCollection,XC("createdAt","desc")),{idField:"id"}).pipe(he(r=>r.map(i=>be(G({},i),{type:"incident"})))),n=nv(eD(this.alertsCollection,XC("createdAt","desc")),{idField:"id"}).pipe(he(r=>r.map(i=>be(G({},i),{type:"alert"}))));return Bc([e,n]).pipe(he(([r,i])=>[...r,...i].sort((a,u)=>u.createdAt.toMillis()-a.createdAt.toMillis())))}reportIncident(e){return T(this,null,function*(){let n=sl(this.incidentsCollection).id,r=sl(this.incidentsCollection,n),i=G({id:n,type:"incident",status:"pending",createdAt:QC(),location:e.location||{lat:0,lng:0},description:e.description||"N/A",priority:e.priority||"medium"},e);return yield tD(r,i),n})}issueAlert(e){return T(this,null,function*(){let n=sl(this.alertsCollection).id,r=sl(this.alertsCollection,n);return yield tD(r,be(G({},e),{type:"alert",createdAt:QC()})),n})}updateIncidentStatus(e,n){return T(this,null,function*(){let r=sl(this.incidentsCollection,e);yield Dk(r,{status:n})})}getRiskZones(){return nv(this.riskZonesCollection,{idField:"id"})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})};var iv=class t{data=B(Vn);isReporting=!1;triggerSos(){this.isReporting||(this.isReporting=!0,navigator.geolocation?(alert("Attempting to capture location for SOS..."),navigator.geolocation.getCurrentPosition(e=>{let n=e.coords.latitude,r=e.coords.longitude;this.data.reportIncident({description:"Automatic SOS call initiated by user.",location:{lat:n,lng:r},priority:"high"}).then(i=>{alert(`SOS Reported Successfully! Incident ID: ${i}`),this.isReporting=!1})},e=>{console.error("Location error:",e),alert("SOS failed: Could not capture location. Ensure location services are enabled."),this.isReporting=!1},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):(alert("Geolocation is not supported by your browser."),this.isReporting=!1))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bt({type:t,selectors:[["app-sos-button"]],decls:2,vars:2,consts:[[1,"sos-btn",3,"click","disabled"]],template:function(n,r){n&1&&(uu(0,"button",0),Fg("click",function(){return r.triggerSos()}),pe(1),lu()),n&2&&(Lg("disabled",r.isReporting),xe(),_n(" \u{1F6A8} ",r.isReporting?"Sending Location...":"EMERGENCY SOS"," \u{1F6A8} "))},dependencies:[Zt],styles:[".sos-btn[_ngcontent-%COMP%]{width:100%;padding:20px 0;font-size:1.2rem;font-weight:700;color:#fff;background-color:#d32f2f;border:none;border-radius:8px;cursor:pointer;box-shadow:0 4px 6px #0003;transition:background-color .15s,transform .15s}.sos-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#e53935;transform:translateY(-2px)}.sos-btn[_ngcontent-%COMP%]:active:not([disabled]){background-color:#c62828;transform:translateY(0)}.sos-btn[_ngcontent-%COMP%]:disabled{background-color:#9e9e9e;cursor:not-allowed}"]})};function tW(t,e){t&1&&(ne(0,"div",3),pe(1," No active incidents or alerts right now. Stay safe! "),te())}function nW(t,e){if(t&1&&(ne(0,"span",11),pe(1),mr(2,"uppercase"),te()),t&2){let n=Kt().$implicit;xe(),_n(" ",kr(2,1,n.priority)," ")}}function rW(t,e){if(t&1&&(Yi(0),pe(1),Ji()),t&2){let n=Kt().$implicit;xe(),_n(" ",n.message," ")}}function iW(t,e){if(t&1&&(Yi(0),pe(1),mr(2,"uppercase"),Ji()),t&2){let n=Kt().$implicit;xe(),Bg(" Reported Incident (",n.description,"). Status: ",kr(2,2,n.status),". ")}}function oW(t,e){if(t&1&&(ne(0,"div",4)(1,"div",5)(2,"span",6),pe(3),mr(4,"uppercase"),te(),jt(5,nW,3,3,"span",7),te(),ne(6,"p",8),jt(7,rW,2,1,"ng-container",9)(8,iW,3,4,"ng-container",9),te(),ne(9,"div",10)(10,"small"),pe(11),mr(12,"date"),te()()()),t&2){let n=e.$implicit,r=Kt();gt("ngClass",r.getItemClass(n)),xe(3),Vg(kr(4,6,n.type)),xe(2),gt("ngIf",r.isIncident(n)||r.isAlert(n)),xe(2),gt("ngIf",r.isAlert(n)),xe(),gt("ngIf",r.isIncident(n)),xe(3),_n("Time: ",fw(12,8,n.createdAt.toDate(),"shortTime"))}}var ov=class t{data=B(Vn);safetyFeedItems$=this.data.getSafetyFeed();isIncident(e){return e.type==="incident"}isAlert(e){return e.type==="alert"}getItemClass(e){return this.isAlert(e)?`feed-item-alert feed-item-${e.priority}`:`feed-item-incident feed-item-${e.priority}`}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bt({type:t,selectors:[["app-safety-feed"]],decls:7,vars:6,consts:[[1,"feed-container"],["class","empty-feed",4,"ngIf"],["class","feed-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"empty-feed"],[1,"feed-item",3,"ngClass"],[1,"item-header"],[1,"type-tag"],["class","priority-tag",4,"ngIf"],[1,"item-description"],[4,"ngIf"],[1,"item-footer"],[1,"priority-tag"]],template:function(n,r){if(n&1&&(ne(0,"div",0)(1,"h3"),pe(2,"\u{1F6A8} Real-time Safety Feed \u{1F6A8}"),te(),jt(3,tW,2,0,"div",1),mr(4,"async"),jt(5,oW,13,11,"div",2),mr(6,"async"),te()),n&2){let i;xe(3),gt("ngIf",((i=kr(4,2,r.safetyFeedItems$))==null?null:i.length)===0),xe(2),gt("ngForOf",kr(6,4,r.safetyFeedItems$))}},dependencies:[Zt,Fd,pu,Fr,Ea,Pw,xw],styles:[".feed-container[_ngcontent-%COMP%]{padding:10px}.feed-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;border-bottom:2px solid #eee;padding-bottom:5px}.feed-item[_ngcontent-%COMP%]{border-left:5px solid #ccc;padding:10px;margin-bottom:10px;background-color:#f9f9f9;border-radius:4px;box-shadow:0 1px 2px #0000000d}.feed-item.feed-item-high[_ngcontent-%COMP%]{border-left-color:#d32f2f;background-color:#fdeaea}.feed-item.feed-item-medium[_ngcontent-%COMP%]{border-left-color:#ffb300;background-color:#fff9e6}.feed-item.feed-item-low[_ngcontent-%COMP%]{border-left-color:#43a047;background-color:#edf7ed}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;font-weight:700}.type-tag[_ngcontent-%COMP%], .priority-tag[_ngcontent-%COMP%]{padding:2px 6px;border-radius:3px;font-size:.75rem;color:#fff}.type-tag[_ngcontent-%COMP%]{background-color:#3f51b5}.priority-tag.priority-high[_ngcontent-%COMP%]{background-color:#d32f2f}.priority-tag.priority-medium[_ngcontent-%COMP%]{background-color:#ffb300}.priority-tag.priority-low[_ngcontent-%COMP%]{background-color:#43a047}.item-description[_ngcontent-%COMP%]{margin:0 0 5px;font-size:.9rem}.item-footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.7rem}.empty-feed[_ngcontent-%COMP%]{text-align:center;padding:20px;border:1px dashed #ccc;color:#888;border-radius:4px}"]})};var sv=class t{data=B(Vn);map;BAGUIO_COORDS=[16.4167,120.5933];zonesLayer=null;incidentsLayer=wr.layerGroup();ngOnInit(){setTimeout(()=>{this.initMap(),this.loadRiskZones(),this.loadIncidents()},100)}initMap(){this.map||(this.map=wr.map("mountainSentinelMap",{center:this.BAGUIO_COORDS,zoom:13}),wr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:10,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),this.incidentsLayer.addTo(this.map))}loadRiskZones(){this.data.getRiskZones().subscribe(e=>{this.zonesLayer&&this.map.removeLayer(this.zonesLayer);let n=e.map(r=>({type:"Feature",properties:{name:r.name,riskLevel:r.riskLevel},geometry:r.geojson.geometry}));this.zonesLayer=wr.geoJSON(n,{style:r=>this.getZoneStyle(r?.properties.riskLevel),onEachFeature:(r,i)=>{i.bindPopup(`<b>${r.properties.name}</b><br>Risk: ${r.properties.riskLevel}`)}}).addTo(this.map)})}loadIncidents(){this.data.getSafetyFeed().subscribe(e=>{this.incidentsLayer.clearLayers(),e.filter(r=>r.type==="incident").forEach(r=>{let i=[r.location.lat,r.location.lng],o=wr.icon({iconUrl:this.getIconUrl(r.priority),iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]}),a=wr.marker(i,{icon:o});a.bindPopup(`
          <b>Incident: ${r.description}</b><br>
          Status: ${r.status}<br>
          Priority: ${r.priority.toUpperCase()}<br>
          Reported: ${r.createdAt.toDate().toLocaleTimeString()}
        `),this.incidentsLayer.addLayer(a)})})}getZoneStyle(e){let n;switch(e){case"high":n="#e34a33";break;case"medium":n="#fc8d59";break;case"low":default:n="#91cf60";break}return{fillColor:n,weight:2,opacity:.7,color:"white",fillOpacity:.5}}getIconUrl(e){switch(e){case"high":return"assets/icons/alert-high.png";case"medium":return"assets/icons/alert-medium.png";case"low":return"assets/icons/alert-low.png";default:return"assets/icons/incident.png"}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bt({type:t,selectors:[["app-map"]],decls:6,vars:0,consts:[[1,"citizen-view-container"],["id","mountainSentinelMap"],[1,"citizen-panel"],[2,"margin-top","20px"]],template:function(n,r){n&1&&(ne(0,"div",0),Yn(1,"div",1),ne(2,"div",2),Yn(3,"app-sos-button")(4,"div",3)(5,"app-safety-feed"),te()())},dependencies:[Zt,iv,ov],styles:["#mountainSentinelMap[_ngcontent-%COMP%]{height:500px;width:100%;border-radius:8px;margin-bottom:20px;z-index:0;box-shadow:0 2px 5px #0003}.citizen-view-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px}.citizen-panel[_ngcontent-%COMP%]{background-color:#fff;padding:15px;border-radius:8px;box-shadow:0 1px 3px #0000001a}@media (min-width: 768px){.citizen-view-container[_ngcontent-%COMP%]{flex-direction:row;gap:20px}#mountainSentinelMap[_ngcontent-%COMP%]{width:65%;margin-bottom:0}.citizen-panel[_ngcontent-%COMP%]{width:35%}}"]})};var Lk=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(fe(di),fe(Nr))};static \u0275dir=st({type:t})}return t})(),gv=(()=>{class t extends Lk{static \u0275fac=(()=>{let n;return function(i){return(n||(n=li(t)))(i||t)}})();static \u0275dir=st({type:t,features:[Qn]})}return t})(),ef=new X("");var sW={provide:ef,useExisting:ur(()=>ll),multi:!0};function aW(){let t=_r()?_r().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var cW=new X(""),ll=(()=>{class t extends Lk{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!aW())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(fe(di),fe(Nr),fe(cW,8))};static \u0275dir=st({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ln("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[to([sW]),Qn]})}return t})();function uW(t){return t==null||lW(t)===0}function lW(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var iD=new X(""),Fk=new X("");function dW(t){return uW(t.value)?{required:!0}:null}function Sk(t){return null}function Vk(t){return t!=null}function Bk(t){return Zi(t)?ut(t):t}function jk(t){let e={};return t.forEach(n=>{e=n!=null?G(G({},e),n):e}),Object.keys(e).length===0?null:e}function Uk(t,e){return e.map(n=>n(t))}function hW(t){return!t.validate}function $k(t){return t.map(e=>hW(e)?e:n=>e.validate(n))}function fW(t){if(!t)return null;let e=t.filter(Vk);return e.length==0?null:function(n){return jk(Uk(n,e))}}function oD(t){return t!=null?fW($k(t)):null}function pW(t){if(!t)return null;let e=t.filter(Vk);return e.length==0?null:function(n){let r=Uk(n,e).map(Bk);return ry(r).pipe(he(jk))}}function sD(t){return t!=null?pW($k(t)):null}function Ak(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function gW(t){return t._rawValidators}function mW(t){return t._rawAsyncValidators}function nD(t){return t?Array.isArray(t)?t:[t]:[]}function cv(t,e){return Array.isArray(t)?t.includes(e):t===e}function Rk(t,e){let n=nD(e);return nD(t).forEach(i=>{cv(n,i)||n.push(i)}),n}function Mk(t,e){return nD(e).filter(n=>!cv(t,n))}var uv=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=oD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ul=class extends uv{name;get formDirective(){return null}get path(){return null}},Xh=class extends uv{_parent=null;name=null;valueAccessor=null},lv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},_W={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},sde=be(G({},_W),{"[class.ng-submitted]":"isSubmitted"}),mv=(()=>{class t extends lv{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(fe(Xh,2))};static \u0275dir=st({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ad("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Qn]})}return t})(),_v=(()=>{class t extends lv{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(fe(ul,10))};static \u0275dir=st({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ad("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Qn]})}return t})();var Kh="VALID",av="INVALID",al="PENDING",Zh="DISABLED",Ds=class{},dv=class extends Ds{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Yh=class extends Ds{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Jh=class extends Ds{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},cl=class extends Ds{status;source;constructor(e,n){super(),this.status=e,this.source=n}},rD=class extends Ds{source;constructor(e){super(),this.source=e}},hv=class extends Ds{source;constructor(e){super(),this.source=e}};function Hk(t){return(vv(t)?t.validators:t)||null}function vW(t){return Array.isArray(t)?oD(t):t||null}function zk(t,e){return(vv(e)?e.asyncValidators:t)||null}function yW(t){return Array.isArray(t)?sD(t):t||null}function vv(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function EW(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new Z(1e3,"");if(!r[n])throw new Z(1001,"")}function wW(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new Z(1002,"")})}var fv=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return St(this.statusReactive)}set status(e){St(()=>this.statusReactive.set(e))}_status=du(()=>this.statusReactive());statusReactive=gr(void 0);get valid(){return this.status===Kh}get invalid(){return this.status===av}get pending(){return this.status==al}get disabled(){return this.status===Zh}get enabled(){return this.status!==Zh}errors;get pristine(){return St(this.pristineReactive)}set pristine(e){St(()=>this.pristineReactive.set(e))}_pristine=du(()=>this.pristineReactive());pristineReactive=gr(!0);get dirty(){return!this.pristine}get touched(){return St(this.touchedReactive)}set touched(e){St(()=>this.touchedReactive.set(e))}_touched=du(()=>this.touchedReactive());touchedReactive=gr(!1);get untouched(){return!this.touched}_events=new It;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Rk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Rk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Mk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Mk(e,this._rawAsyncValidators))}hasValidator(e){return cv(this._rawValidators,e)}hasAsyncValidator(e){return cv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(be(G({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Jh(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Jh(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(be(G({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Yh(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Yh(!0,r))}markAsPending(e={}){this.status=al;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new cl(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(be(G({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Zh,this.errors=null,this._forEachChild(i=>{i.disable(be(G({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dv(this.value,r)),this._events.next(new cl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(be(G({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Kh,this._forEachChild(r=>{r.enable(be(G({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(be(G({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kh||this.status===al)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dv(this.value,n)),this._events.next(new cl(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(be(G({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zh:Kh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=al,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=Bk(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new cl(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Dt,this.statusChanges=new Dt}_calculateStatus(){return this._allControlsDisabled()?Zh:this.errors?av:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(al)?al:this._anyControlsHaveStatus(av)?av:Kh}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Yh(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Jh(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=vW(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=yW(this._rawAsyncValidators)}},pv=class extends fv{constructor(e,n,r){super(Hk(n),zk(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){wW(this,!0,e),Object.keys(e).forEach(r=>{EW(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new hv(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var aD=new X("",{providedIn:"root",factory:()=>cD}),cD="always";function IW(t,e){return[...e.path,t]}function qk(t,e,n=cD){Gk(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),TW(t,e),DW(t,e),CW(t,e),bW(t,e)}function Pk(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function bW(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Gk(t,e){let n=gW(t);e.validator!==null?t.setValidators(Ak(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=mW(t);e.asyncValidator!==null?t.setAsyncValidators(Ak(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Pk(e._rawValidators,i),Pk(e._rawAsyncValidators,i)}function TW(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Wk(t,e)})}function CW(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Wk(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Wk(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function DW(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function SW(t,e){t==null,Gk(t,e)}function AW(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function RW(t){return Object.getPrototypeOf(t.constructor)===gv}function MW(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function PW(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===ll?n=o:RW(o)?r=o:i=o}),i||r||n||null}var xW={provide:ul,useExisting:ur(()=>tf)},Qh=Promise.resolve(),tf=(()=>{class t extends ul{callSetDisabledState;get submitted(){return St(this.submittedReactive)}_submitted=du(()=>this.submittedReactive());submittedReactive=gr(!1);_directives=new Set;form;ngSubmit=new Dt;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new pv({},oD(n),sD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Qh.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),qk(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Qh.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Qh.then(()=>{let r=this._findContainer(n.path),i=new pv({});SW(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Qh.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Qh.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),MW(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new rD(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(fe(iD,10),fe(Fk,10),fe(aD,8))};static \u0275dir=st({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ln("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[to([xW]),Qn]})}return t})();function xk(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Nk(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var NW=class extends fv{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(Hk(n),zk(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vv(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Nk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new hv(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Nk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var OW={provide:Xh,useExisting:ur(()=>nf)},Ok=Promise.resolve(),nf=(()=>{class t extends Xh{_changeDetectorRef;callSetDisabledState;control=new NW;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Dt;constructor(n,r,i,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=PW(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),AW(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){qk(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Ok.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&ya(r);Ok.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?IW(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(fe(ul,9),fe(iD,10),fe(Fk,10),fe(ef,10),fe(Xo,8),fe(aD,8))};static \u0275dir=st({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[to([OW]),Qn,Wi]})}return t})();var yv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=st({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),kW={provide:ef,useExisting:ur(()=>uD),multi:!0},uD=(()=>{class t extends gv{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=li(t)))(i||t)}})();static \u0275dir=st({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ln("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[to([kW]),Qn]})}return t})();var LW={provide:ef,useExisting:ur(()=>Ev),multi:!0};function Kk(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function FW(t){return t.split(":")[0]}var Ev=(()=>{class t extends gv{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=B(Qi).injector;destroyRef=B(si);cdr=B(Xo);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Sg({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=Kk(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=FW(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=li(t)))(i||t)}})();static \u0275dir=st({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ln("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[to([LW]),Qn]})}return t})(),Zk=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Kk(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(fe(Nr),fe(di),fe(Ev,9))};static \u0275dir=st({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),VW={provide:ef,useExisting:ur(()=>Qk),multi:!0};function kk(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function BW(t){return t.split(":")[0]}var Qk=(()=>{class t extends gv{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let u=0;u<a.length;u++){let d=a[u],f=this._getOptionValue(d.value);i.push(f)}}else{let a=r.options;for(let u=0;u<a.length;u++){let d=a[u];if(d.selected){let f=this._getOptionValue(d.value);i.push(f)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=BW(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=li(t)))(i||t)}})();static \u0275dir=st({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ln("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[to([VW]),Qn]})}return t})(),Yk=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(kk(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(kk(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(fe(Nr),fe(di),fe(Qk,9))};static \u0275dir=st({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var jW=(()=>{class t{_validator=Sk;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Sk,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=st({type:t,features:[Wi]})}return t})();var UW={provide:iD,useExisting:ur(()=>rf),multi:!0};var rf=(()=>{class t extends jW{required;inputName="required";normalizeInput=ya;createValidator=n=>dW;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=li(t)))(i||t)}})();static \u0275dir=st({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&cu("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[to([UW]),Qn]})}return t})();var $W=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ki({type:t});static \u0275inj=ti({})}return t})();var dl=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:aD,useValue:n.callSetDisabledState??cD}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ki({type:t});static \u0275inj=ti({imports:[$W]})}return t})();function HW(t,e){if(t&1&&(ne(0,"div",20),pe(1),te()),t&2){let n=Kt();xe(),_n(" ",n.successMessage," ")}}function zW(t,e){if(t&1&&(ne(0,"div",21),pe(1),te()),t&2){let n=Kt();xe(),_n(" ",n.errorMessage," ")}}var wv=class t{data=B(Vn);incidentData={location:{lat:16.4167,lng:120.5933},description:"",priority:"medium"};errorMessage=null;successMessage=null;isLoading=!1;onSubmit(){return T(this,null,function*(){if(this.errorMessage=null,this.successMessage=null,this.isLoading=!0,!this.incidentData.description||!this.incidentData.location){this.errorMessage="Please provide a description and a location for the incident.",this.isLoading=!1;return}try{let e=yield this.data.reportIncident(this.incidentData);this.successMessage=`Incident successfully reported! ID: ${e}. An administrator will review your submission shortly.`,this.incidentData={location:{lat:16.4167,lng:120.5933},description:"",priority:"medium"}}catch(e){console.error("Report submission failed:",e),this.errorMessage="Submission failed due to a server or network error. Please try again."}finally{this.isLoading=!1}})}autofillLocation(){navigator.geolocation?(this.errorMessage=null,navigator.geolocation.getCurrentPosition(e=>{this.incidentData.location={lat:e.coords.latitude,lng:e.coords.longitude},this.successMessage="Location successfully autofilled!"},e=>{console.error("Geolocation error:",e),this.errorMessage="Could not get your current location. Please enter coordinates manually."})):this.errorMessage="Geolocation is not supported by your browser."}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bt({type:t,selectors:[["app-report"]],decls:39,vars:8,consts:[["reportForm","ngForm"],[1,"report-container"],[3,"ngSubmit"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],[1,"form-group"],["for","description"],["id","description","name","description","rows","4","required","",3,"ngModelChange","ngModel"],["for","priority"],["id","priority","name","priority",3,"ngModelChange","ngModel"],["value","low"],["value","medium"],["value","high"],[1,"location-group"],[1,"coords-input"],[1,"coord-field"],["type","number","name","lat","required","",3,"ngModelChange","ngModel"],["type","number","name","lng","required","",3,"ngModelChange","ngModel"],["type","button",1,"autofill-btn",3,"click"],["type","submit",1,"submit-btn",3,"disabled"],[1,"message","success"],[1,"message","error"]],template:function(n,r){if(n&1){let i=va();ne(0,"div",1)(1,"h2"),pe(2,"Report an Incident"),te(),ne(3,"p"),pe(4," Please provide accurate details and your location so administrators can respond efficiently. "),te(),ne(5,"form",2,0),ln("ngSubmit",function(){return Dn(i),Sn(r.onSubmit())}),jt(7,HW,2,1,"div",3)(8,zW,2,1,"div",4),ne(9,"div",5)(10,"label",6),pe(11,"Detailed Description of Incident *"),te(),ne(12,"textarea",7),fi("ngModelChange",function(a){return Dn(i),eo(r.incidentData.description,a)||(r.incidentData.description=a),Sn(a)}),te()(),ne(13,"div",5)(14,"label",8),pe(15,"Priority Level"),te(),ne(16,"select",9),fi("ngModelChange",function(a){return Dn(i),eo(r.incidentData.priority,a)||(r.incidentData.priority=a),Sn(a)}),ne(17,"option",10),pe(18,"Low (Non-emergency issue)"),te(),ne(19,"option",11),pe(20,"Medium (Requires attention soon)"),te(),ne(21,"option",12),pe(22,"High (Urgent emergency)"),te()()(),ne(23,"div",13)(24,"label"),pe(25,"Location (Latitude / Longitude) *"),te(),ne(26,"div",14)(27,"div",15)(28,"label"),pe(29,"Latitude"),te(),ne(30,"input",16),fi("ngModelChange",function(a){return Dn(i),eo(r.incidentData.location.lat,a)||(r.incidentData.location.lat=a),Sn(a)}),te()(),ne(31,"div",15)(32,"label"),pe(33,"Longitude"),te(),ne(34,"input",17),fi("ngModelChange",function(a){return Dn(i),eo(r.incidentData.location.lng,a)||(r.incidentData.location.lng=a),Sn(a)}),te()()(),ne(35,"button",18),ln("click",function(){return Dn(i),Sn(r.autofillLocation())}),pe(36," Use Current GPS Location "),te()(),ne(37,"button",19),pe(38),te()()()}if(n&2){let i=Xi(6);xe(7),gt("ngIf",r.successMessage),xe(),gt("ngIf",r.errorMessage),xe(4),hi("ngModel",r.incidentData.description),xe(4),hi("ngModel",r.incidentData.priority),xe(14),hi("ngModel",r.incidentData.location.lat),xe(4),hi("ngModel",r.incidentData.location.lng),xe(3),gt("disabled",i.invalid||r.isLoading),xe(),_n(" ",r.isLoading?"Submitting...":"Submit Report"," ")}},dependencies:[Zt,Fr,dl,yv,Zk,Yk,ll,uD,Ev,mv,_v,rf,nf,tf],styles:[".report-container[_ngcontent-%COMP%]{max-width:600px;margin:40px auto;padding:30px;background-color:#fff;border-radius:12px;box-shadow:0 4px 15px #0000001a}.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#3f51b5;border-bottom:2px solid #e0e0e0;padding-bottom:10px;margin-bottom:5px;font-size:1.8rem}.report-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:25px;font-size:.95rem}form[_ngcontent-%COMP%]{display:grid;gap:25px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:1rem}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .coord-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ccc;border-radius:6px;box-sizing:border-box;font-size:1rem;transition:border-color .2s,box-shadow .2s}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .coord-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#3f51b5;box-shadow:0 0 0 3px #3f51b533;outline:none}.location-group[_ngcontent-%COMP%]{border:1px solid #eee;padding:20px;border-radius:8px;background-color:#f7f9fc}.coords-input[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:15px}.coord-field[_ngcontent-%COMP%]{flex:1}.autofill-btn[_ngcontent-%COMP%]{padding:10px 15px;background-color:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:.95rem;font-weight:500;transition:background-color .2s}.autofill-btn[_ngcontent-%COMP%]:hover{background-color:#3d8b40}.submit-btn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#3f51b5;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:1.1rem;font-weight:700;transition:background-color .2s;margin-top:10px}.submit-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#3849a2}.submit-btn[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed;opacity:.7}.message[_ngcontent-%COMP%]{padding:15px;margin-bottom:25px;border-radius:6px;font-weight:600;text-align:center;border-left:5px solid}.success[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2d682f;border-left-color:#4caf50}.error[_ngcontent-%COMP%]{background-color:#ffebee;color:#ab2424;border-left-color:#d32f2f}"]})};var Iv=class t{data=B(Vn);alertData={message:"",priority:"medium",createdBy:"Admin"};submitAlert(){return T(this,null,function*(){if(!this.alertData.message){alert("Alert message cannot be empty.");return}try{let e=yield this.data.issueAlert(this.alertData);alert(`Alert issued successfully! ID: ${e}`),this.alertData.message="",this.alertData.priority="medium"}catch(e){console.error("Error issuing alert:",e),alert("Failed to issue alert. Check console.")}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bt({type:t,selectors:[["app-alert-form"]],decls:2,vars:0,template:function(n,r){n&1&&(uu(0,"p"),pe(1,"alert-form works!"),lu())},dependencies:[Zt,dl],styles:[".alert-form[_ngcontent-%COMP%]{display:grid;gap:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#333}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;font-size:1rem}.submit-btn[_ngcontent-%COMP%]{padding:10px 15px;background-color:#3f51b5;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:1rem;transition:background-color .2s}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#5c6bc0}"]})};function qW(t,e){if(t&1&&Yn(0,"tr",6),t&2){let n=e.$implicit,r=Kt(3);gt("ngClass",r.getStatusClass(n.status))}}function GW(t,e){if(t&1&&(ne(0,"table"),Yn(1,"thead"),ne(2,"tbody"),jt(3,qW,1,1,"tr",5),te()()),t&2){let n=Kt().ngIf,r=Kt();xe(3),gt("ngForOf",r.getIncidents(n))}}function WW(t,e){if(t&1&&(Yi(0),jt(1,GW,4,1,"table",4),Ji()),t&2){let n=e.ngIf;Kt();let r=Xi(6);xe(),gt("ngIf",n.length>0)("ngIfElse",r)}}function KW(t,e){t&1&&(ne(0,"p",7),pe(1,"No incidents currently in the queue."),te())}var bv=class t{data=B(Vn);allFeedItems$=this.data.getSafetyFeed();getIncidents(e){return e?e.filter(n=>n.type==="incident"):[]}updateStatus(e,n){return T(this,null,function*(){yield this.data.updateIncidentStatus(e,n),alert(`Incident ${e} status updated to ${n.toUpperCase()}`)})}getStatusClass(e){return`status-${e}`}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bt({type:t,selectors:[["app-admin-dashboard"]],decls:11,vars:3,consts:[["noIncidents",""],[1,"incident-list-panel"],[4,"ngIf"],[1,"alert-panel"],[4,"ngIf","ngIfElse"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"no-incidents-msg"]],template:function(n,r){n&1&&(ne(0,"div",1)(1,"h3"),pe(2,"Incident Management Queue"),te(),jt(3,WW,2,2,"ng-container",2),mr(4,"async"),jt(5,KW,2,0,"ng-template",null,0,Rd),te(),ne(7,"div",3)(8,"h3"),pe(9,"Issue New Alert"),te(),Yn(10,"app-alert-form"),te()),n&2&&(xe(3),gt("ngIf",kr(4,1,r.allFeedItems$)))},dependencies:[Zt,Fd,pu,Fr,Iv,Ea],styles:[".admin-container[_ngcontent-%COMP%]{padding:20px}h2[_ngcontent-%COMP%]{color:#3f51b5;border-bottom:3px solid #e0e0e0;padding-bottom:10px}.alert-panel[_ngcontent-%COMP%]{border:1px solid #ccc;padding:15px;margin-bottom:30px;border-radius:8px;background-color:#f0f0f0;box-shadow:0 1px 3px #0000001a}.incident-list-panel[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px;background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #0000001a}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 10px;text-align:left;border-bottom:1px solid #eee;font-size:.9rem}th[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;font-weight:600;text-transform:uppercase}.status-pending[_ngcontent-%COMP%]{background-color:#fff3cd}.status-assigned[_ngcontent-%COMP%]{background-color:#cce5ff}.status-resolved[_ngcontent-%COMP%]{background-color:#d4edda}button[_ngcontent-%COMP%]{padding:5px 10px;margin-right:5px;border:none;border-radius:4px;cursor:pointer;font-size:.85rem;transition:opacity .15s}button[_ngcontent-%COMP%]:nth-child(1){background-color:#ff9800;color:#fff}button[_ngcontent-%COMP%]:nth-child(2){background-color:#4caf50;color:#fff}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.no-incidents-msg[_ngcontent-%COMP%]{padding:20px;text-align:center;border:1px dashed #ccc;border-radius:4px;margin-top:20px}"]})};var Ss=class t{auth=B(ka);router=B(ao);currentUser$=jx(this.auth);login(e,n){return T(this,null,function*(){try{yield $x(this.auth,e,n),this.router.navigate(["/admin"])}catch(r){throw console.error("Login failed:",r.code,r.message),new Error("Login failed: Invalid credentials or account not found.")}})}logout(){return T(this,null,function*(){yield Hx(this.auth),this.router.navigate(["/"])})}isLoggedIn(){return new le(e=>{this.currentUser$.subscribe(n=>{e.next(!!n)})})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})};function ZW(t,e){if(t&1&&(ne(0,"div",10),pe(1),te()),t&2){let n=Kt();xe(),_n(" ",n.errorMessage," ")}}var Tv=class t{authService=B(Ss);email="";password="";errorMessage=null;isLoading=!1;onSubmit(){return T(this,null,function*(){this.errorMessage=null,this.isLoading=!0;try{yield this.authService.login(this.email,this.password)}catch(e){this.errorMessage=e.message}finally{this.isLoading=!1}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bt({type:t,selectors:[["app-login"]],decls:18,vars:5,consts:[["loginForm","ngForm"],[1,"login-container"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["id","email","type","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["id","password","type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",1,"login-btn",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(n,r){if(n&1){let i=va();ne(0,"div",1)(1,"h2"),pe(2,"Admin Login"),te(),ne(3,"p"),pe(4,"Use your designated Admin email and password."),te(),ne(5,"form",2,0),ln("ngSubmit",function(){return Dn(i),Sn(r.onSubmit())}),ne(7,"div",3)(8,"label",4),pe(9,"Email:"),te(),ne(10,"input",5),fi("ngModelChange",function(a){return Dn(i),eo(r.email,a)||(r.email=a),Sn(a)}),te()(),ne(11,"div",3)(12,"label",6),pe(13,"Password:"),te(),ne(14,"input",7),fi("ngModelChange",function(a){return Dn(i),eo(r.password,a)||(r.password=a),Sn(a)}),te()(),ne(15,"button",8),pe(16),te(),jt(17,ZW,2,1,"div",9),te()()}if(n&2){let i=Xi(6);xe(10),hi("ngModel",r.email),xe(4),hi("ngModel",r.password),xe(),gt("disabled",i.invalid||r.isLoading),xe(),_n(" ",r.isLoading?"Logging In...":"Log In"," "),xe(),gt("ngIf",r.errorMessage)}},dependencies:[Zt,Fr,dl,yv,ll,mv,_v,rf,nf,tf],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:50px auto;padding:30px;background-color:#fff;border-radius:8px;box-shadow:0 4px 10px #0000001a}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#3f51b5;border-bottom:2px solid #e0e0e0;padding-bottom:10px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#555}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;font-size:1rem}.login-btn[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#3f51b5;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:1.1rem;font-weight:700;transition:background-color .2s}.login-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#5c6bc0}.login-btn[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{margin-top:15px;padding:10px;background-color:#fdeaea;color:#d32f2f;border:1px solid #d32f2f;border-radius:4px;text-align:center}"]})};var Xk=(t,e)=>{let n=B(Ss),r=B(ao);return n.currentUser$.pipe(he(i=>i?!0:r.createUrlTree(["/login"])))};var e1=[{path:"",component:sv,title:"Mountain Sentinel Home"},{path:"report",component:wv,title:"Report Incident"},{path:"login",component:Tv,title:"Admin Login"},{path:"admin",component:bv,title:"Admin Command Center",canActivate:[Xk]},{path:"**",redirectTo:""}];var QW={apiKey:"AIzaSyC5tdlJxwcSqbHwGAjOjUbd7XVU54ePawk",authDomain:"mountain-sentinel.firebaseapp.com",projectId:"mountain-sentinel",storageBucket:"mountain-sentinel.firebasestorage.app",messagingSenderId:"635510430186",appId:"1:635510430186:web:e333c2a926d64d44383a93",measurementId:"G-5G9M3TM3NW"},t1={providers:[MP(()=>PP(QW)),Tk(()=>Ck()),Bx(()=>Ux()),hI(e1)]};function YW(t,e){if(t&1){let n=va();Yi(0),ne(1,"a",6),pe(2,"Admin"),te(),ne(3,"a",7),ln("click",function(){Dn(n);let i=Kt();return Sn(i.authService.logout())}),pe(4,"Logout"),te(),Ji()}}function JW(t,e){t&1&&(ne(0,"a",8),pe(1,"Admin Login"),te())}var Cv=class t{title="Mountain Sentinel";authService=B(Ss);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bt({type:t,selectors:[["app-root"]],decls:14,vars:4,consts:[["loggedOut",""],[1,"app-header"],["routerLink","/"],["routerLink","/report"],[4,"ngIf","ngIfElse"],[1,"app-main"],["routerLink","/admin"],[3,"click"],["routerLink","/login"]],template:function(n,r){if(n&1&&(ne(0,"header",1)(1,"h1"),pe(2,"\u{1F3D4}\uFE0F Mountain Sentinel"),te(),ne(3,"nav")(4,"a",2),pe(5,"Home (Map View)"),te(),ne(6,"a",3),pe(7,"Report Incident"),te(),jt(8,YW,5,0,"ng-container",4),mr(9,"async"),jt(10,JW,2,0,"ng-template",null,0,Rd),te()(),ne(12,"main",5),Yn(13,"router-outlet"),te()),n&2){let i=Xi(11);xe(8),gt("ngIf",kr(9,2,r.authService.currentUser$))("ngIfElse",i)}},dependencies:[oh,Sm,Zt,Fr,Ea],styles:[".app-header[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;padding:10px 20px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 4px #0000001a}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin-left:15px;padding:5px 10px;border-radius:4px;transition:background-color .2s}.app-header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#5c6bc0}.app-main[_ngcontent-%COMP%]{padding:20px}"]})};$w(Cv,t1).catch(t=>console.error(t));
