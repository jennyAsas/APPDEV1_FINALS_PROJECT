<div class="safety-feed-container">
  <h2> Real-Time Safety Feed </h2>
  <p>View approved incident reports in real-time.</p>

  <div class="feed-list" *ngIf="approvedReports$ | async as reports; else loading">
    <ng-container *ngIf="reports.length > 0; else emptyFeed">
      <div *ngFor="let report of reports" class="feed-item approved">
        <div class="item-header">
          <h3>{{ report.description }}</h3>
          <span class="status-badge">{{ report.status }}</span>
        </div>

        <div class="item-details">
          <p><strong>Location:</strong> {{ report.street }}, {{ report.barangay }}</p>
          <p><strong>Reporter:</strong> {{ report.reporterName || report.reporterId }}</p>
          <p><strong> Reported:</strong> {{ report.createdAt | date: 'short' }}</p>
        </div>

        <div *ngIf="report.imageUrl" class="item-image">
          <img [src]="report.imageUrl" alt="Incident" />
        </div>
      </div>
    </ng-container>

    <ng-template #emptyFeed>
      <div class="empty-feed">
        <p>No incidents reported at this time. Stay safe!</p>
      </div>
    </ng-template>
  </div>

  <ng-template #loading>
    <div class="loading">Loading safety feed...</div>
  </ng-template>
</div>
