var fF=Object.create;var Yy=Object.defineProperty,pF=Object.defineProperties,gF=Object.getOwnPropertyDescriptor,mF=Object.getOwnPropertyDescriptors,_F=Object.getOwnPropertyNames,kT=Object.getOwnPropertySymbols,FT=Object.getPrototypeOf,VT=Object.prototype.hasOwnProperty,vF=Object.prototype.propertyIsEnumerable,yF=Reflect.get;var LT=(n,e,t)=>e in n?Yy(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,K=(n,e)=>{for(var t in e||={})VT.call(e,t)&&LT(n,t,e[t]);if(kT)for(var t of kT(e))vF.call(e,t)&&LT(n,t,e[t]);return n},pe=(n,e)=>pF(n,mF(e));var wF=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var bF=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of _F(e))!VT.call(n,r)&&r!==t&&Yy(n,r,{get:()=>e[r],enumerable:!(i=gF(e,r))||i.enumerable});return n};var CF=(n,e,t)=>(t=n!=null?fF(FT(n)):{},bF(e||!n||!n.__esModule?Yy(t,"default",{value:n,enumerable:!0}):t,n));var xs=(n,e,t)=>yF(FT(n),t,e);var D=(n,e,t)=>new Promise((i,r)=>{var o=u=>{try{l(t.next(u))}catch(f){r(f)}},a=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(o,a);l((t=t.apply(n,e)).next())});var hL=wF((vy,dL)=>{"use strict";(function(n,e){typeof vy=="object"&&typeof dL<"u"?e(vy):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(vy,function(n){"use strict";var e="1.9.4";function t(s){var c,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(c in _)s[c]=_[c]}return s}var i=Object.create||(function(){function s(){}return function(c){return s.prototype=c,new s}})();function r(s,c){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(c,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function l(s,c,h){var p,_,E,P;return P=function(){p=!1,_&&(E.apply(h,_),_=!1)},E=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(P,c),p=!0)},E}function u(s,c,h){var p=c[1],_=c[0],E=p-_;return s===p&&h?s:((s-_)%E+E)%E+_}function f(){return!1}function m(s,c){if(c===!1)return s;var h=Math.pow(10,c===void 0?6:c);return Math.round(s*h)/h}function y(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function C(s){return y(s).split(/\s+/)}function I(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?i(s.options):{});for(var h in c)s.options[h]=c[h];return s.options}function N(s,c,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var G=/\{ *([\w_ -]+) *\}/g;function q(s,c){return s.replace(G,function(h,p){var _=c[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(c)),_})}var Q=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function he(s,c){for(var h=0;h<s.length;h++)if(s[h]===c)return h;return-1}var ye="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Qe(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var Yt=0;function st(s){var c=+new Date,h=Math.max(0,16-(c-Yt));return Yt=c+h,window.setTimeout(s,h)}var k=window.requestAnimationFrame||Qe("RequestAnimationFrame")||st,M=window.cancelAnimationFrame||Qe("CancelAnimationFrame")||Qe("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function A(s,c,h){if(h&&k===st)s.call(c);else return k.call(window,r(s,c))}function R(s){s&&M.call(window,s)}var V={__proto__:null,extend:t,create:i,bind:r,get lastId(){return o},stamp:a,throttle:l,wrapNum:u,falseFn:f,formatNum:m,trim:y,splitWords:C,setOptions:I,getParamString:N,template:q,isArray:Q,indexOf:he,emptyImageUrl:ye,requestFn:k,cancelFn:M,requestAnimFrame:A,cancelAnimFrame:R};function j(){}j.extend=function(s){var c=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,p=i(h);p.constructor=c,c.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(c[_]=this[_]);return s.statics&&t(c,s.statics),s.includes&&(O(s.includes),t.apply(null,[p].concat(s.includes))),t(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?i(h.options):{},t(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,P=p._initHooks.length;E<P;E++)p._initHooks[E].call(this)}},c},j.include=function(s){var c=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},j.mergeOptions=function(s){return t(this.prototype.options,s),this},j.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function O(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=Q(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ft={on:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c);else{s=C(s);for(var _=0,E=s.length;_<E;_++)this._on(s[_],c,h)}return this},off:function(s,c,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],c);else{s=C(s);for(var _=arguments.length===1,E=0,P=s.length;E<P;E++)_?this._off(s[E]):this._off(s[E],c,h)}return this},_on:function(s,c,h,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,h)===!1){h===this&&(h=void 0);var _={fn:c,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,c,h){var p,_,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,E=p.length;_<E;_++)p[_].fn=f;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var P=this._listens(s,c,h);if(P!==!1){var z=p[P];this._firingCount&&(z.fn=f,this._events[s]=p=p.slice()),p.splice(P,1)}}},fire:function(s,c,h){if(!this.listens(s,h))return this;var p=t({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var E=0,P=_.length;E<P;E++){var z=_[E],H=z.fn;z.once&&this.off(s,H,z.ctx),H.call(z.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,c,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=c;typeof c!="function"&&(p=!!c,_=void 0,h=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var P in this._eventParents)if(this._eventParents[P].listens(s,c,h,p))return!0}return!1},_listens:function(s,c,h){if(!this._events)return!1;var p=this._events[s]||[];if(!c)return!!p.length;h===this&&(h=void 0);for(var _=0,E=p.length;_<E;_++)if(p[_].fn===c&&p[_].ctx===h)return _;return!1},once:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c,!0);else{s=C(s);for(var _=0,E=s.length;_<E;_++)this._on(s[_],c,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};Ft.addEventListener=Ft.on,Ft.removeEventListener=Ft.clearAllEventListeners=Ft.off,Ft.addOneTimeEventListener=Ft.once,Ft.fireEvent=Ft.fire,Ft.hasEventListeners=Ft.listens;var er=j.extend(Ft);function ke(s,c,h){this.x=h?Math.round(s):s,this.y=h?Math.round(c):c}var ds=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};ke.prototype={clone:function(){return new ke(this.x,this.y)},add:function(s){return this.clone()._add(xe(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(xe(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new ke(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new ke(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ds(this.x),this.y=ds(this.y),this},distanceTo:function(s){s=xe(s);var c=s.x-this.x,h=s.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(s){return s=xe(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=xe(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function xe(s,c,h){return s instanceof ke?s:Q(s)?new ke(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new ke(s.x,s.y):new ke(s,c,h)}function bt(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}bt.prototype={extend:function(s){var c,h;if(!s)return this;if(s instanceof ke||typeof s[0]=="number"||"x"in s)c=h=xe(s);else if(s=Nn(s),c=s.min,h=s.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return xe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return xe(this.min.x,this.max.y)},getTopRight:function(){return xe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,h;return typeof s[0]=="number"||s instanceof ke?s=xe(s):s=Nn(s),s instanceof bt?(c=s.min,h=s.max):c=h=s,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=Nn(s);var c=this.min,h=this.max,p=s.min,_=s.max,E=_.x>=c.x&&p.x<=h.x,P=_.y>=c.y&&p.y<=h.y;return E&&P},overlaps:function(s){s=Nn(s);var c=this.min,h=this.max,p=s.min,_=s.max,E=_.x>c.x&&p.x<h.x,P=_.y>c.y&&p.y<h.y;return E&&P},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,h=this.max,p=Math.abs(c.x-h.x)*s,_=Math.abs(c.y-h.y)*s;return Nn(xe(c.x-p,c.y-_),xe(h.x+p,h.y+_))},equals:function(s){return s?(s=Nn(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Nn(s,c){return!s||s instanceof bt?s:new bt(s,c)}function Bn(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}Bn.prototype={extend:function(s){var c=this._southWest,h=this._northEast,p,_;if(s instanceof Ae)p=s,_=s;else if(s instanceof Bn){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(We(s)||gt(s)):this;return!c&&!h?(this._southWest=new Ae(p.lat,p.lng),this._northEast=new Ae(_.lat,_.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var c=this._southWest,h=this._northEast,p=Math.abs(c.lat-h.lat)*s,_=Math.abs(c.lng-h.lng)*s;return new Bn(new Ae(c.lat-p,c.lng-_),new Ae(h.lat+p,h.lng+_))},getCenter:function(){return new Ae((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ae(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ae(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ae||"lat"in s?s=We(s):s=gt(s);var c=this._southWest,h=this._northEast,p,_;return s instanceof Bn?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=c.lat&&_.lat<=h.lat&&p.lng>=c.lng&&_.lng<=h.lng},intersects:function(s){s=gt(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),E=_.lat>=c.lat&&p.lat<=h.lat,P=_.lng>=c.lng&&p.lng<=h.lng;return E&&P},overlaps:function(s){s=gt(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),E=_.lat>c.lat&&p.lat<h.lat,P=_.lng>c.lng&&p.lng<h.lng;return E&&P},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=gt(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function gt(s,c){return s instanceof Bn?s:new Bn(s,c)}function Ae(s,c,h){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,h!==void 0&&(this.alt=+h)}Ae.prototype={equals:function(s,c){if(!s)return!1;s=We(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+m(this.lat,s)+", "+m(this.lng,s)+")"},distanceTo:function(s){return Ar.distance(this,We(s))},wrap:function(){return Ar.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,h=c/Math.cos(Math.PI/180*this.lat);return gt([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new Ae(this.lat,this.lng,this.alt)}};function We(s,c,h){return s instanceof Ae?s:Q(s)&&typeof s[0]!="object"?s.length===3?new Ae(s[0],s[1],s[2]):s.length===2?new Ae(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ae(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new Ae(s,c,h)}var Yn={latLngToPoint:function(s,c){var h=this.projection.project(s),p=this.scale(c);return this.transformation._transform(h,p)},pointToLatLng:function(s,c){var h=this.scale(c),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(c.min,h),_=this.transformation.transform(c.max,h);return new bt(p,_)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?u(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?u(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ae(h,c,p)},wrapLatLngBounds:function(s){var c=s.getCenter(),h=this.wrapLatLng(c),p=c.lat-h.lat,_=c.lng-h.lng;if(p===0&&_===0)return s;var E=s.getSouthWest(),P=s.getNorthEast(),z=new Ae(E.lat-p,E.lng-_),H=new Ae(P.lat-p,P.lng-_);return new Bn(z,H)}},Ar=t({},Yn,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var h=Math.PI/180,p=s.lat*h,_=c.lat*h,E=Math.sin((c.lat-s.lat)*h/2),P=Math.sin((c.lng-s.lng)*h/2),z=E*E+Math.cos(p)*Math.cos(_)*P*P,H=2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));return this.R*H}}),hs=6378137,dd={R:hs,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*c);return new ke(this.R*s.lng*c,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var c=180/Math.PI;return new Ae((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:(function(){var s=hs*Math.PI;return new bt([-s,-s],[s,s])})()};function hd(s,c,h,p){if(Q(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=h,this._d=p}hd.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new ke((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function Pr(s,c,h,p){return new hd(s,c,h,p)}var fs=t({},Ar,{code:"EPSG:3857",projection:dd,transformation:(function(){var s=.5/(Math.PI*dd.R);return Pr(s,.5,-s,.5)})()}),fd=t({},fs,{code:"EPSG:900913"});function Xc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function el(s,c){var h="",p,_,E,P,z,H;for(p=0,E=s.length;p<E;p++){for(z=s[p],_=0,P=z.length;_<P;_++)H=z[_],h+=(_?"L":"M")+H.x+" "+H.y;h+=c?fe.svg?"z":"x":""}return h||"M0 0"}var Sa=document.documentElement.style,Ta="ActiveXObject"in window,Xf=Ta&&!document.addEventListener,ep="msLaunchUri"in navigator&&!("documentMode"in document),tl=yi("webkit"),pd=yi("android"),nl=yi("android 2")||yi("android 3"),tp=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Uy=pd&&yi("Google")&&tp<537&&!("AudioNode"in window),Da=!!window.opera,il=!ep&&yi("chrome"),rl=yi("gecko")&&!tl&&!Da&&!Ta,xn=!il&&yi("safari"),Sn=yi("phantom"),Ma="OTransition"in Sa,np=navigator.platform.indexOf("Win")===0,gd=Ta&&"transition"in Sa,md="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nl,ps="MozPerspective"in Sa,ip=!window.L_DISABLE_3D&&(gd||md||ps)&&!Ma&&!Sn,gs=typeof orientation<"u"||yi("mobile"),_d=gs&&tl,zy=gs&&md,rp=!window.PointerEvent&&window.MSPointerEvent,ol=!!(window.PointerEvent||rp),vd="ontouchstart"in window||!!window.TouchEvent,op=!window.L_NO_TOUCH&&(vd||ol),Aa=gs&&Da,yd=gs&&rl,wd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Eo=(function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return s})(),sp=(function(){return!!document.createElement("canvas").getContext})(),ms=!!(document.createElementNS&&Xc("svg").createSVGRect),ap=!!ms&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Pa=!ms&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),cp=navigator.platform.indexOf("Mac")===0,kn=navigator.platform.indexOf("Linux")===0;function yi(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var fe={ie:Ta,ielt9:Xf,edge:ep,webkit:tl,android:pd,android23:nl,androidStock:Uy,opera:Da,chrome:il,gecko:rl,safari:xn,phantom:Sn,opera12:Ma,win:np,ie3d:gd,webkit3d:md,gecko3d:ps,any3d:ip,mobile:gs,mobileWebkit:_d,mobileWebkit3d:zy,msPointer:rp,pointer:ol,touch:op,touchNative:vd,mobileOpera:Aa,mobileGecko:yd,retina:wd,passiveEvents:Eo,canvas:sp,svg:ms,vml:Pa,inlineSvg:ap,mac:cp,linux:kn},_s=fe.msPointer?"MSPointerDown":"pointerdown",lp=fe.msPointer?"MSPointerMove":"pointermove",up=fe.msPointer?"MSPointerUp":"pointerup",Io=fe.msPointer?"MSPointerCancel":"pointercancel",bd={touchstart:_s,touchmove:lp,touchend:up,touchcancel:Io},dp={touchstart:fp,touchmove:vs,touchend:vs,touchcancel:vs},tr={},Cd=!1;function Ed(s,c,h){return c==="touchstart"&&xd(),dp[c]?(h=dp[c].bind(this,h),s.addEventListener(bd[c],h,!1),h):(console.warn("wrong event specified:",c),f)}function sl(s,c,h){if(!bd[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(bd[c],h,!1)}function Or(s){tr[s.pointerId]=s}function hp(s){tr[s.pointerId]&&(tr[s.pointerId]=s)}function Id(s){delete tr[s.pointerId]}function xd(){Cd||(document.addEventListener(_s,Or,!0),document.addEventListener(lp,hp,!0),document.addEventListener(up,Id,!0),document.addEventListener(Io,Id,!0),Cd=!0)}function vs(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in tr)c.touches.push(tr[h]);c.changedTouches=[c],s(c)}}function fp(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Bt(c),vs(s,c)}function pp(s){var c={},h,p;for(p in s)h=s[p],c[p]=h&&h.bind?h.bind(s):h;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Hy=200;function al(s,c){s.addEventListener("dblclick",c);var h=0,p;function _(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var P=Nd(E);if(!(P.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!P.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var z=Date.now();z-h<=Hy?(p++,p===2&&c(pp(E))):p=1,h=z}}}return s.addEventListener("click",_),{dblclick:c,simDblclick:_}}function gp(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var Oa=Li(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),nr=Li(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Rr=nr==="webkitTransition"||nr==="OTransition"?nr+"End":"transitionend";function cl(s){return typeof s=="string"?document.getElementById(s):s}function Ra(s,c){var h=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[c]:null}return h==="auto"?null:h}function Je(s,c,h){var p=document.createElement(s);return p.className=c||"",h&&h.appendChild(p),p}function Ct(s){var c=s.parentNode;c&&c.removeChild(s)}function Na(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Nr(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function kr(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function ll(s,c){if(s.classList!==void 0)return s.classList.contains(c);var h=ka(s);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function Ve(s,c){if(s.classList!==void 0)for(var h=C(c),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!ll(s,c)){var E=ka(s);Sd(s,(E?E+" ":"")+c)}}function Vt(s,c){s.classList!==void 0?s.classList.remove(c):Sd(s,y((" "+ka(s)+" ").replace(" "+c+" "," ")))}function Sd(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function ka(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Qn(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&$y(s,c)}function $y(s,c){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):s.style.filter+=" progid:"+p+"(opacity="+c+")"}function Li(s){for(var c=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in c)return s[h];return!1}function Ln(s,c,h){var p=c||new ke(0,0);s.style[Oa]=(fe.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function Tt(s,c){s._leaflet_pos=c,fe.any3d?Ln(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function Fi(s){return s._leaflet_pos||new ke(0,0)}var ys,ut,ws;if("onselectstart"in document)ys=function(){Pe(window,"selectstart",Bt)},ut=function(){mt(window,"selectstart",Bt)};else{var ir=Li(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ys=function(){if(ir){var s=document.documentElement.style;ws=s[ir],s[ir]="none"}},ut=function(){ir&&(document.documentElement.style[ir]=ws,ws=void 0)}}function xo(){Pe(window,"dragstart",Bt)}function Td(){mt(window,"dragstart",Bt)}var La,Dd;function Md(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(ul(),La=s,Dd=s.style.outlineStyle,s.style.outlineStyle="none",Pe(window,"keydown",ul))}function ul(){La&&(La.style.outlineStyle=Dd,La=void 0,Dd=void 0,mt(window,"keydown",ul))}function mp(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function So(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var Lr={__proto__:null,TRANSFORM:Oa,TRANSITION:nr,TRANSITION_END:Rr,get:cl,getStyle:Ra,create:Je,remove:Ct,empty:Na,toFront:Nr,toBack:kr,hasClass:ll,addClass:Ve,removeClass:Vt,setClass:Sd,getClass:ka,setOpacity:Qn,testProp:Li,setTransform:Ln,setPosition:Tt,getPosition:Fi,get disableTextSelection(){return ys},get enableTextSelection(){return ut},disableImageDrag:xo,enableImageDrag:Td,preventOutline:Md,restoreOutline:ul,getSizedParentNode:mp,getScale:So};function Pe(s,c,h,p){if(c&&typeof c=="object")for(var _ in c)Pd(s,_,c[_],h);else{c=C(c);for(var E=0,P=c.length;E<P;E++)Pd(s,c[E],h,p)}return this}var wi="_leaflet_events";function mt(s,c,h,p){if(arguments.length===1)To(s),delete s[wi];else if(c&&typeof c=="object")for(var _ in c)Od(s,_,c[_],h);else if(c=C(c),arguments.length===2)To(s,function(z){return he(c,z)!==-1});else for(var E=0,P=c.length;E<P;E++)Od(s,c[E],h,p);return this}function To(s,c){for(var h in s[wi]){var p=h.split(/\d/)[0];(!c||c(p))&&Od(s,p,null,null,h)}}var Ad={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pd(s,c,h,p){var _=c+a(h)+(p?"_"+a(p):"");if(s[wi]&&s[wi][_])return this;var E=function(z){return h.call(p||s,z||window.event)},P=E;!fe.touchNative&&fe.pointer&&c.indexOf("touch")===0?E=Ed(s,c,E):fe.touch&&c==="dblclick"?E=al(s,E):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(Ad[c]||c,E,fe.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(E=function(z){z=z||window.event,Ba(s,z)&&P(z)},s.addEventListener(Ad[c],E,!1)):s.addEventListener(c,P,!1):s.attachEvent("on"+c,E),s[wi]=s[wi]||{},s[wi][_]=E}function Od(s,c,h,p,_){_=_||c+a(h)+(p?"_"+a(p):"");var E=s[wi]&&s[wi][_];if(!E)return this;!fe.touchNative&&fe.pointer&&c.indexOf("touch")===0?sl(s,c,E):fe.touch&&c==="dblclick"?gp(s,E):"removeEventListener"in s?s.removeEventListener(Ad[c]||c,E,!1):s.detachEvent("on"+c,E),s[wi][_]=null}function jn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Rd(s){return Pd(s,"wheel",jn),this}function Fa(s){return Pe(s,"mousedown touchstart dblclick contextmenu",jn),s._leaflet_disable_click=!0,this}function Bt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Vi(s){return Bt(s),jn(s),this}function Nd(s){if(s.composedPath)return s.composedPath();for(var c=[],h=s.target;h;)c.push(h),h=h.parentNode;return c}function bs(s,c){if(!c)return new ke(s.clientX,s.clientY);var h=So(c),p=h.boundingClientRect;return new ke((s.clientX-p.left)/h.x-c.clientLeft,(s.clientY-p.top)/h.y-c.clientTop)}var Va=fe.linux&&fe.chrome?window.devicePixelRatio:fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function kd(s){return fe.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Va:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Ba(s,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var Pt={__proto__:null,on:Pe,off:mt,stopPropagation:jn,disableScrollPropagation:Rd,disableClickPropagation:Fa,preventDefault:Bt,stop:Vi,getPropagationPath:Nd,getMousePosition:bs,getWheelDelta:kd,isExternalTarget:Ba,addListener:Pe,removeListener:mt},_p=er.extend({run:function(s,c,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Fi(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=A(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var h=this._startPos.add(this._offset.multiplyBy(s));c&&h._round(),Tt(this._el,h),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ke=er.extend({options:{crs:fs,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=I(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(We(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=nr&&fe.any3d&&!fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pe(this._proxy,Rr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(We(s),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,h){var p=this.getZoomScale(c),_=this.getSize().divideBy(2),E=s instanceof ke?s:this.latLngToContainerPoint(s),P=E.subtract(_).multiplyBy(1-1/p),z=this.containerPointToLatLng(_.add(P));return this.setView(z,c,{zoom:h})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():gt(s);var h=xe(c.paddingTopLeft||c.padding||[0,0]),p=xe(c.paddingBottomRight||c.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof c.maxZoom=="number"?Math.min(c.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var E=p.subtract(h).divideBy(2),P=this.project(s.getSouthWest(),_),z=this.project(s.getNorthEast(),_),H=this.unproject(P.add(z).divideBy(2).add(E),_);return{center:H,zoom:_}},fitBounds:function(s,c){if(s=gt(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=xe(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _p,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Ve(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,h){if(h=h||{},h.animate===!1||!fe.any3d)return this.setView(s,c,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),E=this.getSize(),P=this._zoom;s=We(s),c=c===void 0?P:c;var z=Math.max(E.x,E.y),H=z*this.getZoomScale(P,c),Y=_.distanceTo(p)||1,se=1.42,Te=se*se;function $e(sn){var kp=sn?-1:1,lF=sn?H:z,uF=H*H-z*z+kp*Te*Te*Y*Y,dF=2*lF*Te*Y,Zy=uF/dF,NT=Math.sqrt(Zy*Zy+1)-Zy,hF=NT<1e-9?-18:Math.log(NT);return hF}function Xn(sn){return(Math.exp(sn)-Math.exp(-sn))/2}function Dn(sn){return(Math.exp(sn)+Math.exp(-sn))/2}function Bi(sn){return Xn(sn)/Dn(sn)}var ui=$e(0);function Cl(sn){return z*(Dn(ui)/Dn(ui+se*sn))}function oF(sn){return z*(Dn(ui)*Bi(ui+se*sn)-Xn(ui))/Te}function sF(sn){return 1-Math.pow(1-sn,1.5)}var aF=Date.now(),OT=($e(1)-ui)/se,cF=h.duration?1e3*h.duration:1e3*OT*.8;function RT(){var sn=(Date.now()-aF)/cF,kp=sF(sn)*OT;sn<=1?(this._flyToFrame=A(RT,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(oF(kp)/Y)),P),this.getScaleZoom(z/Cl(kp),P),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),RT.call(this),this},flyToBounds:function(s,c){var h=this._getBoundsCenterZoom(s,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(s){return s=gt(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,gt(s));return h.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var h=xe(c.paddingTopLeft||c.padding||[0,0]),p=xe(c.paddingBottomRight||c.padding||[0,0]),_=this.project(this.getCenter()),E=this.project(s),P=this.getPixelBounds(),z=Nn([P.min.add(h),P.max.subtract(p)]),H=z.getSize();if(!z.contains(E)){this._enforcingBounds=!0;var Y=E.subtract(z.getCenter()),se=z.extend(E).getSize().subtract(H);_.x+=Y.x<0?-se.x:se.x,_.y+=Y.y<0?-se.y:se.y,this.panTo(this.unproject(_),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=c.divideBy(2).round(),_=h.divideBy(2).round(),E=p.subtract(_);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,s):navigator.geolocation.getCurrentPosition(c,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,h=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,h=s.coords.longitude,p=new Ae(c,h),_=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var P=this.getBoundsZoom(_);this.setView(p,E.maxZoom?Math.min(P,E.maxZoom):P)}var z={latlng:p,bounds:_,timestamp:s.timestamp};for(var H in s.coords)typeof s.coords[H]=="number"&&(z[H]=s.coords[H]);this.fire("locationfound",z)}},addHandler:function(s,c){if(!c)return this;var h=this[s]=new c(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ct(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ct(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Je("div",h,c||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new Bn(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,h){s=gt(s),h=xe(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),E=this.getMaxZoom(),P=s.getNorthWest(),z=s.getSouthEast(),H=this.getSize().subtract(h),Y=Nn(this.project(z,p),this.project(P,p)).getSize(),se=fe.any3d?this.options.zoomSnap:1,Te=H.x/Y.x,$e=H.y/Y.y,Xn=c?Math.max(Te,$e):Math.min(Te,$e);return p=this.getScaleZoom(Xn,p),se&&(p=Math.round(p/(se/100))*(se/100),p=c?Math.ceil(p/se)*se:Math.floor(p/se)*se),Math.max(_,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ke(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var h=this._getTopLeftPoint(s,c);return new bt(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(s)/h.scale(c)},getScaleZoom:function(s,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var p=h.zoom(s*h.scale(c));return isNaN(p)?1/0:p},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(We(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(xe(s),c)},layerPointToLatLng:function(s){var c=xe(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(We(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(We(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(gt(s))},distance:function(s,c){return this.options.crs.distance(We(s),We(c))},containerPointToLayerPoint:function(s){return xe(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return xe(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(xe(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(We(s)))},mouseEventToContainerPoint:function(s){return bs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=cl(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Pe(c,"scroll",this._onScroll,this),this._containerId=a(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&fe.any3d,Ve(s,"leaflet-container"+(fe.touch?" leaflet-touch":"")+(fe.retina?" leaflet-retina":"")+(fe.ielt9?" leaflet-oldie":"")+(fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Ra(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Tt(this._mapPane,new ke(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ve(s.markerPane,"leaflet-zoom-hide"),Ve(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,h){Tt(this._mapPane,new ke(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var _=this._zoom!==c;this._moveStart(_,h)._move(s,c)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,h,p){c===void 0&&(c=this._zoom);var _=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Tt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var c=s?mt:Pe;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),fe.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=A(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var h=[],p,_=c==="mouseout"||c==="mouseover",E=s.target||s.srcElement,P=!1;E;){if(p=this._targets[a(E)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){P=!0;break}if(p&&p.listens(c,!0)&&(_&&!Ba(E,s)||(h.push(p),_))||E===this._container)break;E=E.parentNode}return!h.length&&!P&&!_&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var h=s.type;h==="mousedown"&&Md(c),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,h){if(s.type==="click"){var p=t({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,c);if(h){for(var E=[],P=0;P<h.length;P++)h[P].listens(c,!0)&&E.push(h[P]);_=E.concat(_)}if(_.length){c==="contextmenu"&&Bt(s);var z=_[0],H={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Y=z.getLatLng&&(!z._radius||z._radius<=10);H.containerPoint=Y?this.latLngToContainerPoint(z.getLatLng()):this.mouseEventToContainerPoint(s),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=Y?z.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(P=0;P<_.length;P++)if(_[P].fire(c,H,!0),H.originalEvent._stopped||_[P].options.bubblingMouseEvents===!1&&he(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return Fi(this._mapPane)||new ke(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var h=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var h=this.getSize()._divideBy(2);return this.project(s,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return this.project(s,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return Nn([this.project(s.getSouthWest(),c)._subtract(p),this.project(s.getNorthWest(),c)._subtract(p),this.project(s.getSouthEast(),c)._subtract(p),this.project(s.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,h){if(!h)return s;var p=this.project(s,c),_=this.getSize().divideBy(2),E=new bt(p.subtract(_),p.add(_)),P=this._getBoundsOffset(E,h,c);return Math.abs(P.x)<=1&&Math.abs(P.y)<=1?s:this.unproject(p.add(P),c)},_limitOffset:function(s,c){if(!c)return s;var h=this.getPixelBounds(),p=new bt(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(s,c,h){var p=Nn(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),_=p.min.subtract(s.min),E=p.max.subtract(s.max),P=this._rebound(_.x,-E.x),z=this._rebound(_.y,-E.y);return new ke(P,z)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),h=this.getMaxZoom(),p=fe.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(c,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Vt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var h=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var s=this._proxy=Je("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var h=Oa,p=this._proxy.style[h];Ln(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ct(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();Ln(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(A(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,Ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Vt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function vp(s,c){return new Ke(s,c)}var li=j.extend({options:{position:"topright"},initialize:function(s){I(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Ve(c,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ct(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Cs=function(s){return new li(s)};Ke.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",h=this._controlContainer=Je("div",c+"control-container",this._container);function p(_,E){var P=c+_+" "+c+E;s[_+E]=Je("div",P,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ct(this._controlCorners[s]);Ct(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ja=li.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,c,h){I(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return li.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(a(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Vt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Vt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=Je("div",s),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Fa(c),Rd(c);var p=this._section=Je("section",s+"-list");h&&(this._map.on("click",this.collapse,this),Pe(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Je("a",s+"-toggle",c);_.href="#",_.title="Layers",_.setAttribute("role","button"),Pe(_,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Bt(E),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Je("div",s+"-base",p),this._separator=Je("div",s+"-separator",p),this._overlaysList=Je("div",s+"-overlays",p),c.appendChild(p)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&a(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Na(this._baseLayersList),Na(this._overlaysList),this._layerControlInputs=[];var s,c,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),c=c||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(a(s.target)),h=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(s,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var c=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),Pe(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var E=document.createElement("span");c.appendChild(E),E.appendChild(p),E.appendChild(_);var P=s.overlay?this._overlaysList:this._baseLayersList;return P.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,h,p=[],_=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)c=s[E],h=this._getLayer(c.layerId).layer,c.checked?p.push(h):c.checked||_.push(h);for(E=0;E<_.length;E++)this._map.hasLayer(_[E])&&this._map.removeLayer(_[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)c=s[_],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Pe(s,"click",Bt),this.expand();var c=this;setTimeout(function(){mt(s,"click",Bt),c._preventClick=!1})}}),yp=function(s,c,h){return new ja(s,c,h)},bi=li.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",h=Je("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,h,p,_){var E=Je("a",h,p);return E.innerHTML=s,E.href="#",E.title=c,E.setAttribute("role","button"),E.setAttribute("aria-label",c),Fa(E),Pe(E,"click",Vi),Pe(E,"click",_,this),Pe(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";Vt(this._zoomInButton,c),Vt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Ve(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Ve(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ke.mergeOptions({zoomControl:!0}),Ke.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new bi,this.addControl(this.zoomControl))});var wp=function(s){return new bi(s)},bp=li.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",h=Je("div",c),p=this.options;return this._addScales(p,c+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,h){s.metric&&(this._mScale=Je("div",c,h)),s.imperial&&(this._iScale=Je("div",c,h))},_update:function(){var s=this._map,c=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/s)},_updateImperial:function(s){var c=s*3.2808399,h,p,_;c>5280?(h=c/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(c),this._updateScale(this._iScale,_+" ft",_/c))},_updateScale:function(s,c,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),h=s/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),Ua=function(s){return new bp(s)},Cp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',za=li.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(fe.inlineSvg?Cp+" ":"")+"Leaflet</a>"},initialize:function(s){I(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Je("div","leaflet-control-attribution"),Fa(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ke.mergeOptions({attributionControl:!0}),Ke.addInitHook(function(){this.options.attributionControl&&new za().addTo(this)});var dl=function(s){return new za(s)};li.Layers=ja,li.Zoom=bi,li.Scale=bp,li.Attribution=za,Cs.layers=yp,Cs.zoom=wp,Cs.scale=Ua,Cs.attribution=dl;var Ci=j.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ci.addTo=function(s,c){return s.addHandler(c,this),this};var hl={Events:Ft},Ep=fe.touch?"touchstart mousedown":"mousedown",rr=er.extend({options:{clickTolerance:3},initialize:function(s,c,h,p){I(this,p),this._element=s,this._dragStartTarget=c||s,this._preventOutline=h},enable:function(){this._enabled||(Pe(this._dragStartTarget,Ep,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(rr._dragging===this&&this.finishDrag(!0),mt(this._dragStartTarget,Ep,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!ll(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){rr._dragging===this&&this.finishDrag();return}if(!(rr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(rr._dragging=this,this._preventOutline&&Md(this._element),xo(),ys(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,h=mp(this._element);this._startPoint=new ke(c.clientX,c.clientY),this._startPos=Fi(this._element),this._parentScale=So(h);var p=s.type==="mousedown";Pe(document,p?"mousemove":"touchmove",this._onMove,this),Pe(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,h=new ke(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Bt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Ve(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Tt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Vt(document.body,"leaflet-dragging"),this._lastTarget&&(Vt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),mt(document,"mousemove touchmove",this._onMove,this),mt(document,"mouseup touchend touchcancel",this._onUp,this),Td(),ut();var c=this._moved&&this._moving;this._moving=!1,rr._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Es(s,c,h){var p,_=[1,4,2,8],E,P,z,H,Y,se,Te,$e;for(E=0,se=s.length;E<se;E++)s[E]._code=Fr(s[E],c);for(z=0;z<4;z++){for(Te=_[z],p=[],E=0,se=s.length,P=se-1;E<se;P=E++)H=s[E],Y=s[P],H._code&Te?Y._code&Te||($e=Ha(Y,H,Te,c,h),$e._code=Fr($e,c),p.push($e)):(Y._code&Te&&($e=Ha(Y,H,Te,c,h),$e._code=Fr($e,c),p.push($e)),p.push(H));s=p}return s}function Ld(s,c){var h,p,_,E,P,z,H,Y,se;if(!s||s.length===0)throw new Error("latlngs not passed");Jn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Te=We([0,0]),$e=gt(s),Xn=$e.getNorthWest().distanceTo($e.getSouthWest())*$e.getNorthEast().distanceTo($e.getNorthWest());Xn<1700&&(Te=fl(s));var Dn=s.length,Bi=[];for(h=0;h<Dn;h++){var ui=We(s[h]);Bi.push(c.project(We([ui.lat-Te.lat,ui.lng-Te.lng])))}for(z=H=Y=0,h=0,p=Dn-1;h<Dn;p=h++)_=Bi[h],E=Bi[p],P=_.y*E.x-E.y*_.x,H+=(_.x+E.x)*P,Y+=(_.y+E.y)*P,z+=P*3;z===0?se=Bi[0]:se=[H/z,Y/z];var Cl=c.unproject(xe(se));return We([Cl.lat+Te.lat,Cl.lng+Te.lng])}function fl(s){for(var c=0,h=0,p=0,_=0;_<s.length;_++){var E=We(s[_]);c+=E.lat,h+=E.lng,p++}return We([c/p,h/p])}var Fd={__proto__:null,clipPolygon:Es,polygonCenter:Ld,centroid:fl};function pl(s,c){if(!c||!s.length)return s.slice();var h=c*c;return s=Do(s,h),s=Ip(s,h),s}function Vd(s,c,h){return Math.sqrt(vn(s,c,h,!0))}function gl(s,c,h){return vn(s,c,h)}function Ip(s,c){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,ml(s,_,c,0,h-1);var E,P=[];for(E=0;E<h;E++)_[E]&&P.push(s[E]);return P}function ml(s,c,h,p,_){var E=0,P,z,H;for(z=p+1;z<=_-1;z++)H=vn(s[z],s[p],s[_],!0),H>E&&(P=z,E=H);E>h&&(c[P]=1,ml(s,c,h,p,P),ml(s,c,h,P,_))}function Do(s,c){for(var h=[s[0]],p=1,_=0,E=s.length;p<E;p++)_l(s[p],s[_])>c&&(h.push(s[p]),_=p);return _<E-1&&h.push(s[E-1]),h}var Bd;function jd(s,c,h,p,_){var E=p?Bd:Fr(s,h),P=Fr(c,h),z,H,Y;for(Bd=P;;){if(!(E|P))return[s,c];if(E&P)return!1;z=E||P,H=Ha(s,c,z,h,_),Y=Fr(H,h),z===E?(s=H,E=Y):(c=H,P=Y)}}function Ha(s,c,h,p,_){var E=c.x-s.x,P=c.y-s.y,z=p.min,H=p.max,Y,se;return h&8?(Y=s.x+E*(H.y-s.y)/P,se=H.y):h&4?(Y=s.x+E*(z.y-s.y)/P,se=z.y):h&2?(Y=H.x,se=s.y+P*(H.x-s.x)/E):h&1&&(Y=z.x,se=s.y+P*(z.x-s.x)/E),new ke(Y,se,_)}function Fr(s,c){var h=0;return s.x<c.min.x?h|=1:s.x>c.max.x&&(h|=2),s.y<c.min.y?h|=4:s.y>c.max.y&&(h|=8),h}function _l(s,c){var h=c.x-s.x,p=c.y-s.y;return h*h+p*p}function vn(s,c,h,p){var _=c.x,E=c.y,P=h.x-_,z=h.y-E,H=P*P+z*z,Y;return H>0&&(Y=((s.x-_)*P+(s.y-E)*z)/H,Y>1?(_=h.x,E=h.y):Y>0&&(_+=P*Y,E+=z*Y)),P=s.x-_,z=s.y-E,p?P*P+z*z:new ke(_,E)}function Jn(s){return!Q(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ud(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Jn(s)}function Mo(s,c){var h,p,_,E,P,z,H,Y;if(!s||s.length===0)throw new Error("latlngs not passed");Jn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=We([0,0]),Te=gt(s),$e=Te.getNorthWest().distanceTo(Te.getSouthWest())*Te.getNorthEast().distanceTo(Te.getNorthWest());$e<1700&&(se=fl(s));var Xn=s.length,Dn=[];for(h=0;h<Xn;h++){var Bi=We(s[h]);Dn.push(c.project(We([Bi.lat-se.lat,Bi.lng-se.lng])))}for(h=0,p=0;h<Xn-1;h++)p+=Dn[h].distanceTo(Dn[h+1])/2;if(p===0)Y=Dn[0];else for(h=0,E=0;h<Xn-1;h++)if(P=Dn[h],z=Dn[h+1],_=P.distanceTo(z),E+=_,E>p){H=(E-p)/_,Y=[z.x-H*(z.x-P.x),z.y-H*(z.y-P.y)];break}var ui=c.unproject(xe(Y));return We([ui.lat+se.lat,ui.lng+se.lng])}var d={__proto__:null,simplify:pl,pointToSegmentDistance:Vd,closestPointOnSegment:gl,clipSegment:jd,_getEdgeIntersection:Ha,_getBitCode:Fr,_sqClosestPointOnSegment:vn,isFlat:Jn,_flat:Ud,polylineCenter:Mo},g={project:function(s){return new ke(s.lng,s.lat)},unproject:function(s){return new Ae(s.y,s.x)},bounds:new bt([-180,-90],[180,90])},v={R:6378137,R_MINOR:6356752314245179e-9,bounds:new bt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,h=this.R,p=s.lat*c,_=this.R_MINOR/h,E=Math.sqrt(1-_*_),P=E*Math.sin(p),z=Math.tan(Math.PI/4-p/2)/Math.pow((1-P)/(1+P),E/2);return p=-h*Math.log(Math.max(z,1e-10)),new ke(s.lng*c*h,p)},unproject:function(s){for(var c=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),E=Math.exp(-s.y/h),P=Math.PI/2-2*Math.atan(E),z=0,H=.1,Y;z<15&&Math.abs(H)>1e-7;z++)Y=_*Math.sin(P),Y=Math.pow((1-Y)/(1+Y),_/2),H=Math.PI/2-2*Math.atan(E*Y)-P,P+=H;return new Ae(P*c,s.x*c/h)}},x={__proto__:null,LonLat:g,Mercator:v,SphericalMercator:dd},B=t({},Ar,{code:"EPSG:3395",projection:v,transformation:(function(){var s=.5/(Math.PI*v.R);return Pr(s,.5,-s,.5)})()}),$=t({},Ar,{code:"EPSG:4326",projection:g,transformation:Pr(1/180,1,-1/180,.5)}),te=t({},Yn,{projection:g,transformation:Pr(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var h=c.lng-s.lng,p=c.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});Yn.Earth=Ar,Yn.EPSG3395=B,Yn.EPSG3857=fs,Yn.EPSG900913=fd,Yn.EPSG4326=$,Yn.Simple=te;var ze=er.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Ke.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=a(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=a(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},_addLayers:function(s){s=s?Q(s)?s:[s]:[];for(var c=0,h=s.length;c<h;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=a(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),c=_.maxZoom===void 0?c:Math.max(c,_.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ot=ze.extend({initialize:function(s,c){I(this,c),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),tt=function(s,c){return new Ot(s,c)},Et=Ot.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ot.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ot.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Bn;for(var c in this._layers){var h=this._layers[c];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),Tn=function(s,c){return new Et(s,c)},Ei=j.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){I(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,c){var h=this.options,p=h[c+"Size"];typeof p=="number"&&(p=[p,p]);var _=xe(p),E=xe(c==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(h.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return fe.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Ii(s){return new Ei(s)}var Vr=Ei.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Vr.imagePath!="string"&&(Vr.imagePath=this._detectIconPath()),(this.options.imagePath||Vr.imagePath)+Ei.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(h,p,_){var E=p.exec(h);return E&&E[_]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Je("div","leaflet-default-icon-path",document.body),c=Ra(s,"background-image")||Ra(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),vl=Ci.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new rr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ve(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Vt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,h=c._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,E=Fi(c._icon),P=h.getPixelBounds(),z=h.getPixelOrigin(),H=Nn(P.min._subtract(z).add(_),P.max._subtract(z).subtract(_));if(!H.contains(E)){var Y=xe((Math.max(H.max.x,E.x)-H.max.x)/(P.max.x-H.max.x)-(Math.min(H.min.x,E.x)-H.min.x)/(P.min.x-H.min.x),(Math.max(H.max.y,E.y)-H.max.y)/(P.max.y-H.max.y)-(Math.min(H.min.y,E.y)-H.min.y)/(P.min.y-H.min.y)).multiplyBy(p);h.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),Tt(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=A(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=A(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,h=c._shadow,p=Fi(c._icon),_=c._map.layerPointToLatLng(p);h&&Tt(h,p),c._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),xp=ze.extend({options:{icon:new Vr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){I(this,c),this._latlng=We(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=We(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Ve(h,c),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pe(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),E=!1;_!==this._shadow&&(this._removeShadow(),E=!0),_&&(Ve(_,c),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mt(this._icon,"focus",this._panOnFocus,this),Ct(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ct(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Tt(this._icon,s),this._shadow&&Tt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vl)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vl(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Qn(this._icon,s),this._shadow&&Qn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,h=c.iconSize?xe(c.iconSize):xe(0,0),p=c.iconAnchor?xe(c.iconAnchor):xe(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function UL(s,c){return new xp(s,c)}var Is=ze.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return I(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Sp=Is.extend({options:{fill:!0,radius:10},initialize:function(s,c){I(this,c),this._latlng=We(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=We(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return Is.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,h=this._clickTolerance(),p=[s+h,c+h];this._pxBounds=new bt(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zL(s,c){return new Sp(s,c)}var qy=Sp.extend({initialize:function(s,c,h){if(typeof c=="number"&&(c=t({},h,{radius:c})),I(this,c),this._latlng=We(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Bn(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Is.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===Ar.distance){var _=Math.PI/180,E=this._mRadius/Ar.R/_,P=h.project([c+E,s]),z=h.project([c-E,s]),H=P.add(z).divideBy(2),Y=h.unproject(H).lat,se=Math.acos((Math.cos(E*_)-Math.sin(c*_)*Math.sin(Y*_))/(Math.cos(c*_)*Math.cos(Y*_)))/_;(isNaN(se)||se===0)&&(se=E/Math.cos(Math.PI/180*c)),this._point=H.subtract(h.getPixelOrigin()),this._radius=isNaN(se)?0:H.x-h.project([Y,s-se]).x,this._radiusY=H.y-P.y}else{var Te=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Te).x}this._updateBounds()}});function HL(s,c,h){return new qy(s,c,h)}var Ao=Is.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){I(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,h=null,p=vn,_,E,P=0,z=this._parts.length;P<z;P++)for(var H=this._parts[P],Y=1,se=H.length;Y<se;Y++){_=H[Y-1],E=H[Y];var Te=p(s,_,E,!0);Te<c&&(c=Te,h=p(s,_,E))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=We(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Bn,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Jn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],h=Jn(s),p=0,_=s.length;p<_;p++)h?(c[p]=We(s[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(s[p]);return c},_project:function(){var s=new bt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new ke(s,s);this._rawPxBounds&&(this._pxBounds=new bt([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,h){var p=s[0]instanceof Ae,_=s.length,E,P;if(p){for(P=[],E=0;E<_;E++)P[E]=this._map.latLngToLayerPoint(s[E]),h.extend(P[E]);c.push(P)}else for(E=0;E<_;E++)this._projectLatlngs(s[E],c,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,p,_,E,P,z,H;for(h=0,_=0,E=this._rings.length;h<E;h++)for(H=this._rings[h],p=0,P=H.length;p<P-1;p++)z=jd(H[p],H[p+1],s,p,!0),z&&(c[_]=c[_]||[],c[_].push(z[0]),(z[1]!==H[p+1]||p===P-2)&&(c[_].push(z[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=pl(s[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var h,p,_,E,P,z,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,E=this._parts.length;h<E;h++)for(z=this._parts[h],p=0,P=z.length,_=P-1;p<P;_=p++)if(!(!c&&p===0)&&Vd(s,z[_],z[p])<=H)return!0;return!1}});function $L(s,c){return new Ao(s,c)}Ao._flat=Ud;var yl=Ao.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ld(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=Ao.prototype._convertLatLngs.call(this,s),h=c.length;return h>=2&&c[0]instanceof Ae&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(s){Ao.prototype._setLatLngs.call(this,s),Jn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Jn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,h=new ke(c,c);if(s=new bt(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,E;p<_;p++)E=Es(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,h,p,_,E,P,z,H,Y;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,H=this._parts.length;E<H;E++)for(h=this._parts[E],P=0,Y=h.length,z=Y-1;P<Y;z=P++)p=h[P],_=h[z],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(c=!c);return c||Ao.prototype._containsPoint.call(this,s,!0)}});function qL(s,c){return new yl(s,c)}var Po=Et.extend({initialize:function(s,c){I(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=Q(s)?s:s.features,h,p,_;if(c){for(h=0,p=c.length;h<p;h++)_=c[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var P=Tp(s,E);return P?(P.feature=Ap(s),P.defaultOptions=P.options,this.resetStyle(P),E.onEachFeature&&E.onEachFeature(s,P),this.addLayer(P)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function Tp(s,c){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],E=c&&c.pointToLayer,P=c&&c.coordsToLatLng||Gy,z,H,Y,se;if(!p&&!h)return null;switch(h.type){case"Point":return z=P(p),pT(E,s,z,c);case"MultiPoint":for(Y=0,se=p.length;Y<se;Y++)z=P(p[Y]),_.push(pT(E,s,z,c));return new Et(_);case"LineString":case"MultiLineString":return H=Dp(p,h.type==="LineString"?0:1,P),new Ao(H,c);case"Polygon":case"MultiPolygon":return H=Dp(p,h.type==="Polygon"?1:2,P),new yl(H,c);case"GeometryCollection":for(Y=0,se=h.geometries.length;Y<se;Y++){var Te=Tp({geometry:h.geometries[Y],type:"Feature",properties:s.properties},c);Te&&_.push(Te)}return new Et(_);case"FeatureCollection":for(Y=0,se=h.features.length;Y<se;Y++){var $e=Tp(h.features[Y],c);$e&&_.push($e)}return new Et(_);default:throw new Error("Invalid GeoJSON object.")}}function pT(s,c,h,p){return s?s(c,h):new xp(h,p&&p.markersInheritOptions&&p)}function Gy(s){return new Ae(s[1],s[0],s[2])}function Dp(s,c,h){for(var p=[],_=0,E=s.length,P;_<E;_++)P=c?Dp(s[_],c-1,h):(h||Gy)(s[_]),p.push(P);return p}function Wy(s,c){return s=We(s),s.alt!==void 0?[m(s.lng,c),m(s.lat,c),m(s.alt,c)]:[m(s.lng,c),m(s.lat,c)]}function Mp(s,c,h,p){for(var _=[],E=0,P=s.length;E<P;E++)_.push(c?Mp(s[E],Jn(s[E])?0:c-1,h,p):Wy(s[E],p));return!c&&h&&_.length>0&&_.push(_[0].slice()),_}function wl(s,c){return s.feature?t({},s.feature,{geometry:c}):Ap(c)}function Ap(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Ky={toGeoJSON:function(s){return wl(this,{type:"Point",coordinates:Wy(this.getLatLng(),s)})}};xp.include(Ky),qy.include(Ky),Sp.include(Ky),Ao.include({toGeoJSON:function(s){var c=!Jn(this._latlngs),h=Mp(this._latlngs,c?1:0,!1,s);return wl(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),yl.include({toGeoJSON:function(s){var c=!Jn(this._latlngs),h=c&&!Jn(this._latlngs[0]),p=Mp(this._latlngs,h?2:c?1:0,!0,s);return c||(p=[p]),wl(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),Ot.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(s).geometry.coordinates)}),wl(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var h=c==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var E=_.toGeoJSON(s);if(h)p.push(E.geometry);else{var P=Ap(E);P.type==="FeatureCollection"?p.push.apply(p,P.features):p.push(P)}}}),h?wl(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function gT(s,c){return new Po(s,c)}var GL=gT,Pp=ze.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,h){this._url=s,this._bounds=gt(c),I(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ct(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Nr(this._image),this},bringToBack:function(){return this._map&&kr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=gt(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:Je("img");if(Ve(c,"leaflet-image-layer"),this._zoomAnimated&&Ve(c,"leaflet-zoom-animated"),this.options.className&&Ve(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=r(this.fire,this,"load"),c.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Ln(this._image,h,c)},_reset:function(){var s=this._image,c=new bt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();Tt(s,c.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){Qn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),WL=function(s,c,h){return new Pp(s,c,h)},mT=Pp.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:Je("video");if(Ve(c,"leaflet-image-layer"),this._zoomAnimated&&Ve(c,"leaflet-zoom-animated"),this.options.className&&Ve(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=r(this.fire,this,"load"),s){for(var h=c.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[c.src];return}Q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var P=Je("source");P.src=this._url[E],c.appendChild(P)}}});function KL(s,c,h){return new mT(s,c,h)}var _T=Pp.extend({_initImage:function(){var s=this._image=this._url;Ve(s,"leaflet-image-layer"),this._zoomAnimated&&Ve(s,"leaflet-zoom-animated"),this.options.className&&Ve(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function ZL(s,c,h){return new _T(s,c,h)}var Br=ze.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof Ae||Q(s))?(this._latlng=We(s),I(this,c)):(I(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Qn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Qn(this._container,1),this.bringToFront(),this.options.interactive&&(Ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Qn(this._container,0),this._removeTimeout=setTimeout(r(Ct,void 0,this._container),200)):Ct(this._container),this.options.interactive&&(Vt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=We(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Nr(this._container),this},bringToBack:function(){return this._map&&kr(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof Et){c=null;var h=this._source._layers;for(var p in h)if(h[p]._map){c=h[p];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=xe(this.options.offset),h=this._getAnchor();this._zoomAnimated?Tt(this._container,s.add(h)):c=c.add(s).add(h);var p=this._containerBottom=-c.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ke.include({_initOverlay:function(s,c,h,p){var _=c;return _ instanceof s||(_=new s(p).setContent(c)),h&&_.setLatLng(h),_}}),ze.include({_initOverlay:function(s,c,h,p){var _=h;return _ instanceof s?(I(_,p),_._source=this):(_=c&&!p?c:new s(p,this),_.setContent(h)),_}});var Op=Br.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Br.prototype.openOn.call(this,s)},onAdd:function(s){Br.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Is||this._source.on("preclick",jn))},onRemove:function(s){Br.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Is||this._source.off("preclick",jn))},getEvents:function(){var s=Br.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=Je("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Je("div",s+"-content-wrapper",c);if(this._contentNode=Je("div",s+"-content",h),Fa(c),Rd(this._contentNode),Pe(c,"contextmenu",jn),this._tipContainer=Je("div",s+"-tip-container",c),this._tip=Je("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Je("a",s+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Pe(p,"click",function(_){Bt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var p=s.offsetHeight,_=this.options.maxHeight,E="leaflet-popup-scrolled";_&&p>_?(c.height=_+"px",Ve(s,E)):Vt(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();Tt(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(Ra(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,p=this._containerWidth,_=new ke(this._containerLeft,-h-this._containerBottom);_._add(Fi(this._container));var E=s.layerPointToContainerPoint(_),P=xe(this.options.autoPanPadding),z=xe(this.options.autoPanPaddingTopLeft||P),H=xe(this.options.autoPanPaddingBottomRight||P),Y=s.getSize(),se=0,Te=0;E.x+p+H.x>Y.x&&(se=E.x+p-Y.x+H.x),E.x-se-z.x<0&&(se=E.x-z.x),E.y+h+H.y>Y.y&&(Te=E.y+h-Y.y+H.y),E.y-Te-z.y<0&&(Te=E.y-z.y),(se||Te)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([se,Te]))}},_getAnchor:function(){return xe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),YL=function(s,c){return new Op(s,c)};Ke.mergeOptions({closePopupOnClick:!0}),Ke.include({openPopup:function(s,c,h){return this._initOverlay(Op,s,c,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),ze.include({bindPopup:function(s,c){return this._popup=this._initOverlay(Op,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Et||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Vi(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof Is)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Rp=Br.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Br.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Br.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Br.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Je("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,h,p=this._map,_=this._container,E=p.latLngToContainerPoint(p.getCenter()),P=p.layerPointToContainerPoint(s),z=this.options.direction,H=_.offsetWidth,Y=_.offsetHeight,se=xe(this.options.offset),Te=this._getAnchor();z==="top"?(c=H/2,h=Y):z==="bottom"?(c=H/2,h=0):z==="center"?(c=H/2,h=Y/2):z==="right"?(c=0,h=Y/2):z==="left"?(c=H,h=Y/2):P.x<E.x?(z="right",c=0,h=Y/2):(z="left",c=H+(se.x+Te.x)*2,h=Y/2),s=s.subtract(xe(c,h,!0)).add(se).add(Te),Vt(_,"leaflet-tooltip-right"),Vt(_,"leaflet-tooltip-left"),Vt(_,"leaflet-tooltip-top"),Vt(_,"leaflet-tooltip-bottom"),Ve(_,"leaflet-tooltip-"+z),Tt(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Qn(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return xe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),QL=function(s,c){return new Rp(s,c)};Ke.include({openTooltip:function(s,c,h){return this._initOverlay(Rp,s,c,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),ze.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Rp,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Et||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(Pe(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Pe(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var vT=Ei.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Na(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=xe(h.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function JL(s){return new vT(s)}Ei.Default=Vr;var zd=ze.extend({options:{tileSize:256,opacity:1,updateWhenIdle:fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){I(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ct(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Nr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(kr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof ke?s:new ke(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,h=-s(-1/0,1/0),p=0,_=c.length,E;p<_;p++)E=c[p].style.zIndex,c[p]!==this._container&&E&&(h=s(h,+E));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!fe.ielt9){Qn(this._container,this.options.opacity);var s=+new Date,c=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var E=Math.min(1,(s-_.loaded)/200);Qn(_.el,E),E<1?c=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(R(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Je("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=c-Math.abs(s-h),this._onUpdateLevel(h)):(Ct(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=Je("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ct(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,h,p){var _=Math.floor(s/2),E=Math.floor(c/2),P=h-1,z=new ke(+_,+E);z.z=+P;var H=this._tileCoordsToKey(z),Y=this._tiles[H];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),P>p?this._retainParent(_,E,P,p):!1)},_retainChildren:function(s,c,h,p){for(var _=2*s;_<2*s+2;_++)for(var E=2*c;E<2*c+2;E++){var P=new ke(_,E);P.z=h+1;var z=this._tileCoordsToKey(P),H=this._tiles[z];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);h+1<p&&this._retainChildren(_,E,h+1,p)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,h,p){var _=Math.round(c);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var E=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||E)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,c)},_setZoomTransform:function(s,c,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,h)).round();fe.any3d?Ln(s.el,_,p):Tt(s.el,_)},_resetGrid:function(){var s=this._map,c=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,c.wrapLng[1]],p).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([c.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(h,this._tileZoom),_=c.project(s,this._tileZoom).floor(),E=c.getSize().divideBy(p*2);return new bt(_.subtract(E),_.add(E))},_update:function(s){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),E=_.getCenter(),P=[],z=this.options.keepBuffer,H=new bt(_.getBottomLeft().subtract([z,-z]),_.getTopRight().add([z,-z]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var se=this._tiles[Y].coords;(se.z!==this._tileZoom||!H.contains(new ke(se.x,se.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var Te=_.min.y;Te<=_.max.y;Te++)for(var $e=_.min.x;$e<=_.max.x;$e++){var Xn=new ke($e,Te);if(Xn.z=this._tileZoom,!!this._isValidTile(Xn)){var Dn=this._tiles[this._tileCoordsToKey(Xn)];Dn?Dn.current=!0:P.push(Xn)}}if(P.sort(function(ui,Cl){return ui.distanceTo(E)-Cl.distanceTo(E)}),P.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Bi=document.createDocumentFragment();for($e=0;$e<P.length;$e++)this._addTile(P[$e],Bi);this._level.el.appendChild(Bi)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!c.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return gt(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),E=c.unproject(p,s.z),P=c.unproject(_,s.z);return[E,P]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),h=new Bn(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),h=new ke(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(s){var c=this._tiles[s];c&&(Ct(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Ve(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=f,s.onmousemove=f,fe.ielt9&&this.options.opacity<1&&Qn(s,this.options.opacity)},_addTile:function(s,c){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),r(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&A(r(this._tileReady,this,s,null,_)),Tt(_,h),this._tiles[p]={el:_,coords:s,current:!0},c.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Qn(h.el,0),R(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(Ve(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),fe.ielt9||!this._map._fadeAnimated?A(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new ke(this._wrapX?u(s.x,this._wrapX):s.x,this._wrapY?u(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new bt(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function XL(s){return new zd(s)}var bl=zd.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=I(this,c),c.detectRetina&&fe.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var h=document.createElement("img");return Pe(h,"load",r(this._tileOnLoad,this,c,h)),Pe(h,"error",r(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var c={r:fe.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=h),c["-y"]=h}return q(this._url,t(c,this.options))},_tileOnLoad:function(s,c){fe.ielt9?setTimeout(r(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,h){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),s(h,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=c-s),s+p},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=f,c.onerror=f,!c.complete)){c.src=ye;var h=this._tiles[s].coords;Ct(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",ye),zd.prototype._removeTile.call(this,s)},_tileReady:function(s,c,h){if(!(!this._map||h&&h.getAttribute("src")===ye))return zd.prototype._tileReady.call(this,s,c,h)}});function yT(s,c){return new bl(s,c)}var wT=bl.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var h=t({},this.defaultWmsParams);for(var p in c)p in this.options||(h[p]=c[p]);c=I(this,c);var _=c.detectRetina&&fe.retina?2:1,E=this.getTileSize();h.width=E.x*_,h.height=E.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,bl.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),h=this._crs,p=Nn(h.project(c[0]),h.project(c[1])),_=p.min,E=p.max,P=(this._wmsVersion>=1.3&&this._crs===$?[_.y,_.x,E.y,E.x]:[_.x,_.y,E.x,E.y]).join(","),z=bl.prototype.getTileUrl.call(this,s);return z+N(this.wmsParams,z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+P},setParams:function(s,c){return t(this.wmsParams,s),c||this.redraw(),this}});function eF(s,c){return new wT(s,c)}bl.WMS=wT,yT.wms=eF;var Oo=ze.extend({options:{padding:.1},initialize:function(s){I(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var h=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,c),E=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,c));fe.any3d?Ln(this._container,E,h):Tt(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new bt(h,h.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bT=Oo.extend({options:{tolerance:0},getEvents:function(){var s=Oo.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Oo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Pe(s,"mousemove",this._onMouseMove,this),Pe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,Ct(this._container),mt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oo.prototype._update.call(this);var s=this._bounds,c=this._container,h=s.getSize(),p=fe.retina?2:1;Tt(c,s.min),c.width=p*h.x,c.height=p*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Oo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,h=c.next,p=c.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<c.length;_++){if(p=Number(c[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||A(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new bt,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var h,p,_,E,P=s._parts,z=P.length,H=this._ctx;if(z){for(H.beginPath(),h=0;h<z;h++){for(p=0,_=P[h].length;p<_;p++)E=P[h][p],H[p?"lineTo":"moveTo"](E.x,E.y);c&&H.closePath()}this._fillStroke(H,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(c.x,c.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,c){var h=c.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(Vt(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Ve(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,h){this._map._fireDOMEvent(c,h||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function CT(s){return fe.canvas?new bT(s):null}var Hd=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),tF={_initContainer:function(){this._container=Je("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Oo.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=Hd("shape");Ve(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=Hd("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;Ct(c),s.removeInteractiveTarget(c),delete this._layers[a(s)]},_updateStyle:function(s){var c=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(c||(c=s._stroke=Hd("stroke")),_.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=Q(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(_.removeChild(c),s._stroke=null),p.fill?(h||(h=s._fill=Hd("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){Nr(s._container)},_bringToBack:function(s){kr(s._container)}},Np=fe.vml?Hd:Xc,$d=Oo.extend({_initContainer:function(){this._container=Np("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Np("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ct(this._container),mt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oo.prototype._update.call(this);var s=this._bounds,c=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),Tt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=Np("path");s.options.className&&Ve(c,s.options.className),s.options.interactive&&Ve(c,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ct(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,h=s.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,el(s._parts,c))},_updateCircle:function(s){var c=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(c.x-h)+","+c.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,E)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){Nr(s._path)},_bringToBack:function(s){kr(s._path)}});fe.vml&&$d.include(tF);function ET(s){return fe.svg||fe.vml?new $d(s):null}Ke.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&CT(s)||ET(s)}});var IT=yl.extend({initialize:function(s,c){yl.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=gt(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function nF(s,c){return new IT(s,c)}$d.create=Np,$d.pointsToPath=el,Po.geometryToLayer=Tp,Po.coordsToLatLng=Gy,Po.coordsToLatLngs=Dp,Po.latLngToCoords=Wy,Po.latLngsToCoords=Mp,Po.getFeature=wl,Po.asFeature=Ap,Ke.mergeOptions({boxZoom:!0});var xT=Ci.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ct(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ys(),xo(),this._startPoint=this._map.mouseEventToContainerPoint(s),Pe(document,{contextmenu:Vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Je("div","leaflet-zoom-box",this._container),Ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new bt(this._point,this._startPoint),h=c.getSize();Tt(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Ct(this._box),Vt(this._container,"leaflet-crosshair")),ut(),Td(),mt(document,{contextmenu:Vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var c=new Bn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ke.addInitHook("addHandler","boxZoom",xT),Ke.mergeOptions({doubleClickZoom:!0});var ST=Ci.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,h=c.getZoom(),p=c.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;c.options.doubleClickZoom==="center"?c.setZoom(_):c.setZoomAround(s.containerPoint,_)}});Ke.addInitHook("addHandler","doubleClickZoom",ST),Ke.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var TT=Ci.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new rr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Vt(this._map._container,"leaflet-grab"),Vt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=gt(this._map.options.maxBounds);this._offsetLimit=Nn(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-c+h)%s+c-h,E=(p+c+h)%s-c-h,P=Math.abs(_+h)<Math.abs(E+h)?_:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=P},_onDragEnd:function(s){var c=this._map,h=c.options,p=!h.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),p)c.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,P=h.easeLinearity,z=_.multiplyBy(P/E),H=z.distanceTo([0,0]),Y=Math.min(h.inertiaMaxSpeed,H),se=z.multiplyBy(Y/H),Te=Y/(h.inertiaDeceleration*P),$e=se.multiplyBy(-Te/2).round();!$e.x&&!$e.y?c.fire("moveend"):($e=c._limitOffset($e,c.options.maxBounds),A(function(){c.panBy($e,{duration:Te,easeLinearity:P,noMoveStart:!0,animate:!0})}))}}});Ke.addInitHook("addHandler","dragging",TT),Ke.mergeOptions({keyboard:!0,keyboardPanDelta:80});var DT=Ci.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Pe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),mt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,h=s.scrollTop||c.scrollTop,p=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)c[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)c[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)c[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)c[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)c[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)c[h.zoomOut[p]]=-s},_addHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,h=this._map,p;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[c],s.shiftKey&&(p=xe(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(xe(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Vi(s)}}});Ke.addInitHook("addHandler","keyboard",DT),Ke.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var MT=Ci.extend({addHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){mt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=kd(s),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),p),Vi(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=h?Math.ceil(_/h)*h:_,P=s._limitZoom(c+(this._delta>0?E:-E))-c;this._delta=0,this._startTime=null,P&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+P):s.setZoomAround(this._lastMousePos,c+P))}});Ke.addInitHook("addHandler","scrollWheelZoom",MT);var iF=600;Ke.mergeOptions({tapHold:fe.touchNative&&fe.safari&&fe.mobile,tapTolerance:15});var AT=Ci.extend({addHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new ke(c.clientX,c.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Pe(document,"touchend",Bt),Pe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),iF),Pe(document,"touchend touchcancel contextmenu",this._cancel,this),Pe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){mt(document,"touchend",Bt),mt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),mt(document,"touchend touchcancel contextmenu",this._cancel,this),mt(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new ke(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});Ke.addInitHook("addHandler","tapHold",AT),Ke.mergeOptions({touchZoom:fe.touch,bounceAtZoomLimits:!0});var PT=Ci.extend({addHooks:function(){Ve(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Vt(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend touchcancel",this._onTouchEnd,this),Bt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(_,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&_<1||this._zoom>c.getMaxZoom()&&_>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var E=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&E.x===0&&E.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var P=r(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=A(P,this,!0),Bt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ke.addInitHook("addHandler","touchZoom",PT),Ke.BoxZoom=xT,Ke.DoubleClickZoom=ST,Ke.Drag=TT,Ke.Keyboard=DT,Ke.ScrollWheelZoom=MT,Ke.TapHold=AT,Ke.TouchZoom=PT,n.Bounds=bt,n.Browser=fe,n.CRS=Yn,n.Canvas=bT,n.Circle=qy,n.CircleMarker=Sp,n.Class=j,n.Control=li,n.DivIcon=vT,n.DivOverlay=Br,n.DomEvent=Pt,n.DomUtil=Lr,n.Draggable=rr,n.Evented=er,n.FeatureGroup=Et,n.GeoJSON=Po,n.GridLayer=zd,n.Handler=Ci,n.Icon=Ei,n.ImageOverlay=Pp,n.LatLng=Ae,n.LatLngBounds=Bn,n.Layer=ze,n.LayerGroup=Ot,n.LineUtil=d,n.Map=Ke,n.Marker=xp,n.Mixin=hl,n.Path=Is,n.Point=ke,n.PolyUtil=Fd,n.Polygon=yl,n.Polyline=Ao,n.Popup=Op,n.PosAnimation=_p,n.Projection=x,n.Rectangle=IT,n.Renderer=Oo,n.SVG=$d,n.SVGOverlay=_T,n.TileLayer=bl,n.Tooltip=Rp,n.Transformation=hd,n.Util=V,n.VideoOverlay=mT,n.bind=r,n.bounds=Nn,n.canvas=CT,n.circle=HL,n.circleMarker=zL,n.control=Cs,n.divIcon=JL,n.extend=t,n.featureGroup=Tn,n.geoJSON=gT,n.geoJson=GL,n.gridLayer=XL,n.icon=Ii,n.imageOverlay=WL,n.latLng=We,n.latLngBounds=gt,n.layerGroup=tt,n.map=vp,n.marker=UL,n.point=xe,n.polygon=qL,n.polyline=$L,n.popup=YL,n.rectangle=nF,n.setOptions=I,n.stamp=a,n.svg=ET,n.svgOverlay=ZL,n.tileLayer=yT,n.tooltip=QL,n.transformation=Pr,n.version=e,n.videoOverlay=KL;var rF=window.L;n.noConflict=function(){return window.L=rF,this},window.L=n})});var Qy;function Lp(){return Qy}function jr(n){let e=Qy;return Qy=n,e}var BT=Symbol("NotFound");function El(n){return n===BT||n?.name==="\u0275NotFound"}var Un=null,Fp=!1,Jy=1,EF=null,zn=Symbol("SIGNAL");function Oe(n){let e=Un;return Un=n,e}function Up(){return Un}var Il={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xl(n){if(Fp)throw new Error("");if(Un===null)return;Un.consumerOnSignalRead(n);let e=Un.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=Un.recomputing;if(i&&(t=e!==void 0?e.nextProducer:Un.producers,t!==void 0&&t.producer===n)){Un.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===Un&&(!i||xF(r,Un)))return;let o=Tl(Un),a={producer:n,consumer:Un,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};Un.producersTail=a,e!==void 0?e.nextProducer=a:Un.producers=a,o&&HT(n,a)}function jT(){Jy++}function zp(n){if(!(Tl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Jy)){if(!n.producerMustRecompute(n)&&!Wd(n)){jp(n);return}n.producerRecomputeValue(n),jp(n)}}function Xy(n){if(n.consumers===void 0)return;let e=Fp;Fp=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||IF(i)}}finally{Fp=e}}function e0(){return Un?.consumerAllowSignalWrites!==!1}function IF(n){n.dirty=!0,Xy(n),n.consumerMarkedDirty?.(n)}function jp(n){n.dirty=!1,n.lastCleanEpoch=Jy}function Sl(n){return n&&UT(n),Oe(n)}function UT(n){n.producersTail=void 0,n.recomputing=!0}function Gd(n,e){Oe(e),n&&zT(n)}function zT(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Tl(n))do t=t0(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Wd(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(zp(t),i!==t.version))return!0}return!1}function Kd(n){if(Tl(n)){let e=n.producers;for(;e!==void 0;)e=t0(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function HT(n,e){let t=n.consumersTail,i=Tl(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)HT(r.producer,r)}function t0(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!Tl(e)){let o=e.producers;for(;o!==void 0;)o=t0(o)}return t}function Tl(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Hp(n){EF?.(n)}function xF(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function $p(n,e){return Object.is(n,e)}function qp(n,e){let t=Object.create(SF);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(zp(t),xl(t),t.value===qd)throw t.error;return t.value};return i[zn]=t,Hp(t),i}var Vp=Symbol("UNSET"),Bp=Symbol("COMPUTING"),qd=Symbol("ERRORED"),SF=pe(K({},Il),{value:Vp,dirty:!0,error:null,equal:$p,kind:"computed",producerMustRecompute(n){return n.value===Vp||n.value===Bp},producerRecomputeValue(n){if(n.value===Bp)throw new Error("");let e=n.value;n.value=Bp;let t=Sl(n),i,r=!1;try{i=n.computation(),Oe(null),r=e!==Vp&&e!==qd&&i!==qd&&n.equal(e,i)}catch(o){i=qd,n.error=o}finally{Gd(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function TF(){throw new Error}var $T=TF;function qT(n){$T(n)}function n0(n){$T=n}var DF=null;function i0(n,e){let t=Object.create(Gp);t.value=n,e!==void 0&&(t.equal=e);let i=()=>GT(t);return i[zn]=t,Hp(t),[i,a=>Dl(t,a),a=>r0(t,a)]}function GT(n){return xl(n),n.value}function Dl(n,e){e0()||qT(n),n.equal(n.value,e)||(n.value=e,MF(n))}function r0(n,e){e0()||qT(n),Dl(n,e(n.value))}var Gp=pe(K({},Il),{equal:$p,value:void 0,kind:"signal"});function MF(n){n.version++,jT(),Xy(n),DF?.(n)}function Be(n){return typeof n=="function"}function Ml(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wp=Ml(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function $a(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ht=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Be(i))try{i()}catch(o){e=o instanceof Wp?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{WT(o)}catch(a){e=e??[],a instanceof Wp?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Wp(e)}}add(e){var t;if(e&&e!==this)if(this.closed)WT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$a(t,e)}remove(e){let{_finalizers:t}=this;t&&$a(t,e),e instanceof n&&e._removeParent(this)}};Ht.EMPTY=(()=>{let n=new Ht;return n.closed=!0,n})();var o0=Ht.EMPTY;function Kp(n){return n instanceof Ht||n&&"closed"in n&&Be(n.remove)&&Be(n.add)&&Be(n.unsubscribe)}function WT(n){Be(n)?n():n.unsubscribe()}var or={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Al={setTimeout(n,e,...t){let{delegate:i}=Al;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Al;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Zp(n){Al.setTimeout(()=>{let{onUnhandledError:e}=or;if(e)e(n);else throw n})}function Zd(){}var KT=s0("C",void 0,void 0);function ZT(n){return s0("E",void 0,n)}function YT(n){return s0("N",n,void 0)}function s0(n,e,t){return{kind:n,value:e,error:t}}var qa=null;function Pl(n){if(or.useDeprecatedSynchronousErrorHandling){let e=!qa;if(e&&(qa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=qa;if(qa=null,t)throw i}}else n()}function QT(n){or.useDeprecatedSynchronousErrorHandling&&qa&&(qa.errorThrown=!0,qa.error=n)}var Ga=class extends Ht{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Kp(e)&&e.add(this)):this.destination=OF}static create(e,t,i){return new Ss(e,t,i)}next(e){this.isStopped?c0(YT(e),this):this._next(e)}error(e){this.isStopped?c0(ZT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?c0(KT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},AF=Function.prototype.bind;function a0(n,e){return AF.call(n,e)}var l0=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Yp(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Yp(i)}else Yp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Yp(t)}}},Ss=class extends Ga{constructor(e,t,i){super();let r;if(Be(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&or.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&a0(e.next,o),error:e.error&&a0(e.error,o),complete:e.complete&&a0(e.complete,o)}):r=e}this.destination=new l0(r)}};function Yp(n){or.useDeprecatedSynchronousErrorHandling?QT(n):Zp(n)}function PF(n){throw n}function c0(n,e){let{onStoppedNotification:t}=or;t&&Al.setTimeout(()=>t(n,e))}var OF={closed:!0,next:Zd,error:PF,complete:Zd};var Ol=typeof Symbol=="function"&&Symbol.observable||"@@observable";function xi(n){return n}function Qp(...n){return u0(n)}function u0(n){return n.length===0?xi:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=NF(t)?t:new Ss(t,i,r);return Pl(()=>{let{operator:a,source:l}=this;o.add(a?a.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=JT(i),new i((r,o)=>{let a=new Ss({next:l=>{try{t(l)}catch(u){o(u),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Ol](){return this}pipe(...t){return u0(t)(this)}toPromise(t){return t=JT(t),new t((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return n.create=e=>new n(e),n})();function JT(n){var e;return(e=n??or.Promise)!==null&&e!==void 0?e:Promise}function RF(n){return n&&Be(n.next)&&Be(n.error)&&Be(n.complete)}function NF(n){return n&&n instanceof Ga||RF(n)&&Kp(n)}function d0(n){return Be(n?.lift)}function nt(n){return e=>{if(d0(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ze(n,e,t,i,r){return new h0(n,e,t,i,r)}var h0=class extends Ga{constructor(e,t,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(l){try{t(l)}catch(u){e.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Rl(){return nt((n,e)=>{let t=null;n._refCount++;let i=Ze(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Nl=class extends Ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,d0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ht;let t=this.getSubject();e.add(this.source.subscribe(Ze(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ht.EMPTY)}return e}refCount(){return Rl()(this)}};var XT=Ml(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Qt=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Jp(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new XT}next(t){Pl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Pl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Pl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?o0:(this.currentObservers=null,o.push(t),new Ht(()=>{this.currentObservers=null,$a(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new Ie;return t.source=this,t}}return n.create=(e,t)=>new Jp(e,t),n})(),Jp=class extends Qt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:o0}};var Jt=class extends Qt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var f0={now(){return(f0.delegate||Date).now()},delegate:void 0};var Xp=class extends Ht{constructor(e,t){super()}schedule(e,t=0){return this}};var Yd={setInterval(n,e,...t){let{delegate:i}=Yd;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Yd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var kl=class extends Xp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Yd.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Yd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,$a(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ll=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Ll.now=f0.now;var Fl=class extends Ll{constructor(e,t=Ll.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var Vl=new Fl(kl),p0=Vl;var eg=class extends kl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var tg=class extends Fl{};var g0=new tg(eg);var di=new Ie(n=>n.complete());function ng(n){return n&&Be(n.schedule)}function e1(n){return n[n.length-1]}function ig(n){return Be(e1(n))?n.pop():void 0}function Ts(n){return ng(e1(n))?n.pop():void 0}function m0(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function n1(n,e,t,i){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(m){try{f(i.next(m))}catch(y){a(y)}}function u(m){try{f(i.throw(m))}catch(y){a(y)}}function f(m){m.done?o(m.value):r(m.value).then(l,u)}f((i=i.apply(n,e||[])).next())})}function t1(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wa(n){return this instanceof Wa?(this.v=n,this):new Wa(n)}function i1(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(I){return function(N){return Promise.resolve(N).then(I,y)}}function l(I,N){i[I]&&(r[I]=function(G){return new Promise(function(q,Q){o.push([I,G,q,Q])>1||u(I,G)})},N&&(r[I]=N(r[I])))}function u(I,N){try{f(i[I](N))}catch(G){C(o[0][3],G)}}function f(I){I.value instanceof Wa?Promise.resolve(I.value.v).then(m,y):C(o[0][2],I)}function m(I){u("next",I)}function y(I){u("throw",I)}function C(I,N){I(N),o.shift(),o.length&&u(o[0][0],o[0][1])}}function r1(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof t1=="function"?t1(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(a){return new Promise(function(l,u){a=n[o](a),r(l,u,a.done,a.value)})}}function r(o,a,l,u){Promise.resolve(u).then(function(f){o({value:f,done:l})},a)}}var rg=n=>n&&typeof n.length=="number"&&typeof n!="function";function og(n){return Be(n?.then)}function sg(n){return Be(n[Ol])}function ag(n){return Symbol.asyncIterator&&Be(n?.[Symbol.asyncIterator])}function cg(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function kF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var lg=kF();function ug(n){return Be(n?.[lg])}function dg(n){return i1(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Wa(t.read());if(r)return yield Wa(void 0);yield yield Wa(i)}}finally{t.releaseLock()}})}function hg(n){return Be(n?.getReader)}function an(n){if(n instanceof Ie)return n;if(n!=null){if(sg(n))return LF(n);if(rg(n))return FF(n);if(og(n))return VF(n);if(ag(n))return o1(n);if(ug(n))return BF(n);if(hg(n))return jF(n)}throw cg(n)}function LF(n){return new Ie(e=>{let t=n[Ol]();if(Be(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function FF(n){return new Ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function VF(n){return new Ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Zp)})}function BF(n){return new Ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function o1(n){return new Ie(e=>{UF(n,e).catch(t=>e.error(t))})}function jF(n){return o1(dg(n))}function UF(n,e){var t,i,r,o;return n1(this,void 0,void 0,function*(){try{for(t=r1(n);i=yield t.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function hi(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Ds(n,e=0){return nt((t,i)=>{t.subscribe(Ze(i,r=>hi(i,n,()=>i.next(r),e),()=>hi(i,n,()=>i.complete(),e),r=>hi(i,n,()=>i.error(r),e)))})}function Ms(n,e=0){return nt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function s1(n,e){return an(n).pipe(Ms(e),Ds(e))}function a1(n,e){return an(n).pipe(Ms(e),Ds(e))}function c1(n,e){return new Ie(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function l1(n,e){return new Ie(t=>{let i;return hi(t,e,()=>{i=n[lg](),hi(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){t.error(a);return}o?t.complete():t.next(r)},0,!0)}),()=>Be(i?.return)&&i.return()})}function fg(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ie(t=>{hi(t,e,()=>{let i=n[Symbol.asyncIterator]();hi(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function u1(n,e){return fg(dg(n),e)}function d1(n,e){if(n!=null){if(sg(n))return s1(n,e);if(rg(n))return c1(n,e);if(og(n))return a1(n,e);if(ag(n))return fg(n,e);if(ug(n))return l1(n,e);if(hg(n))return u1(n,e)}throw cg(n)}function _t(n,e){return e?d1(n,e):an(n)}function ve(...n){let e=Ts(n);return _t(n,e)}function Bl(n,e){let t=Be(n)?n:()=>n,i=r=>r.error(t());return new Ie(e?r=>e.schedule(i,0,r):i)}function _0(n){return!!n&&(n instanceof Ie||Be(n.lift)&&Be(n.subscribe))}var sr=Ml(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function As(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new Ss({next:a=>{i(a),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new sr)}});n.subscribe(o)})}function h1(n){return n instanceof Date&&!isNaN(n)}function le(n,e){return nt((t,i)=>{let r=0;t.subscribe(Ze(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:zF}=Array;function HF(n,e){return zF(e)?n(...e):n(e)}function pg(n){return le(e=>HF(n,e))}var{isArray:$F}=Array,{getPrototypeOf:qF,prototype:GF,keys:WF}=Object;function gg(n){if(n.length===1){let e=n[0];if($F(e))return{args:e,keys:null};if(KF(e)){let t=WF(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function KF(n){return n&&typeof n=="object"&&qF(n)===GF}function mg(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Ka(...n){let e=Ts(n),t=ig(n),{args:i,keys:r}=gg(n);if(i.length===0)return _t([],e);let o=new Ie(ZF(i,e,r?a=>mg(r,a):xi));return t?o.pipe(pg(t)):o}function ZF(n,e,t=xi){return i=>{f1(e,()=>{let{length:r}=n,o=new Array(r),a=r,l=r;for(let u=0;u<r;u++)f1(e,()=>{let f=_t(n[u],e),m=!1;f.subscribe(Ze(i,y=>{o[u]=y,m||(m=!0,l--),l||i.next(t(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function f1(n,e,t){n?hi(t,n,e):e()}function p1(n,e,t,i,r,o,a,l){let u=[],f=0,m=0,y=!1,C=()=>{y&&!u.length&&!f&&e.complete()},I=G=>f<i?N(G):u.push(G),N=G=>{o&&e.next(G),f++;let q=!1;an(t(G,m++)).subscribe(Ze(e,Q=>{r?.(Q),o?I(Q):e.next(Q)},()=>{q=!0},void 0,()=>{if(q)try{for(f--;u.length&&f<i;){let Q=u.shift();a?hi(e,a,()=>N(Q)):N(Q)}C()}catch(Q){e.error(Q)}}))};return n.subscribe(Ze(e,I,()=>{y=!0,C()})),()=>{l?.()}}function Xt(n,e,t=1/0){return Be(e)?Xt((i,r)=>le((o,a)=>e(i,o,r,a))(an(n(i,r))),t):(typeof e=="number"&&(t=e),nt((i,r)=>p1(i,r,n,t)))}function Ps(n=1/0){return Xt(xi,n)}function g1(){return Ps(1)}function jl(...n){return g1()(_t(n,Ts(n)))}function Qd(n){return new Ie(e=>{an(n()).subscribe(e)})}function v0(...n){let e=ig(n),{args:t,keys:i}=gg(n),r=new Ie(o=>{let{length:a}=t;if(!a){o.complete();return}let l=new Array(a),u=a,f=a;for(let m=0;m<a;m++){let y=!1;an(t[m]).subscribe(Ze(o,C=>{y||(y=!0,f--),l[m]=C},()=>u--,void 0,()=>{(!u||!y)&&(f||o.next(i?mg(i,l):l),o.complete())}))}});return e?r.pipe(pg(e)):r}function m1(n=0,e,t=p0){let i=-1;return e!=null&&(ng(e)?t=e:i=e),new Ie(r=>{let o=h1(n)?+n-t.now():n;o<0&&(o=0);let a=0;return t.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function y0(n=0,e=Vl){return n<0&&(n=0),m1(n,n,e)}function ei(n,e){return nt((t,i)=>{let r=0;t.subscribe(Ze(i,o=>n.call(e,o,r++)&&i.next(o)))})}function Ro(n){return nt((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Ze(t,void 0,void 0,a=>{o=an(n(a,Ro(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function _1(n,e,t,i,r){return(o,a)=>{let l=t,u=e,f=0;o.subscribe(Ze(a,m=>{let y=f++;u=l?n(u,m,y):(l=!0,m),i&&a.next(u)},r&&(()=>{l&&a.next(u),a.complete()})))}}function Os(n,e){return Be(e)?Xt(n,e,1):Xt(n,1)}function Rs(n){return nt((e,t)=>{let i=!1;e.subscribe(Ze(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function ti(n){return n<=0?()=>di:nt((e,t)=>{let i=0;e.subscribe(Ze(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function _g(n=YF){return nt((e,t)=>{let i=!1;e.subscribe(Ze(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function YF(){return new sr}function Jd(n){return nt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function No(n,e){let t=arguments.length>=2;return i=>i.pipe(n?ei((r,o)=>n(r,o,i)):xi,ti(1),t?Rs(e):_g(()=>new sr))}function Ul(n){return n<=0?()=>di:nt((e,t)=>{let i=[];e.subscribe(Ze(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function w0(n,e){let t=arguments.length>=2;return i=>i.pipe(n?ei((r,o)=>n(r,o,i)):xi,Ul(1),t?Rs(e):_g(()=>new sr))}function vg(n,e){return nt(_1(n,e,arguments.length>=2,!0))}function yg(...n){let e=Ts(n);return nt((t,i)=>{(e?jl(n,t,e):jl(n,t)).subscribe(i)})}function Fn(n,e){return nt((t,i)=>{let r=null,o=0,a=!1,l=()=>a&&!r&&i.complete();t.subscribe(Ze(i,u=>{r?.unsubscribe();let f=0,m=o++;an(n(u,m)).subscribe(r=Ze(i,y=>i.next(e?e(u,y,m,f++):y),()=>{r=null,l()}))},()=>{a=!0,l()}))})}function wg(n){return nt((e,t)=>{an(n).subscribe(Ze(t,()=>t.complete(),Zd)),!t.closed&&e.subscribe(t)})}function Mn(n,e,t){let i=Be(n)||e||t?{next:n,error:e,complete:t}:n;return i?nt((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let l=!0;r.subscribe(Ze(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;l=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;l=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;l&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):xi}function v1(n){let e=Oe(null);try{return n()}finally{Oe(e)}}var Ns=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},R0=new Ns("20.3.14");var Ig="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",re=class extends Error{code;constructor(e,t){super(Fs(e,t)),this.code=e}};function QF(n){return`NG0${Math.abs(n)}`}function Fs(n,e){return`${QF(n)}${e?": "+e:""}`}var cr=globalThis;function ht(n){for(let e in n)if(n[e]===ht)return e;throw Error("")}function b1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Lo(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Lo).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function xg(n,e){return n?e?`${n} ${e}`:n:e||""}var JF=ht({__forward_ref__:ht});function ji(n){return n.__forward_ref__=ji,n.toString=function(){return Lo(this())},n}function Vn(n){return N0(n)?n():n}function N0(n){return typeof n=="function"&&n.hasOwnProperty(JF)&&n.__forward_ref__===ji}function ce(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function lr(n){return{providers:n.providers||[],imports:n.imports||[]}}function nh(n){return XF(n,Sg)}function k0(n){return nh(n)!==null}function XF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function eV(n){let e=n?.[Sg]??null;return e||null}function C0(n){return n&&n.hasOwnProperty(Cg)?n[Cg]:null}var Sg=ht({\u0275prov:ht}),Cg=ht({\u0275inj:ht}),ue=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ce({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function L0(n){return n&&!!n.\u0275providers}var F0=ht({\u0275cmp:ht}),V0=ht({\u0275dir:ht}),B0=ht({\u0275pipe:ht}),j0=ht({\u0275mod:ht}),eh=ht({\u0275fac:ht}),Xa=ht({__NG_ELEMENT_ID__:ht}),y1=ht({__NG_ENV_ID__:ht});function Vs(n){return typeof n=="string"?n:n==null?"":String(n)}function C1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Vs(n)}var E1=ht({ngErrorCode:ht}),tV=ht({ngErrorMessage:ht}),nV=ht({ngTokenPath:ht});function U0(n,e){return I1("",-200,e)}function Tg(n,e){throw new re(-201,!1)}function I1(n,e,t){let i=new re(e,n);return i[E1]=e,i[tV]=n,t&&(i[nV]=t),i}function iV(n){return n[E1]}var E0;function x1(){return E0}function ni(n){let e=E0;return E0=n,e}function z0(n,e,t){let i=nh(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;Tg(n,"Injector")}var rV={},Za=rV,I0="__NG_DI_FLAG__",x0=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=Ya(t)||0;try{return this.injector.get(e,i&8?null:Za,i)}catch(r){if(El(r))return r;throw r}}};function oV(n,e=0){let t=Lp();if(t===void 0)throw new re(-203,!1);if(t===null)return z0(n,void 0,e);{let i=sV(e),r=t.retrieve(n,i);if(El(r)){if(i.optional)return null;throw r}return r}}function De(n,e=0){return(x1()||oV)(Vn(n),e)}function U(n,e){return De(n,Ya(e))}function Ya(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function sV(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function S0(n){let e=[];for(let t=0;t<n.length;t++){let i=Vn(n[t]);if(Array.isArray(i)){if(i.length===0)throw new re(900,!1);let r,o=0;for(let a=0;a<i.length;a++){let l=i[a],u=aV(l);typeof u=="number"?u===-1?r=l.token:o|=u:r=l}e.push(De(r,o))}else e.push(De(i))}return e}function S1(n,e){return n[I0]=e,n.prototype[I0]=e,n}function aV(n){return n[I0]}function ks(n,e){let t=n.hasOwnProperty(eh);return t?n[eh]:null}function T1(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function D1(n){return n.flat(Number.POSITIVE_INFINITY)}function Dg(n,e){n.forEach(t=>Array.isArray(t)?Dg(t,e):e(t))}function H0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ih(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function M1(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function Mg(n,e,t){let i=Hl(n,e);return i>=0?n[i|1]=t:(i=~i,M1(n,i,e,t)),i}function Ag(n,e){let t=Hl(n,e);if(t>=0)return n[t|1]}function Hl(n,e){return cV(n,e,1)}function cV(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),a=n[o<<t];if(e===a)return o<<t;a>e?r=o:i=o+1}return~(r<<t)}var Bs={},ii=[],js=new ue(""),$0=new ue("",-1),q0=new ue(""),th=class{get(e,t=Za){if(t===Za){let r=I1("",-201);throw r.name="\u0275NotFound",r}return t}};function G0(n){return n[j0]||null}function Vo(n){return n[F0]||null}function W0(n){return n[V0]||null}function A1(n){return n[B0]||null}function ur(n){return{\u0275providers:n}}function P1(...n){return{\u0275providers:K0(!0,n),\u0275fromNgModule:!0}}function K0(n,...e){let t=[],i=new Set,r,o=a=>{t.push(a)};return Dg(e,a=>{let l=a;Eg(l,o,[],i)&&(r||=[],r.push(l))}),r!==void 0&&O1(r,o),t}function O1(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];Z0(r,o=>{e(o,i)})}}function Eg(n,e,t,i){if(n=Vn(n),!n)return!1;let r=null,o=C0(n),a=!o&&Vo(n);if(!o&&!a){let u=n.ngModule;if(o=C0(u),o)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=n}let l=i.has(r);if(a){if(l)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of u)Eg(f,e,t,i)}}else if(o){if(o.imports!=null&&!l){i.add(r);let f;try{Dg(o.imports,m=>{Eg(m,e,t,i)&&(f||=[],f.push(m))})}finally{}f!==void 0&&O1(f,e)}if(!l){let f=ks(r)||(()=>new r);e({provide:r,useFactory:f,deps:ii},r),e({provide:q0,useValue:r,multi:!0},r),e({provide:js,useValue:()=>De(r),multi:!0},r)}let u=o.providers;if(u!=null&&!l){let f=n;Z0(u,m=>{e(m,f)})}}else return!1;return r!==n&&n.providers!==void 0}function Z0(n,e){for(let t of n)L0(t)&&(t=t.\u0275providers),Array.isArray(t)?Z0(t,e):e(t)}var lV=ht({provide:String,useValue:ht});function R1(n){return n!==null&&typeof n=="object"&&lV in n}function uV(n){return!!(n&&n.useExisting)}function dV(n){return!!(n&&n.useFactory)}function Qa(n){return typeof n=="function"}function N1(n){return!!n.useClass}var rh=new ue(""),bg={},w1={},b0;function oh(){return b0===void 0&&(b0=new th),b0}var en=class{},Ja=class extends en{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,D0(e,a=>this.processProvider(a)),this.records.set($0,zl(void 0,this)),r.has("environment")&&this.records.set(en,zl(void 0,this));let o=this.records.get(rh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(q0,ii,{self:!0}))}retrieve(e,t){let i=Ya(t)||0;try{return this.get(e,Za,i)}catch(r){if(El(r))return r;throw r}}destroy(){Xd(this),this._destroyed=!0;let e=Oe(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Oe(e)}}onDestroy(e){return Xd(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Xd(this);let t=jr(this),i=ni(void 0),r;try{return e()}finally{jr(t),ni(i)}}get(e,t=Za,i){if(Xd(this),e.hasOwnProperty(y1))return e[y1](this);let r=Ya(i),o,a=jr(this),l=ni(void 0);try{if(!(r&4)){let f=this.records.get(e);if(f===void 0){let m=mV(e)&&nh(e);m&&this.injectableDefInScope(m)?f=zl(T0(e),bg):f=null,this.records.set(e,f)}if(f!=null)return this.hydrate(e,f,r)}let u=r&2?oh():this.parent;return t=r&8&&t===Za?null:t,u.get(e,t)}catch(u){let f=iV(u);throw f===-200||f===-201?new re(f,null):u}finally{ni(l),jr(a)}}resolveInjectorInitializers(){let e=Oe(null),t=jr(this),i=ni(void 0),r;try{let o=this.get(js,ii,{self:!0});for(let a of o)a()}finally{jr(t),ni(i),Oe(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Lo(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Vn(e);let t=Qa(e)?e:Vn(e&&e.provide),i=fV(e);if(!Qa(e)&&e.multi===!0){let r=this.records.get(t);r||(r=zl(void 0,bg,!0),r.factory=()=>S0(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=Oe(null);try{if(t.value===w1)throw U0(Lo(e));return t.value===bg&&(t.value=w1,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&gV(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Vn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function T0(n){let e=nh(n),t=e!==null?e.factory:ks(n);if(t!==null)return t;if(n instanceof ue)throw new re(204,!1);if(n instanceof Function)return hV(n);throw new re(204,!1)}function hV(n){if(n.length>0)throw new re(204,!1);let t=eV(n);return t!==null?()=>t.factory(n):()=>new n}function fV(n){if(R1(n))return zl(void 0,n.useValue);{let e=Y0(n);return zl(e,bg)}}function Y0(n,e,t){let i;if(Qa(n)){let r=Vn(n);return ks(r)||T0(r)}else if(R1(n))i=()=>Vn(n.useValue);else if(dV(n))i=()=>n.useFactory(...S0(n.deps||[]));else if(uV(n))i=(r,o)=>De(Vn(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=Vn(n&&(n.useClass||n.provide));if(pV(n))i=()=>new r(...S0(n.deps));else return ks(r)||T0(r)}return i}function Xd(n){if(n.destroyed)throw new re(205,!1)}function zl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function pV(n){return!!n.deps}function gV(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function mV(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function D0(n,e){for(let t of n)Array.isArray(t)?D0(t,e):t&&L0(t)?D0(t.\u0275providers,e):e(t)}function cn(n,e){let t;n instanceof Ja?(Xd(n),t=n):t=new x0(n);let i,r=jr(t),o=ni(void 0);try{return e()}finally{jr(r),ni(o)}}function k1(){return x1()!==void 0||Lp()!=null}var dr=0,we=1,Re=2,yn=3,Ui=4,zi=5,$l=6,ql=7,tn=8,Bo=9,Ur=10,It=11,Gl=12,Q0=13,ec=14,Si=15,Us=16,tc=17,zr=18,sh=19,J0=20,ko=21,Pg=22,ah=23,Ti=24,nc=25,ic=26,jt=27,L1=1,X0=6,zs=7,ch=8,rc=9,qt=10;function Hr(n){return Array.isArray(n)&&typeof n[L1]=="object"}function hr(n){return Array.isArray(n)&&n[L1]===!0}function ew(n){return(n.flags&4)!==0}function Hs(n){return n.componentOffset>-1}function Wl(n){return(n.flags&1)===1}function $r(n){return!!n.template}function Kl(n){return(n[Re]&512)!==0}function oc(n){return(n[Re]&256)===256}var tw="svg",F1="math";function Hi(n){for(;Array.isArray(n);)n=n[dr];return n}function nw(n,e){return Hi(e[n])}function fr(n,e){return Hi(e[n.index])}function lh(n,e){return n.data[e]}function Og(n,e){return n[e]}function iw(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function $i(n,e){let t=e[n];return Hr(t)?t:t[dr]}function V1(n){return(n[Re]&4)===4}function Rg(n){return(n[Re]&128)===128}function B1(n){return hr(n[yn])}function qi(n,e){return e==null?null:n[e]}function rw(n){n[tc]=0}function ow(n){n[Re]&1024||(n[Re]|=1024,Rg(n)&&Zl(n))}function j1(n,e){for(;n>0;)e=e[ec],n--;return e}function uh(n){return!!(n[Re]&9216||n[Ti]?.dirty)}function Ng(n){n[Ur].changeDetectionScheduler?.notify(8),n[Re]&64&&(n[Re]|=1024),uh(n)&&Zl(n)}function Zl(n){n[Ur].changeDetectionScheduler?.notify(0);let e=Ls(n);for(;e!==null&&!(e[Re]&8192||(e[Re]|=8192,!Rg(e)));)e=Ls(e)}function sw(n,e){if(oc(n))throw new re(911,!1);n[ko]===null&&(n[ko]=[]),n[ko].push(e)}function U1(n,e){if(n[ko]===null)return;let t=n[ko].indexOf(e);t!==-1&&n[ko].splice(t,1)}function Ls(n){let e=n[yn];return hr(e)?e[yn]:e}function aw(n){return n[ql]??=[]}function cw(n){return n.cleanup??=[]}function z1(n,e,t,i){let r=aw(e);r.push(t),n.firstCreatePass&&cw(n).push(i,r.length-1)}var Ue={lFrame:nD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var M0=!1;function H1(){return Ue.lFrame.elementDepthCount}function $1(){Ue.lFrame.elementDepthCount++}function lw(){Ue.lFrame.elementDepthCount--}function kg(){return Ue.bindingsEnabled}function q1(){return Ue.skipHydrationRootTNode!==null}function uw(n){return Ue.skipHydrationRootTNode===n}function dw(){Ue.skipHydrationRootTNode=null}function Ne(){return Ue.lFrame.lView}function Gt(){return Ue.lFrame.tView}function J(n){return Ue.lFrame.contextLView=n,n[tn]}function X(n){return Ue.lFrame.contextLView=null,n}function ln(){let n=hw();for(;n!==null&&n.type===64;)n=n.parent;return n}function hw(){return Ue.lFrame.currentTNode}function G1(){let n=Ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Yl(n,e){let t=Ue.lFrame;t.currentTNode=n,t.isParent=e}function fw(){return Ue.lFrame.isParent}function W1(){Ue.lFrame.isParent=!1}function K1(){return Ue.lFrame.contextLView}function pw(){return M0}function gw(n){let e=M0;return M0=n,e}function Lg(){let n=Ue.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Z1(){return Ue.lFrame.bindingIndex}function Y1(n){return Ue.lFrame.bindingIndex=n}function sc(){return Ue.lFrame.bindingIndex++}function Fg(n){let e=Ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Q1(){return Ue.lFrame.inI18n}function J1(n,e){let t=Ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,Vg(e)}function X1(){return Ue.lFrame.currentDirectiveIndex}function Vg(n){Ue.lFrame.currentDirectiveIndex=n}function eD(n){let e=Ue.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function mw(){return Ue.lFrame.currentQueryIndex}function Bg(n){Ue.lFrame.currentQueryIndex=n}function _V(n){let e=n[we];return e.type===2?e.declTNode:e.type===1?n[zi]:null}function _w(n,e,t){if(t&4){let r=e,o=n;for(;r=r.parent,r===null&&!(t&1);)if(r=_V(o),r===null||(o=o[ec],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Ue.lFrame=tD();return i.currentTNode=e,i.lView=n,!0}function jg(n){let e=tD(),t=n[we];Ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function tD(){let n=Ue.lFrame,e=n===null?null:n.child;return e===null?nD(n):e}function nD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function iD(){let n=Ue.lFrame;return Ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var vw=iD;function Ug(){let n=iD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function rD(n){return(Ue.lFrame.contextLView=j1(n,Ue.lFrame.contextLView))[tn]}function qr(){return Ue.lFrame.selectedIndex}function $s(n){Ue.lFrame.selectedIndex=n}function zg(){let n=Ue.lFrame;return lh(n.tView,n.selectedIndex)}function at(){Ue.lFrame.currentNamespace=tw}function Ut(){vV()}function vV(){Ue.lFrame.currentNamespace=null}function oD(){return Ue.lFrame.currentNamespace}var sD=!0;function Hg(){return sD}function dh(n){sD=n}function A0(n,e=null,t=null,i){let r=yw(n,e,t,i);return r.resolveInjectorInitializers(),r}function yw(n,e=null,t=null,i,r=new Set){let o=[t||ii,P1(n)];return i=i||(typeof n=="object"?void 0:Lo(n)),new Ja(o,e||oh(),i||null,r)}var $t=class n{static THROW_IF_NOT_FOUND=Za;static NULL=new th;static create(e,t){if(Array.isArray(e))return A0({name:""},t,e,"");{let i=e.name??"";return A0({name:i},e.parent,e.providers,i)}}static \u0275prov=ce({token:n,providedIn:"any",factory:()=>De($0)});static __NG_ELEMENT_ID__=-1},un=new ue(""),pr=(()=>{class n{static __NG_ELEMENT_ID__=yV;static __NG_ENV_ID__=t=>t}return n})(),P0=class extends pr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return oc(this._lView)}onDestroy(e){let t=this._lView;return sw(t,e),()=>U1(t,e)}};function yV(){return new P0(Ne())}var ar=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ri=new ue("",{providedIn:"root",factory:()=>{let n=U(en),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(ar),e.handleError(t))}}}),aD={provide:js,useValue:()=>void U(ar),multi:!0};function ww(n){return typeof n=="function"&&n[zn]!==void 0}function Gi(n,e){let[t,i,r]=i0(n,e?.equal),o=t,a=o[zn];return o.set=i,o.update=r,o.asReadonly=cD.bind(o),o}function cD(){let n=this[zn];if(n.readonlyFn===void 0){let e=()=>this();e[zn]=n,n.readonlyFn=e}return n.readonlyFn}function bw(n){return ww(n)&&typeof n.set=="function"}var $g=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=wV}return n})();function wV(){return new $g(Ne(),ln())}var Fo=class{},qg=new ue("",{providedIn:"root",factory:()=>!1});var Cw=new ue(""),Ew=new ue(""),Gr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Jt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ie(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ql=(()=>{class n{internalPendingTasks=U(Gr);scheduler=U(Fo);errorHandler=U(ri);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})();function hh(...n){}var Iw=(()=>{class n{static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new O0})}return n})(),O0=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}};function iu(n){return{toString:n}.toString()}var Gg="__parameters__";function SV(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function TV(n,e,t){return iu(()=>{let i=SV(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return l.annotation=a,l;function l(u,f,m){let y=u.hasOwnProperty(Gg)?u[Gg]:Object.defineProperty(u,Gg,{value:[]})[Gg];for(;y.length<=m;)y.push(null);return(y[m]=y[m]||[]).push(a),u}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Di=S1(TV("Optional"),8);function DV(n){return typeof n=="function"}var im=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function $D(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var Zr=(()=>{let n=()=>qD;return n.ngInherit=!0,n})();function qD(n){return n.type.prototype.ngOnChanges&&(n.setInput=AV),MV}function MV(){let n=WD(this),e=n?.current;if(e){let t=n.previous;if(t===Bs)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function AV(n,e,t,i,r){let o=this.declaredInputs[i],a=WD(n)||PV(n,{previous:Bs,current:null}),l=a.current||(a.current={}),u=a.previous,f=u[o];l[o]=new im(f&&f.currentValue,t,u===Bs),$D(n,e,r,t)}var GD="__ngSimpleChanges__";function WD(n){return n[GD]||null}function PV(n,e){return n[GD]=e}var lD=[];var vt=function(n,e=null,t){for(let i=0;i<lD.length;i++){let r=lD[i];r(n,e,t)}};function OV(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let a=qD(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function KD(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:m}=o;a&&(n.contentHooks??=[]).push(-t,a),l&&((n.contentHooks??=[]).push(t,l),(n.contentCheckHooks??=[]).push(t,l)),u&&(n.viewHooks??=[]).push(-t,u),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),m!=null&&(n.destroyHooks??=[]).push(t,m)}}function Jg(n,e,t){ZD(n,e,3,t)}function Xg(n,e,t,i){(n[Re]&3)===t&&ZD(n,e,t,i)}function xw(n,e){let t=n[Re];(t&3)===e&&(t&=16383,t+=1,n[Re]=t)}function ZD(n,e,t,i){let r=i!==void 0?n[tc]&65535:0,o=i??-1,a=e.length-1,l=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(l=e[u],i!=null&&l>=i)break}else e[u]<0&&(n[tc]+=65536),(l<o||o==-1)&&(RV(n,t,e,u),n[tc]=(n[tc]&4294901760)+u+2),u++}function uD(n,e){vt(4,n,e);let t=Oe(null);try{e.call(n)}finally{Oe(t),vt(5,n,e)}}function RV(n,e,t,i){let r=t[i]<0,o=t[i+1],a=r?-t[i]:t[i],l=n[a];r?n[Re]>>14<n[tc]>>16&&(n[Re]&3)===e&&(n[Re]+=16384,uD(l,o)):uD(l,o)}var Xl=-1,cc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function NV(n){return(n.flags&8)!==0}function kV(n){return(n.flags&16)!==0}function LV(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],a=t[i++],l=t[i++];n.setAttribute(e,a,l,o)}else{let o=r,a=t[++i];FV(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),i++}}return i}function YD(n){return n===3||n===4||n===6}function FV(n){return n.charCodeAt(0)===64}function eu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?dD(n,t,r,null,e[++i]):dD(n,t,r,null,null))}}return n}function dD(n,e,t,i,r){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let l=n[o++];if(typeof l=="number"){if(l===e){a=-1;break}else if(l>e){a=o-1;break}}}for(;o<n.length;){let l=n[o];if(typeof l=="number")break;if(l===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function QD(n){return n!==Xl}function rm(n){return n&32767}function VV(n){return n>>16}function om(n,e){let t=VV(n),i=e;for(;t>0;)i=i[ec],t--;return i}var Lw=!0;function sm(n){let e=Lw;return Lw=n,e}var BV=256,JD=BV-1,XD=5,jV=0,Wr={};function UV(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Xa)&&(i=t[Xa]),i==null&&(i=t[Xa]=jV++);let r=i&JD,o=1<<r;e.data[n+(r>>XD)]|=o}function am(n,e){let t=eM(n,e);if(t!==-1)return t;let i=e[we];i.firstCreatePass&&(n.injectorIndex=e.length,Sw(i.data,n),Sw(e,null),Sw(i.blueprint,null));let r=_b(n,e),o=n.injectorIndex;if(QD(r)){let a=rm(r),l=om(r,e),u=l[we].data;for(let f=0;f<8;f++)e[o+f]=l[a+f]|u[a+f]}return e[o+8]=r,o}function Sw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function eM(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function _b(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=oM(r),i===null)return Xl;if(t++,r=r[ec],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Xl}function Fw(n,e,t){UV(n,e,t)}function zV(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(YD(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function tM(n,e,t){if(t&8||n!==void 0)return n;Tg(e,"NodeInjector")}function nM(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[Bo],o=ni(void 0);try{return r?r.get(e,i,t&8):z0(e,i,t&8)}finally{ni(o)}}return tM(i,e,t)}function iM(n,e,t,i=0,r){if(n!==null){if(e[Re]&2048&&!(i&2)){let a=GV(n,e,t,i,Wr);if(a!==Wr)return a}let o=rM(n,e,t,i,Wr);if(o!==Wr)return o}return nM(e,t,i,r)}function rM(n,e,t,i,r){let o=$V(t);if(typeof o=="function"){if(!_w(e,n,i))return i&1?tM(r,t,i):nM(e,t,i,r);try{let a;if(a=o(i),a==null&&!(i&8))Tg(t);else return a}finally{vw()}}else if(typeof o=="number"){let a=null,l=eM(n,e),u=Xl,f=i&1?e[Si][zi]:null;for((l===-1||i&4)&&(u=l===-1?_b(n,e):e[l+8],u===Xl||!fD(i,!1)?l=-1:(a=e[we],l=rm(u),e=om(u,e)));l!==-1;){let m=e[we];if(hD(o,l,m.data)){let y=HV(l,e,t,a,i,f);if(y!==Wr)return y}u=e[l+8],u!==Xl&&fD(i,e[we].data[l+8]===f)&&hD(o,l,e)?(a=m,l=rm(u),e=om(u,e)):l=-1}}return r}function HV(n,e,t,i,r,o){let a=e[we],l=a.data[n+8],u=i==null?Hs(l)&&Lw:i!=a&&(l.type&3)!==0,f=r&1&&o===l,m=em(l,a,t,u,f);return m!==null?gh(e,a,m,l,r):Wr}function em(n,e,t,i,r){let o=n.providerIndexes,a=e.data,l=o&1048575,u=n.directiveStart,f=n.directiveEnd,m=o>>20,y=i?l:l+m,C=r?l+m:f;for(let I=y;I<C;I++){let N=a[I];if(I<u&&t===N||I>=u&&N.type===t)return I}if(r){let I=a[u];if(I&&$r(I)&&I.type===t)return u}return null}function gh(n,e,t,i,r){let o=n[t],a=e.data;if(o instanceof cc){let l=o;if(l.resolving){let I=C1(a[t]);throw U0(I)}let u=sm(l.canSeeViewProviders);l.resolving=!0;let f=a[t].type||a[t],m,y=l.injectImpl?ni(l.injectImpl):null,C=_w(n,i,0);try{o=n[t]=l.factory(void 0,r,a,n,i),e.firstCreatePass&&t>=i.directiveStart&&OV(t,a[t],e)}finally{y!==null&&ni(y),sm(u),l.resolving=!1,vw()}}return o}function $V(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Xa)?n[Xa]:void 0;return typeof e=="number"?e>=0?e&JD:qV:e}function hD(n,e,t){let i=1<<n;return!!(t[e+(n>>XD)]&i)}function fD(n,e){return!(n&2)&&!(n&1&&e)}var ac=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return iM(this._tNode,this._lView,e,Ya(i),t)}};function qV(){return new ac(ln(),Ne())}function Yr(n){return iu(()=>{let e=n.prototype.constructor,t=e[eh]||Vw(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[eh]||Vw(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Vw(n){return N0(n)?()=>{let e=Vw(Vn(n));return e&&e()}:ks(n)}function GV(n,e,t,i,r){let o=n,a=e;for(;o!==null&&a!==null&&a[Re]&2048&&!Kl(a);){let l=rM(o,a,t,i|2,Wr);if(l!==Wr)return l;let u=o.parent;if(!u){let f=a[J0];if(f){let m=f.get(t,Wr,i);if(m!==Wr)return m}u=oM(a),a=a[ec]}o=u}return r}function oM(n){let e=n[we],t=e.type;return t===2?e.declTNode:t===1?n[zi]:null}function bh(n){return zV(ln(),n)}function WV(){return ru(ln(),Ne())}function ru(n,e){return new Hn(fr(n,e))}var Hn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=WV}return n})();function KV(n){return n instanceof Hn?n.nativeElement:n}function ZV(){return this._results[Symbol.iterator]()}var cm=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Qt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=D1(e);(this._changesDetected=!T1(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=ZV};function sM(n){return(n.flags&128)===128}var vb=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(vb||{}),aM=new Map,YV=0;function QV(){return YV++}function JV(n){aM.set(n[sh],n)}function Bw(n){aM.delete(n[sh])}var pD="__ngContext__";function tu(n,e){Hr(e)?(n[pD]=e[sh],JV(e)):n[pD]=e}function cM(n){return uM(n[Gl])}function lM(n){return uM(n[Ui])}function uM(n){for(;n!==null&&!hr(n);)n=n[Ui];return n}var jw;function yb(n){jw=n}function wb(){if(jw!==void 0)return jw;if(typeof document<"u")return document;throw new re(210,!1)}var Im=new ue("",{providedIn:"root",factory:()=>XV}),XV="ng",xm=new ue(""),pc=new ue("",{providedIn:"platform",factory:()=>"unknown"});var Sm=new ue("",{providedIn:"root",factory:()=>wb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var e3="h",t3="b";var dM="r";var hM="di";var fM=!1,pM=new ue("",{providedIn:"root",factory:()=>fM});var bb=new ue("");var n3=(n,e,t,i)=>{};function i3(n,e,t,i){n3(n,e,t,i)}function Cb(n){return(n.flags&32)===32}var r3=()=>null;function gM(n,e,t=!1){return r3(n,e,t)}function mM(n,e){let t=n.contentQueries;if(t!==null){let i=Oe(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],a=t[r+1];if(a!==-1){let l=n.data[a];Bg(o),l.contentQueries(2,e[a],a)}}}finally{Oe(i)}}}function Uw(n,e,t){Bg(0);let i=Oe(null);try{e(n,t)}finally{Oe(i)}}function Eb(n,e,t){if(ew(e)){let i=Oe(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let a=r;a<o;a++){let l=n.data[a];if(l.contentQueries){let u=t[a];l.contentQueries(1,u,a)}}}finally{Oe(i)}}}var jo=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(jo||{}),Wg;function o3(){if(Wg===void 0&&(Wg=null,cr.trustedTypes))try{Wg=cr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wg}function Tm(n){return o3()?.createHTML(n)||n}var Kg;function _M(){if(Kg===void 0&&(Kg=null,cr.trustedTypes))try{Kg=cr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Kg}function gD(n){return _M()?.createHTML(n)||n}function mD(n){return _M()?.createScriptURL(n)||n}var lm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ig})`}};function gc(n){return n instanceof lm?n.changingThisBreaksApplicationSecurity:n}function Dm(n,e){let t=vM(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ig})`)}return t===e}function vM(n){return n instanceof lm&&n.getTypeName()||null}function s3(n){let e=new Hw(n);return a3()?new zw(e):e}var zw=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Tm(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Hw=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Tm(e),t}};function a3(){try{return!!new window.DOMParser().parseFromString(Tm(""),"text/html")}catch{return!1}}var c3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ib(n){return n=String(n),n.match(c3)?n:"unsafe:"+n}function Uo(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Ch(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var yM=Uo("area,br,col,hr,img,wbr"),wM=Uo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),bM=Uo("rp,rt"),l3=Ch(bM,wM),u3=Ch(wM,Uo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),d3=Ch(bM,Uo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_D=Ch(yM,u3,d3,l3),CM=Uo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),h3=Uo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),f3=Uo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),p3=Ch(CM,h3,f3),g3=Uo("script,style,template"),$w=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=v3(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=_3(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=vD(e).toLowerCase();if(!_D.hasOwnProperty(t))return this.sanitizedSomething=!0,!g3.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),a=o.name,l=a.toLowerCase();if(!p3.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let u=o.value;CM[l]&&(u=Ib(u)),this.buf.push(" ",a,'="',yD(u),'"')}return this.buf.push(">"),!0}endElement(e){let t=vD(e).toLowerCase();_D.hasOwnProperty(t)&&!yM.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(yD(e))}};function m3(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function _3(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw EM(e);return e}function v3(n){let e=n.firstChild;if(e&&m3(n,e))throw EM(e);return e}function vD(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function EM(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var y3=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w3=/([^\#-~ |!])/g;function yD(n){return n.replace(/&/g,"&amp;").replace(y3,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(w3,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Zg;function IM(n,e){let t=null;try{Zg=Zg||s3(n);let i=e?String(e):"";t=Zg.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=Zg.getInertBodyElement(i)}while(i!==o);let l=new $w().sanitizeChildren(wD(t)||t);return Tm(l)}finally{if(t){let i=wD(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function wD(n){return"content"in n&&b3(n)?n.content:null}function b3(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Eh=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Eh||{});function xb(n){let e=Tb();return e?gD(e.sanitize(Eh.HTML,n)||""):Dm(n,"HTML")?gD(gc(n)):IM(wb(),Vs(n))}function $n(n){let e=Tb();return e?e.sanitize(Eh.URL,n)||"":Dm(n,"URL")?gc(n):Ib(Vs(n))}function xM(n){let e=Tb();if(e)return mD(e.sanitize(Eh.RESOURCE_URL,n)||"");if(Dm(n,"ResourceURL"))return mD(gc(n));throw new re(904,!1)}function C3(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?xM:$n}function Sb(n,e,t){return C3(e,t)(n)}function Tb(){let n=Ne();return n&&n[Ur].sanitizer}var E3=/^>|^->|<!--|-->|--!>|<!-$/g,I3=/(<|>)/g,x3="\u200B$1\u200B";function S3(n){return n.replace(E3,e=>e.replace(I3,x3))}function SM(n){return n instanceof Function?n():n}function T3(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var TM="ng-template";function D3(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&T3(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(Db(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Db(n){return n.type===4&&n.value!==TM}function M3(n,e,t){let i=n.type===4&&!t?TM:n.value;return e===i}function A3(n,e,t){let i=4,r=n.attrs,o=r!==null?R3(r):0,a=!1;for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="number"){if(!a&&!gr(i)&&!gr(u))return!1;if(a&&gr(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!M3(n,u,t)||u===""&&e.length===1){if(gr(i))return!1;a=!0}}else if(i&8){if(r===null||!D3(n,r,u,t)){if(gr(i))return!1;a=!0}}else{let f=e[++l],m=P3(u,r,Db(n),t);if(m===-1){if(gr(i))return!1;a=!0;continue}if(f!==""){let y;if(m>o?y="":y=r[m+1].toLowerCase(),i&2&&f!==y){if(gr(i))return!1;a=!0}}}}return gr(i)||a}function gr(n){return(n&1)===0}function P3(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let a=e[r];if(a===n)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let l=e[++r];for(;typeof l=="string";)l=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return N3(e,n)}function O3(n,e,t=!1){for(let i=0;i<e.length;i++)if(A3(n,e[i],t))return!0;return!1}function R3(n){for(let e=0;e<n.length;e++){let t=n[e];if(YD(t))return e}return n.length}function N3(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function bD(n,e){return n?":not("+e.trim()+")":e}function k3(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(i&2){let l=n[++t];r+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!gr(a)&&(e+=bD(o,r),r=""),i=a,o=o||!gr(i);t++}return r!==""&&(e+=bD(o,r)),e}function L3(n){return n.map(k3).join(",")}function F3(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!gr(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var oi={};function V3(n,e){return n.createText(e)}function B3(n,e,t){n.setValue(e,t)}function j3(n,e){return n.createComment(S3(e))}function DM(n,e,t){return n.createElement(e,t)}function um(n,e,t,i,r){n.insertBefore(e,t,i,r)}function MM(n,e,t){n.appendChild(e,t)}function CD(n,e,t,i,r){i!==null?um(n,e,t,i,r):MM(n,e,t)}function AM(n,e,t,i){n.removeChild(null,e,t,i)}function U3(n,e,t){n.setAttribute(e,"style",t)}function z3(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function PM(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&LV(n,e,i),r!==null&&z3(n,e,r),o!==null&&U3(n,e,o)}function Mb(n,e,t,i,r,o,a,l,u,f,m){let y=jt+i,C=y+r,I=H3(y,C),N=typeof f=="function"?f():f;return I[we]={type:n,blueprint:I,template:t,queries:null,viewQuery:l,declTNode:e,data:I.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:N,incompleteFirstPass:!1,ssrId:m}}function H3(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:oi);return t}function $3(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Mb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ab(n,e,t,i,r,o,a,l,u,f,m){let y=e.blueprint.slice();return y[dr]=r,y[Re]=i|4|128|8|64|1024,(f!==null||n&&n[Re]&2048)&&(y[Re]|=2048),rw(y),y[yn]=y[ec]=n,y[tn]=t,y[Ur]=a||n&&n[Ur],y[It]=l||n&&n[It],y[Bo]=u||n&&n[Bo]||null,y[zi]=o,y[sh]=QV(),y[$l]=m,y[J0]=f,y[Si]=e.type==2?n[Si]:y,y}function q3(n,e,t){let i=fr(e,n),r=$3(t),o=n[Ur].rendererFactory,a=Pb(n,Ab(n,r,null,OM(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=a}function OM(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function RM(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Pb(n,e){return n[Gl]?n[Q0][Ui]=e:n[Gl]=e,n[Q0]=e,e}function T(n=1){NM(Gt(),Ne(),qr()+n,!1)}function NM(n,e,t,i){if(!i)if((e[Re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Jg(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Xg(e,o,0,t)}$s(t)}var Mm=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Mm||{});function qw(n,e,t,i){let r=Oe(null);try{let[o,a,l]=n.inputs[t],u=null;(a&Mm.SignalBased)!==0&&(u=e[o][zn]),u!==null&&u.transformFn!==void 0?i=u.transformFn(i):l!==null&&(i=l.call(e,i)),n.setInput!==null?n.setInput(e,u,i,t,o):$D(e,u,o,i)}finally{Oe(r)}}var Kr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Kr||{}),G3;function Ob(n,e){return G3(n,e)}var lc=new Set,Am=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Am||{}),mc=new ue(""),ED=new Set;function Qr(n){ED.has(n)||(ED.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var kM=!1,Gw=class extends Qt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,k1()&&(this.destroyRef=U(pr,{optional:!0})??void 0,this.pendingTasks=U(Gr,{optional:!0})??void 0)}emit(e){let t=Oe(null);try{super.next(e)}finally{Oe(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let l=super.subscribe({next:r,error:o,complete:a});return e instanceof Ht&&e.add(l),l}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},nn=Gw;function LM(n){let e,t;function i(){n=hh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function ID(n){return queueMicrotask(()=>n()),()=>{n=hh}}var Rb="isAngularZone",dm=Rb+"_ID",W3=0,ft=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new nn(!1);onMicrotaskEmpty=new nn(!1);onStable=new nn(!1);onError=new nn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=kM}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&i,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=o,Y3(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Rb)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new re(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,K3,hh,hh);try{return o.runTask(a,t,i)}finally{o.cancelTask(a)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},K3={};function Nb(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Z3(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){LM(()=>{n.callbackScheduled=!1,Ww(n),n.isCheckStableRunning=!0,Nb(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ww(n)}function Y3(n){let e=()=>{Z3(n)},t=W3++;n._inner=n._inner.fork({name:"angular",properties:{[Rb]:!0,[dm]:t,[dm+t]:!0},onInvokeTask:(i,r,o,a,l,u)=>{if(Q3(u))return i.invokeTask(o,a,l,u);try{return xD(n),i.invokeTask(o,a,l,u)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),SD(n)}},onInvoke:(i,r,o,a,l,u,f)=>{try{return xD(n),i.invoke(o,a,l,u,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!J3(u)&&e(),SD(n)}},onHasTask:(i,r,o,a)=>{i.hasTask(o,a),r===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,Ww(n),Nb(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,r,o,a)=>(i.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function Ww(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function xD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function SD(n){n._nesting--,Nb(n)}var hm=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new nn;onMicrotaskEmpty=new nn;onStable=new nn;onError=new nn;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function Q3(n){return FM(n,"__ignore_ng_zone__")}function J3(n){return FM(n,"__scheduler_tick__")}function FM(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var kb=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})(),VM=[0,1,2,3],BM=(()=>{class n{ngZone=U(ft);scheduler=U(Fo);errorHandler=U(ar,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){U(mc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&vt(16),this.executing=!0;for(let i of VM)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&vt(17)}register(t){let{view:i}=t;i!==void 0?((i[nc]??=[]).push(t),Zl(i),i[Re]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(Am.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})(),fm=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,a=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[nc];e&&(this.view[nc]=e.filter(t=>t!==this))}};function Ih(n,e){let t=e?.injector??U($t);return Qr("NgAfterNextRender"),e4(n,t,e,!0)}function X3(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function e4(n,e,t,i){let r=e.get(kb);r.impl??=e.get(BM);let o=e.get(mc,null,{optional:!0}),a=t?.manualCleanup!==!0?e.get(pr):null,l=e.get($g,null,{optional:!0}),u=new fm(r.impl,X3(n),l?.view,i,a,o?.snapshot(null));return r.impl.register(u),u}var jM=new ue("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function UM(n,e,t){let i=n.get(jM);if(Array.isArray(e))for(let r of e)i.queue.add(r),t?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function t4(n,e){let t=n.get(jM);if(e.detachedLeaveAnimationFns){for(let i of e.detachedLeaveAnimationFns)t.queue.delete(i);e.detachedLeaveAnimationFns=void 0}}function n4(n,e){for(let[t,i]of e)UM(n,i.animateFns)}function TD(n,e,t,i){let r=n?.[ic]?.enter;e!==null&&r&&r.has(t.index)&&n4(i,r)}function Jl(n,e,t,i,r,o,a,l){if(r!=null){let u,f=!1;hr(r)?u=r:Hr(r)&&(f=!0,r=r[dr]);let m=Hi(r);n===0&&i!==null?(TD(l,i,o,t),a==null?MM(e,i,m):um(e,i,m,a||null,!0)):n===1&&i!==null?(TD(l,i,o,t),um(e,i,m,a||null,!0)):n===2?DD(l,o,t,y=>{AM(e,m,f,y)}):n===3&&DD(l,o,t,()=>{e.destroyNode(m)}),u!=null&&g4(e,n,t,u,o,i,a)}}function i4(n,e){zM(n,e),e[dr]=null,e[zi]=null}function r4(n,e,t,i,r,o){i[dr]=r,i[zi]=e,Om(n,i,t,1,r,o)}function zM(n,e){e[Ur].changeDetectionScheduler?.notify(9),Om(n,e,e[It],2,null,null)}function o4(n){let e=n[Gl];if(!e)return Tw(n[we],n);for(;e;){let t=null;if(Hr(e))t=e[Gl];else{let i=e[qt];i&&(t=i)}if(!t){for(;e&&!e[Ui]&&e!==n;)Hr(e)&&Tw(e[we],e),e=e[yn];e===null&&(e=n),Hr(e)&&Tw(e[we],e),t=e&&e[Ui]}e=t}}function Lb(n,e){let t=n[rc],i=t.indexOf(e);t.splice(i,1)}function Pm(n,e){if(oc(e))return;let t=e[It];t.destroyNode&&Om(n,e,t,3,null,null),o4(e)}function Tw(n,e){if(oc(e))return;let t=Oe(null);try{e[Re]&=-129,e[Re]|=256,e[Ti]&&Kd(e[Ti]),c4(n,e),a4(n,e),e[we].type===1&&e[It].destroy();let i=e[Us];if(i!==null&&hr(e[yn])){i!==e[yn]&&Lb(i,e);let r=e[zr];r!==null&&r.detachView(n)}Bw(e)}finally{Oe(t)}}function DD(n,e,t,i){let r=n?.[ic];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);n&&lc.add(n),UM(t,()=>{if(r.leave&&r.leave.has(e.index)){let a=r.leave.get(e.index),l=[];if(a){for(let u=0;u<a.animateFns.length;u++){let f=a.animateFns[u],{promise:m}=f();l.push(m)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(l),s4(n,i)}else n&&lc.delete(n),i(!1)},r)}function s4(n,e){let t=n[ic]?.running;if(t){t.then(()=>{n[ic].running=void 0,lc.delete(n),e(!0)});return}e(!1)}function a4(n,e){let t=n.cleanup,i=e[ql];if(t!==null)for(let a=0;a<t.length-1;a+=2)if(typeof t[a]=="string"){let l=t[a+3];l>=0?i[l]():i[-l].unsubscribe(),a+=2}else{let l=i[t[a+1]];t[a].call(l)}i!==null&&(e[ql]=null);let r=e[ko];if(r!==null){e[ko]=null;for(let a=0;a<r.length;a++){let l=r[a];l()}}let o=e[ah];if(o!==null){e[ah]=null;for(let a of o)a.destroy()}}function c4(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof cc)){let o=t[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let l=r[o[a]],u=o[a+1];vt(4,l,u);try{u.call(l)}finally{vt(5,l,u)}}else{vt(4,r,o);try{o.call(r)}finally{vt(5,r,o)}}}}}function l4(n,e,t){return u4(n,e.parent,t)}function u4(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[dr];if(Hs(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===jo.None||r===jo.Emulated)return null}return fr(i,t)}function d4(n,e,t){return f4(n,e,t)}function h4(n,e,t){return n.type&40?fr(n,t):null}var f4=h4,MD;function Fb(n,e,t,i){let r=l4(n,i,e),o=e[It],a=i.parent||e[zi],l=d4(a,i,e);if(r!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)CD(o,r,t[u],l,!1);else CD(o,r,t,l,!1);MD!==void 0&&MD(o,i,e,t,r)}function fh(n,e){if(e!==null){let t=e.type;if(t&3)return fr(e,n);if(t&4)return Kw(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return fh(n,i);{let r=n[e.index];return hr(r)?Kw(-1,r):Hi(r)}}else{if(t&128)return fh(n,e.next);if(t&32)return Ob(e,n)()||Hi(n[e.index]);{let i=HM(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Ls(n[Si]);return fh(r,i)}else return fh(n,e.next)}}}return null}function HM(n,e){if(e!==null){let i=n[Si][zi],r=e.projection;return i.projection[r]}return null}function Kw(n,e){let t=qt+n+1;if(t<e.length){let i=e[t],r=i[we].firstChild;if(r!==null)return fh(i,r)}return e[zs]}function Vb(n,e,t,i,r,o,a){for(;t!=null;){let l=i[Bo];if(t.type===128){t=t.next;continue}let u=i[t.index],f=t.type;if(a&&e===0&&(u&&tu(Hi(u),i),t.flags|=2),!Cb(t))if(f&8)Vb(n,e,t.child,i,r,o,!1),Jl(e,n,l,r,u,t,o,i);else if(f&32){let m=Ob(t,i),y;for(;y=m();)Jl(e,n,l,r,y,t,o,i);Jl(e,n,l,r,u,t,o,i)}else f&16?p4(n,e,i,t,r,o):Jl(e,n,l,r,u,t,o,i);t=a?t.projectionNext:t.next}}function Om(n,e,t,i,r,o){Vb(t,i,n.firstChild,e,r,o,!1)}function p4(n,e,t,i,r,o){let a=t[Si],u=a[zi].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let m=u[f];Jl(e,n,t[Bo],r,m,i,o,t)}else{let f=u,m=a[yn];sM(i)&&(f.flags|=128),Vb(n,e,f,m,r,o,!0)}}function g4(n,e,t,i,r,o,a){let l=i[zs],u=Hi(i);l!==u&&Jl(e,n,t,o,l,r,a);for(let f=qt;f<i.length;f++){let m=i[f];Om(m[we],m,n,e,o,l)}}function m4(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:Kr.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Kr.Important),n.setStyle(t,i,r,o))}}function $M(n,e,t,i,r){let o=qr(),a=i&2;try{$s(-1),a&&e.length>jt&&NM(n,e,jt,!1),vt(a?2:0,r,t),t(i,r)}finally{$s(o),vt(a?3:1,r,t)}}function Rm(n,e,t){E4(n,e,t),(t.flags&64)===64&&I4(n,e,t)}function xh(n,e,t=fr){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],l=a===-1?t(e,n):n[a];n[r++]=l}}}function _4(n,e,t,i){let o=i.get(pM,fM)||t===jo.ShadowDom,a=n.selectRootElement(e,o);return v4(a),a}function v4(n){y4(n)}var y4=()=>null;function w4(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function qM(n,e,t,i,r,o){let a=e[we];if(zb(n,a,e,t,i)){Hs(n)&&C4(e,n.index);return}n.type&3&&(t=w4(t)),b4(n,e,t,i,r,o)}function b4(n,e,t,i,r,o){if(n.type&3){let a=fr(n,e);i=o!=null?o(i,n.value||"",t):i,r.setProperty(a,t,i)}else n.type&12}function C4(n,e){let t=$i(e,n);t[Re]&16||(t[Re]|=64)}function E4(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Hs(t)&&q3(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||am(t,e);let o=t.initialInputs;for(let a=i;a<r;a++){let l=n.data[a],u=gh(e,n,a,t);if(tu(u,e),o!==null&&D4(e,a-i,u,l,t,o),$r(l)){let f=$i(t.index,e);f[tn]=gh(e,n,a,t)}}}function I4(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,a=X1();try{$s(o);for(let l=i;l<r;l++){let u=n.data[l],f=e[l];Vg(l),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&x4(u,f)}}finally{$s(-1),Vg(a)}}function x4(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Bb(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];O3(e,o.selectors,!1)&&(i??=[],$r(o)?i.unshift(o):i.push(o))}return i}function S4(n,e,t,i,r,o){let a=fr(n,e);T4(e[It],a,o,n.value,t,i,r)}function T4(n,e,t,i,r,o,a){if(o==null)n.removeAttribute(e,r,t);else{let l=a==null?Vs(o):a(o,i||"",r);n.setAttribute(e,r,l,t)}}function D4(n,e,t,i,r,o){let a=o[e];if(a!==null)for(let l=0;l<a.length;l+=2){let u=a[l],f=a[l+1];qw(i,t,u,f)}}function jb(n,e,t,i,r){let o=jt+t,a=e[we],l=r(a,e,n,i,t);e[o]=l,Yl(n,!0);let u=n.type===2;return u?(PM(e[It],l,n),(H1()===0||Wl(n))&&tu(l,e),$1()):tu(l,e),Hg()&&(!u||!Cb(n))&&Fb(a,e,l,n),n}function Ub(n){let e=n;return fw()?W1():(e=e.parent,Yl(e,!1)),e}function M4(n,e){let t=n[Bo];if(!t)return;let i;try{i=t.get(ri,null)}catch{i=null}i?.(e)}function zb(n,e,t,i,r){let o=n.inputs?.[i],a=n.hostDirectiveInputs?.[i],l=!1;if(a)for(let u=0;u<a.length;u+=2){let f=a[u],m=a[u+1],y=e.data[f];qw(y,t[f],m,r),l=!0}if(o)for(let u of o){let f=t[u],m=e.data[u];qw(m,f,i,r),l=!0}return l}function A4(n,e){let t=$i(e,n),i=t[we];P4(i,t);let r=t[dr];r!==null&&t[$l]===null&&(t[$l]=gM(r,t[Bo])),vt(18),Hb(i,t,t[tn]),vt(19,t[tn])}function P4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Hb(n,e,t){jg(e);try{let i=n.viewQuery;i!==null&&Uw(1,i,t);let r=n.template;r!==null&&$M(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[zr]?.finishViewCreation(n),n.staticContentQueries&&mM(n,e),n.staticViewQueries&&Uw(2,n.viewQuery,t);let o=n.components;o!==null&&O4(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Re]&=-5,Ug()}}function O4(n,e){for(let t=0;t<e.length;t++)A4(n,e[t])}function Nm(n,e,t,i){let r=Oe(null);try{let o=e.tView,l=n[Re]&4096?4096:16,u=Ab(n,o,t,l,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[e.index];u[Us]=f;let m=n[zr];return m!==null&&(u[zr]=m.createEmbeddedView(o)),Hb(o,u,t),u}finally{Oe(r)}}function mh(n,e){return!e||e.firstChild===null||sM(n)}function _h(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(Hi(o)),hr(o)&&GM(o,i);let a=t.type;if(a&8)_h(n,e,t.child,i);else if(a&32){let l=Ob(t,e),u;for(;u=l();)i.push(u)}else if(a&16){let l=HM(e,t);if(Array.isArray(l))i.push(...l);else{let u=Ls(e[Si]);_h(u[we],u,l,i,!0)}}t=r?t.projectionNext:t.next}return i}function GM(n,e){for(let t=qt;t<n.length;t++){let i=n[t],r=i[we].firstChild;r!==null&&_h(i[we],i,r,e)}n[zs]!==n[dr]&&e.push(n[zs])}function WM(n){if(n[nc]!==null){for(let e of n[nc])e.impl.addSequence(e);n[nc].length=0}}var KM=[];function R4(n){return n[Ti]??N4(n)}function N4(n){let e=KM.pop()??Object.create(L4);return e.lView=n,e}function k4(n){n.lView[Ti]!==n&&(n.lView=null,KM.push(n))}var L4=pe(K({},Il),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Zl(n.lView)},consumerOnSignalRead(){this.lView[Ti]=this}});function F4(n){let e=n[Ti]??Object.create(V4);return e.lView=n,e}var V4=pe(K({},Il),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ls(n.lView);for(;e&&!ZM(e[we]);)e=Ls(e);e&&ow(e)},consumerOnSignalRead(){this.lView[Ti]=this}});function ZM(n){return n.type!==2}function YM(n){if(n[ah]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[ah])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[Re]&8192)}}var B4=100;function QM(n,e=0){let i=n[Ur].rendererFactory,r=!1;r||i.begin?.();try{j4(n,e)}finally{r||i.end?.()}}function j4(n,e){let t=pw();try{gw(!0),Zw(n,e);let i=0;for(;uh(n);){if(i===B4)throw new re(103,!1);i++,Zw(n,1)}}finally{gw(t)}}function U4(n,e,t,i){if(oc(e))return;let r=e[Re],o=!1,a=!1;jg(e);let l=!0,u=null,f=null;o||(ZM(n)?(f=R4(e),u=Sl(f)):Up()===null?(l=!1,f=F4(e),u=Sl(f)):e[Ti]&&(Kd(e[Ti]),e[Ti]=null));try{rw(e),Y1(n.bindingStartIndex),t!==null&&$M(n,e,t,2,i);let m=(r&3)===3;if(!o)if(m){let I=n.preOrderCheckHooks;I!==null&&Jg(e,I,null)}else{let I=n.preOrderHooks;I!==null&&Xg(e,I,0,null),xw(e,0)}if(a||z4(e),YM(e),JM(e,0),n.contentQueries!==null&&mM(n,e),!o)if(m){let I=n.contentCheckHooks;I!==null&&Jg(e,I)}else{let I=n.contentHooks;I!==null&&Xg(e,I,1),xw(e,1)}$4(n,e);let y=n.components;y!==null&&eA(e,y,0);let C=n.viewQuery;if(C!==null&&Uw(2,C,i),!o)if(m){let I=n.viewCheckHooks;I!==null&&Jg(e,I)}else{let I=n.viewHooks;I!==null&&Xg(e,I,2),xw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Pg]){for(let I of e[Pg])I();e[Pg]=null}o||(WM(e),e[Re]&=-73)}catch(m){throw o||Zl(e),m}finally{f!==null&&(Gd(f,u),l&&k4(f)),Ug()}}function JM(n,e){for(let t=cM(n);t!==null;t=lM(t))for(let i=qt;i<t.length;i++){let r=t[i];XM(r,e)}}function z4(n){for(let e=cM(n);e!==null;e=lM(e)){if(!(e[Re]&2))continue;let t=e[rc];for(let i=0;i<t.length;i++){let r=t[i];ow(r)}}}function H4(n,e,t){vt(18);let i=$i(e,n);XM(i,t),vt(19,i[tn])}function XM(n,e){Rg(n)&&Zw(n,e)}function Zw(n,e){let i=n[we],r=n[Re],o=n[Ti],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(o?.dirty&&Wd(o)),a||=!1,o&&(o.dirty=!1),n[Re]&=-9217,a)U4(i,n,i.template,n[tn]);else if(r&8192){let l=Oe(null);try{YM(n),JM(n,1);let u=i.components;u!==null&&eA(n,u,1),WM(n)}finally{Oe(l)}}}function eA(n,e,t){for(let i=0;i<e.length;i++)H4(n,e[i],t)}function $4(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)$s(~r);else{let o=r,a=t[++i],l=t[++i];J1(a,o);let u=e[o];vt(24,u),l(2,u),vt(25,u)}}}finally{$s(-1)}}function $b(n,e){let t=pw()?64:1088;for(n[Ur].changeDetectionScheduler?.notify(e);n;){n[Re]|=t;let i=Ls(n);if(Kl(n)&&!i)return n;n=i}return null}function tA(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function nA(n,e){let t=qt+e;if(t<n.length)return n[t]}function km(n,e,t,i=!0){let r=e[we];if(q4(r,e,n,t),i){let a=Kw(t,n),l=e[It],u=l.parentNode(n[zs]);u!==null&&r4(r,n[zi],l,e,u,a)}let o=e[$l];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function iA(n,e){let t=vh(n,e);return t!==void 0&&Pm(t[we],t),t}function vh(n,e){if(n.length<=qt)return;let t=qt+e,i=n[t];if(i){let r=i[Us];r!==null&&r!==n&&Lb(r,i),e>0&&(n[t-1][Ui]=i[Ui]);let o=ih(n,qt+e);i4(i[we],i);let a=o[zr];a!==null&&a.detachView(o[we]),i[yn]=null,i[Ui]=null,i[Re]&=-129}return i}function q4(n,e,t,i){let r=qt+i,o=t.length;i>0&&(t[r-1][Ui]=e),i<o-qt?(e[Ui]=t[r],H0(t,qt+i,e)):(t.push(e),e[Ui]=null),e[yn]=t;let a=e[Us];a!==null&&t!==a&&rA(a,e);let l=e[zr];l!==null&&l.insertView(n),Ng(e),e[Re]|=128}function rA(n,e){let t=n[rc],i=e[yn];if(Hr(i))n[Re]|=2;else{let r=i[yn][Si];e[Si]!==r&&(n[Re]|=2)}t===null?n[rc]=[e]:t.push(e)}var qs=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[we];return _h(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[tn]}set context(e){this._lView[tn]=e}get destroyed(){return oc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[yn];if(hr(e)){let t=e[ch],i=t?t.indexOf(this):-1;i>-1&&(vh(e,i),ih(t,i))}this._attachedToViewContainer=!1}Pm(this._lView[we],this._lView)}onDestroy(e){sw(this._lView,e)}markForCheck(){$b(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Re]&=-129}reattach(){Ng(this._lView),this._lView[Re]|=128}detectChanges(){this._lView[Re]|=1024,QM(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Kl(this._lView),t=this._lView[Us];t!==null&&!e&&Lb(t,this._lView),zM(this._lView[we],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let t=Kl(this._lView),i=this._lView[Us];i!==null&&!t&&rA(i,this._lView),Ng(this._lView)}};var Gs=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=G4;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let o=Nm(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new qs(o)}}return n})();function G4(){return Lm(ln(),Ne())}function Lm(n,e){return n.type&4?new Gs(e,n,ru(n,e)):null}function Sh(n,e,t,i,r){let o=n.data[e];if(o===null)o=W4(n,e,t,i,r),Q1()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let a=G1();o.injectorIndex=a===null?-1:a.injectorIndex}return Yl(o,!0),o}function W4(n,e,t,i,r){let o=hw(),a=fw(),l=a?o:o&&o.parent,u=n.data[e]=Z4(n,l,t,e,i,r);return K4(n,u,o,a),u}function K4(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Z4(n,e,t,i,r,o){let a=e?e.injectorIndex:-1,l=0;return q1()&&(l|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Vne=new RegExp(`^(\\d+)*(${t3}|${e3})*(.*)`);function Y4(n){let e=n[X0]??[],i=n[yn][It],r=[];for(let o of e)o.data[hM]!==void 0?r.push(o):Q4(o,i);n[X0]=r}function Q4(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[dM];for(;t<r;){let o=i.nextSibling;AM(e,i,!1),i=o,t++}}}var J4=()=>null,X4=()=>null;function Yw(n,e){return J4(n,e)}function oA(n,e,t){return X4(n,e,t)}var sA=class{},Fm=class{},Qw=class{resolveComponentFactory(e){throw new re(917,!1)}},Th=class{static NULL=new Qw},uc=class{},Wi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>eB()}return n})();function eB(){let n=Ne(),e=ln(),t=$i(e.index,n);return(Hr(t)?t:n)[It]}var aA=(()=>{class n{static \u0275prov=ce({token:n,providedIn:"root",factory:()=>null})}return n})();var tm={},Jw=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,tm,i);return r!==tm||t===tm?r:this.parentInjector.get(e,t,i)}};function pm(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number")o=l;else if(o==1)r=xg(r,l);else if(o==2){let u=l,f=e[++a];i=xg(i,u+": "+f+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Ee(n,e=0){let t=Ne();if(t===null)return De(n,e);let i=ln();return iM(i,t,Vn(n),e)}function qb(){let n="invalid";throw new Error(n)}function cA(n,e,t,i,r){let o=i===null?null:{"":-1},a=r(n,t);if(a!==null){let l=a,u=null,f=null;for(let m of a)if(m.resolveHostDirectives!==null){[l,u,f]=m.resolveHostDirectives(a);break}iB(n,e,t,l,o,u,f)}o!==null&&i!==null&&tB(t,i,o)}function tB(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new re(-301,!1);i.push(e[r],o)}}function nB(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function iB(n,e,t,i,r,o,a){let l=i.length,u=!1;for(let C=0;C<l;C++){let I=i[C];!u&&$r(I)&&(u=!0,nB(n,t,C)),Fw(am(t,e),n,I.type)}lB(t,n.data.length,l);for(let C=0;C<l;C++){let I=i[C];I.providersResolver&&I.providersResolver(I)}let f=!1,m=!1,y=RM(n,e,l,null);l>0&&(t.directiveToIndex=new Map);for(let C=0;C<l;C++){let I=i[C];if(t.mergedAttrs=eu(t.mergedAttrs,I.hostAttrs),oB(n,t,e,y,I),cB(y,I,r),a!==null&&a.has(I)){let[G,q]=a.get(I);t.directiveToIndex.set(I.type,[y,G+t.directiveStart,q+t.directiveStart])}else(o===null||!o.has(I))&&t.directiveToIndex.set(I.type,y);I.contentQueries!==null&&(t.flags|=4),(I.hostBindings!==null||I.hostAttrs!==null||I.hostVars!==0)&&(t.flags|=64);let N=I.type.prototype;!f&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),f=!0),!m&&(N.ngOnChanges||N.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),m=!0),y++}rB(n,t,o)}function rB(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))AD(0,e,r,i),AD(1,e,r,i),OD(e,i,!1);else{let o=t.get(r);PD(0,e,o,i),PD(1,e,o,i),OD(e,i,!0)}}}function AD(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a;n===0?a=e.inputs??={}:a=e.outputs??={},a[o]??=[],a[o].push(i),lA(e,o)}}function PD(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a=r[o],l;n===0?l=e.hostDirectiveInputs??={}:l=e.hostDirectiveOutputs??={},l[a]??=[],l[a].push(i,o),lA(e,a)}}function lA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function OD(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||Db(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let a=null,l=0;for(;l<i.length;){let u=i[l];if(u===0){l+=4;continue}else if(u===5){l+=2;continue}else if(typeof u=="number")break;if(!t&&r.hasOwnProperty(u)){let f=r[u];for(let m of f)if(m===e){a??=[],a.push(u,i[l+1]);break}}else if(t&&o.hasOwnProperty(u)){let f=o[u];for(let m=0;m<f.length;m+=2)if(f[m]===e){a??=[],a.push(f[m+1],i[l+1]);break}}l+=2}n.initialInputs??=[],n.initialInputs.push(a)}function oB(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=ks(r.type,!0)),a=new cc(o,$r(r),Ee,null);n.blueprint[i]=a,t[i]=a,sB(n,e,i,RM(n,t,r.hostVars,oi),r)}function sB(n,e,t,i,r){let o=r.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let l=~e.index;aB(a)!=l&&a.push(l),a.push(t,i,o)}}function aB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function cB(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;$r(e)&&(t[""]=n)}}function lB(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Gb(n,e,t,i,r,o,a,l){let u=e[we],f=u.consts,m=qi(f,a),y=Sh(u,n,t,i,m);return o&&cA(u,e,y,qi(f,l),r),y.mergedAttrs=eu(y.mergedAttrs,y.attrs),y.attrs!==null&&pm(y,y.attrs,!1),y.mergedAttrs!==null&&pm(y,y.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,y),y}function Wb(n,e){KD(n,e),ew(e)&&n.queries.elementEnd(e)}function uB(n,e,t,i,r,o){let a=e.consts,l=qi(a,r),u=Sh(e,n,t,i,l);if(u.mergedAttrs=eu(u.mergedAttrs,u.attrs),o!=null){let f=qi(a,o);u.localNames=[];for(let m=0;m<f.length;m+=2)u.localNames.push(f[m],-1)}return u.attrs!==null&&pm(u,u.attrs,!1),u.mergedAttrs!==null&&pm(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Kb(n){return dA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function uA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function dA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Zb(n,e,t){return n[e]=t}function dB(n,e){return n[e]}function _r(n,e,t){if(t===oi)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function hA(n,e,t,i){let r=_r(n,e,t);return _r(n,e+1,i)||r}function nm(n,e,t){return function i(r){let o=Hs(n)?$i(n.index,e):e;$b(o,5);let a=e[tn],l=RD(e,a,t,r),u=i.__ngNextListenerFn__;for(;u;)l=RD(e,a,u,r)&&l,u=u.__ngNextListenerFn__;return l}}function RD(n,e,t,i){let r=Oe(null);try{return vt(6,e,t),t(i)!==!1}catch(o){return M4(n,o),!1}finally{vt(7,e,t),Oe(r)}}function fA(n,e,t,i,r,o,a,l){let u=Wl(n),f=!1,m=null;if(!i&&u&&(m=fB(e,t,o,n.index)),m!==null){let y=m.__ngLastListenerFn__||m;y.__ngNextListenerFn__=a,m.__ngLastListenerFn__=a,f=!0}else{let y=fr(n,t),C=i?i(y):y;i3(t,C,o,l);let I=r.listen(C,o,l);if(!hB(o)){let N=i?G=>i(Hi(G[n.index])):n.index;pA(N,e,t,o,l,I,!1)}}return f}function hB(n){return n.startsWith("animation")||n.startsWith("transition")}function fB(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===t&&r[o+1]===i){let l=e[ql],u=r[o+2];return l&&l.length>u?l[u]:null}typeof a=="string"&&(o+=2)}return null}function pA(n,e,t,i,r,o,a){let l=e.firstCreatePass?cw(e):null,u=aw(t),f=u.length;u.push(r,o),l&&l.push(i,n,f,(f+1)*(a?-1:1))}function ND(n,e,t,i,r,o){let a=e[t],l=e[we],f=l.data[t].outputs[i],y=a[f].subscribe(o);pA(n.index,l,e,r,o,y,!0)}var Xw=Symbol("BINDING");var gm=class extends Th{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Vo(e);return new dc(t,this.ngModule)}};function pB(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&Mm.SignalBased)!==0};return r&&(o.transform=r),o})}function gB(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function mB(n,e,t){let i=e instanceof en?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new Jw(t,i):t}function _B(n){let e=n.get(uc,null);if(e===null)throw new re(407,!1);let t=n.get(aA,null),i=n.get(Fo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function vB(n,e){let t=gA(n);return DM(e,t,t==="svg"?tw:t==="math"?F1:null)}function gA(n){return(n.selectors[0][0]||"div").toLowerCase()}var dc=class extends Fm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=pB(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=gB(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=L3(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,o,a){vt(22);let l=Oe(null);try{let u=this.componentDef,f=yB(i,u,a,o),m=mB(u,r||this.ngModule,e),y=_B(m),C=y.rendererFactory.createRenderer(null,u),I=i?_4(C,i,u.encapsulation,m):vB(u,C),N=a?.some(kD)||o?.some(Q=>typeof Q!="function"&&Q.bindings.some(kD)),G=Ab(null,f,null,512|OM(u),null,null,y,C,m,null,gM(I,m,!0));G[jt]=I,jg(G);let q=null;try{let Q=Gb(jt,G,2,"#host",()=>f.directiveRegistry,!0,0);PM(C,I,Q),tu(I,G),Rm(f,G,Q),Eb(f,Q,G),Wb(f,Q),t!==void 0&&bB(Q,this.ngContentSelectors,t),q=$i(Q.index,G),G[tn]=q[tn],Hb(f,G,null)}catch(Q){throw q!==null&&Bw(q),Bw(G),Q}finally{vt(23),Ug()}return new mm(this.componentType,G,!!N)}finally{Oe(l)}}};function yB(n,e,t,i){let r=n?["ng-version","20.3.14"]:F3(e.selectors[0]),o=null,a=null,l=0;if(t)for(let m of t)l+=m[Xw].requiredVars,m.create&&(m.targetIdx=0,(o??=[]).push(m)),m.update&&(m.targetIdx=0,(a??=[]).push(m));if(i)for(let m=0;m<i.length;m++){let y=i[m];if(typeof y!="function")for(let C of y.bindings){l+=C[Xw].requiredVars;let I=m+1;C.create&&(C.targetIdx=I,(o??=[]).push(C)),C.update&&(C.targetIdx=I,(a??=[]).push(C))}}let u=[e];if(i)for(let m of i){let y=typeof m=="function"?m:m.type,C=W0(y);u.push(C)}return Mb(0,null,wB(o,a),1,l,u,null,null,null,[r],null)}function wB(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function kD(n){let e=n[Xw].kind;return e==="input"||e==="twoWay"}var mm=class extends sA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=lh(t[we],jt),this.location=ru(this._tNode,t),this.instance=$i(this._tNode.index,t)[tn],this.hostView=this.changeDetectorRef=new qs(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=zb(i,r[we],r,e,t);this.previousInputValues.set(e,t);let a=$i(i.index,r);$b(a,1)}get injector(){return new ac(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function bB(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var zo=(()=>{class n{static __NG_ELEMENT_ID__=CB}return n})();function CB(){let n=ln();return _A(n,Ne())}var EB=zo,mA=class extends EB{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return ru(this._hostTNode,this._hostLView)}get injector(){return new ac(this._hostTNode,this._hostLView)}get parentInjector(){let e=_b(this._hostTNode,this._hostLView);if(QD(e)){let t=om(e,this._hostLView),i=rm(e),r=t[we].data[i+8];return new ac(r,t)}else return new ac(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=LD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-qt}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=Yw(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(l,r,mh(this._hostTNode,a)),l}createComponent(e,t,i,r,o,a,l){let u=e&&!DV(e),f;if(u)f=t;else{let q=t||{};f=q.index,i=q.injector,r=q.projectableNodes,o=q.environmentInjector||q.ngModuleRef,a=q.directives,l=q.bindings}let m=u?e:new dc(Vo(e)),y=i||this.parentInjector;if(!o&&m.ngModule==null){let Q=(u?y:this.parentInjector).get(en,null);Q&&(o=Q)}let C=Vo(m.componentType??{}),I=Yw(this._lContainer,C?.id??null),N=I?.firstChild??null,G=m.create(y,r,N,o,a,l);return this.insertImpl(G.hostView,f,mh(this._hostTNode,I)),G}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(B1(r)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let u=r[yn],f=new mA(u,u[zi],u[yn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return km(a,r,o,i),e.attachToViewContainerRef(),H0(Dw(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=LD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=vh(this._lContainer,t);i&&(ih(Dw(this._lContainer),t),Pm(i[we],i))}detach(e){let t=this._adjustIndex(e,-1),i=vh(this._lContainer,t);return i&&ih(Dw(this._lContainer),t)!=null?new qs(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function LD(n){return n[ch]}function Dw(n){return n[ch]||(n[ch]=[])}function _A(n,e){let t,i=e[n.index];return hr(i)?t=i:(t=tA(i,e,null,n),e[n.index]=t,Pb(e,t)),xB(t,e,n,i),new mA(t,n,e)}function IB(n,e){let t=n[It],i=t.createComment(""),r=fr(e,n),o=t.parentNode(r);return um(t,o,i,t.nextSibling(r),!1),i}var xB=DB,SB=()=>!1;function TB(n,e,t){return SB(n,e,t)}function DB(n,e,t,i){if(n[zs])return;let r;t.type&8?r=Hi(i):r=IB(e,t),n[zs]=r}var eb=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},tb=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let a=t.getByIndex(o),l=this.queries[a.indexInDeclarationView];r.push(l.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Yb(e,t).matches!==null&&this.queries[t].setDirty()}},nb=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=LB(e):this.predicate=e}},ib=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},rb=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,MB(t,o)),this.matchTNodeWithReadOption(e,t,em(t,e,o,!1,!1))}else i===Gs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,em(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Hn||r===zo||r===Gs&&t.type&4)this.addMatch(t.index,-2);else{let o=em(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function MB(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function AB(n,e){return n.type&11?ru(n,e):n.type&4?Lm(n,e):null}function PB(n,e,t,i){return t===-1?AB(e,n):t===-2?OB(n,e,i):gh(n,n[we],t,e)}function OB(n,e,t){if(t===Hn)return ru(e,n);if(t===Gs)return Lm(e,n);if(t===zo)return _A(e,n)}function vA(n,e,t,i){let r=e[zr].queries[i];if(r.matches===null){let o=n.data,a=t.matches,l=[];for(let u=0;a!==null&&u<a.length;u+=2){let f=a[u];if(f<0)l.push(null);else{let m=o[f];l.push(PB(e,m,a[u+1],t.metadata.read))}}r.matches=l}return r.matches}function ob(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let a=vA(n,e,r,t);for(let l=0;l<o.length;l+=2){let u=o[l];if(u>0)i.push(a[l/2]);else{let f=o[l+1],m=e[-u];for(let y=qt;y<m.length;y++){let C=m[y];C[Us]===C[yn]&&ob(C[we],C,f,i)}if(m[rc]!==null){let y=m[rc];for(let C=0;C<y.length;C++){let I=y[C];ob(I[we],I,f,i)}}}}}return i}function RB(n,e){return n[zr].queries[e].queryList}function NB(n,e,t){let i=new cm((t&4)===4);return z1(n,e,i,i.destroy),(e[zr]??=new tb).queries.push(new eb(i))-1}function kB(n,e,t,i){let r=Gt();if(r.firstCreatePass){let o=ln();FB(r,new nb(e,t,i),o.index),VB(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return NB(r,Ne(),t)}function LB(n){return n.split(",").map(e=>e.trim())}function FB(n,e,t){n.queries===null&&(n.queries=new ib),n.queries.track(new rb(e,t))}function VB(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function Yb(n,e){return n.queries.getByIndex(e)}function BB(n,e){let t=n[we],i=Yb(t,e);return i.crossesNgTemplate?ob(t,n,e,[]):vA(t,n,i,e)}var hc=class{},Vm=class{};var _m=class extends hc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new gm(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=G0(e);this._bootstrapComponents=SM(o.bootstrap),this._r3Injector=yw(e,t,[{provide:hc,useValue:this},{provide:Th,useValue:this.componentFactoryResolver},...i],Lo(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},vm=class extends Vm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new _m(this.moduleType,e,[])}};var yh=class extends hc{injector;componentFactoryResolver=new gm(this);instance=null;constructor(e){super();let t=new Ja([...e.providers,{provide:hc,useValue:this},{provide:Th,useValue:this.componentFactoryResolver}],e.parent||oh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ou(n,e,t=null){return new yh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var jB=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=K0(!1,t.type),r=i.length>0?ou([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ce({token:n,providedIn:"environment",factory:()=>new n(De(en))})}return n})();function Dt(n){return iu(()=>{let e=yA(n),t=pe(K({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(jB).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||jo.Emulated,styles:n.styles||ii,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Qr("NgStandalone"),wA(t);let i=n.dependencies;return t.directiveDefs=FD(i,UB),t.pipeDefs=FD(i,A1),t.id=$B(t),t})}function UB(n){return Vo(n)||W0(n)}function Jr(n){return iu(()=>({type:n.type,bootstrap:n.bootstrap||ii,declarations:n.declarations||ii,imports:n.imports||ii,exports:n.exports||ii,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function zB(n,e){if(n==null)return Bs;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,a,l,u;Array.isArray(r)?(l=r[0],o=r[1],a=r[2]??o,u=r[3]||null):(o=r,a=r,l=Mm.None,u=null),t[o]=[i,l,u],e[o]=a}return t}function HB(n){if(n==null)return Bs;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function xt(n){return iu(()=>{let e=yA(n);return wA(e),e})}function su(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function yA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Bs,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ii,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:zB(n.inputs,e),outputs:HB(n.outputs),debugInfo:null}}function wA(n){n.features?.forEach(e=>e(n))}function FD(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let o=e(r);o!==null&&i.push(o)}return i}:null}function $B(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function qB(n){return Object.getPrototypeOf(n.prototype).constructor}function Mi(n){let e=qB(n.type),t=!0,i=[n];for(;e;){let r;if($r(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let a=n;a.inputs=Mw(n.inputs),a.declaredInputs=Mw(n.declaredInputs),a.outputs=Mw(n.outputs);let l=r.hostBindings;l&&YB(n,l);let u=r.viewQuery,f=r.contentQueries;if(u&&KB(n,u),f&&ZB(n,f),GB(n,r),b1(n.outputs,r.outputs),$r(r)&&r.data.animation){let m=n.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let l=o[a];l&&l.ngInherit&&l(n),l===Mi&&(t=!1)}}e=Object.getPrototypeOf(e)}WB(i)}function GB(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function WB(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=eu(r.hostAttrs,t=eu(t,r.hostAttrs))}}function Mw(n){return n===Bs?{}:n===ii?[]:n}function KB(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function ZB(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function YB(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function bA(n,e,t,i,r,o,a,l){if(t.firstCreatePass){n.mergedAttrs=eu(n.mergedAttrs,n.attrs);let m=n.tView=Mb(2,n,r,o,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),m.queries=t.queries.embeddedTView(n))}l&&(n.flags|=l),Yl(n,!1);let u=JB(t,e,n,i);Hg()&&Fb(t,e,u,n),tu(u,e);let f=tA(u,e,u,n);e[i+jt]=f,Pb(e,f),TB(f,n,e)}function QB(n,e,t,i,r,o,a,l,u,f,m){let y=t+jt,C;return e.firstCreatePass?(C=Sh(e,y,4,a||null,l||null),kg()&&cA(e,n,C,qi(e.consts,f),Bb),KD(e,C)):C=e.data[y],bA(C,n,e,t,i,r,o,u),Wl(C)&&Rm(e,n,C),f!=null&&xh(n,C,m),C}function ym(n,e,t,i,r,o,a,l,u,f,m){let y=t+jt,C;if(e.firstCreatePass){if(C=Sh(e,y,4,a||null,l||null),f!=null){let I=qi(e.consts,f);C.localNames=[];for(let N=0;N<I.length;N+=2)C.localNames.push(I[N],-1)}}else C=e.data[y];return bA(C,n,e,t,i,r,o,u),f!=null&&xh(n,C,m),C}function ie(n,e,t,i,r,o,a,l){let u=Ne(),f=Gt(),m=qi(f.consts,o);return QB(u,f,n,e,t,i,r,m,void 0,a,l),ie}var JB=XB;function XB(n,e,t,i){return dh(!0),e[It].createComment("")}var Qb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Jb=new ue("");function Ho(n){return!!n&&typeof n.then=="function"}function Bm(n){return!!n&&typeof n.subscribe=="function"}var Xb=new ue("");function jm(n){return ur([{provide:Xb,multi:!0,useValue:n}])}var eC=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=U(Xb,{optional:!0})??[];injector=U($t);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=cn(this.injector,r);if(Ho(o))t.push(o);else if(Bm(o)){let a=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});t.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dh=new ue("");function CA(){n0(()=>{let n="";throw new re(600,n)})}function EA(n){return n.isBoundToModule}var e5=10;var $o=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=U(ri);afterRenderManager=U(kb);zonelessEnabled=U(qg);rootEffectScheduler=U(Iw);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Qt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=U(Gr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(le(t=>!t))}constructor(){U(mc,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=U(en);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=$t.NULL){return this._injector.get(ft).run(()=>{vt(10);let a=t instanceof Fm;if(!this._injector.get(eC).done){let N="";throw new re(405,N)}let u;a?u=t:u=this._injector.get(Th).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let f=EA(u)?void 0:this._injector.get(hc),m=i||u.selector,y=u.create(r,[],m,f),C=y.location.nativeElement,I=y.injector.get(Jb,null);return I?.registerApplication(C),y.onDestroy(()=>{this.detachView(y.hostView),ph(this.components,y),I?.unregisterApplication(C)}),this._loadComponent(y),vt(11,y),y})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){vt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Am.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new re(101,!1);let t=Oe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Oe(t),this.afterTick.next(),vt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(uc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<e5;)vt(14),this.synchronizeOnce(),vt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!uh(r))continue;let o=i&&!this.zonelessEnabled?0:1;QM(r,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>uh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;ph(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(Dh,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ph(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new re(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ph(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function qo(n,e,t,i){let r=Ne(),o=sc();if(_r(r,o,e)){let a=Gt(),l=zg();S4(l,r,n,e,t,i)}return qo}var qne=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var sb=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let a=this.detach(i);this.attach(i,o),this.attach(r,a)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function Aw(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function t5(n,e,t){let i,r,o=0,a=n.length-1,l=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=a&&o<=u;){let f=n.at(o),m=e[o],y=Aw(o,f,o,m,t);if(y!==0){y<0&&n.updateValue(o,m),o++;continue}let C=n.at(a),I=e[u],N=Aw(a,C,u,I,t);if(N!==0){N<0&&n.updateValue(a,I),a--,u--;continue}let G=t(o,f),q=t(a,C),Q=t(o,m);if(Object.is(Q,q)){let he=t(u,I);Object.is(he,G)?(n.swap(o,a),n.updateValue(a,I),u--,a--):n.move(a,o),n.updateValue(o,m),o++;continue}if(i??=new wm,r??=BD(n,o,a,t),ab(n,i,o,Q))n.updateValue(o,m),o++,a++;else if(r.has(Q))i.set(G,n.detach(o)),a--;else{let he=n.create(o,e[o]);n.attach(o,he),o++,a++}}for(;o<=u;)VD(n,i,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),f=u.next();for(;!f.done&&o<=a;){let m=n.at(o),y=f.value,C=Aw(o,m,o,y,t);if(C!==0)C<0&&n.updateValue(o,y),o++,f=u.next();else{i??=new wm,r??=BD(n,o,a,t);let I=t(o,y);if(ab(n,i,o,I))n.updateValue(o,y),o++,a++,f=u.next();else if(!r.has(I))n.attach(o,n.create(o,y)),o++,a++,f=u.next();else{let N=t(o,m);i.set(N,n.detach(o)),a--}}}for(;!f.done;)VD(n,i,t,n.length,f.value),f=u.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(u=>{n.destroy(u)})}function ab(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function VD(n,e,t,i,r){if(ab(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function BD(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var wm=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function Xe(n,e,t,i,r,o,a,l){Qr("NgControlFlow");let u=Ne(),f=Gt(),m=qi(f.consts,o);return ym(u,f,n,e,t,i,r,m,256,a,l),Ws}function Ws(n,e,t,i,r,o,a,l){Qr("NgControlFlow");let u=Ne(),f=Gt(),m=qi(f.consts,o);return ym(u,f,n,e,t,i,r,m,512,a,l),Ws}function et(n,e){Qr("NgControlFlow");let t=Ne(),i=sc(),r=t[i]!==oi?t[i]:-1,o=r!==-1?bm(t,jt+r):void 0,a=0;if(_r(t,i,n)){let l=Oe(null);try{if(o!==void 0&&iA(o,a),n!==-1){let u=jt+n,f=bm(t,u),m=db(t[we],u),y=oA(f,m,t),C=Nm(t,m,e,{dehydratedView:y});km(f,C,a,mh(m,y))}}finally{Oe(l)}}else if(o!==void 0){let l=nA(o,a);l!==void 0&&(l[tn]=e)}}var cb=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-qt}};var lb=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function Um(n,e,t,i,r,o,a,l,u,f,m,y,C){Qr("NgControlFlow");let I=Ne(),N=Gt(),G=u!==void 0,q=Ne(),Q=l?a.bind(q[Si][tn]):a,he=new lb(G,Q);q[jt+n]=he,ym(I,N,n+1,e,t,i,r,qi(N.consts,o),256),G&&ym(I,N,n+2,u,f,m,y,qi(N.consts,C),512)}var ub=class extends sb{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-qt}at(e){return this.getLView(e)[tn].$implicit}attach(e,t){let i=t[$l];this.needsIndexUpdate||=e!==this.length,km(this.lContainer,t,e,mh(this.templateTNode,i)),n5(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,i5(this.lContainer,e),r5(this.lContainer,e)}create(e,t){let i=Yw(this.lContainer,this.templateTNode.tView.ssrId),r=Nm(this.hostLView,this.templateTNode,new cb(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){Pm(e[we],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[tn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[tn].$index=e}getLView(e){return o5(this.lContainer,e)}};function zm(n){let e=Oe(null),t=qr();try{let i=Ne(),r=i[we],o=i[t],a=t+1,l=bm(i,a);if(o.liveCollection===void 0){let f=db(r,a);o.liveCollection=new ub(l,i,f)}else o.liveCollection.reset();let u=o.liveCollection;if(t5(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let f=sc(),m=u.length===0;if(_r(i,f,m)){let y=t+2,C=bm(i,y);if(m){let I=db(r,y),N=oA(C,I,i),G=Nm(i,I,void 0,{dehydratedView:N});km(C,G,0,mh(I,N))}else r.firstUpdatePass&&Y4(C),iA(C,0)}}}finally{Oe(e)}}function bm(n,e){return n[e]}function n5(n,e){if(n.length<=qt)return;let t=qt+e,i=n[t],r=i?i[ic]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let o=i[Bo];t4(o,r),lc.delete(i),r.detachedLeaveAnimationFns=void 0}}function i5(n,e){if(n.length<=qt)return;let t=qt+e,i=n[t],r=i?i[ic]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function r5(n,e){return vh(n,e)}function o5(n,e){return nA(n,e)}function db(n,e){return lh(n,e)}function Z(n,e,t){let i=Ne(),r=sc();if(_r(i,r,e)){let o=Gt(),a=zg();qM(a,i,n,e,i[It],t)}return Z}function hb(n,e,t,i,r){zb(e,n,t,r?"class":"style",i)}function w(n,e,t,i){let r=Ne(),o=r[we],a=n+jt,l=o.firstCreatePass?Gb(a,r,2,e,Bb,kg(),t,i):o.data[a];if(jb(l,r,n,e,IA),Wl(l)){let u=r[we];Rm(u,r,l),Eb(u,l,r)}return i!=null&&xh(r,l),w}function b(){let n=Gt(),e=ln(),t=Ub(e);return n.firstCreatePass&&Wb(n,t),uw(t)&&dw(),lw(),t.classesWithoutHost!=null&&NV(t)&&hb(n,t,Ne(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&kV(t)&&hb(n,t,Ne(),t.stylesWithoutHost,!1),b}function de(n,e,t,i){return w(n,e,t,i),b(),de}function Xr(n,e,t,i){let r=Ne(),o=r[we],a=n+jt,l=o.firstCreatePass?uB(a,o,2,e,t,i):o.data[a];return jb(l,r,n,e,IA),i!=null&&xh(r,l),Xr}function eo(){let n=ln(),e=Ub(n);return uw(e)&&dw(),lw(),eo}function Hm(n,e,t,i){return Xr(n,e,t,i),eo(),Hm}var IA=(n,e,t,i,r)=>(dh(!0),DM(e[It],i,oD()));function qn(n,e,t){let i=Ne(),r=i[we],o=n+jt,a=r.firstCreatePass?Gb(o,i,8,"ng-container",Bb,kg(),e,t):r.data[o];if(jb(a,i,n,"ng-container",s5),Wl(a)){let l=i[we];Rm(l,i,a),Eb(l,a,i)}return t!=null&&xh(i,a),qn}function Gn(){let n=Gt(),e=ln(),t=Ub(e);return n.firstCreatePass&&Wb(n,t),Gn}var s5=(n,e,t,i,r)=>(dh(!0),j3(e[It],""));function Me(){return Ne()}var Yg=void 0;function a5(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var c5=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yg,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yg,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yg,"{1} 'at' {0}",Yg],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",a5],Pw={};function fi(n){let e=l5(n),t=jD(e);if(t)return t;let i=e.split("-")[0];if(t=jD(i),t)return t;if(i==="en")return c5;throw new re(701,!1)}function jD(n){return n in Pw||(Pw[n]=cr.ng&&cr.ng.common&&cr.ng.common.locales&&cr.ng.common.locales[n]),Pw[n]}var Wt=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Wt||{});function l5(n){return n.toLowerCase().replace(/_/g,"-")}var Mh="en-US";var u5=Mh;function xA(n){typeof n=="string"&&(u5=n.toLowerCase().replace(/_/g,"-"))}function ne(n,e,t){let i=Ne(),r=Gt(),o=ln();return SA(r,i,i[It],o,n,e,t),ne}function _c(n,e,t){let i=Ne(),r=Gt(),o=ln();return(o.type&3||t)&&fA(o,r,i,t,i[It],n,e,nm(o,i,e)),_c}function SA(n,e,t,i,r,o,a){let l=!0,u=null;if((i.type&3||a)&&(u??=nm(i,e,o),fA(i,n,e,a,t,r,o,u)&&(l=!1)),l){let f=i.outputs?.[r],m=i.hostDirectiveOutputs?.[r];if(m&&m.length)for(let y=0;y<m.length;y+=2){let C=m[y],I=m[y+1];u??=nm(i,e,o),ND(i,e,C,I,r,u)}if(f&&f.length)for(let y of f)u??=nm(i,e,o),ND(i,e,y,r,r,u)}}function F(n=1){return rD(n)}function tC(n,e,t,i){kB(n,e,t,i)}function nC(n){let e=Ne(),t=Gt(),i=mw();Bg(i+1);let r=Yb(t,i);if(n.dirty&&V1(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=BB(e,i);n.reset(o,KV),n.notifyOnChanges()}return!0}return!1}function iC(){return RB(Ne(),mw())}function Mt(n){let e=K1();return Og(e,jt+n)}function Qg(n,e){return n<<17|e<<2}function fc(n){return n>>17&32767}function d5(n){return(n&2)==2}function h5(n,e){return n&131071|e<<17}function fb(n){return n|2}function nu(n){return(n&131068)>>2}function Ow(n,e){return n&-131069|e<<2}function f5(n){return(n&1)===1}function pb(n){return n|1}function p5(n,e,t,i,r,o){let a=o?e.classBindings:e.styleBindings,l=fc(a),u=nu(a);n[i]=t;let f=!1,m;if(Array.isArray(t)){let y=t;m=y[1],(m===null||Hl(y,m)>0)&&(f=!0)}else m=t;if(r)if(u!==0){let C=fc(n[l+1]);n[i+1]=Qg(C,l),C!==0&&(n[C+1]=Ow(n[C+1],i)),n[l+1]=h5(n[l+1],i)}else n[i+1]=Qg(l,0),l!==0&&(n[l+1]=Ow(n[l+1],i)),l=i;else n[i+1]=Qg(u,0),l===0?l=i:n[u+1]=Ow(n[u+1],i),u=i;f&&(n[i+1]=fb(n[i+1])),UD(n,m,i,!0),UD(n,m,i,!1),g5(e,m,n,i,o),a=Qg(l,u),o?e.classBindings=a:e.styleBindings=a}function g5(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Hl(o,e)>=0&&(t[i+1]=pb(t[i+1]))}function UD(n,e,t,i){let r=n[t+1],o=e===null,a=i?fc(r):nu(r),l=!1;for(;a!==0&&(l===!1||o);){let u=n[a],f=n[a+1];m5(u,e)&&(l=!0,n[a+1]=i?pb(f):fb(f)),a=i?fc(f):nu(f)}l&&(n[t+1]=i?fb(r):pb(r))}function m5(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Hl(n,e)>=0:!1}var mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function _5(n){return n.substring(mr.key,mr.keyEnd)}function v5(n){return y5(n),TA(n,DA(n,0,mr.textEnd))}function TA(n,e){let t=mr.textEnd;return t===e?-1:(e=mr.keyEnd=w5(n,mr.key=e,t),DA(n,e,t))}function y5(n){mr.key=0,mr.keyEnd=0,mr.value=0,mr.valueEnd=0,mr.textEnd=n.length}function DA(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function w5(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function au(n,e,t){return MA(n,e,t,!1),au}function ct(n,e){return MA(n,e,null,!0),ct}function $m(n){C5(D5,b5,n,!0)}function b5(n,e){for(let t=v5(e);t>=0;t=TA(e,t))Mg(n,_5(e),!0)}function MA(n,e,t,i){let r=Ne(),o=Gt(),a=Fg(2);if(o.firstUpdatePass&&PA(o,n,a,i),e!==oi&&_r(r,a,e)){let l=o.data[qr()];OA(o,l,r,r[It],n,r[a+1]=A5(e,t),i,a)}}function C5(n,e,t,i){let r=Gt(),o=Fg(2);r.firstUpdatePass&&PA(r,null,o,i);let a=Ne();if(t!==oi&&_r(a,o,t)){let l=r.data[qr()];if(RA(l,i)&&!AA(r,o)){let u=i?l.classesWithoutHost:l.stylesWithoutHost;u!==null&&(t=xg(u,t||"")),hb(r,l,a,t,i)}else M5(r,l,a,a[It],a[o+1],a[o+1]=T5(n,e,t),i,o)}}function AA(n,e){return e>=n.expandoStartIndex}function PA(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[qr()],a=AA(n,t);RA(o,i)&&e===null&&!a&&(e=!1),e=E5(r,o,e,i),p5(r,o,e,t,a,i)}}function E5(n,e,t,i){let r=eD(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=Rw(null,n,e,t,i),t=wh(t,e.attrs,i),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==r)if(t=Rw(r,n,e,t,i),o===null){let u=I5(n,e,i);u!==void 0&&Array.isArray(u)&&(u=Rw(null,n,e,u[1],i),u=wh(u,e.attrs,i),x5(n,e,i,u))}else o=S5(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function I5(n,e,t){let i=t?e.classBindings:e.styleBindings;if(nu(i)!==0)return n[fc(i)]}function x5(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[fc(r)]=i}function S5(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let a=n[o].hostAttrs;i=wh(i,a,t)}return wh(i,e.attrs,t)}function Rw(n,e,t,i,r){let o=null,a=t.directiveEnd,l=t.directiveStylingLast;for(l===-1?l=t.directiveStart:l++;l<a&&(o=e[l],i=wh(i,o.hostAttrs,r),o!==n);)l++;return n!==null&&(t.directiveStylingLast=l),i}function wh(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?r=a:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Mg(n,a,t?!0:e[++o]))}return n===void 0?null:n}function T5(n,e,t){if(t==null||t==="")return ii;let i=[],r=gc(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function D5(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Mg(n,i,t)}function M5(n,e,t,i,r,o,a,l){r===oi&&(r=ii);let u=0,f=0,m=0<r.length?r[0]:null,y=0<o.length?o[0]:null;for(;m!==null||y!==null;){let C=u<r.length?r[u+1]:void 0,I=f<o.length?o[f+1]:void 0,N=null,G;m===y?(u+=2,f+=2,C!==I&&(N=y,G=I)):y===null||m!==null&&m<y?(u+=2,N=m):(f+=2,N=y,G=I),N!==null&&OA(n,e,t,i,N,G,a,l),m=u<r.length?r[u]:null,y=f<o.length?o[f]:null}}function OA(n,e,t,i,r,o,a,l){if(!(e.type&3))return;let u=n.data,f=u[l+1],m=f5(f)?zD(u,e,t,r,nu(f),a):void 0;if(!Cm(m)){Cm(o)||d5(f)&&(o=zD(u,null,t,r,l,a));let y=nw(qr(),t);m4(i,a,y,r,o)}}function zD(n,e,t,i,r,o){let a=e===null,l;for(;r>0;){let u=n[r],f=Array.isArray(u),m=f?u[1]:u,y=m===null,C=t[r+1];C===oi&&(C=y?ii:void 0);let I=y?Ag(C,i):m===i?C:void 0;if(f&&!Cm(I)&&(I=Ag(u,i)),Cm(I)&&(l=I,a))return l;let N=n[r+1];r=a?fc(N):nu(N)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(l=Ag(u,i))}return l}function Cm(n){return n!==void 0}function A5(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Lo(gc(n)))),n}function RA(n,e){return(n.flags&(e?8:16))!==0}function S(n,e=""){let t=Ne(),i=Gt(),r=n+jt,o=i.firstCreatePass?Sh(i,r,1,e,null):i.data[r],a=P5(i,t,o,e,n);t[r]=a,Hg()&&Fb(i,t,a,o),Yl(o,!1)}var P5=(n,e,t,i,r)=>(dh(!0),V3(e[It],i));function O5(n,e,t,i=""){return _r(n,sc(),t)?e+Vs(t)+i:oi}function R5(n,e,t,i,r,o=""){let a=Z1(),l=hA(n,a,t,r);return Fg(2),l?e+Vs(t)+i+Vs(r)+o:oi}function ge(n){return me("",n),ge}function me(n,e,t){let i=Ne(),r=O5(i,n,e,t);return r!==oi&&NA(i,qr(),r),me}function si(n,e,t,i,r){let o=Ne(),a=R5(o,n,e,t,i,r);return a!==oi&&NA(o,qr(),a),si}function NA(n,e,t){let i=nw(e,n);B3(n[It],i,t)}function rt(n,e,t){bw(e)&&(e=e());let i=Ne(),r=sc();if(_r(i,r,e)){let o=Gt(),a=zg();qM(a,i,n,e,i[It],t)}return rt}function lt(n,e){let t=bw(n);return t&&n.set(e),t}function ot(n,e){let t=Ne(),i=Gt(),r=ln();return SA(i,t,t[It],r,n,e),ot}function N5(n,e,t){let i=Gt();if(i.firstCreatePass){let r=$r(n);gb(t,i.data,i.blueprint,r,!0),gb(e,i.data,i.blueprint,r,!1)}}function gb(n,e,t,i,r){if(n=Vn(n),Array.isArray(n))for(let o=0;o<n.length;o++)gb(n[o],e,t,i,r);else{let o=Gt(),a=Ne(),l=ln(),u=Qa(n)?n:Vn(n.provide),f=Y0(n),m=l.providerIndexes&1048575,y=l.directiveStart,C=l.providerIndexes>>20;if(Qa(n)||!n.multi){let I=new cc(f,r,Ee,null),N=kw(u,e,r?m:m+C,y);N===-1?(Fw(am(l,a),o,u),Nw(o,n,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(I),a.push(I)):(t[N]=I,a[N]=I)}else{let I=kw(u,e,m+C,y),N=kw(u,e,m,m+C),G=I>=0&&t[I],q=N>=0&&t[N];if(r&&!q||!r&&!G){Fw(am(l,a),o,u);let Q=F5(r?L5:k5,t.length,r,i,f,n);!r&&q&&(t[N].providerFactory=Q),Nw(o,n,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(Q),a.push(Q)}else{let Q=kA(t[r?N:I],f,!r&&i);Nw(o,n,I>-1?I:N,Q)}!r&&i&&q&&t[N].componentProviders++}}}function Nw(n,e,t,i){let r=Qa(e),o=N1(e);if(r||o){let u=(o?Vn(e.useClass):e).prototype.ngOnDestroy;if(u){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let m=f.indexOf(t);m===-1?f.push(t,[i,u]):f[m+1].push(i,u)}else f.push(t,u)}}}function kA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function kw(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function k5(n,e,t,i,r){return mb(this.multi,[])}function L5(n,e,t,i,r){let o=this.multi,a;if(this.providerFactory){let l=this.providerFactory.componentProviders,u=gh(i,i[we],this.providerFactory.index,r);a=u.slice(0,l),mb(o,a);for(let f=l;f<u.length;f++)a.push(u[f])}else a=[],mb(o,a);return a}function mb(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function F5(n,e,t,i,r,o){let a=new cc(n,t,Ee,null);return a.multi=[],a.index=e,a.componentProviders=0,kA(a,r,i&&!t),a}function Go(n,e=[]){return t=>{t.providersResolver=(i,r)=>N5(i,r?r(n):n,e)}}function rC(n,e,t){let i=Lg()+n,r=Ne();return r[i]===oi?Zb(r,i,t?e.call(t):e()):dB(r,i)}function LA(n,e){let t=n[e];return t===oi?void 0:t}function V5(n,e,t,i,r,o){let a=e+t;return _r(n,a,r)?Zb(n,a+1,o?i.call(o,r):i(r)):LA(n,a+1)}function B5(n,e,t,i,r,o,a){let l=e+t;return hA(n,l,r,o)?Zb(n,l+2,a?i.call(a,r,o):i(r,o)):LA(n,l+2)}function _e(n,e){let t=Gt(),i,r=n+jt;t.firstCreatePass?(i=j5(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=ks(i.type,!0)),a,l=ni(Ee);try{let u=sm(!1),f=o();return sm(u),iw(t,Ne(),r,f),f}finally{ni(l)}}function j5(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function qe(n,e,t){let i=n+jt,r=Ne(),o=Og(r,i);return FA(r,i)?V5(r,Lg(),e,o.transform,t,o):o.transform(t)}function At(n,e,t,i){let r=n+jt,o=Ne(),a=Og(o,r);return FA(o,r)?B5(o,Lg(),e,a.transform,t,i,a):a.transform(t,i)}function FA(n,e){return n[we].data[e].pure}function rn(n,e){return Lm(n,e)}var Em=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},oC=(()=>{class n{compileModuleSync(t){return new vm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=G0(t),o=SM(r.declarations).reduce((a,l)=>{let u=Vo(l);return u&&a.push(new dc(u)),a},[]);return new Em(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var U5=(()=>{class n{zone=U(ft);changeDetectionScheduler=U(Fo);applicationRef=U($o);applicationErrorHandler=U(ri);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VA({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ft(pe(K({},BA()),{scheduleInRootZone:t})),[{provide:ft,useFactory:n},{provide:js,multi:!0,useFactory:()=>{let i=U(U5,{optional:!0});return()=>i.initialize()}},{provide:js,multi:!0,useFactory:()=>{let i=U(z5);return()=>{i.initialize()}}},e===!0?{provide:Cw,useValue:!0}:[],{provide:Ew,useValue:t??kM},{provide:ri,useFactory:()=>{let i=U(ft),r=U(en),o;return a=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw a}):(o??=r.get(ar),o.handleError(a))})}}}]}function BA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var z5=(()=>{class n{subscription=new Ht;initialized=!1;zone=U(ft);pendingTasks=U(Gr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ft.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ft.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jA=(()=>{class n{applicationErrorHandler=U(ri);appRef=U($o);taskService=U(Gr);ngZone=U(ft);zonelessEnabled=U(qg);tracing=U(mc,{optional:!0});disableScheduling=U(Cw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ht;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(dm):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(U(Ew,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof hm||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?ID:LM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(dm+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ID(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function H5(){return typeof $localize<"u"&&$localize.locale||Mh}var cu=new ue("",{providedIn:"root",factory:()=>U(cu,{optional:!0,skipSelf:!0})||H5()});function dn(n){return v1(n)}function lu(n,e){return qp(n,e?.equal)}var UA=class{[zn];constructor(e){this[zn]=e}destroy(){this[zn].destroy()}};var GA=Symbol("InputSignalNode#UNSET"),tj=pe(K({},Gp),{transformFn:void 0,applyValueToInputSignal(n,e){Dl(n,e)}});function WA(n,e){let t=Object.create(tj);t.value=n,t.transformFn=e?.transform;function i(){if(xl(t),t.value===GA){let r=null;throw new re(-950,r)}return t.value}return i[zn]=t,i}var Gm=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>bh(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},nj=new ue("");nj.__NG_ELEMENT_ID__=n=>{let e=ln();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new re(204,!1)};function zA(n,e){return WA(n,e)}function ij(n){return WA(GA,n)}var KA=(zA.required=ij,zA);var sC=new ue(""),rj=new ue("");function Ah(n){return!n.moduleRef}function oj(n){let e=Ah(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ft);return t.run(()=>{Ah(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(ri),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),Ah(n)){let o=()=>e.destroy(),a=n.platformInjector.get(sC);a.add(o),e.onDestroy(()=>{r.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(sC);a.add(o),n.moduleRef.onDestroy(()=>{ph(n.allPlatformModules,n.moduleRef),r.unsubscribe(),a.delete(o)})}return aj(i,t,()=>{let o=e.get(Gr),a=o.add(),l=e.get(eC);return l.runInitializers(),l.donePromise.then(()=>{let u=e.get(cu,Mh);if(xA(u||Mh),!e.get(rj,!0))return Ah(n)?e.get($o):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ah(n)){let m=e.get($o);return n.rootComponent!==void 0&&m.bootstrap(n.rootComponent),m}else return sj?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(a))})})}var sj;function aj(n,e,t){try{let i=t();return Ho(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var qm=null;function cj(n=[],e){return $t.create({name:e,providers:[{provide:rh,useValue:"platform"},{provide:sC,useValue:new Set([()=>qm=null])},...n]})}function lj(n=[]){if(qm)return qm;let e=cj(n);return qm=e,CA(),uj(e),e}function uj(n){let e=n.get(xm,null);cn(n,()=>{e?.forEach(t=>t())})}function dC(){return!1}var to=(()=>{class n{static __NG_ELEMENT_ID__=dj}return n})();function dj(n){return hj(ln(),Ne(),(n&16)===16)}function hj(n,e,t){if(Hs(n)&&!t){let i=$i(n.index,e);return new qs(i,i)}else if(n.type&175){let i=e[Si];return new qs(i,e)}return null}var aC=class{constructor(){}supports(e){return Kb(e)}create(e){return new cC(e)}},fj=(n,e)=>e,cC=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||fj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let a=!i||t&&t.currentIndex<HA(i,r,o)?t:i,l=HA(a,r,o),u=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(t=t._next,a.previousIndex==null)r++;else{o||(o=[]);let f=l-r,m=u-r;if(f!=m){for(let C=0;C<f;C++){let I=C<o.length?o[C]:o[C]=0,N=I+C;m<=N&&N<f&&(o[C]=I+1)}let y=a.previousIndex;o[y]=m-f}}l!==u&&e(a,l,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Kb(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,a;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)o=e[l],a=this._trackByFn(l,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,l),i=!0):(i&&(t=this._verifyReinsertion(t,o,a,l)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,uA(e,l=>{a=this._trackByFn(r,l),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,l,a,r),i=!0):(i&&(t=this._verifyReinsertion(t,l,a,r)),Object.is(t.item,l)||this._addIdentityChange(t,l)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new lC(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Wm),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Wm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},lC=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},uC=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Wm=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new uC,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function HA(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function $A(){return new hC([new aC])}var hC=(()=>{class n{factories;static \u0275prov=ce({token:n,providedIn:"root",factory:$A});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let i=U(n,{optional:!0,skipSelf:!0});return n.create(t,i||$A())}}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new re(901,!1)}}return n})();function ZA(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;vt(8);try{let o=r?.injector??lj(i),a=[VA({}),{provide:Fo,useExisting:jA},aD,...t||[]],l=new yh({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return oj({r3Injector:l.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{vt(9)}}function Ks(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function YA(n){let e=Vo(n);if(!e)return null;let t=new dc(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var XA=null;function Ki(){return XA}function fC(n){XA??=n}var Ph=class{},Oh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>U(eP),providedIn:"platform"})}return n})(),pC=new ue(""),eP=(()=>{class n extends Oh{_location;_history;_doc=U(un);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ki().getBaseHref(this._doc)}onPopState(t){let i=Ki().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=Ki().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Km(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function QA(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function yr(n){return n&&n[0]!=="?"?`?${n}`:n}var wr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>U(Ym),providedIn:"root"})}return n})(),Zm=new ue(""),Ym=(()=>{class n extends wr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??U(un).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Km(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+yr(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+yr(o));this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+yr(o));this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(De(Oh),De(Zm,8))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zs=(()=>{class n{_subject=new Qt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=mj(QA(JA(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+yr(i))}normalize(t){return n.stripTrailingSlash(gj(this._basePath,JA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yr(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yr(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=yr;static joinWithSlash=Km;static stripTrailingSlash=QA;static \u0275fac=function(i){return new(i||n)(De(wr))};static \u0275prov=ce({token:n,factory:()=>pj(),providedIn:"root"})}return n})();function pj(){return new Zs(De(wr))}function gj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function JA(n){return n.replace(/\/index.html$/,"")}function mj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var EC=(()=>{class n extends wr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=Km(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+yr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+yr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(De(Oh),De(Zm,8))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();var IC=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(IC||{});var Wn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Wn||{}),yt=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(yt||{}),pi=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(pi||{}),gi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function sP(n){return fi(n)[Wt.LocaleId]}function aP(n,e,t){let i=fi(n),r=[i[Wt.DayPeriodsFormat],i[Wt.DayPeriodsStandalone]],o=Zi(r,e);return Zi(o,t)}function cP(n,e,t){let i=fi(n),r=[i[Wt.DaysFormat],i[Wt.DaysStandalone]],o=Zi(r,e);return Zi(o,t)}function lP(n,e,t){let i=fi(n),r=[i[Wt.MonthsFormat],i[Wt.MonthsStandalone]],o=Zi(r,e);return Zi(o,t)}function uP(n,e){let i=fi(n)[Wt.Eras];return Zi(i,e)}function Rh(n,e){let t=fi(n);return Zi(t[Wt.DateFormat],e)}function Nh(n,e){let t=fi(n);return Zi(t[Wt.TimeFormat],e)}function kh(n,e){let i=fi(n)[Wt.DateTimeFormat];return Zi(i,e)}function no(n,e){let t=fi(n),i=t[Wt.NumberSymbols][e];if(typeof i>"u"){if(e===gi.CurrencyDecimal)return t[Wt.NumberSymbols][gi.Decimal];if(e===gi.CurrencyGroup)return t[Wt.NumberSymbols][gi.Group]}return i}function dP(n,e){return fi(n)[Wt.NumberFormats][e]}function hP(n){if(!n[Wt.ExtraData])throw new re(2303,!1)}function fP(n){let e=fi(n);return hP(e),(e[Wt.ExtraData][2]||[]).map(i=>typeof i=="string"?gC(i):[gC(i[0]),gC(i[1])])}function pP(n,e,t){let i=fi(n);hP(i);let r=[i[Wt.ExtraData][0],i[Wt.ExtraData][1]],o=Zi(r,e)||[];return Zi(o,t)||[]}function Zi(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new re(2304,!1)}function gC(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var _j=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Qm={},vj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function gP(n,e,t,i){let r=Tj(n);e=Wo(t,e)||e;let a=[],l;for(;e;)if(l=vj.exec(e),l){a=a.concat(l.slice(1));let m=a.pop();if(!m)break;e=m}else{a.push(e);break}let u=r.getTimezoneOffset();i&&(u=_P(i,u),r=Sj(r,i));let f="";return a.forEach(m=>{let y=Ij(m);f+=y?y(r,t,u):m==="''"?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function n_(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Wo(n,e){let t=sP(n);if(Qm[t]??={},Qm[t][e])return Qm[t][e];let i="";switch(e){case"shortDate":i=Rh(n,pi.Short);break;case"mediumDate":i=Rh(n,pi.Medium);break;case"longDate":i=Rh(n,pi.Long);break;case"fullDate":i=Rh(n,pi.Full);break;case"shortTime":i=Nh(n,pi.Short);break;case"mediumTime":i=Nh(n,pi.Medium);break;case"longTime":i=Nh(n,pi.Long);break;case"fullTime":i=Nh(n,pi.Full);break;case"short":let r=Wo(n,"shortTime"),o=Wo(n,"shortDate");i=Jm(kh(n,pi.Short),[r,o]);break;case"medium":let a=Wo(n,"mediumTime"),l=Wo(n,"mediumDate");i=Jm(kh(n,pi.Medium),[a,l]);break;case"long":let u=Wo(n,"longTime"),f=Wo(n,"longDate");i=Jm(kh(n,pi.Long),[u,f]);break;case"full":let m=Wo(n,"fullTime"),y=Wo(n,"fullDate");i=Jm(kh(n,pi.Full),[m,y]);break}return i&&(Qm[t][e]=i),i}function Jm(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function br(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let a=String(n);for(;a.length<e;)a="0"+a;return i&&(a=a.slice(a.length-e)),o+a}function yj(n,e){return br(n,3).substring(0,e)}function hn(n,e,t=0,i=!1,r=!1){return function(o,a){let l=wj(n,o);if((t>0||l>-t)&&(l+=t),n===3)l===0&&t===-12&&(l=12);else if(n===6)return yj(l,e);let u=no(a,gi.MinusSign);return br(l,e,u,i,r)}}function wj(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new re(2301,!1)}}function St(n,e,t=Wn.Format,i=!1){return function(r,o){return bj(r,o,n,e,t,i)}}function bj(n,e,t,i,r,o){switch(t){case 2:return lP(e,r,i)[n.getMonth()];case 1:return cP(e,r,i)[n.getDay()];case 0:let a=n.getHours(),l=n.getMinutes();if(o){let f=fP(e),m=pP(e,r,i),y=f.findIndex(C=>{if(Array.isArray(C)){let[I,N]=C,G=a>=I.hours&&l>=I.minutes,q=a<N.hours||a===N.hours&&l<N.minutes;if(I.hours<N.hours){if(G&&q)return!0}else if(G||q)return!0}else if(C.hours===a&&C.minutes===l)return!0;return!1});if(y!==-1)return m[y]}return aP(e,r,i)[a<12?0:1];case 3:return uP(e,i)[n.getFullYear()<=0?0:1];default:let u=t;throw new re(2302,!1)}}function Xm(n){return function(e,t,i){let r=-1*i,o=no(t,gi.MinusSign),a=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+br(a,2,o)+br(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+br(a,1,o);case 2:return"GMT"+(r>=0?"+":"")+br(a,2,o)+":"+br(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+br(a,2,o)+":"+br(Math.abs(r%60),2,o);default:throw new re(2310,!1)}}}var Cj=0,t_=4;function Ej(n){let e=n_(n,Cj,1).getDay();return n_(n,0,1+(e<=t_?t_:t_+7)-e)}function mP(n){let e=n.getDay(),t=e===0?-3:t_-e;return n_(n.getFullYear(),n.getMonth(),n.getDate()+t)}function mC(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,a=t.getDate();r=1+Math.floor((a+o)/7)}else{let o=mP(t),a=Ej(o.getFullYear()),l=o.getTime()-a.getTime();r=1+Math.round(l/6048e5)}return br(r,n,no(i,gi.MinusSign))}}function e_(n,e=!1){return function(t,i){let o=mP(t).getFullYear();return br(o,n,no(i,gi.MinusSign),e)}}var _C={};function Ij(n){if(_C[n])return _C[n];let e;switch(n){case"G":case"GG":case"GGG":e=St(3,yt.Abbreviated);break;case"GGGG":e=St(3,yt.Wide);break;case"GGGGG":e=St(3,yt.Narrow);break;case"y":e=hn(0,1,0,!1,!0);break;case"yy":e=hn(0,2,0,!0,!0);break;case"yyy":e=hn(0,3,0,!1,!0);break;case"yyyy":e=hn(0,4,0,!1,!0);break;case"Y":e=e_(1);break;case"YY":e=e_(2,!0);break;case"YYY":e=e_(3);break;case"YYYY":e=e_(4);break;case"M":case"L":e=hn(1,1,1);break;case"MM":case"LL":e=hn(1,2,1);break;case"MMM":e=St(2,yt.Abbreviated);break;case"MMMM":e=St(2,yt.Wide);break;case"MMMMM":e=St(2,yt.Narrow);break;case"LLL":e=St(2,yt.Abbreviated,Wn.Standalone);break;case"LLLL":e=St(2,yt.Wide,Wn.Standalone);break;case"LLLLL":e=St(2,yt.Narrow,Wn.Standalone);break;case"w":e=mC(1);break;case"ww":e=mC(2);break;case"W":e=mC(1,!0);break;case"d":e=hn(2,1);break;case"dd":e=hn(2,2);break;case"c":case"cc":e=hn(7,1);break;case"ccc":e=St(1,yt.Abbreviated,Wn.Standalone);break;case"cccc":e=St(1,yt.Wide,Wn.Standalone);break;case"ccccc":e=St(1,yt.Narrow,Wn.Standalone);break;case"cccccc":e=St(1,yt.Short,Wn.Standalone);break;case"E":case"EE":case"EEE":e=St(1,yt.Abbreviated);break;case"EEEE":e=St(1,yt.Wide);break;case"EEEEE":e=St(1,yt.Narrow);break;case"EEEEEE":e=St(1,yt.Short);break;case"a":case"aa":case"aaa":e=St(0,yt.Abbreviated);break;case"aaaa":e=St(0,yt.Wide);break;case"aaaaa":e=St(0,yt.Narrow);break;case"b":case"bb":case"bbb":e=St(0,yt.Abbreviated,Wn.Standalone,!0);break;case"bbbb":e=St(0,yt.Wide,Wn.Standalone,!0);break;case"bbbbb":e=St(0,yt.Narrow,Wn.Standalone,!0);break;case"B":case"BB":case"BBB":e=St(0,yt.Abbreviated,Wn.Format,!0);break;case"BBBB":e=St(0,yt.Wide,Wn.Format,!0);break;case"BBBBB":e=St(0,yt.Narrow,Wn.Format,!0);break;case"h":e=hn(3,1,-12);break;case"hh":e=hn(3,2,-12);break;case"H":e=hn(3,1);break;case"HH":e=hn(3,2);break;case"m":e=hn(4,1);break;case"mm":e=hn(4,2);break;case"s":e=hn(5,1);break;case"ss":e=hn(5,2);break;case"S":e=hn(6,1);break;case"SS":e=hn(6,2);break;case"SSS":e=hn(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Xm(0);break;case"ZZZZZ":e=Xm(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Xm(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Xm(2);break;default:return null}return _C[n]=e,e}function _P(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function xj(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Sj(n,e,t){let r=n.getTimezoneOffset(),o=_P(e,r);return xj(n,-1*(o-r))}function Tj(n){if(tP(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,a=1]=n.split("-").map(l=>+l);return n_(r,o-1,a)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(_j))return Dj(i)}let e=new Date(n);if(!tP(e))throw new re(2311,!1);return e}function Dj(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let a=Number(n[4]||0)-t,l=Number(n[5]||0)-i,u=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,a,l,u,f),e}function tP(n){return n instanceof Date&&!isNaN(n.valueOf())}var Mj=/^(\d+)?\.((\d+)(-(\d+))?)?$/,nP=22,i_=".",Lh="0",Aj=";",Pj=",",vC="#";function Oj(n,e,t,i,r,o,a=!1){let l="",u=!1;if(!isFinite(n))l=no(t,gi.Infinity);else{let f=kj(n);a&&(f=Nj(f));let m=e.minInt,y=e.minFrac,C=e.maxFrac;if(o){let he=o.match(Mj);if(he===null)throw new re(2306,!1);let ye=he[1],Qe=he[3],Yt=he[5];ye!=null&&(m=yC(ye)),Qe!=null&&(y=yC(Qe)),Yt!=null?C=yC(Yt):Qe!=null&&y>C&&(C=y)}Lj(f,y,C);let I=f.digits,N=f.integerLen,G=f.exponent,q=[];for(u=I.every(he=>!he);N<m;N++)I.unshift(0);for(;N<0;N++)I.unshift(0);N>0?q=I.splice(N,I.length):(q=I,I=[0]);let Q=[];for(I.length>=e.lgSize&&Q.unshift(I.splice(-e.lgSize,I.length).join(""));I.length>e.gSize;)Q.unshift(I.splice(-e.gSize,I.length).join(""));I.length&&Q.unshift(I.join("")),l=Q.join(no(t,i)),q.length&&(l+=no(t,r)+q.join("")),G&&(l+=no(t,gi.Exponential)+"+"+G)}return n<0&&!u?l=e.negPre+l+e.negSuf:l=e.posPre+l+e.posSuf,l}function vP(n,e,t){let i=dP(e,IC.Decimal),r=Rj(i,no(e,gi.MinusSign));return Oj(n,r,e,gi.Group,gi.Decimal,t)}function Rj(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(Aj),r=i[0],o=i[1],a=r.indexOf(i_)!==-1?r.split(i_):[r.substring(0,r.lastIndexOf(Lh)+1),r.substring(r.lastIndexOf(Lh)+1)],l=a[0],u=a[1]||"";t.posPre=l.substring(0,l.indexOf(vC));for(let m=0;m<u.length;m++){let y=u.charAt(m);y===Lh?t.minFrac=t.maxFrac=m+1:y===vC?t.maxFrac=m+1:t.posSuf+=y}let f=l.split(Pj);if(t.gSize=f[1]?f[1].length:0,t.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let m=r.length-t.posPre.length-t.posSuf.length,y=o.indexOf(vC);t.negPre=o.substring(0,y).replace(/'/g,""),t.negSuf=o.slice(y+m).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function Nj(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function kj(n){let e=Math.abs(n)+"",t=0,i,r,o,a,l;for((r=e.indexOf(i_))>-1&&(e=e.replace(i_,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===Lh;o++);if(o===(l=e.length))i=[0],r=1;else{for(l--;e.charAt(l)===Lh;)l--;for(r-=o,i=[],a=0;o<=l;o++,a++)i[a]=Number(e.charAt(o))}return r>nP&&(i=i.splice(0,nP-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function Lj(n,e,t){if(e>t)throw new re(2307,!1);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),a=o+n.integerLen,l=i[a];if(a>0){i.splice(Math.max(n.integerLen,a));for(let y=a;y<i.length;y++)i[y]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let y=1;y<a;y++)i[y]=0}if(l>=5)if(a-1<0){for(let y=0;y>a;y--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[a-1]++;for(;r<Math.max(0,o);r++)i.push(0);let u=o!==0,f=e+n.integerLen,m=i.reduceRight(function(y,C,I,N){return C=C+y,N[I]=C<10?C:C-10,u&&(N[I]===0&&I>=f?N.pop():u=!1),C>=10?1:0},0);m&&(i.unshift(m),n.integerLen++)}function yC(n){let e=parseInt(n);if(isNaN(e))throw new re(2305,!1);return e}var wC=/\s+/,iP=[],xC=(()=>{class n{_ngEl;_renderer;initialClasses=iP;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(wC):iP}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(wC):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(wC).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(Ee(Hn),Ee(Wi))};static \u0275dir=xt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var r_=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},mi=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,a)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new r_(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),rP(l,r)}});for(let r=0,o=i.length;r<o;r++){let l=i.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);rP(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(Ee(zo),Ee(Gs),Ee(hC))};static \u0275dir=xt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function rP(n,e){n.context.$implicit=e.item}var wn=(()=>{class n{_viewContainer;_context=new o_;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){oP(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){oP(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(Ee(zo),Ee(Gs))};static \u0275dir=xt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),o_=class{$implicit=null;ngIf=null};function oP(n,e){if(n&&!n.createEmbeddedView)throw new re(2020,!1)}function s_(n,e){return new re(2100,!1)}var bC=class{createSubscription(e,t,i){return dn(()=>e.subscribe({next:t,error:i}))}dispose(e){dn(()=>e.unsubscribe())}},CC=class{createSubscription(e,t,i){return e.then(r=>t?.(r),r=>i?.(r)),{unsubscribe:()=>{t=null,i=null}}}dispose(e){e.unsubscribe()}},Fj=new CC,Vj=new bC,bn=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=U(ri);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i),i=>this.applicationErrorHandler(i))}_selectStrategy(t){if(Ho(t))return Fj;if(Bm(t))return Vj;throw s_(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(Ee(to,16))};static \u0275pipe=su({name:"async",type:n,pure:!1})}return n})();var vc=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw s_(n,t);return t.toUpperCase()}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=su({name:"uppercase",type:n,pure:!0})}return n})(),Bj="mediumDate",yP=new ue(""),wP=new ue(""),Cr=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let a=i??this.defaultOptions?.dateFormat??Bj,l=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return gP(t,a,o||this.locale,l)}catch(a){throw s_(n,a.message)}}static \u0275fac=function(i){return new(i||n)(Ee(cu,16),Ee(yP,24),Ee(wP,24))};static \u0275pipe=su({name:"date",type:n,pure:!0})}return n})();var yc=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,i,r){if(!jj(t))return null;r||=this._locale;try{let o=Uj(t);return vP(o,r,i)}catch(o){throw s_(n,o.message)}}static \u0275fac=function(i){return new(i||n)(Ee(cu,16))};static \u0275pipe=su({name:"number",type:n,pure:!0})}return n})();function jj(n){return!(n==null||n===""||n!==n)}function Uj(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new re(2309,!1);return n}var Nt=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Jr({type:n});static \u0275inj=lr({})}return n})();function SC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var Fh=class{};var bP="browser";var CP=(()=>{class n{static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new TC(U(un),window)})}return n})(),TC=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(pe(K({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let i=zj(this.document,e);i&&(this.scrollToElement(i,t),i.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Fs(2400,!1))}}scrollToElement(e,t){let i=e.getBoundingClientRect(),r=i.left+this.window.pageXOffset,o=i.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(pe(K({},t),{left:r-a[0],top:o-a[1]}))}};function zj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}r=i.nextNode()}}return null}var Vh=class{_doc;constructor(e){this._doc=e}manager},a_=(()=>{class n extends Vh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(De(un))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),l_=new ue(""),OC=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(a=>{a.manager=this});let r=t.filter(a=>!(a instanceof a_));this._plugins=r.slice().reverse();let o=t.find(a=>a instanceof a_);o&&this._plugins.push(o)}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new re(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(De(l_),De(ft))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),DC="ng-app-id";function EP(n){for(let e of n)e.remove()}function IP(n,e){let t=e.createElement("style");return t.textContent=n,t}function Hj(n,e,t,i){let r=n.head?.querySelectorAll(`style[${DC}="${e}"],link[${DC}="${e}"]`);if(r)for(let o of r)o.removeAttribute(DC),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function AC(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var RC=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,Hj(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,IP);i?.forEach(r=>this.addUsage(r,this.external,AC))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(EP(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])EP(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,IP(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,AC(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(De(un),De(Im),De(Sm,8),De(pc))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),MC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},NC=/%COMP%/g;var SP="%COMP%",$j=`_nghost-${SP}`,qj=`_ngcontent-${SP}`,Gj=!0,Wj=new ue("",{providedIn:"root",factory:()=>Gj});function Kj(n){return qj.replace(NC,n)}function Zj(n){return $j.replace(NC,n)}function TP(n,e){return e.map(t=>t.replace(NC,n))}var kC=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,a,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new Bh(t,a,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof c_?r.applyToHost(t):r instanceof jh&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let a=this.doc,l=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,y=this.platformIsServer,C=this.tracingService;switch(i.encapsulation){case jo.Emulated:o=new c_(u,f,i,this.appId,m,a,l,y,C);break;case jo.ShadowDom:return new PC(u,f,t,i,a,l,this.nonce,y,C);default:o=new jh(u,f,i,m,a,l,y,C);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(De(OC),De(RC),De(Im),De(Wj),De(un),De(ft),De(Sm),De(mc,8))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),Bh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(MC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(xP(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(xP(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new re(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=MC[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=MC[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Kr.DashCase|Kr.Important)?e.style.setProperty(t,i,r&Kr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Kr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=Ki().getGlobalEventTarget(this.doc,e),!e))throw new re(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function xP(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var PC=class extends Bh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,a,l,u,f){super(e,o,a,u,f),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=r.styles;m=TP(r.id,m);for(let C of m){let I=document.createElement("style");l&&I.setAttribute("nonce",l),I.textContent=C,this.shadowRoot.appendChild(I)}let y=r.getExternalStyles?.();if(y)for(let C of y){let I=AC(C,o);l&&I.setAttribute("nonce",l),this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},jh=class extends Bh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,a,l,u,f){super(e,o,a,l,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let m=i.styles;this.styles=f?TP(f,m):m,this.styleUrls=i.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&lc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},c_=class extends jh{contentAttr;hostAttr;constructor(e,t,i,r,o,a,l,u,f){let m=r+"-"+i.id;super(e,t,i,o,a,l,u,f,m),this.contentAttr=Kj(m),this.hostAttr=Zj(m)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var u_=class n extends Ph{supportsDOMEvents=!0;static makeCurrent(){fC(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Yj();return t==null?null:Qj(t)}resetBaseElement(){Uh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return SC(document.cookie,e)}},Uh=null;function Yj(){return Uh=Uh||document.head.querySelector("base"),Uh?Uh.getAttribute("href"):null}function Qj(n){return new URL(n,document.baseURI).pathname}var Jj=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),DP=["alt","control","meta","shift"],Xj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},MP=(()=>{class n extends Vh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let a=n.parseEventName(i),l=n.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ki().onAndCancel(t,a.domEventName,l,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),DP.forEach(f=>{let m=i.indexOf(f);m>-1&&(i.splice(m,1),a+=f+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=r,u.fullKey=a,u}static matchEventFullKeyCode(t,i){let r=Xj[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),DP.forEach(a=>{if(a!==r){let l=eU[a];l(t)&&(o+=a+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(De(un))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();function LC(n,e,t){let i=K({rootComponent:n,platformRef:t?.platformRef},tU(e));return ZA(i)}function tU(n){return{appProviders:[...sU,...n?.providers??[]],platformProviders:oU}}function nU(){u_.makeCurrent()}function iU(){return new ar}function rU(){return yb(document),document}var oU=[{provide:pc,useValue:bP},{provide:xm,useValue:nU,multi:!0},{provide:un,useFactory:rU}];var sU=[{provide:rh,useValue:"root"},{provide:ar,useFactory:iU},{provide:l_,useClass:a_,multi:!0,deps:[un]},{provide:l_,useClass:MP,multi:!0,deps:[un]},kC,RC,OC,{provide:uc,useExisting:kC},{provide:Fh,useClass:Jj},[]];var AP=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(De(un))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Le="primary",ef=Symbol("RouteTitle"),UC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Cc(n){return new UC(n)}function VP(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],l=n[o];if(a[0]===":")r[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function cU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!io(n[t],e[t]))return!1;return!0}function io(n,e){let t=n?zC(n):void 0,i=e?zC(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!BP(n[r],e[r]))return!1;return!0}function zC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function BP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function jP(n){return n.length>0?n[n.length-1]:null}function Ko(n){return _0(n)?n:Ho(n)?_t(Promise.resolve(n)):ve(n)}var lU={exact:zP,subset:HP},UP={exact:uU,subset:dU,ignored:()=>!0};function PP(n,e,t){return lU[t.paths](n.root,e.root,t.matrixParams)&&UP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function uU(n,e){return io(n,e)}function zP(n,e,t){if(!wc(n.segments,e.segments)||!f_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!zP(n.children[i],e.children[i],t))return!1;return!0}function dU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>BP(n[t],e[t]))}function HP(n,e,t){return $P(n,e,e.segments,t)}function $P(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!wc(r,t)||e.hasChildren()||!f_(r,t,i))}else if(n.segments.length===t.length){if(!wc(n.segments,t)||!f_(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!HP(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!wc(n.segments,r)||!f_(n.segments,r,i)||!n.children[Le]?!1:$P(n.children[Le],e,o,i)}}function f_(n,e,t){return e.every((i,r)=>UP[t](n[r].parameters,i.parameters))}var oo=class{root;queryParams;fragment;_queryParamMap;constructor(e=new dt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Cc(this.queryParams),this._queryParamMap}toString(){return pU.serialize(this)}},dt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return p_(this)}},Ys=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Cc(this.parameters),this._parameterMap}toString(){return GP(this)}};function hU(n,e){return wc(n,e)&&n.every((t,i)=>io(t.parameters,e[i].parameters))}function wc(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function fU(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Le&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Le&&(t=t.concat(e(r,i)))}),t}var Ec=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>new Qs,providedIn:"root"})}return n})(),Qs=class{parse(e){let t=new $C(e);return new oo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${zh(e.root,!0)}`,i=_U(e.queryParams),r=typeof e.fragment=="string"?`#${gU(e.fragment)}`:"";return`${t}${i}${r}`}},pU=new Qs;function p_(n){return n.segments.map(e=>GP(e)).join("/")}function zh(n,e){if(!n.hasChildren())return p_(n);if(e){let t=n.children[Le]?zh(n.children[Le],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Le&&i.push(`${r}:${zh(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=fU(n,(i,r)=>r===Le?[zh(n.children[Le],!1)]:[`${r}:${zh(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Le]!=null?`${p_(n)}/${t[0]}`:`${p_(n)}/(${t.join("//")})`}}function qP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function d_(n){return qP(n).replace(/%3B/gi,";")}function gU(n){return encodeURI(n)}function HC(n){return qP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function g_(n){return decodeURIComponent(n)}function OP(n){return g_(n.replace(/\+/g,"%20"))}function GP(n){return`${HC(n.path)}${mU(n.parameters)}`}function mU(n){return Object.entries(n).map(([e,t])=>`;${HC(e)}=${HC(t)}`).join("")}function _U(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${d_(t)}=${d_(r)}`).join("&"):`${d_(t)}=${d_(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var vU=/^[^\/()?;#]+/;function FC(n){let e=n.match(vU);return e?e[0]:""}var yU=/^[^\/()?;=#]+/;function wU(n){let e=n.match(yU);return e?e[0]:""}var bU=/^[^=?&#]+/;function CU(n){let e=n.match(bU);return e?e[0]:""}var EU=/^[^&#]+/;function IU(n){let e=n.match(EU);return e?e[0]:""}var $C=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new dt([],{}):new dt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Le]=new dt(e,t)),i}parseSegment(){let e=FC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new Ys(g_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=wU(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=FC(this.remaining);r&&(i=r,this.capture(i))}e[g_(t)]=g_(i)}parseQueryParam(e){let t=CU(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=IU(this.remaining);a&&(i=a,this.capture(i))}let r=OP(t),o=OP(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=FC(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new re(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Le);let a=this.parseChildren();t[o??Le]=Object.keys(a).length===1&&a[Le]?a[Le]:new dt([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function WP(n){return n.segments.length>0?new dt([],{[Le]:n}):n}function KP(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=KP(r);if(i===Le&&o.segments.length===0&&o.hasChildren())for(let[a,l]of Object.entries(o.children))e[a]=l;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new dt(n.segments,e);return xU(t)}function xU(n){if(n.numberOfChildren===1&&n.children[Le]){let e=n.children[Le];return new dt(n.segments.concat(e.segments),e.children)}return n}function Js(n){return n instanceof oo}function ZP(n,e,t=null,i=null){let r=YP(n);return QP(r,e,t,i)}function YP(n){let e;function t(o){let a={};for(let u of o.children){let f=t(u);a[u.outlet]=f}let l=new dt(o.url,a);return o===n&&(e=l),l}let i=t(n.root),r=WP(i);return e??r}function QP(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return VC(r,r,r,t,i);let o=SU(e);if(o.toRoot())return VC(r,r,new dt([],{}),t,i);let a=TU(o,r,n),l=a.processChildren?$h(a.segmentGroup,a.index,o.commands):XP(a.segmentGroup,a.index,o.commands);return VC(r,a.segmentGroup,l,t,i)}function m_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Gh(n){return typeof n=="object"&&n!=null&&n.outlets}function VC(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let a;n===e?a=t:a=JP(n,e,t);let l=WP(KP(a));return new oo(l,o,r)}function JP(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=JP(o,e,t)}),new dt(n.segments,i)}var __=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&m_(i[0]))throw new re(4003,!1);let r=i.find(Gh);if(r&&r!==jP(i))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function SU(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new __(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([u,f])=>{l[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:l}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((l,u)=>{u==0&&l==="."||(u==0&&l===""?t=!0:l===".."?e++:l!=""&&r.push(l))}),r):[...r,o]},[]);return new __(t,e,i)}var hu=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function TU(n,e,t){if(n.isAbsolute)return new hu(e,!0,0);if(!t)return new hu(e,!1,NaN);if(t.parent===null)return new hu(t,!0,0);let i=m_(n.commands[0])?0:1,r=t.segments.length-1+i;return DU(t,r,n.numberOfDoubleDots)}function DU(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new re(4005,!1);r=i.segments.length}return new hu(i,!1,r-o)}function MU(n){return Gh(n[0])?n[0].outlets:{[Le]:n}}function XP(n,e,t){if(n??=new dt([],{}),n.segments.length===0&&n.hasChildren())return $h(n,e,t);let i=AU(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new dt(n.segments.slice(0,i.pathIndex),{});return o.children[Le]=new dt(n.segments.slice(i.pathIndex),n.children),$h(o,0,r)}else return i.match&&r.length===0?new dt(n.segments,{}):i.match&&!n.hasChildren()?qC(n,e,t):i.match?$h(n,0,r):qC(n,e,t)}function $h(n,e,t){if(t.length===0)return new dt(n.segments,{});{let i=MU(t),r={};if(Object.keys(i).some(o=>o!==Le)&&n.children[Le]&&n.numberOfChildren===1&&n.children[Le].segments.length===0){let o=$h(n.children[Le],e,t);return new dt(n.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=XP(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new dt(n.segments,r)}}function AU(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let a=n.segments[r],l=t[i];if(Gh(l))break;let u=`${l}`,f=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!NP(u,f,a))return o;i+=2}else{if(!NP(u,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function qC(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Gh(o)){let u=PU(o.outlets);return new dt(i,u)}if(r===0&&m_(t[0])){let u=n.segments[e];i.push(new Ys(u.path,RP(t[0]))),r++;continue}let a=Gh(o)?o.outlets[Le]:`${o}`,l=r<t.length-1?t[r+1]:null;a&&l&&m_(l)?(i.push(new Ys(a,RP(l))),r+=2):(i.push(new Ys(a,{})),r++)}return new dt(i,{})}function PU(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=qC(new dt([],{}),0,i))}),e}function RP(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function NP(n,e,t){return n==t.path&&io(e,t.parameters)}var fu="imperative",Cn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Cn||{}),Pi=class{id;url;constructor(e,t){this.id=e,this.url=t}},Xs=class extends Pi{type=Cn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Oi=class extends Pi{urlAfterRedirects;type=Cn.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ai=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ai||{}),gu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(gu||{}),ro=class extends Pi{reason;code;type=Cn.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},so=class extends Pi{reason;code;type=Cn.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},mu=class extends Pi{error;target;type=Cn.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wh=class extends Pi{urlAfterRedirects;state;type=Cn.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v_=class extends Pi{urlAfterRedirects;state;type=Cn.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},y_=class extends Pi{urlAfterRedirects;state;shouldActivate;type=Cn.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},w_=class extends Pi{urlAfterRedirects;state;type=Cn.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b_=class extends Pi{urlAfterRedirects;state;type=Cn.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},C_=class{route;type=Cn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},E_=class{route;type=Cn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},I_=class{snapshot;type=Cn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},x_=class{snapshot;type=Cn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},S_=class{snapshot;type=Cn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},T_=class{snapshot;type=Cn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_u=class{routerEvent;position;anchor;type=Cn.Scroll;constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Kh=class{},vu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function OU(n){return!(n instanceof Kh)&&!(n instanceof vu)}function RU(n,e){return n.providers&&!n._injector&&(n._injector=ou(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ir(n){return n.outlet||Le}function NU(n,e){let t=n.filter(i=>Ir(i)===e);return t.push(...n.filter(i=>Ir(i)!==e)),t}function bu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var D_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return bu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ic(this.rootInjector)}},Ic=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new D_(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(De(en))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),M_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=GC(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=GC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=WC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return WC(e,this._root).map(t=>t.value)}};function GC(n,e){if(n===e.value)return e;for(let t of e.children){let i=GC(n,t);if(i)return i}return null}function WC(n,e){if(n===e.value)return[e];for(let t of e.children){let i=WC(n,t);if(i.length)return i.unshift(e),i}return[]}var Ai=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function du(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Zh=class extends M_{snapshot;constructor(e,t){super(e),this.snapshot=t,tE(this,e)}toString(){return this.snapshot.toString()}};function eO(n){let e=kU(n),t=new Jt([new Ys("",{})]),i=new Jt({}),r=new Jt({}),o=new Jt({}),a=new Jt(""),l=new _i(t,i,o,a,r,Le,n,e.root);return l.snapshot=e.root,new Zh(new Ai(l,[]),e)}function kU(n){let e={},t={},i={},o=new bc([],e,i,"",t,Le,n,null,{});return new Yh("",new Ai(o,[]))}var _i=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,a,l,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(le(f=>f[ef]))??ve(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>Cc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>Cc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function A_(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:K(K({},e.params),n.params),data:K(K({},e.data),n.data),resolve:K(K(K(K({},n.data),e.data),r?.data),n._resolvedData)}:i={params:K({},n.params),data:K({},n.data),resolve:K(K({},n.data),n._resolvedData??{})},r&&nO(r)&&(i.resolve[ef]=r.title),i}var bc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ef]}constructor(e,t,i,r,o,a,l,u,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Cc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Cc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Yh=class extends M_{url;constructor(e,t){super(t),this.url=e,tE(this,t)}toString(){return tO(this._root)}};function tE(n,e){e.value._routerState=n,e.children.forEach(t=>tE(n,t))}function tO(n){let e=n.children.length>0?` { ${n.children.map(tO).join(", ")} } `:"";return`${n.value}${e}`}function BC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,io(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),io(e.params,t.params)||n.paramsSubject.next(t.params),cU(e.url,t.url)||n.urlSubject.next(t.url),io(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function KC(n,e){let t=io(n.params,e.params)&&hU(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||KC(n.parent,e.parent))}function nO(n){return typeof n.title=="string"||n.title===null}var iO=new ue(""),tf=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Le;activateEvents=new nn;deactivateEvents=new nn;attachEvents=new nn;detachEvents=new nn;routerOutletData=KA();parentContexts=U(Ic);location=U(zo);changeDetector=U(to);inputBinder=U(nf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=t;let r=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new ZC(t,l,r.injector,this.routerOutletData);this.activated=r.createComponent(a,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Zr]})}return n})(),ZC=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===_i?this.route:e===Ic?this.childContexts:e===iO?this.outletData:this.parent.get(e,t)}},nf=new ue(""),nE=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=Ka([i.queryParams,i.params,i.data]).pipe(Fn(([o,a,l],u)=>(l=K(K(K({},o),a),l),u===0?ve(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let a=YA(i.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),iE=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Dt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&de(0,"router-outlet")},dependencies:[tf],encapsulation:2})}return n})();function rE(n){let e=n.children&&n.children.map(rE),t=e?pe(K({},n),{children:e}):K({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Le&&(t.component=iE),t}function LU(n,e,t){let i=Qh(n,e._root,t?t._root:void 0);return new Zh(i,e)}function Qh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=FU(n,e,t);return new Ai(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(l=>Qh(n,l)),a}}let i=VU(e.value),r=e.children.map(o=>Qh(n,o));return new Ai(i,r)}}function FU(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Qh(n,i,r);return Qh(n,i)})}function VU(n){return new _i(new Jt(n.url),new Jt(n.params),new Jt(n.queryParams),new Jt(n.fragment),new Jt(n.data),n.outlet,n.component,n)}var yu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},rO="ngNavigationCancelingError";function P_(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Js(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=oO(!1,ai.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function oO(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[rO]=!0,t.cancellationCode=e,t}function BU(n){return sO(n)&&Js(n.url)}function sO(n){return!!n&&n[rO]}var jU=(n,e,t,i)=>le(r=>(new YC(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),YC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),BC(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=du(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=du(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=du(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=du(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new T_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new x_(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(BC(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),BC(l.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,i)}},O_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},pu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function UU(n,e,t){let i=n._root,r=e?e._root:null;return Hh(i,r,t,[i.value])}function zU(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Cu(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!k0(n)?n:e.get(n):i}function Hh(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=du(e);return n.children.forEach(a=>{HU(a,o[a.value.outlet],t,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,l])=>qh(l,t.getContext(a),r)),r}function HU(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=$U(a,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new O_(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Hh(n,e,l?l.children:null,i,r):Hh(n,e,t,i,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new pu(l.outlet.component,a))}else a&&qh(e,l,r),r.canActivateChecks.push(new O_(i)),o.component?Hh(n,null,l?l.children:null,i,r):Hh(n,null,t,i,r);return r}function $U(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!wc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!wc(n.url,e.url)||!io(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!KC(n,e)||!io(n.queryParams,e.queryParams);case"paramsChange":default:return!KC(n,e)}}function qh(n,e,t){let i=du(n),r=n.value;Object.entries(i).forEach(([o,a])=>{r.component?e?qh(a,e.children.getContext(o),t):qh(a,null,t):qh(a,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new pu(e.outlet.component,r)):t.canDeactivateChecks.push(new pu(null,r)):t.canDeactivateChecks.push(new pu(null,r))}function rf(n){return typeof n=="function"}function qU(n){return typeof n=="boolean"}function GU(n){return n&&rf(n.canLoad)}function WU(n){return n&&rf(n.canActivate)}function KU(n){return n&&rf(n.canActivateChild)}function ZU(n){return n&&rf(n.canDeactivate)}function YU(n){return n&&rf(n.canMatch)}function aO(n){return n instanceof sr||n?.name==="EmptyError"}var h_=Symbol("INITIAL_VALUE");function wu(){return Fn(n=>Ka(n.map(e=>e.pipe(ti(1),yg(h_)))).pipe(le(e=>{for(let t of e)if(t!==!0){if(t===h_)return h_;if(t===!1||QU(t))return t}return!0}),ei(e=>e!==h_),ti(1)))}function QU(n){return Js(n)||n instanceof yu}function JU(n,e){return Xt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?ve(pe(K({},t),{guardsResult:!0})):XU(a,i,r,n).pipe(Xt(l=>l&&qU(l)?e6(i,o,n,e):ve(l)),le(l=>pe(K({},t),{guardsResult:l})))})}function XU(n,e,t,i){return _t(n).pipe(Xt(r=>o6(r.component,r.route,t,e,i)),No(r=>r!==!0,!0))}function e6(n,e,t,i){return _t(e).pipe(Os(r=>jl(n6(r.route.parent,i),t6(r.route,i),r6(n,r.path,t),i6(n,r.route,t))),No(r=>r!==!0,!0))}function t6(n,e){return n!==null&&e&&e(new S_(n)),ve(!0)}function n6(n,e){return n!==null&&e&&e(new I_(n)),ve(!0)}function i6(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return ve(!0);let r=i.map(o=>Qd(()=>{let a=bu(e)??t,l=Cu(o,a),u=WU(l)?l.canActivate(e,n):cn(a,()=>l(e,n));return Ko(u).pipe(No())}));return ve(r).pipe(wu())}function r6(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>zU(a)).filter(a=>a!==null).map(a=>Qd(()=>{let l=a.guards.map(u=>{let f=bu(a.node)??t,m=Cu(u,f),y=KU(m)?m.canActivateChild(i,n):cn(f,()=>m(i,n));return Ko(y).pipe(No())});return ve(l).pipe(wu())}));return ve(o).pipe(wu())}function o6(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ve(!0);let a=o.map(l=>{let u=bu(e)??r,f=Cu(l,u),m=ZU(f)?f.canDeactivate(n,e,t,i):cn(u,()=>f(n,e,t,i));return Ko(m).pipe(No())});return ve(a).pipe(wu())}function s6(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return ve(!0);let o=r.map(a=>{let l=Cu(a,n),u=GU(l)?l.canLoad(e,t):cn(n,()=>l(e,t));return Ko(u)});return ve(o).pipe(wu(),cO(i))}function cO(n){return Qp(Mn(e=>{if(typeof e!="boolean")throw P_(n,e)}),le(e=>e===!0))}function a6(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return ve(!0);let o=r.map(a=>{let l=Cu(a,n),u=YU(l)?l.canMatch(e,t):cn(n,()=>l(e,t));return Ko(u)});return ve(o).pipe(wu(),cO(i))}var Jh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Xh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function uu(n){return Bl(new Jh(n))}function c6(n){return Bl(new re(4e3,!1))}function l6(n){return Bl(oO(!1,ai.GuardRejected))}var QC=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ve(i);if(r.numberOfChildren>1||!r.children[Le])return c6(`${e.redirectTo}`);r=r.children[Le]}}applyRedirectCommands(e,t,i,r,o){return u6(t,r,o).pipe(le(a=>{if(a instanceof oo)throw new Xh(a);let l=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,i);if(a[0]==="/")throw new Xh(l);return l}))}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new oo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);i[r]=t[l]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),a={};return Object.entries(t.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(e,u,i,r)}),new dt(o,a)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new re(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function u6(n,e,t){if(typeof n=="string")return ve(n);let i=n,{queryParams:r,fragment:o,routeConfig:a,url:l,outlet:u,params:f,data:m,title:y}=e;return Ko(cn(t,()=>i({params:f,data:m,queryParams:r,fragment:o,routeConfig:a,url:l,outlet:u,title:y})))}var JC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function d6(n,e,t,i,r){let o=lO(n,e,t);return o.matched?(i=RU(e,i),a6(i,e,t,r).pipe(le(a=>a===!0?o:K({},JC)))):ve(o)}function lO(n,e,t){if(e.path==="**")return h6(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?K({},JC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||VP)(t,n,e);if(!r)return K({},JC);let o={};Object.entries(r.posParams??{}).forEach(([l,u])=>{o[l]=u.path});let a=r.consumed.length>0?K(K({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function h6(n){return{matched:!0,parameters:n.length>0?jP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function kP(n,e,t,i){return t.length>0&&g6(n,t,i)?{segmentGroup:new dt(e,p6(i,new dt(t,n.children))),slicedSegments:[]}:t.length===0&&m6(n,t,i)?{segmentGroup:new dt(n.segments,f6(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new dt(n.segments,n.children),slicedSegments:t}}function f6(n,e,t,i){let r={};for(let o of t)if(N_(n,e,o)&&!i[Ir(o)]){let a=new dt([],{});r[Ir(o)]=a}return K(K({},i),r)}function p6(n,e){let t={};t[Le]=e;for(let i of n)if(i.path===""&&Ir(i)!==Le){let r=new dt([],{});t[Ir(i)]=r}return t}function g6(n,e,t){return t.some(i=>N_(n,e,i)&&Ir(i)!==Le)}function m6(n,e,t){return t.some(i=>N_(n,e,i))}function N_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function _6(n,e,t){return e.length===0&&!n.children[t]}var XC=class{};function v6(n,e,t,i,r,o,a="emptyOnly"){return new eE(n,e,t,i,r,a,o).recognize()}var y6=31,eE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,a,l){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new QC(this.urlSerializer,this.urlTree)}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=kP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(({children:t,rootSnapshot:i})=>{let r=new Ai(i,t),o=new Yh("",r),a=ZP(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new bc([],Object.freeze({}),Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Le,t).pipe(le(i=>({children:i,rootSnapshot:t})),Ro(i=>{if(i instanceof Xh)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Jh?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(le(a=>a instanceof Ai?[a]:[]))}processChildren(e,t,i,r){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return _t(o).pipe(Os(a=>{let l=i.children[a],u=NU(t,a);return this.processSegmentGroup(e,u,l,a,r)}),vg((a,l)=>(a.push(...l),a)),Rs(null),w0(),Xt(a=>{if(a===null)return uu(i);let l=uO(a);return w6(l),ve(l)}))}processSegment(e,t,i,r,o,a,l){return _t(t).pipe(Os(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,o,a,l).pipe(Ro(f=>{if(f instanceof Jh)return ve(null);throw f}))),No(u=>!!u),Ro(u=>{if(aO(u))return _6(i,r,o)?ve(new XC):uu(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,o,a,l,u){return Ir(i)!==a&&(a===Le||!N_(r,o,i))?uu(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,a,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,a,u):uu(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,a,l){let{matched:u,parameters:f,consumedSegments:m,positionalParamSegments:y,remainingSegments:C}=lO(t,r,o);if(!u)return uu(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>y6&&(this.allowRedirects=!1));let I=new bc(o,f,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,LP(r),Ir(r),r.component??r._loadedComponent??null,r,FP(r)),N=A_(I,l,this.paramsInheritanceStrategy);return I.params=Object.freeze(N.params),I.data=Object.freeze(N.data),this.applyRedirects.applyRedirectCommands(m,r.redirectTo,y,I,e).pipe(Fn(q=>this.applyRedirects.lineralizeSegments(r,q)),Xt(q=>this.processSegment(e,i,t,q.concat(C),a,!1,l)))}matchSegmentAgainstRoute(e,t,i,r,o,a){let l=d6(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),l.pipe(Fn(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Fn(({routes:f})=>{let m=i._loadedInjector??e,{parameters:y,consumedSegments:C,remainingSegments:I}=u,N=new bc(C,y,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,LP(i),Ir(i),i.component??i._loadedComponent??null,i,FP(i)),G=A_(N,a,this.paramsInheritanceStrategy);N.params=Object.freeze(G.params),N.data=Object.freeze(G.data);let{segmentGroup:q,slicedSegments:Q}=kP(t,C,I,f);if(Q.length===0&&q.hasChildren())return this.processChildren(m,f,q,N).pipe(le(ye=>new Ai(N,ye)));if(f.length===0&&Q.length===0)return ve(new Ai(N,[]));let he=Ir(i)===o;return this.processSegment(m,f,q,Q,he?Le:o,!0,N).pipe(le(ye=>new Ai(N,ye instanceof Ai?[ye]:[])))}))):uu(t)))}getChildConfig(e,t,i){return t.children?ve({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ve({routes:t._loadedRoutes,injector:t._loadedInjector}):s6(e,t,i,this.urlSerializer).pipe(Xt(r=>r?this.configLoader.loadChildren(e,t).pipe(Mn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):l6(t))):ve({routes:[],injector:e})}};function w6(n){n.sort((e,t)=>e.value.outlet===Le?-1:t.value.outlet===Le?1:e.value.outlet.localeCompare(t.value.outlet))}function b6(n){let e=n.value.routeConfig;return e&&e.path===""}function uO(n){let e=[],t=new Set;for(let i of n){if(!b6(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=uO(i.children);e.push(new Ai(i.value,r))}return e.filter(i=>!t.has(i))}function LP(n){return n.data||{}}function FP(n){return n.resolve||{}}function C6(n,e,t,i,r,o){return Xt(a=>v6(n,e,t,i,a.extractedUrl,r,o).pipe(le(({state:l,tree:u})=>pe(K({},a),{targetSnapshot:l,urlAfterRedirects:u}))))}function E6(n,e){return Xt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ve(t);let o=new Set(r.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let f of dO(u))a.add(f);let l=0;return _t(a).pipe(Os(u=>o.has(u)?I6(u,i,n,e):(u.data=A_(u,u.parent,n).resolve,ve(void 0))),Mn(()=>l++),Ul(1),Xt(u=>l===a.size?ve(t):di))})}function dO(n){let e=n.children.map(t=>dO(t)).flat();return[n,...e]}function I6(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!nO(r)&&(o[ef]=r.title),Qd(()=>(n.data=A_(n,n.parent,t).resolve,x6(o,n,e,i).pipe(le(a=>(n._resolvedData=a,n.data=K(K({},n.data),a),null)))))}function x6(n,e,t,i){let r=zC(n);if(r.length===0)return ve({});let o={};return _t(r).pipe(Xt(a=>S6(n[a],e,t,i).pipe(No(),Mn(l=>{if(l instanceof yu)throw P_(new Qs,l);o[a]=l}))),Ul(1),le(()=>o),Ro(a=>aO(a)?di:Bl(a)))}function S6(n,e,t,i){let r=bu(e)??i,o=Cu(n,r),a=o.resolve?o.resolve(e,t):cn(r,()=>o(e,t));return Ko(a)}function jC(n){return Fn(e=>{let t=n(e);return t?_t(t).pipe(le(()=>e)):ve(e)})}var oE=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Le);return i}getResolvedTitleForRoute(t){return t.data[ef]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>U(hO),providedIn:"root"})}return n})(),hO=(()=>{class n extends oE{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(De(AP))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ea=new ue("",{providedIn:"root",factory:()=>({})}),xc=new ue(""),k_=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=U(oC);loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return ve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Ko(cn(t,()=>i.loadComponent())).pipe(le(pO),Fn(gO),Mn(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),Jd(()=>{this.componentLoaders.delete(i)})),o=new Nl(r,()=>new Qt).pipe(Rl());return this.componentLoaders.set(i,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=fO(i,this.compiler,t,this.onLoadEndListener).pipe(Jd(()=>{this.childrenLoaders.delete(i)})),a=new Nl(o,()=>new Qt).pipe(Rl());return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fO(n,e,t,i){return Ko(cn(t,()=>n.loadChildren())).pipe(le(pO),Fn(gO),Xt(r=>r instanceof Vm||Array.isArray(r)?ve(r):_t(e.compileModuleAsync(r))),le(r=>{i&&i(n);let o,a,l=!1;return Array.isArray(r)?(a=r,l=!0):(o=r.create(t).injector,a=o.get(xc,[],{optional:!0,self:!0}).flat()),{routes:a.map(rE),injector:o}}))}function T6(n){return n&&typeof n=="object"&&"default"in n}function pO(n){return T6(n)?n.default:n}function gO(n){return ve(n)}var L_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>U(D6),providedIn:"root"})}return n})(),D6=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sE=new ue(""),aE=new ue("");function mO(n,e,t){let i=n.get(aE),r=n.get(un);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),l=r.startViewTransition(()=>(o(),M6(n)));l.ready.catch(f=>{});let{onViewTransitionCreated:u}=i;return u&&cn(n,()=>u({transition:l,from:e,to:t})),a}function M6(n){return new Promise(e=>{Ih({read:()=>setTimeout(e)},{injector:n})})}var cE=new ue(""),F_=(()=>{class n{currentNavigation=Gi(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Qt;transitionAbortWithErrorSubject=new Qt;configLoader=U(k_);environmentInjector=U(en);destroyRef=U(pr);urlSerializer=U(Ec);rootContexts=U(Ic);location=U(Zs);inputBindingEnabled=U(nf,{optional:!0})!==null;titleStrategy=U(oE);options=U(ea,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=U(L_);createViewTransition=U(sE,{optional:!0});navigationErrorHandler=U(cE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ve(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new C_(r)),i=r=>this.events.next(new E_(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;dn(()=>{this.transitions?.next(pe(K({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))})}setupNavigations(t){return this.transitions=new Jt(null),this.transitions.pipe(ei(i=>i!==null),Fn(i=>{let r=!1;return ve(i).pipe(Fn(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",ai.SupersededByNewNavigation),di;this.currentTransition=i,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?pe(K({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload")return this.events.next(new so(o.id,this.urlSerializer.serialize(o.rawUrl),"",gu.IgnoredSameUrlNavigation)),o.resolve(!1),di;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ve(o).pipe(Fn(u=>(this.events.next(new Xs(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?di:Promise.resolve(u))),C6(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Mn(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=u.urlAfterRedirects,m));let f=new Wh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:f,source:m,restoredState:y,extras:C}=o,I=new Xs(u,this.urlSerializer.serialize(f),m,y);this.events.next(I);let N=eO(this.rootComponentType).snapshot;return this.currentTransition=i=pe(K({},o),{targetSnapshot:N,urlAfterRedirects:f,extras:pe(K({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(G=>(G.finalUrl=f,G)),ve(i)}else return this.events.next(new so(o.id,this.urlSerializer.serialize(o.extractedUrl),"",gu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),di}),Mn(o=>{let a=new v_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),le(o=>(this.currentTransition=i=pe(K({},o),{guards:UU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),JU(this.environmentInjector,o=>this.events.next(o)),Mn(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw P_(this.urlSerializer,o.guardsResult);let a=new y_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ei(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",ai.GuardRejected),!1)),jC(o=>{if(o.guards.canActivateChecks.length!==0)return ve(o).pipe(Mn(a=>{let l=new w_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Fn(a=>{let l=!1;return ve(a).pipe(E6(this.paramsInheritanceStrategy,this.environmentInjector),Mn({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",ai.NoDataFromResolver)}}))}),Mn(a=>{let l=new b_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),jC(o=>{let a=l=>{let u=[];if(l.routeConfig?.loadComponent){let f=bu(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(f,l.routeConfig).pipe(Mn(m=>{l.component=m}),le(()=>{})))}for(let f of l.children)u.push(...a(f));return u};return Ka(a(o.targetSnapshot.root)).pipe(Rs(null),ti(1))}),jC(()=>this.afterPreactivation()),Fn(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return l?_t(l).pipe(le(()=>i)):ve(i)}),le(o=>{let a=LU(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=pe(K({},o),{targetRouterState:a}),this.currentNavigation.update(l=>(l.targetRouterState=a,l)),i}),Mn(()=>{this.events.next(new Kh)}),jU(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ti(1),wg(new Ie(o=>{let a=i.abortController.signal,l=()=>o.next();return a.addEventListener("abort",l),()=>a.removeEventListener("abort",l)}).pipe(ei(()=>!r&&!i.targetRouterState),Mn(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",ai.Aborted)}))),Mn({next:o=>{r=!0,this.lastSuccessfulNavigation=dn(this.currentNavigation),this.events.next(new Oi(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),wg(this.transitionAbortWithErrorSubject.pipe(Mn(o=>{throw o}))),Jd(()=>{r||this.cancelNavigationTransition(i,"",ai.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ro(o=>{if(this.destroyed)return i.resolve(!1),di;if(r=!0,sO(o))this.events.next(new ro(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),BU(o)?this.events.next(new vu(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new mu(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let l=cn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof yu){let{message:u,cancellationCode:f}=P_(this.urlSerializer,l);this.events.next(new ro(i.id,this.urlSerializer.serialize(i.extractedUrl),u,f)),this.events.next(new vu(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return di}))}))}cancelNavigationTransition(t,i,r){let o=new ro(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=dn(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function A6(n){return n!==fu}var _O=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>U(P6),providedIn:"root"})}return n})(),R_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},P6=(()=>{class n extends R_{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Yr(n)))(r||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vO=(()=>{class n{urlSerializer=U(Ec);options=U(ea,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=U(Zs);urlHandlingStrategy=U(L_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new oo;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,a=r??o;return a instanceof oo?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=eO(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>U(O6),providedIn:"root"})}return n})(),O6=(()=>{class n extends vO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Xs?this.updateStateMemento():t instanceof so?this.commitTransition(i):t instanceof Wh?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Kh?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof ro&&t.code!==ai.SupersededByNewNavigation&&t.code!==ai.Redirect?this.restoreHistory(i):t instanceof mu?this.restoreHistory(i,!0):t instanceof Oi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:a}=i;if(this.location.isCurrentPathEqualTo(t)||o){let l=this.browserPageId,u=K(K({},a),this.generateNgRouterState(r,l));this.location.replaceState(t,"",u)}else{let l=K(K({},a),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",l)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Yr(n)))(r||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function V_(n,e){n.events.pipe(ei(t=>t instanceof Oi||t instanceof ro||t instanceof mu||t instanceof so),le(t=>t instanceof Oi||t instanceof so?0:(t instanceof ro?t.code===ai.Redirect||t.code===ai.SupersededByNewNavigation:!1)?2:1),ei(t=>t!==2),ti(1)).subscribe(()=>{e()})}var R6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},N6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=U(Qb);stateManager=U(vO);options=U(ea,{optional:!0})||{};pendingTasks=U(Gr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=U(F_);urlSerializer=U(Ec);location=U(Zs);urlHandlingStrategy=U(L_);injector=U(en);_events=new Qt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=U(_O);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=U(xc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!U(nf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ht;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=dn(this.navigationTransitions.currentNavigation);if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ro&&i.code!==ai.Redirect&&i.code!==ai.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Oi)this.navigated=!0;else if(i instanceof vu){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=K({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||A6(r.source)},a);this.scheduleNavigation(l,fu,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}OU(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let u=K({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(t);this.scheduleNavigation(l,i,a,o).catch(u=>{this.disposed||this.injector.get(ri)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return dn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(rE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:u}=i,f=u?this.currentUrlTree.fragment:a,m=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":m=K(K({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let y;try{let C=r?r.snapshot:this.routerState.snapshot.root;y=YP(C)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),y=this.currentUrlTree.root}return QP(y,t,m,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Js(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,fu,null,i)}navigate(t,i={skipLocationChange:!1}){return k6(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Fs(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=K({},R6):i===!1?r=K({},N6):r=i,Js(t))return PP(this.currentUrlTree,t,r);let o=this.parseUrl(t);return PP(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let l,u,f;a?(l=a.resolve,u=a.reject,f=a.promise):f=new Promise((y,C)=>{l=y,u=C});let m=this.pendingTasks.add();return V_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function k6(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new re(4008,!1)}var Yi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Gi(null);get href(){return dn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Qt;applicationErrorHandler=U(ri);options=U(ea,{optional:!0});constructor(t,i,r,o,a,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=l,this.reactiveHref.set(U(new Gm("href"),{optional:!0}));let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,i=r=>r==="merge"||r==="preserve";t||=i(this.queryParamsHandling),t||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(r=>{r instanceof Oi&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Js(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(t!==0||i||r||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,u)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Js(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(Ee(wt),Ee(_i),bh("tabindex"),Ee(Wi),Ee(Hn),Ee(wr))};static \u0275dir=xt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&ne("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&qo("href",r.reactiveHref(),Sb)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ks],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ks],replaceUrl:[2,"replaceUrl","replaceUrl",Ks],routerLink:"routerLink"},features:[Zr]})}return n})(),uE=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new nn;constructor(t,i,r,o,a){this.router=t,this.element=i,this.renderer=r,this.cdr=o,this.link=a,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof Oi&&this.update()})}ngAfterContentInit(){ve(this.links.changes,ve(null)).pipe(Ps()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=_t(t).pipe(Ps()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){let i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let i=L6(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?t.isActive(o,i):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(i){return new(i||n)(Ee(wt),Ee(Hn),Ee(Wi),Ee(to),Ee(Yi,8))};static \u0275dir=xt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&tC(o,Yi,5),i&2){let a;nC(a=iC())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Zr]})}return n})();function L6(n){return!!n.paths}var of=class{};var yO=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,i,r,o){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ei(t=>t instanceof Oi),Os(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=ou(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(l,o.children??o._loadedRoutes))}return _t(r).pipe(Ps())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=ve(null);let o=r.pipe(Xt(a=>a===null?ve(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(t,i);return _t([o,a]).pipe(Ps())}else return o})}static \u0275fac=function(i){return new(i||n)(De(wt),De(en),De(of),De(k_))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wO=new ue(""),F6=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=fu;restoredId=0;store={};constructor(t,i,r,o,a={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Xs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Oi?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof so&&t.code===gu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof _u))return;let i={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],i):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,i):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>D(this,null,function*(){yield new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new _u(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){qb()};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();function dE(n,...e){return ur([{provide:xc,multi:!0,useValue:n},[],{provide:_i,useFactory:bO,deps:[wt]},{provide:Dh,multi:!0,useFactory:CO},e.map(t=>t.\u0275providers)])}function bO(n){return n.routerState.root}function sf(n,e){return{\u0275kind:n,\u0275providers:e}}function CO(){let n=U($t);return e=>{let t=n.get($o);if(e!==t.components[0])return;let i=n.get(wt),r=n.get(EO);n.get(hE)===1&&i.initialNavigation(),n.get(SO,null,{optional:!0})?.setUpPreloading(),n.get(wO,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var EO=new ue("",{factory:()=>new Qt}),hE=new ue("",{providedIn:"root",factory:()=>1});function IO(){let n=[{provide:bb,useValue:!0},{provide:hE,useValue:0},jm(()=>{let e=U($t);return e.get(pC,Promise.resolve()).then(()=>new Promise(i=>{let r=e.get(wt),o=e.get(EO);V_(r,()=>{i(!0)}),e.get(F_).afterPreactivation=()=>(i(!0),o.closed?ve(void 0):o),r.initialNavigation()}))})];return sf(2,n)}function xO(){let n=[jm(()=>{U(wt).setUpLocationChangeListener()}),{provide:hE,useValue:2}];return sf(3,n)}var SO=new ue("");function TO(n){return sf(0,[{provide:SO,useExisting:yO},{provide:of,useExisting:n}])}function DO(){return sf(8,[nE,{provide:nf,useExisting:nE}])}function MO(n){Qr("NgRouterViewTransitions");let e=[{provide:sE,useValue:mO},{provide:aE,useValue:K({skipNextTransition:!!n?.skipInitialTransition},n)}];return sf(9,e)}var AO=[Zs,{provide:Ec,useClass:Qs},wt,Ic,{provide:_i,useFactory:bO,deps:[wt]},k_,[]],Zo=(()=>{class n{constructor(){}static forRoot(t,i){return{ngModule:n,providers:[AO,[],{provide:xc,multi:!0,useValue:t},[],i?.errorHandler?{provide:cE,useValue:i.errorHandler}:[],{provide:ea,useValue:i||{}},i?.useHash?B6():j6(),V6(),i?.preloadingStrategy?TO(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?U6(i):[],i?.bindToComponentInputs?DO().\u0275providers:[],i?.enableViewTransitions?MO().\u0275providers:[],z6()]}}static forChild(t){return{ngModule:n,providers:[{provide:xc,multi:!0,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Jr({type:n});static \u0275inj=lr({})}return n})();function V6(){return{provide:wO,useFactory:()=>{let n=U(CP),e=U(ft),t=U(ea),i=U(F_),r=U(Ec);return t.scrollOffset&&n.setOffset(t.scrollOffset),new F6(r,i,n,e,t)}}}function B6(){return{provide:wr,useClass:EC}}function j6(){return{provide:wr,useClass:Ym}}function U6(n){return[n.initialNavigation==="disabled"?xO().\u0275providers:[],n.initialNavigation==="enabledBlocking"?IO().\u0275providers:[]]}var lE=new ue("");function z6(){return[{provide:lE,useFactory:CO},{provide:Dh,multi:!0,useExisting:lE}]}var PO=()=>{};var NO=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},H6=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=n[t++],a=n[t++],l=n[t++],u=((r&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},j_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let o=n[r],a=r+1<n.length,l=a?n[r+1]:0,u=r+2<n.length,f=u?n[r+2]:0,m=o>>2,y=(o&3)<<4|l>>4,C=(l&15)<<2|f>>6,I=f&63;u||(I=64,a||(C=64)),i.push(t[m],t[y],t[C],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(NO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):H6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let o=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;let f=r<n.length?t[n.charAt(r)]:64;++r;let y=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||l==null||f==null||y==null)throw new pE;let C=o<<2|l>>4;if(i.push(C),f!==64){let I=l<<4&240|f>>2;if(i.push(I),y!==64){let N=f<<6&192|y;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},pE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$6=function(n){let e=NO(n);return j_.encodeByteArray(e,!0)},cf=function(n){return $6(n).replace(/\./g,"")},U_=function(n){try{return j_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var q6=()=>mE().__FIREBASE_DEFAULTS__,G6=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},W6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&U_(n[1]);return e&&JSON.parse(e)},z_=()=>{try{return PO()||q6()||G6()||W6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_E=n=>{var e,t;return(t=(e=z_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},kO=n=>{let e=_E(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},vE=()=>{var n;return(n=z_())===null||n===void 0?void 0:n.config},yE=n=>{var e;return(e=z_())===null||e===void 0?void 0:e[`_${n}`]};var Sc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function ta(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function H_(n){return D(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function LO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[cf(JSON.stringify(t)),cf(JSON.stringify(a)),""].join(".")}var af={};function K6(){let n={prod:[],emulator:[]};for(let e of Object.keys(af))af[e]?n.emulator.push(e):n.prod.push(e);return n}function Z6(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var OO=!1;function $_(n,e){if(typeof window>"u"||typeof document>"u"||!ta(window.location.host)||af[n]===e||af[n]||OO)return;af[n]=e;function t(C){return`__firebase__banner__${C}`}let i="__firebase__banner",o=K6().prod.length>0;function a(){let C=document.getElementById(i);C&&C.remove()}function l(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function u(C,I){C.setAttribute("width","24"),C.setAttribute("id",I),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function f(){let C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{OO=!0,a()},C}function m(C,I){C.setAttribute("id",I),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function y(){let C=Z6(i),I=t("text"),N=document.getElementById(I)||document.createElement("span"),G=t("learnmore"),q=document.getElementById(G)||document.createElement("a"),Q=t("preprendIcon"),he=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){let ye=C.element;l(ye),m(q,G);let Qe=f();u(he,Q),ye.append(he,N,q,Qe),document.body.appendChild(ye)}o?(N.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function Y6(){var n;let e=(n=z_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UO(){let n=An();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function zO(){return!Y6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lf(){try{return typeof indexedDB=="object"}catch{return!1}}function HO(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Q6="FirebaseError",Ri=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Q6,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xr.prototype.create)}},xr=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?J6(o,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Ri(r,l,i)}};function J6(n,e){return n.replace(X6,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var X6=/\{\$([^}]+)}/g;function $O(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ao(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let o=n[r],a=e[r];if(RO(o)&&RO(a)){if(!ao(o,a))return!1}else if(o!==a)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function RO(n){return n!==null&&typeof n=="object"}function uf(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Eu(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Iu(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function qO(n,e){let t=new gE(n,e);return t.subscribe.bind(t)}var gE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");e8(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=fE),r.error===void 0&&(r.error=fE),r.complete===void 0&&(r.complete=fE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function e8(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fE(){}var Ade=14400*1e3;function zt(n){return n&&n._delegate?n._delegate:n}var ci=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Tc="[DEFAULT]";var wE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Sc;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n8(e))try{this.getOrInitializeService({instanceIdentifier:Tc})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return D(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Tc){return this.instances.has(e)}getOptions(e=Tc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[o,a]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);let a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:t8(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Tc){return this.component?this.component.multipleInstances?e:Tc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function t8(n){return n===Tc?void 0:n}function n8(n){return n.instantiationMode==="EAGER"}var q_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new wE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var i8=[],Ge=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ge||{}),r8={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},o8=Ge.INFO,s8={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},a8=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=s8[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},co=class{constructor(e){this.name=e,this._logLevel=o8,this._logHandler=a8,this._userLogHandler=null,i8.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}};var c8=(n,e)=>e.some(t=>n instanceof t),GO,WO;function l8(){return GO||(GO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u8(){return WO||(WO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var KO=new WeakMap,CE=new WeakMap,ZO=new WeakMap,bE=new WeakMap,IE=new WeakMap;function d8(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(lo(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&KO.set(t,n)}).catch(()=>{}),IE.set(e,n),e}function h8(n){if(CE.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});CE.set(n,e)}var EE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return CE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ZO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return lo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function YO(n){EE=n(EE)}function f8(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(G_(this),e,...t);return ZO.set(i,e.sort?e.sort():[e]),lo(i)}:u8().includes(n)?function(...e){return n.apply(G_(this),e),lo(KO.get(this))}:function(...e){return lo(n.apply(G_(this),e))}}function p8(n){return typeof n=="function"?f8(n):(n instanceof IDBTransaction&&h8(n),c8(n,l8())?new Proxy(n,EE):n)}function lo(n){if(n instanceof IDBRequest)return d8(n);if(bE.has(n))return bE.get(n);let e=p8(n);return e!==n&&(bE.set(n,e),IE.set(e,n)),e}var G_=n=>IE.get(n);function JO(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){let a=indexedDB.open(n,e),l=lo(a);return i&&a.addEventListener("upgradeneeded",u=>{i(lo(a.result),u.oldVersion,u.newVersion,lo(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var g8=["get","getKey","getAll","getAllKeys","count"],m8=["put","add","delete","clear"],xE=new Map;function QO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xE.get(e))return xE.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=m8.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||g8.includes(t)))return;let o=function(a,...l){return D(this,null,function*(){let u=this.transaction(a,r?"readwrite":"readonly"),f=u.store;return i&&(f=f.index(l.shift())),(yield Promise.all([f[t](...l),r&&u.done]))[0]})};return xE.set(e,o),o}YO(n=>pe(K({},n),{get:(e,t,i)=>QO(e,t)||n.get(e,t,i),has:(e,t)=>!!QO(e,t)||n.has(e,t)}));var TE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_8(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function _8(n){let e=n.getComponent();return e?.type==="VERSION"}var DE="@firebase/app",XO="0.13.2";var Yo=new co("@firebase/app"),v8="@firebase/app-compat",y8="@firebase/analytics-compat",w8="@firebase/analytics",b8="@firebase/app-check-compat",C8="@firebase/app-check",E8="@firebase/auth",I8="@firebase/auth-compat",x8="@firebase/database",S8="@firebase/data-connect",T8="@firebase/database-compat",D8="@firebase/functions",M8="@firebase/functions-compat",A8="@firebase/installations",P8="@firebase/installations-compat",O8="@firebase/messaging",R8="@firebase/messaging-compat",N8="@firebase/performance",k8="@firebase/performance-compat",L8="@firebase/remote-config",F8="@firebase/remote-config-compat",V8="@firebase/storage",B8="@firebase/storage-compat",j8="@firebase/firestore",U8="@firebase/ai",z8="@firebase/firestore-compat",H8="firebase",$8="11.10.0";var ME="[DEFAULT]",q8={[DE]:"fire-core",[v8]:"fire-core-compat",[w8]:"fire-analytics",[y8]:"fire-analytics-compat",[C8]:"fire-app-check",[b8]:"fire-app-check-compat",[E8]:"fire-auth",[I8]:"fire-auth-compat",[x8]:"fire-rtdb",[S8]:"fire-data-connect",[T8]:"fire-rtdb-compat",[D8]:"fire-fn",[M8]:"fire-fn-compat",[A8]:"fire-iid",[P8]:"fire-iid-compat",[O8]:"fire-fcm",[R8]:"fire-fcm-compat",[N8]:"fire-perf",[k8]:"fire-perf-compat",[L8]:"fire-rc",[F8]:"fire-rc-compat",[V8]:"fire-gcs",[B8]:"fire-gcs-compat",[j8]:"fire-fst",[z8]:"fire-fst-compat",[U8]:"fire-vertex","fire-js":"fire-js",[H8]:"fire-js-all"};var df=new Map,G8=new Map,AE=new Map;function eR(n,e){try{n.container.addComponent(e)}catch(t){Yo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Sr(n){let e=n.name;if(AE.has(e))return Yo.debug(`There were multiple attempts to register component ${e}.`),!1;AE.set(e,n);for(let t of df.values())eR(t,n);for(let t of G8.values())eR(t,n);return!0}function xu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vi(n){return n==null?!1:n.settings!==void 0}var W8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},na=new xr("app","Firebase",W8);var PE=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw na.create("app-deleted",{appName:this._name})}};var ia=$8;function NE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:ME,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw na.create("bad-app-name",{appName:String(r)});if(t||(t=vE()),!t)throw na.create("no-options");let o=df.get(r);if(o){if(ao(t,o.options)&&ao(i,o.config))return o;throw na.create("duplicate-app",{appName:r})}let a=new q_(r);for(let u of AE.values())a.addComponent(u);let l=new PE(t,i,a);return df.set(r,l),l}function Dc(n=ME){let e=df.get(n);if(!e&&n===ME&&vE())return NE();if(!e)throw na.create("no-app",{appName:n});return e}function W_(){return Array.from(df.values())}function Kt(n,e,t){var i;let r=(i=q8[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yo.warn(l.join(" "));return}Sr(new ci(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var K8="firebase-heartbeat-database",Z8=1,hf="firebase-heartbeat-store",SE=null;function rR(){return SE||(SE=JO(K8,Z8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(hf)}catch(t){console.warn(t)}}}}).catch(n=>{throw na.create("idb-open",{originalErrorMessage:n.message})})),SE}function Y8(n){return D(this,null,function*(){try{let t=(yield rR()).transaction(hf),i=yield t.objectStore(hf).get(oR(n));return yield t.done,i}catch(e){if(e instanceof Ri)Yo.warn(e.message);else{let t=na.create("idb-get",{originalErrorMessage:e?.message});Yo.warn(t.message)}}})}function tR(n,e){return D(this,null,function*(){try{let i=(yield rR()).transaction(hf,"readwrite");yield i.objectStore(hf).put(e,oR(n)),yield i.done}catch(t){if(t instanceof Ri)Yo.warn(t.message);else{let i=na.create("idb-set",{originalErrorMessage:t?.message});Yo.warn(i.message)}}})}function oR(n){return`${n.name}!${n.options.appId}`}var Q8=1024,J8=30,OE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new RE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return D(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=nR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>J8){let a=ez(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Yo.warn(i)}})}getHeartbeatsHeader(){return D(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=nR(),{heartbeatsToSend:i,unsentEntries:r}=X8(this._heartbeatsCache.heartbeats),o=cf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Yo.warn(t),""}})}};function nR(){return new Date().toISOString().substring(0,10)}function X8(n,e=Q8){let t=[],i=n.slice();for(let r of n){let o=t.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),iR(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),iR(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var RE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return D(this,null,function*(){return lf()?HO().then(()=>!0).catch(()=>!1):!1})}read(){return D(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Y8(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return D(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return tR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return D(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return tR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function iR(n){return cf(JSON.stringify({version:2,heartbeats:n})).length}function ez(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function tz(n){Sr(new ci("platform-logger",e=>new TE(e),"PRIVATE")),Sr(new ci("heartbeat",e=>new OE(e),"PRIVATE")),Kt(DE,XO,n),Kt(DE,XO,"esm2017"),Kt("fire-js","")}tz("");var nz="firebase",iz="11.10.0";Kt(nz,iz,"app");function sR(n){n===void 0&&(n=U($t));let e=n.get(Ql);return t=>new Ie(i=>{let r=e.add(),o=!1;function a(){o||(r(),o=!0)}let l=t.subscribe({next:u=>{i.next(u),a()},complete:()=>{i.complete(),a()},error:u=>{i.error(u),a()}});return l.add(()=>{i.unsubscribe(),a()}),l})}var ra=new Ns("ANGULARFIRE2_VERSION");function ff(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Tu=(n,e)=>{let t=e?[e]:W_(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},Su=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Su||{}),aR=dC()&&typeof Zone<"u"?Su.WARN:Su.SILENT;var K_=class{zone;delegate;constructor(e,t=g0){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,o=function(a){r?r.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(o,t,i)}},oa=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=U(ft);this.outsideAngular=t.runOutsideAngular(()=>new K_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new K_(typeof Zone>"u"?void 0:Zone.current,Vl))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cR=!1;function rz(n,e){!cR&&(aR>Su.SILENT||dC())&&(cR=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),aR>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function oz(n){let e=U(ft,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Mc(n){let e=U(ft,{optional:!0});return e?e.run(()=>n()):n()}var sz=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),cn(t,()=>Mc(()=>n.apply(void 0,i)))),on=(n,e,t)=>(t||=e?Su.WARN:Su.VERBOSE,function(){let i,r=arguments,o,a,l;try{o=U(oa),a=U(Ql),l=U(en)}catch{return rz(n,t),n.apply(this,r)}for(let f=0;f<arguments.length;f++)typeof r[f]=="function"&&(e&&(i||=Mc(()=>a.add())),r[f]=sz(r[f],i,l));let u=oz(()=>n.apply(this,r));return e?u instanceof Ie?u.pipe(Ms(o.outsideAngular),Ds(o.insideAngular),sR(l)):u instanceof Promise?Mc(()=>{let f=a.add();return new Promise((m,y)=>{u.then(C=>cn(l,()=>Mc(()=>m(C))),C=>cn(l,()=>Mc(()=>y(C)))).finally(f)})}):typeof u=="function"&&i?function(){return setTimeout(i,0),u.apply(this,arguments)}:Mc(()=>u):u instanceof Ie?u.pipe(Ms(o.outsideAngular),Ds(o.insideAngular)):Mc(()=>u)});var Qo=class{constructor(e){return e}},Ac=class{constructor(){return W_()}};function az(n){return n&&n.length===1?n[0]:new Qo(Dc())}var kE=new ue("angularfire2._apps"),cz={provide:Qo,useFactory:az,deps:[[new Di,kE]]},lz={provide:Ac,deps:[[new Di,kE]]};function uz(n){return(e,t)=>{let i=t.get(pc);Kt("angularfire",ra.full,"core"),Kt("angularfire",ra.full,"app"),Kt("angular",R0.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new Qo(r)}}function lR(n,...e){return ur([cz,lz,{provide:kE,useFactory:uz(n),multi:!0,deps:[ft,$t,oa,...e]}])}var uR=on(NE,!0);var dz=new Map,hz={activated:!1,tokenObservers:[]},fz={initialized:!1,enabled:!1};function Tr(n){return dz.get(n)||Object.assign({},hz)}function pR(){return fz}var pz="https://content-firebaseappcheck.googleapis.com/v1";var gz="exchangeDebugToken",dR={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Rhe=1440*60*1e3;var VE=class{constructor(e,t,i,r,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return D(this,null,function*(){this.stop();try{this.pending=new Sc,this.pending.promise.catch(t=>{}),yield mz(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Sc,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function mz(n){return new Promise(e=>{setTimeout(e,n)})}var _z={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},sa=new xr("appCheck","AppCheck",_z);function gR(n){if(!Tr(n).activated)throw sa.create("use-before-activation",{appName:n.name})}function mR(i,r){return D(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let I=yield a.getHeartbeatsHeader();I&&(o["X-Firebase-Client"]=I)}let l={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,l)}catch(I){throw sa.create("fetch-network-error",{originalErrorMessage:I?.message})}if(u.status!==200)throw sa.create("fetch-status-error",{httpStatus:u.status});let f;try{f=yield u.json()}catch(I){throw sa.create("fetch-parse-error",{originalErrorMessage:I?.message})}let m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw sa.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let y=Number(m[1])*1e3,C=Date.now();return{token:f.token,expireTimeMillis:C+y,issuedAtTimeMillis:C}})}function _R(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${pz}/projects/${t}/apps/${i}:${gz}?key=${r}`,body:{debug_token:e}}}var vz="firebase-app-check-database",yz=1,BE="firebase-app-check-store";var Z_=null;function wz(){return Z_||(Z_=new Promise((n,e)=>{try{let t=indexedDB.open(vz,yz);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(sa.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(BE,{keyPath:"compositeKey"})}}}catch(t){e(sa.create("storage-open",{originalErrorMessage:t?.message}))}}),Z_)}function bz(n,e){return Cz(Ez(n),e)}function Cz(n,e){return D(this,null,function*(){let i=(yield wz()).transaction(BE,"readwrite"),o=i.objectStore(BE).put({compositeKey:n,value:e});return new Promise((a,l)=>{o.onsuccess=u=>{a()},i.onerror=u=>{var f;l(sa.create("storage-set",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})})}function Ez(n){return`${n.options.appId}-${n.name}`}var pf=new co("@firebase/app-check");function LE(n,e){return lf()?bz(n,e).catch(t=>{pf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function vR(){return pR().enabled}function yR(){return D(this,null,function*(){let n=pR();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Iz={error:"UNKNOWN_ERROR"};function xz(n){return j_.encodeString(JSON.stringify(n),!1)}function jE(n,e=!1,t=!1){return D(this,null,function*(){let i=n.app;gR(i);let r=Tr(i),o=r.token,a;if(o&&!gf(o)&&(r.token=void 0,o=void 0),!o){let f=yield r.cachedTokenPromise;f&&(gf(f)?o=f:yield LE(i,void 0))}if(!e&&o&&gf(o))return{token:o.token};let l=!1;if(vR())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=mR(_R(i,yield yR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);let f=yield r.exchangeTokenPromise;return yield LE(i,f),r.token=f,{token:f.token}}catch(f){return f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?pf.warn(f.message):t&&pf.error(f),FE(f)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Tr(i).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?pf.warn(f.message):t&&pf.error(f),a=f}let u;return o?a?gf(o)?u={token:o.token,internalError:a}:u=FE(a):(u={token:o.token},r.token=o,yield LE(i,o)):u=FE(a),l&&Mz(i,u),u})}function Sz(n){return D(this,null,function*(){let e=n.app;gR(e);let{provider:t}=Tr(e);if(vR()){let i=yield yR(),{token:r}=yield mR(_R(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function Tz(n,e,t,i){let{app:r}=n,o=Tr(r),a={next:t,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&gf(o.token)){let l=o.token;Promise.resolve().then(()=>{t({token:l.token}),hR(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>hR(n))}function wR(n,e){let t=Tr(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function hR(n){let{app:e}=n,t=Tr(e),i=t.tokenRefresher;i||(i=Dz(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Dz(n){let{app:e}=n;return new VE(()=>D(null,null,function*(){let t=Tr(e),i;if(t.token?i=yield jE(n,!0):i=yield jE(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=Tr(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-300*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},dR.RETRIAL_MIN_WAIT,dR.RETRIAL_MAX_WAIT)}function Mz(n,e){let t=Tr(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function gf(n){return n.expireTimeMillis-Date.now()>0}function FE(n){return{token:xz(Iz),error:n}}var UE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Tr(this.app);for(let t of e)wR(this.app,t.next);return Promise.resolve()}};function Az(n,e){return new UE(n,e)}function Pz(n){return{getToken:e=>jE(n,e),getLimitedUseToken:()=>Sz(n),addTokenListener:e=>Tz(n,"INTERNAL",e),removeTokenListener:e=>wR(n.app,e)}}var Oz="@firebase/app-check",Rz="0.10.1";var Nz="app-check",fR="app-check-internal";function kz(){Sr(new ci(Nz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Az(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fR).initialize()})),Sr(new ci(fR,n=>{let e=n.getProvider("app-check").getImmediate();return Pz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Kt(Oz,Rz)}kz();var Lz="app-check";var Du=class{constructor(){return Tu(Lz)}};var Fz=["localhost","0.0.0.0","127.0.0.1"],Ghe=typeof window<"u"&&Fz.includes(window.location.hostname);function LR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var FR=LR,VR=new xr("auth","Firebase",LR());var tv=new co("@firebase/auth");function Vz(n,...e){tv.logLevel<=Ge.WARN&&tv.warn(`Auth (${ia}): ${n}`,...e)}function Q_(n,...e){tv.logLevel<=Ge.ERROR&&tv.error(`Auth (${ia}): ${n}`,...e)}function ho(n,...e){throw hI(n,...e)}function Pc(n,...e){return hI(n,...e)}function BR(n,e,t){let i=Object.assign(Object.assign({},FR()),{[e]:t});return new xr("auth","Firebase",i).create(e,{appName:n.name})}function es(n){return BR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hI(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return VR.create(n,...e)}function be(n,e,...t){if(!n)throw hI(e,...t)}function Jo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Q_(e),new Error(e)}function la(n,e){n||Jo(e)}function qE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Bz(){return bR()==="http:"||bR()==="https:"}function bR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function jz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bz()||BO()||"connection"in navigator)?navigator.onLine:!0}function Uz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Oc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,la(t>e,"Short delay should be less than long delay!"),this.isMobile=FO()||jO()}get(){return jz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function fI(n,e){la(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var nv=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var zz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Hz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$z=new Oc(3e4,6e4);function ts(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function fo(o,a,l,u){return D(this,arguments,function*(n,e,t,i,r={}){return jR(n,r,()=>D(null,null,function*(){let f={},m={};i&&(e==="GET"?m=i:f={body:JSON.stringify(i)});let y=uf(Object.assign({key:n.config.apiKey},m)).slice(1),C=yield n._getAdditionalHeaders();C["Content-Type"]="application/json",n.languageCode&&(C["X-Firebase-Locale"]=n.languageCode);let I=Object.assign({method:e,headers:C},f);return VO()||(I.referrerPolicy="no-referrer"),n.emulatorConfig&&ta(n.emulatorConfig.host)&&(I.credentials="include"),nv.fetch()(yield UR(n,n.config.apiHost,t,y),I)}))})}function jR(n,e,t){return D(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},zz),e);try{let r=new GE(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw Y_(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let l=o.ok?a.errorMessage:a.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Y_(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Y_(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw Y_(n,"user-disabled",a);let m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw BR(n,m,f);ho(n,m)}}catch(r){if(r instanceof Ri)throw r;ho(n,"network-request-failed",{message:String(r)})}})}function Ef(o,a,l,u){return D(this,arguments,function*(n,e,t,i,r={}){let f=yield fo(n,e,t,i,r);return"mfaPendingCredential"in f&&ho(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function UR(n,e,t,i){return D(this,null,function*(){let r=`${e}${t}?${i}`,o=n,a=o.config.emulator?fI(n.config,r):`${n.config.apiScheme}://${r}`;return Hz.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a})}function qz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var GE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Pc(this.auth,"network-request-failed")),$z.get())})}};function Y_(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Pc(n,e,i);return r.customData._tokenResponse=t,r}function CR(n){return n!==void 0&&n.enterprise!==void 0}var WE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Gz(n,e){return D(this,null,function*(){return fo(n,"GET","/v2/recaptchaConfig",ts(n,e))})}function Wz(n,e){return D(this,null,function*(){return fo(n,"POST","/v1/accounts:delete",e)})}function iv(n,e){return D(this,null,function*(){return fo(n,"POST","/v1/accounts:lookup",e)})}function _f(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function pI(n,e=!1){return D(this,null,function*(){let t=zt(n),i=yield t.getIdToken(e),r=gI(i);be(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,a=o?.sign_in_provider;return{claims:r,token:i,authTime:_f(zE(r.auth_time)),issuedAtTime:_f(zE(r.iat)),expirationTime:_f(zE(r.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function zE(n){return Number(n)*1e3}function gI(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Q_("JWT malformed, contained fewer than 3 sections"),null;try{let r=U_(t);return r?JSON.parse(r):(Q_("Failed to decode base64 JWT payload"),null)}catch(r){return Q_("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ER(n){let e=gI(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Mu(n,e,t=!1){return D(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Ri&&Kz(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function Kz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var KE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>D(this,null,function*(){yield this.iteration()}),t)}iteration(){return D(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var yf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_f(this.lastLoginAt),this.creationTime=_f(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rv(n){return D(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield Mu(n,iv(t,{idToken:i}));be(r?.users.length,t,"internal-error");let o=r.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?zR(o.providerUserInfo):[],l=Zz(n.providerData,a),u=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!l?.length,m=u?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new yf(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,y)})}function mI(n){return D(this,null,function*(){let e=zt(n);yield rv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Zz(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function zR(n){return n.map(e=>{var{providerId:t}=e,i=m0(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function Yz(n,e){return D(this,null,function*(){let t=yield jR(n,{},()=>D(null,null,function*(){let i=uf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,a=yield UR(n,r,"/v1/token",`key=${o}`),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:l,body:i};return n.emulatorConfig&&ta(n.emulatorConfig.host)&&(u.credentials="include"),nv.fetch()(a,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Qz(n,e){return D(this,null,function*(){return fo(n,"POST","/v2/accounts:revokeToken",ts(n,e))})}var vf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ER(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");let t=ER(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return D(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return D(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield Yz(e,t);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:o}=t,a=new n;return i&&(be(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(be(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(be(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Jo("not implemented")}};function aa(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ca=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=m0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new yf(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return D(this,null,function*(){let t=yield Mu(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return pI(this,e)}reload(){return mI(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return D(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield rv(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return D(this,null,function*(){if(vi(this.auth.app))return Promise.reject(es(this.auth));let e=yield this.getIdToken();return yield Mu(this,Wz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,a,l,u,f,m;let y=(i=t.displayName)!==null&&i!==void 0?i:void 0,C=(r=t.email)!==null&&r!==void 0?r:void 0,I=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,N=(a=t.photoURL)!==null&&a!==void 0?a:void 0,G=(l=t.tenantId)!==null&&l!==void 0?l:void 0,q=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,Q=(f=t.createdAt)!==null&&f!==void 0?f:void 0,he=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:ye,emailVerified:Qe,isAnonymous:Yt,providerData:st,stsTokenManager:k}=t;be(ye&&k,e,"internal-error");let M=vf.fromJSON(this.name,k);be(typeof ye=="string",e,"internal-error"),aa(y,e.name),aa(C,e.name),be(typeof Qe=="boolean",e,"internal-error"),be(typeof Yt=="boolean",e,"internal-error"),aa(I,e.name),aa(N,e.name),aa(G,e.name),aa(q,e.name),aa(Q,e.name),aa(he,e.name);let A=new n({uid:ye,auth:e,email:C,emailVerified:Qe,displayName:y,isAnonymous:Yt,photoURL:N,phoneNumber:I,tenantId:G,stsTokenManager:M,createdAt:Q,lastLoginAt:he});return st&&Array.isArray(st)&&(A.providerData=st.map(R=>Object.assign({},R))),q&&(A._redirectEventId=q),A}static _fromIdTokenResponse(e,t,i=!1){return D(this,null,function*(){let r=new vf;r.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield rv(o),o})}static _fromGetAccountInfoResponse(e,t,i){return D(this,null,function*(){let r=t.users[0];be(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?zR(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!o?.length,l=new vf;l.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new yf(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(u,f),u})}};var IR=new Map;function Xo(n){la(n instanceof Function,"Expected a class definition");let e=IR.get(n);return e?(la(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,IR.set(n,e),e)}var Jz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return D(this,null,function*(){return!0})}_set(t,i){return D(this,null,function*(){this.storage[t]=i})}_get(t){return D(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return D(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),ZE=Jz;function J_(n,e,t){return`firebase:${n}:${e}:${t}`}var ov=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=J_(this.userKey,r.apiKey,o),this.fullPersistenceKey=J_("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return D(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield iv(this.auth,{idToken:e}).catch(()=>{});return t?ca._fromGetAccountInfoResponse(this.auth,t,e):null}return ca._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return D(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return D(this,null,function*(){if(!t.length)return new n(Xo(ZE),e,i);let r=(yield Promise.all(t.map(f=>D(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=r[0]||Xo(ZE),a=J_(i,e.config.apiKey,e.name),l=null;for(let f of t)try{let m=yield f._get(a);if(m){let y;if(typeof m=="string"){let C=yield iv(e,{idToken:m}).catch(()=>{});if(!C)break;y=yield ca._fromGetAccountInfoResponse(e,C,m)}else y=ca._fromJSON(e,m);f!==o&&(l=y),o=f;break}}catch{}let u=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,i):(o=u[0],l&&(yield o._set(a,l.toJSON())),yield Promise.all(t.map(f=>D(null,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new n(o,e,i))})}};function xR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KR(e))return"Blackberry";if(ZR(e))return"Webos";if($R(e))return"Safari";if((e.includes("chrome/")||qR(e))&&!e.includes("edge/"))return"Chrome";if(WR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function HR(n=An()){return/firefox\//i.test(n)}function $R(n=An()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qR(n=An()){return/crios\//i.test(n)}function GR(n=An()){return/iemobile/i.test(n)}function WR(n=An()){return/android/i.test(n)}function KR(n=An()){return/blackberry/i.test(n)}function ZR(n=An()){return/webos/i.test(n)}function _I(n=An()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Xz(n=An()){var e;return _I(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eH(){return UO()&&document.documentMode===10}function YR(n=An()){return _I(n)||WR(n)||ZR(n)||KR(n)||/windows phone/i.test(n)||GR(n)}function QR(n,e=[]){let t;switch(n){case"Browser":t=xR(An());break;case"Worker":t=`${xR(An())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ia}/${i}`}var YE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=o=>new Promise((a,l)=>{try{let u=e(o);a(u)}catch(u){l(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return D(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function tH(t){return D(this,arguments,function*(n,e={}){return fo(n,"GET","/v2/passwordPolicy",ts(n,e))})}var nH=6,QE=class{constructor(e){var t,i,r,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:nH,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,a,l;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var JE=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sv(this),this.idTokenSubscription=new sv(this),this.beforeStateQueue=new YE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xo(t)),this._initializationPromise=this.queue(()=>D(this,null,function*(){var i,r,o;if(!this._deleted&&(this.persistenceManager=yield ov.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return D(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return D(this,null,function*(){try{let t=yield iv(this,{idToken:e}),i=yield ca._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return D(this,null,function*(){var t;if(vi(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return D(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return D(this,null,function*(){try{yield rv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Uz()}_delete(){return D(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return D(this,null,function*(){if(vi(this.app))return Promise.reject(es(this));let t=e?zt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return D(this,null,function*(){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>D(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return D(this,null,function*(){return vi(this.app)?Promise.reject(es(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return vi(this.app)?Promise.reject(es(this)):this.queue(()=>D(this,null,function*(){yield this.assertedPersistence.setPersistence(Xo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return D(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return D(this,null,function*(){let e=yield tH(this),t=new QE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xr("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return D(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield Qz(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return D(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return D(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Xo(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=yield ov.create(this,[Xo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return D(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>D(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return D(this,null,function*(){if(e===this.currentUser)return this.queue(()=>D(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{a=!0,u()}}else{let u=e.addObserver(t);return()=>{a=!0,u()}}}directlySetCurrentUser(e){return D(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return D(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return D(this,null,function*(){var e;if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Vz(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Nc(n){return zt(n)}var sv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qO(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var fv={loadJS(){return D(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iH(n){fv=n}function JR(n){return fv.loadJS(n)}function rH(){return fv.recaptchaEnterpriseScript}function oH(){return fv.gapiScript}function XR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var XE=class{constructor(){this.enterprise=new eI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},eI=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var sH="recaptcha-enterprise",eN="NO_RECAPTCHA",tI=class{constructor(e){this.type=sH,this.auth=Nc(e)}verify(e="verify",t=!1){return D(this,null,function*(){function i(o){return D(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,l)=>D(null,null,function*(){Gz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{let f=new WE(u);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(u=>{l(u)})}))})}function r(o,a,l){let u=window.grecaptcha;CR(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(eN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XE().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{i(this.auth).then(l=>{if(!t&&CR(window.grecaptcha))r(l,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=rH();u.length!==0&&(u+=l),JR(u).then(()=>{r(l,o,a)}).catch(f=>{a(f)})}}).catch(l=>{a(l)})})})}};function mf(n,e,t,i=!1,r=!1){return D(this,null,function*(){let o=new tI(n),a;if(r)a=eN;else try{a=yield o.verify(t)}catch{a=yield o.verify(t,!0)}let l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){let u=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){let u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l})}function nI(n,e,t,i,r){return D(this,null,function*(){var o,a;if(r==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let l=yield mf(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(l=>D(null,null,function*(){if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield mf(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(l)}));else if(r==="PHONE_PROVIDER")if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("PHONE_PROVIDER")){let l=yield mf(n,e,t);return i(n,l).catch(u=>D(null,null,function*(){var f;if(((f=n._getRecaptchaConfig())===null||f===void 0?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let m=yield mf(n,e,t,!1,!0);return i(n,m)}return Promise.reject(u)}))}else{let l=yield mf(n,e,t,!1,!0);return i(n,l)}else return Promise.reject(r+" provider is not supported.")})}function vI(n,e){let t=xu(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),o=t.getOptions();if(ao(o,e??{}))return r;ho(r,"already-initialized")}return t.initialize({options:e})}function aH(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Xo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function yI(n,e,t){let i=Nc(n);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,o=tN(e),{host:a,port:l}=cH(e),u=l===null?"":`:${l}`,f={url:`${o}//${a}${u}/`},m=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(ao(f,i.config.emulator)&&ao(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,ta(a)?(H_(`${o}//${a}${u}`),$_("Auth",!0)):r||lH()}function tN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cH(n){let e=tN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let o=r[1];return{host:o,port:SR(i.substr(o.length+1))}}else{let[o,a]=i.split(":");return{host:o,port:SR(a)}}}function SR(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function lH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var wf=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jo("not implemented")}_getIdTokenResponse(e){return Jo("not implemented")}_linkToIdToken(e,t){return Jo("not implemented")}_getReauthenticationResolver(e){return Jo("not implemented")}};function uH(n,e){return D(this,null,function*(){return fo(n,"POST","/v1/accounts:signUp",e)})}function dH(n,e){return D(this,null,function*(){return Ef(n,"POST","/v1/accounts:signInWithPassword",ts(n,e))})}function hH(n,e){return D(this,null,function*(){return fo(n,"POST","/v1/accounts:sendOobCode",ts(n,e))})}function fH(n,e){return D(this,null,function*(){return hH(n,e)})}function pH(n,e){return D(this,null,function*(){return Ef(n,"POST","/v1/accounts:signInWithEmailLink",ts(n,e))})}function gH(n,e){return D(this,null,function*(){return Ef(n,"POST","/v1/accounts:signInWithEmailLink",ts(n,e))})}var bf=class n extends wf{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return D(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nI(e,t,"signInWithPassword",dH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return pH(e,{email:this._email,oobCode:this._password});default:ho(e,"internal-error")}})}_linkToIdToken(e,t){return D(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nI(e,i,"signUpPassword",uH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return gH(e,{idToken:t,email:this._email,oobCode:this._password});default:ho(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function HE(n,e){return D(this,null,function*(){return Ef(n,"POST","/v1/accounts:signInWithIdp",ts(n,e))})}function mH(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _H(n){let e=Eu(Iu(n)).link,t=e?Eu(Iu(e)).deep_link_id:null,i=Eu(Iu(n)).deep_link_id;return(i?Eu(Iu(i)).link:null)||i||t||e||n}var av=class n{constructor(e){var t,i,r,o,a,l;let u=Eu(Iu(e)),f=(t=u.apiKey)!==null&&t!==void 0?t:null,m=(i=u.oobCode)!==null&&i!==void 0?i:null,y=mH((r=u.mode)!==null&&r!==void 0?r:null);be(f&&m&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=m,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=u.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){let t=_H(e);try{return new n(t)}catch{return null}}};var nN=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return bf._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=av.parseLink(i);return be(r,"argument-error"),bf._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),cv=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var iI=class extends cv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function vH(n,e){return D(this,null,function*(){return Ef(n,"POST","/v1/accounts:signUp",ts(n,e))})}var Au=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return D(this,null,function*(){let o=yield ca._fromIdTokenResponse(e,i,r),a=TR(i);return new n({user:o,providerId:a,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return D(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=TR(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function TR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var rI=class n extends Ri{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function iN(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?rI._fromErrorAndOperation(n,o,e,i):o})}function yH(n,e,t=!1){return D(this,null,function*(){let i=yield Mu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Au._forOperation(n,"link",i)})}function wH(n,e,t=!1){return D(this,null,function*(){let{auth:i}=n;if(vi(i.app))return Promise.reject(es(i));let r="reauthenticate";try{let o=yield Mu(n,iN(i,r,e,n),t);be(o.idToken,i,"internal-error");let a=gI(o.idToken);be(a,i,"internal-error");let{sub:l}=a;return be(n.uid===l,i,"user-mismatch"),Au._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&ho(i,"user-mismatch"),o}})}function rN(n,e,t=!1){return D(this,null,function*(){if(vi(n.app))return Promise.reject(es(n));let i="signIn",r=yield iN(n,i,e),o=yield Au._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})}function wI(n,e){return D(this,null,function*(){return rN(Nc(n),e)})}function bH(n,e,t){var i;be(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),be(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),be(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(be(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(be(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function oN(n){return D(this,null,function*(){let e=Nc(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function bI(n,e,t){return D(this,null,function*(){if(vi(n.app))return Promise.reject(es(n));let i=Nc(n),a=yield nI(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vH,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&oN(n),u}),l=yield Au._fromIdTokenResponse(i,"signIn",a);return yield i._updateCurrentUser(l.user),l})}function CI(n,e,t){return vi(n.app)?Promise.reject(es(n)):wI(zt(n),nN.credential(e,t)).catch(i=>D(null,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&oN(n),i}))}function EI(n,e){return D(this,null,function*(){let t=zt(n),r={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&bH(t.auth,r,e);let{email:o}=yield fH(t.auth,r);o!==n.email&&(yield n.reload())})}function CH(n,e){return D(this,null,function*(){return fo(n,"POST","/v1/accounts:update",e)})}function II(i,r){return D(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=zt(n),l={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield Mu(o,CH(o.auth,l));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let f=o.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=o.displayName,f.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function If(n,e,t,i){return zt(n).onIdTokenChanged(e,t,i)}function xI(n,e,t){return zt(n).beforeAuthStateChanged(e,t)}function SI(n){return zt(n).signOut()}var lv="__sak";var uv=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lv,"1"),this.storage.removeItem(lv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var EH=1e3,IH=10,xH=(()=>{class n extends uv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}let r=t.key;i?this.detachListener():this.stopPolling();let o=()=>{let l=this.storage.getItem(r);!i&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);eH()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,IH):o()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},EH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return D(this,null,function*(){yield xs(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return D(this,null,function*(){let i=yield xs(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return D(this,null,function*(){yield xs(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),sN=xH;var SH=(()=>{class n extends uv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),TI=SH;function TH(n){return Promise.all(n.map(e=>D(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var DH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return D(this,null,function*(){let i=t,{eventId:r,eventType:o,data:a}=i.data,l=this.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});let u=Array.from(l).map(m=>D(this,null,function*(){return m(i.origin,a)})),f=yield TH(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function aN(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var oI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return D(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{let f=aN("",20);r.port1.start();let m=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(y){let C=y;if(C.data.eventId===f)switch(C.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(C.data.response);break;default:clearTimeout(m),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function uo(){return window}function MH(n){uo().location.href=n}function cN(){return typeof uo().WorkerGlobalScope<"u"&&typeof uo().importScripts=="function"}function AH(){return D(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function PH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function OH(){return cN()?self:null}var lN="firebaseLocalStorageDb",RH=1,dv="firebaseLocalStorage",uN="fbase_key",Rc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function pv(n,e){return n.transaction([dv],e?"readwrite":"readonly").objectStore(dv)}function NH(){let n=indexedDB.deleteDatabase(lN);return new Rc(n).toPromise()}function sI(){let n=indexedDB.open(lN,RH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(dv,{keyPath:uN})}catch(r){t(r)}}),n.addEventListener("success",()=>D(null,null,function*(){let i=n.result;i.objectStoreNames.contains(dv)?e(i):(i.close(),yield NH(),e(yield sI()))}))})}function DR(n,e,t){return D(this,null,function*(){let i=pv(n,!0).put({[uN]:e,value:t});return new Rc(i).toPromise()})}function kH(n,e){return D(this,null,function*(){let t=pv(n,!1).get(e),i=yield new Rc(t).toPromise();return i===void 0?null:i.value})}function MR(n,e){let t=pv(n,!0).delete(e);return new Rc(t).toPromise()}var LH=800,FH=3,VH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return D(this,null,function*(){return this.db?this.db:(this.db=yield sI(),this.db)})}_withRetries(t){return D(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>FH)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return D(this,null,function*(){return cN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return D(this,null,function*(){this.receiver=DH._getInstance(OH()),this.receiver._subscribe("keyChanged",(t,i)=>D(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>D(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return D(this,null,function*(){var t,i;if(this.activeServiceWorker=yield AH(),!this.activeServiceWorker)return;this.sender=new oI(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return D(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||PH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return D(this,null,function*(){try{if(!indexedDB)return!1;let t=yield sI();return yield DR(t,lv,"1"),yield MR(t,lv),!0}catch{}return!1})}_withPendingWrite(t){return D(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return D(this,null,function*(){return this._withPendingWrite(()=>D(this,null,function*(){return yield this._withRetries(r=>DR(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return D(this,null,function*(){let i=yield this._withRetries(r=>kH(r,t));return this.localCache[t]=i,i})}_remove(t){return D(this,null,function*(){return this._withPendingWrite(()=>D(this,null,function*(){return yield this._withRetries(i=>MR(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return D(this,null,function*(){let t=yield this._withRetries(o=>{let a=pv(o,!1).getAll();return new Rc(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),i.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>D(this,null,function*(){return this._poll()}),LH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),dN=VH;var efe=XR("rcb"),tfe=new Oc(3e4,6e4);function BH(n,e){return e?Xo(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Cf=class extends wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return HE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return HE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return HE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function jH(n){return rN(n.auth,new Cf(n),n.bypassAuthState)}function UH(n){let{auth:e,user:t}=n;return be(t,e,"internal-error"),wH(t,new Cf(n),n.bypassAuthState)}function zH(n){return D(this,null,function*(){let{auth:e,user:t}=n;return be(t,e,"internal-error"),yH(t,new Cf(n),n.bypassAuthState)})}var aI=class{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>D(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return D(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(u))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jH;case"linkViaPopup":case"linkViaRedirect":return zH;case"reauthViaPopup":case"reauthViaRedirect":return UH;default:ho(this.auth,"internal-error")}}resolve(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var nfe=new Oc(2e3,1e4);var HH="pendingRedirect",X_=new Map,cI=class n extends aI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return D(this,null,function*(){let e=X_.get(this.auth._key());if(!e){try{let i=(yield $H(this.resolver,this.auth))?yield xs(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}X_.set(this.auth._key(),e)}return this.bypassAuthState||X_.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return D(this,null,function*(){if(e.type==="signInViaRedirect")return xs(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,xs(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return D(this,null,function*(){})}cleanUp(){}};function $H(n,e){return D(this,null,function*(){let t=WH(e),i=GH(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function qH(n,e){X_.set(n._key(),e)}function GH(n){return Xo(n._redirectPersistence)}function WH(n){return J_(HH,n.config.apiKey,n.name)}function KH(n,e,t=!1){return D(this,null,function*(){if(vi(n.app))return Promise.reject(es(n));let i=Nc(n),r=BH(i,e),a=yield new cI(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}var ZH=600*1e3,lI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!hN(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Pc(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZH&&this.cachedEventUids.clear(),this.cachedEventUids.has(AR(e))}saveEventToCache(e){this.cachedEventUids.add(AR(e)),this.lastProcessedEventTime=Date.now()}};function AR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function YH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hN(n);default:return!1}}function QH(t){return D(this,arguments,function*(n,e={}){return fo(n,"GET","/v1/projects",e)})}var JH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XH=/^https?/;function e$(n){return D(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield QH(n);for(let t of e)try{if(t$(t))return}catch{}ho(n,"unauthorized-domain")})}function t$(n){let e=qE(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!XH.test(t))return!1;if(JH.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var n$=new Oc(3e4,6e4);function PR(){let n=uo().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function i$(n){return new Promise((e,t)=>{var i,r,o;function a(){PR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PR(),t(Pc(n,"network-request-failed"))},timeout:n$.get()})}if(!((r=(i=uo().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=uo().gapi)===null||o===void 0)&&o.load)a();else{let l=XR("iframefcb");return uo()[l]=()=>{gapi.load?a():t(Pc(n,"network-request-failed"))},JR(`${oH()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw ev=null,e})}var ev=null;function r$(n){return ev=ev||i$(n),ev}var o$=new Oc(5e3,15e3),s$="__/auth/iframe",a$="emulator/auth/iframe",c$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u$(n){let e=n.config;be(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?fI(e,a$):`https://${n.config.authDomain}/${s$}`,i={apiKey:e.apiKey,appName:n.name,v:ia},r=l$.get(n.config.apiHost);r&&(i.eid=r);let o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${uf(i).slice(1)}`}function d$(n){return D(this,null,function*(){let e=yield r$(n),t=uo().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:u$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c$,dontclear:!0},i=>new Promise((r,o)=>D(null,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=Pc(n,"network-request-failed"),l=uo().setTimeout(()=>{o(a)},o$.get());function u(){uo().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{o(a)})})))})}var h$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f$=500,p$=600,g$="_blank",m$="http://localhost",hv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function _$(n,e,t,i=f$,r=p$){let o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),l="",u=Object.assign(Object.assign({},h$),{width:i.toString(),height:r.toString(),top:o,left:a}),f=An().toLowerCase();t&&(l=qR(f)?g$:t),HR(f)&&(e=e||m$,u.scrollbars="yes");let m=Object.entries(u).reduce((C,[I,N])=>`${C}${I}=${N},`,"");if(Xz(f)&&l!=="_self")return v$(e||"",l),new hv(null);let y=window.open(e||"",l,m);be(y,n,"popup-blocked");try{y.focus()}catch{}return new hv(y)}function v$(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var y$="__/auth/handler",w$="emulator/auth/handler",b$=encodeURIComponent("fac");function OR(n,e,t,i,r,o){return D(this,null,function*(){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ia,eventId:r};if(e instanceof cv){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",$O(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[m,y]of Object.entries(o||{}))a[m]=y}if(e instanceof iI){let m=e.getScopes().filter(y=>y!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);let l=a;for(let m of Object.keys(l))l[m]===void 0&&delete l[m];let u=yield n._getAppCheckToken(),f=u?`#${b$}=${encodeURIComponent(u)}`:"";return`${C$(n)}?${uf(l).slice(1)}${f}`})}function C$({config:n}){return n.emulator?fI(n,w$):`https://${n.authDomain}/${y$}`}var $E="webStorageSupport",uI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TI,this._completeRedirectFn=KH,this._overrideRedirectResult=qH}_openPopup(e,t,i,r){return D(this,null,function*(){var o;la((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield OR(e,t,i,qE(),r);return _$(e,a,aN())})}_openRedirect(e,t,i,r){return D(this,null,function*(){yield this._originValidation(e);let o=yield OR(e,t,i,qE(),r);return MH(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(la(o,"If manager is not set, promise should be"),o)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return D(this,null,function*(){let t=yield d$(e),i=new lI(e);return t.register("authEvent",r=>(be(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($E,{type:$E},r=>{var o;let a=(o=r?.[0])===null||o===void 0?void 0:o[$E];a!==void 0&&t(!!a),ho(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=e$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YR()||$R()||_I()}},fN=uI;var RR="@firebase/auth",NR="1.10.8";var dI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return D(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function E$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I$(n){Sr(new ci("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;be(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QR(n)},f=new JE(i,r,o,u);return aH(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Sr(new ci("auth-internal",e=>{let t=Nc(e.getProvider("auth").getImmediate());return(i=>new dI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kt(RR,NR,E$(n)),Kt(RR,NR,"esm2017")}var x$=300,S$=yE("authIdTokenMaxAge")||x$,kR=null,T$=n=>e=>D(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>S$)return;let r=t?.token;kR!==r&&(kR=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function DI(n=Dc()){let e=xu(n,"auth");if(e.isInitialized())return e.getImmediate();let t=vI(n,{popupRedirectResolver:fN,persistence:[dN,sN,TI]}),i=yE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(i,location.origin);if(location.origin===o.origin){let a=T$(o.toString());xI(t,a,()=>a(t.currentUser)),If(t,l=>a(l))}}let r=_E("auth");return r&&yI(t,`http://${r}`),t}function D$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iH({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let o=Pc("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",D$().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I$("Browser");function mN(n){return new Ie(function(e){var t=If(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var _N="auth",kc=class{constructor(e){return e}},xf=class{constructor(){return Tu(_N)}};var MI=new ue("angularfire2.auth-instances");function f9(n,e){let t=ff(_N,n,e);return t&&new kc(t)}function p9(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new kc(i)}}var g9={provide:xf,deps:[[new Di,MI]]},m9={provide:kc,useFactory:f9,deps:[[new Di,MI],Qo]};function vN(n,...e){return Kt("angularfire",ra.full,"auth"),ur([m9,g9,{provide:MI,useFactory:p9(n),multi:!0,deps:[ft,$t,oa,Ac,[new Di,Du],...e]}])}var yN=on(mN,!0);var wN=on(bI,!0,2);var bN=on(DI,!0);var CN=on(EI,!0,2);var EN=on(CI,!0,2);var IN=on(SI,!0,2);var xN=on(II,!0,2);var SN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TN={};var ns,AI;(function(){var n;function e(k,M){function A(){}A.prototype=M.prototype,k.D=M.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(R,V,j){for(var O=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)O[Ft-2]=arguments[Ft];return M.prototype[V].apply(R,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,M,A){A||(A=0);var R=Array(16);if(typeof M=="string")for(var V=0;16>V;++V)R[V]=M.charCodeAt(A++)|M.charCodeAt(A++)<<8|M.charCodeAt(A++)<<16|M.charCodeAt(A++)<<24;else for(V=0;16>V;++V)R[V]=M[A++]|M[A++]<<8|M[A++]<<16|M[A++]<<24;M=k.g[0],A=k.g[1],V=k.g[2];var j=k.g[3],O=M+(j^A&(V^j))+R[0]+3614090360&4294967295;M=A+(O<<7&4294967295|O>>>25),O=j+(V^M&(A^V))+R[1]+3905402710&4294967295,j=M+(O<<12&4294967295|O>>>20),O=V+(A^j&(M^A))+R[2]+606105819&4294967295,V=j+(O<<17&4294967295|O>>>15),O=A+(M^V&(j^M))+R[3]+3250441966&4294967295,A=V+(O<<22&4294967295|O>>>10),O=M+(j^A&(V^j))+R[4]+4118548399&4294967295,M=A+(O<<7&4294967295|O>>>25),O=j+(V^M&(A^V))+R[5]+1200080426&4294967295,j=M+(O<<12&4294967295|O>>>20),O=V+(A^j&(M^A))+R[6]+2821735955&4294967295,V=j+(O<<17&4294967295|O>>>15),O=A+(M^V&(j^M))+R[7]+4249261313&4294967295,A=V+(O<<22&4294967295|O>>>10),O=M+(j^A&(V^j))+R[8]+1770035416&4294967295,M=A+(O<<7&4294967295|O>>>25),O=j+(V^M&(A^V))+R[9]+2336552879&4294967295,j=M+(O<<12&4294967295|O>>>20),O=V+(A^j&(M^A))+R[10]+4294925233&4294967295,V=j+(O<<17&4294967295|O>>>15),O=A+(M^V&(j^M))+R[11]+2304563134&4294967295,A=V+(O<<22&4294967295|O>>>10),O=M+(j^A&(V^j))+R[12]+1804603682&4294967295,M=A+(O<<7&4294967295|O>>>25),O=j+(V^M&(A^V))+R[13]+4254626195&4294967295,j=M+(O<<12&4294967295|O>>>20),O=V+(A^j&(M^A))+R[14]+2792965006&4294967295,V=j+(O<<17&4294967295|O>>>15),O=A+(M^V&(j^M))+R[15]+1236535329&4294967295,A=V+(O<<22&4294967295|O>>>10),O=M+(V^j&(A^V))+R[1]+4129170786&4294967295,M=A+(O<<5&4294967295|O>>>27),O=j+(A^V&(M^A))+R[6]+3225465664&4294967295,j=M+(O<<9&4294967295|O>>>23),O=V+(M^A&(j^M))+R[11]+643717713&4294967295,V=j+(O<<14&4294967295|O>>>18),O=A+(j^M&(V^j))+R[0]+3921069994&4294967295,A=V+(O<<20&4294967295|O>>>12),O=M+(V^j&(A^V))+R[5]+3593408605&4294967295,M=A+(O<<5&4294967295|O>>>27),O=j+(A^V&(M^A))+R[10]+38016083&4294967295,j=M+(O<<9&4294967295|O>>>23),O=V+(M^A&(j^M))+R[15]+3634488961&4294967295,V=j+(O<<14&4294967295|O>>>18),O=A+(j^M&(V^j))+R[4]+3889429448&4294967295,A=V+(O<<20&4294967295|O>>>12),O=M+(V^j&(A^V))+R[9]+568446438&4294967295,M=A+(O<<5&4294967295|O>>>27),O=j+(A^V&(M^A))+R[14]+3275163606&4294967295,j=M+(O<<9&4294967295|O>>>23),O=V+(M^A&(j^M))+R[3]+4107603335&4294967295,V=j+(O<<14&4294967295|O>>>18),O=A+(j^M&(V^j))+R[8]+1163531501&4294967295,A=V+(O<<20&4294967295|O>>>12),O=M+(V^j&(A^V))+R[13]+2850285829&4294967295,M=A+(O<<5&4294967295|O>>>27),O=j+(A^V&(M^A))+R[2]+4243563512&4294967295,j=M+(O<<9&4294967295|O>>>23),O=V+(M^A&(j^M))+R[7]+1735328473&4294967295,V=j+(O<<14&4294967295|O>>>18),O=A+(j^M&(V^j))+R[12]+2368359562&4294967295,A=V+(O<<20&4294967295|O>>>12),O=M+(A^V^j)+R[5]+4294588738&4294967295,M=A+(O<<4&4294967295|O>>>28),O=j+(M^A^V)+R[8]+2272392833&4294967295,j=M+(O<<11&4294967295|O>>>21),O=V+(j^M^A)+R[11]+1839030562&4294967295,V=j+(O<<16&4294967295|O>>>16),O=A+(V^j^M)+R[14]+4259657740&4294967295,A=V+(O<<23&4294967295|O>>>9),O=M+(A^V^j)+R[1]+2763975236&4294967295,M=A+(O<<4&4294967295|O>>>28),O=j+(M^A^V)+R[4]+1272893353&4294967295,j=M+(O<<11&4294967295|O>>>21),O=V+(j^M^A)+R[7]+4139469664&4294967295,V=j+(O<<16&4294967295|O>>>16),O=A+(V^j^M)+R[10]+3200236656&4294967295,A=V+(O<<23&4294967295|O>>>9),O=M+(A^V^j)+R[13]+681279174&4294967295,M=A+(O<<4&4294967295|O>>>28),O=j+(M^A^V)+R[0]+3936430074&4294967295,j=M+(O<<11&4294967295|O>>>21),O=V+(j^M^A)+R[3]+3572445317&4294967295,V=j+(O<<16&4294967295|O>>>16),O=A+(V^j^M)+R[6]+76029189&4294967295,A=V+(O<<23&4294967295|O>>>9),O=M+(A^V^j)+R[9]+3654602809&4294967295,M=A+(O<<4&4294967295|O>>>28),O=j+(M^A^V)+R[12]+3873151461&4294967295,j=M+(O<<11&4294967295|O>>>21),O=V+(j^M^A)+R[15]+530742520&4294967295,V=j+(O<<16&4294967295|O>>>16),O=A+(V^j^M)+R[2]+3299628645&4294967295,A=V+(O<<23&4294967295|O>>>9),O=M+(V^(A|~j))+R[0]+4096336452&4294967295,M=A+(O<<6&4294967295|O>>>26),O=j+(A^(M|~V))+R[7]+1126891415&4294967295,j=M+(O<<10&4294967295|O>>>22),O=V+(M^(j|~A))+R[14]+2878612391&4294967295,V=j+(O<<15&4294967295|O>>>17),O=A+(j^(V|~M))+R[5]+4237533241&4294967295,A=V+(O<<21&4294967295|O>>>11),O=M+(V^(A|~j))+R[12]+1700485571&4294967295,M=A+(O<<6&4294967295|O>>>26),O=j+(A^(M|~V))+R[3]+2399980690&4294967295,j=M+(O<<10&4294967295|O>>>22),O=V+(M^(j|~A))+R[10]+4293915773&4294967295,V=j+(O<<15&4294967295|O>>>17),O=A+(j^(V|~M))+R[1]+2240044497&4294967295,A=V+(O<<21&4294967295|O>>>11),O=M+(V^(A|~j))+R[8]+1873313359&4294967295,M=A+(O<<6&4294967295|O>>>26),O=j+(A^(M|~V))+R[15]+4264355552&4294967295,j=M+(O<<10&4294967295|O>>>22),O=V+(M^(j|~A))+R[6]+2734768916&4294967295,V=j+(O<<15&4294967295|O>>>17),O=A+(j^(V|~M))+R[13]+1309151649&4294967295,A=V+(O<<21&4294967295|O>>>11),O=M+(V^(A|~j))+R[4]+4149444226&4294967295,M=A+(O<<6&4294967295|O>>>26),O=j+(A^(M|~V))+R[11]+3174756917&4294967295,j=M+(O<<10&4294967295|O>>>22),O=V+(M^(j|~A))+R[2]+718787259&4294967295,V=j+(O<<15&4294967295|O>>>17),O=A+(j^(V|~M))+R[9]+3951481745&4294967295,k.g[0]=k.g[0]+M&4294967295,k.g[1]=k.g[1]+(V+(O<<21&4294967295|O>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+j&4294967295}i.prototype.u=function(k,M){M===void 0&&(M=k.length);for(var A=M-this.blockSize,R=this.B,V=this.h,j=0;j<M;){if(V==0)for(;j<=A;)r(this,k,j),j+=this.blockSize;if(typeof k=="string"){for(;j<M;)if(R[V++]=k.charCodeAt(j++),V==this.blockSize){r(this,R),V=0;break}}else for(;j<M;)if(R[V++]=k[j++],V==this.blockSize){r(this,R),V=0;break}}this.h=V,this.o+=M},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var M=1;M<k.length-8;++M)k[M]=0;var A=8*this.o;for(M=k.length-8;M<k.length;++M)k[M]=A&255,A/=256;for(this.u(k),k=Array(16),M=A=0;4>M;++M)for(var R=0;32>R;R+=8)k[A++]=this.g[M]>>>R&255;return k};function o(k,M){var A=l;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=M(k)}function a(k,M){this.h=M;for(var A=[],R=!0,V=k.length-1;0<=V;V--){var j=k[V]|0;R&&j==M||(A[V]=j,R=!1)}this.g=A}var l={};function u(k){return-128<=k&&128>k?o(k,function(M){return new a([M|0],0>M?-1:0)}):new a([k|0],0>k?-1:0)}function f(k){if(isNaN(k)||!isFinite(k))return y;if(0>k)return q(f(-k));for(var M=[],A=1,R=0;k>=A;R++)M[R]=k/A|0,A*=4294967296;return new a(M,0)}function m(k,M){if(k.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(k.charAt(0)=="-")return q(m(k.substring(1),M));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=f(Math.pow(M,8)),R=y,V=0;V<k.length;V+=8){var j=Math.min(8,k.length-V),O=parseInt(k.substring(V,V+j),M);8>j?(j=f(Math.pow(M,j)),R=R.j(j).add(f(O))):(R=R.j(A),R=R.add(f(O)))}return R}var y=u(0),C=u(1),I=u(16777216);n=a.prototype,n.m=function(){if(G(this))return-q(this).m();for(var k=0,M=1,A=0;A<this.g.length;A++){var R=this.i(A);k+=(0<=R?R:4294967296+R)*M,M*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(G(this))return"-"+q(this).toString(k);for(var M=f(Math.pow(k,6)),A=this,R="";;){var V=Qe(A,M).g;A=Q(A,V.j(M));var j=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=V,N(A))return j+R;for(;6>j.length;)j="0"+j;R=j+R}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(var M=0;M<k.g.length;M++)if(k.g[M]!=0)return!1;return!0}function G(k){return k.h==-1}n.l=function(k){return k=Q(this,k),G(k)?-1:N(k)?0:1};function q(k){for(var M=k.g.length,A=[],R=0;R<M;R++)A[R]=~k.g[R];return new a(A,~k.h).add(C)}n.abs=function(){return G(this)?q(this):this},n.add=function(k){for(var M=Math.max(this.g.length,k.g.length),A=[],R=0,V=0;V<=M;V++){var j=R+(this.i(V)&65535)+(k.i(V)&65535),O=(j>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);R=O>>>16,j&=65535,O&=65535,A[V]=O<<16|j}return new a(A,A[A.length-1]&-2147483648?-1:0)};function Q(k,M){return k.add(q(M))}n.j=function(k){if(N(this)||N(k))return y;if(G(this))return G(k)?q(this).j(q(k)):q(q(this).j(k));if(G(k))return q(this.j(q(k)));if(0>this.l(I)&&0>k.l(I))return f(this.m()*k.m());for(var M=this.g.length+k.g.length,A=[],R=0;R<2*M;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var V=0;V<k.g.length;V++){var j=this.i(R)>>>16,O=this.i(R)&65535,Ft=k.i(V)>>>16,er=k.i(V)&65535;A[2*R+2*V]+=O*er,he(A,2*R+2*V),A[2*R+2*V+1]+=j*er,he(A,2*R+2*V+1),A[2*R+2*V+1]+=O*Ft,he(A,2*R+2*V+1),A[2*R+2*V+2]+=j*Ft,he(A,2*R+2*V+2)}for(R=0;R<M;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=M;R<2*M;R++)A[R]=0;return new a(A,0)};function he(k,M){for(;(k[M]&65535)!=k[M];)k[M+1]+=k[M]>>>16,k[M]&=65535,M++}function ye(k,M){this.g=k,this.h=M}function Qe(k,M){if(N(M))throw Error("division by zero");if(N(k))return new ye(y,y);if(G(k))return M=Qe(q(k),M),new ye(q(M.g),q(M.h));if(G(M))return M=Qe(k,q(M)),new ye(q(M.g),M.h);if(30<k.g.length){if(G(k)||G(M))throw Error("slowDivide_ only works with positive integers.");for(var A=C,R=M;0>=R.l(k);)A=Yt(A),R=Yt(R);var V=st(A,1),j=st(R,1);for(R=st(R,2),A=st(A,2);!N(R);){var O=j.add(R);0>=O.l(k)&&(V=V.add(A),j=O),R=st(R,1),A=st(A,1)}return M=Q(k,V.j(M)),new ye(V,M)}for(V=y;0<=k.l(M);){for(A=Math.max(1,Math.floor(k.m()/M.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),j=f(A),O=j.j(M);G(O)||0<O.l(k);)A-=R,j=f(A),O=j.j(M);N(j)&&(j=C),V=V.add(j),k=Q(k,O)}return new ye(V,k)}n.A=function(k){return Qe(this,k).h},n.and=function(k){for(var M=Math.max(this.g.length,k.g.length),A=[],R=0;R<M;R++)A[R]=this.i(R)&k.i(R);return new a(A,this.h&k.h)},n.or=function(k){for(var M=Math.max(this.g.length,k.g.length),A=[],R=0;R<M;R++)A[R]=this.i(R)|k.i(R);return new a(A,this.h|k.h)},n.xor=function(k){for(var M=Math.max(this.g.length,k.g.length),A=[],R=0;R<M;R++)A[R]=this.i(R)^k.i(R);return new a(A,this.h^k.h)};function Yt(k){for(var M=k.g.length+1,A=[],R=0;R<M;R++)A[R]=k.i(R)<<1|k.i(R-1)>>>31;return new a(A,k.h)}function st(k,M){var A=M>>5;M%=32;for(var R=k.g.length-A,V=[],j=0;j<R;j++)V[j]=0<M?k.i(j+A)>>>M|k.i(j+A+1)<<32-M:k.i(j+A);return new a(V,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,AI=TN.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,ns=TN.Integer=a}).apply(typeof SN<"u"?SN:typeof self<"u"?self:typeof window<"u"?window:{});var gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},is={};var PI,_9,Pu,OI,Sf,mv,RI,NI,kI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,v){return d==Array.prototype||d==Object.prototype||(d[g]=v.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof gv=="object"&&gv];for(var g=0;g<d.length;++g){var v=d[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function r(d,g){if(g)e:{var v=i;d=d.split(".");for(var x=0;x<d.length-1;x++){var B=d[x];if(!(B in v))break e;v=v[B]}d=d[d.length-1],x=v[d],g=g(x),g!=x&&g!=null&&e(v,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var v=0,x=!1,B={next:function(){if(!x&&v<d.length){var $=v++;return{value:g($,d[$]),done:!1}}return x=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}r("Array.prototype.values",function(d){return d||function(){return o(this,function(g,v){return v})}});var a=a||{},l=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function m(d,g,v){return d.call.apply(d.bind,arguments)}function y(d,g,v){if(!d)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,x),d.apply(g,B)}}return function(){return d.apply(g,arguments)}}function C(d,g,v){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,C.apply(null,arguments)}function I(d,g){var v=Array.prototype.slice.call(arguments,1);return function(){var x=v.slice();return x.push.apply(x,arguments),d.apply(this,x)}}function N(d,g){function v(){}v.prototype=g.prototype,d.aa=g.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(x,B,$){for(var te=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)te[ze-2]=arguments[ze];return g.prototype[B].apply(x,te)}}function G(d){let g=d.length;if(0<g){let v=Array(g);for(let x=0;x<g;x++)v[x]=d[x];return v}return[]}function q(d,g){for(let v=1;v<arguments.length;v++){let x=arguments[v];if(u(x)){let B=d.length||0,$=x.length||0;d.length=B+$;for(let te=0;te<$;te++)d[B+te]=x[te]}else d.push(x)}}class Q{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function he(d){return/^[\s\xa0]*$/.test(d)}function ye(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function Qe(d){return Qe[" "](d),d}Qe[" "]=function(){};var Yt=ye().indexOf("Gecko")!=-1&&!(ye().toLowerCase().indexOf("webkit")!=-1&&ye().indexOf("Edge")==-1)&&!(ye().indexOf("Trident")!=-1||ye().indexOf("MSIE")!=-1)&&ye().indexOf("Edge")==-1;function st(d,g,v){for(let x in d)g.call(v,d[x],x,d)}function k(d,g){for(let v in d)g.call(void 0,d[v],v,d)}function M(d){let g={};for(let v in d)g[v]=d[v];return g}let A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,g){let v,x;for(let B=1;B<arguments.length;B++){x=arguments[B];for(v in x)d[v]=x[v];for(let $=0;$<A.length;$++)v=A[$],Object.prototype.hasOwnProperty.call(x,v)&&(d[v]=x[v])}}function V(d){var g=1;d=d.split(":");let v=[];for(;0<g&&d.length;)v.push(d.shift()),g--;return d.length&&v.push(d.join(":")),v}function j(d){l.setTimeout(()=>{throw d},0)}function O(){var d=bt;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Ft{constructor(){this.h=this.g=null}add(g,v){let x=er.get();x.set(g,v),this.h?this.h.next=x:this.g=x,this.h=x}}var er=new Q(()=>new ke,d=>d.reset());class ke{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ds,xe=!1,bt=new Ft,Nn=()=>{let d=l.Promise.resolve(void 0);ds=()=>{d.then(Bn)}};var Bn=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(v){j(v)}var g=er;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}xe=!1};function gt(){this.s=this.s,this.C=this.C}gt.prototype.s=!1,gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var We=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let v=()=>{};l.addEventListener("test",v,g),l.removeEventListener("test",v,g)}catch{}return d})();function Yn(d,g){if(Ae.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,x=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(Yt){e:{try{Qe(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else v=="mouseover"?g=d.fromElement:v=="mouseout"&&(g=d.toElement);this.relatedTarget=g,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ar[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Yn.aa.h.call(this)}}N(Yn,Ae);var Ar={2:"touch",3:"pen",4:"mouse"};Yn.prototype.h=function(){Yn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var hs="closure_listenable_"+(1e6*Math.random()|0),dd=0;function hd(d,g,v,x,B){this.listener=d,this.proxy=null,this.src=g,this.type=v,this.capture=!!x,this.ha=B,this.key=++dd,this.da=this.fa=!1}function Pr(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function fs(d){this.src=d,this.g={},this.h=0}fs.prototype.add=function(d,g,v,x,B){var $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);var te=Xc(d,g,x,B);return-1<te?(g=d[te],v||(g.fa=!1)):(g=new hd(g,this.src,$,!!x,B),g.fa=v,d.push(g)),g};function fd(d,g){var v=g.type;if(v in d.g){var x=d.g[v],B=Array.prototype.indexOf.call(x,g,void 0),$;($=0<=B)&&Array.prototype.splice.call(x,B,1),$&&(Pr(g),d.g[v].length==0&&(delete d.g[v],d.h--))}}function Xc(d,g,v,x){for(var B=0;B<d.length;++B){var $=d[B];if(!$.da&&$.listener==g&&$.capture==!!v&&$.ha==x)return B}return-1}var el="closure_lm_"+(1e6*Math.random()|0),Sa={};function Ta(d,g,v,x,B){if(x&&x.once)return tl(d,g,v,x,B);if(Array.isArray(g)){for(var $=0;$<g.length;$++)Ta(d,g[$],v,x,B);return null}return v=rl(v),d&&d[hs]?d.K(g,v,f(x)?!!x.capture:!!x,B):Xf(d,g,v,!1,x,B)}function Xf(d,g,v,x,B,$){if(!g)throw Error("Invalid event type");var te=f(B)?!!B.capture:!!B,ze=Da(d);if(ze||(d[el]=ze=new fs(d)),v=ze.add(g,v,x,te,$),v.proxy)return v;if(x=ep(),v.proxy=x,x.src=d,x.listener=v,d.addEventListener)We||(B=te),B===void 0&&(B=!1),d.addEventListener(g.toString(),x,B);else if(d.attachEvent)d.attachEvent(tp(g.toString()),x);else if(d.addListener&&d.removeListener)d.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ep(){function d(v){return g.call(d.src,d.listener,v)}let g=Uy;return d}function tl(d,g,v,x,B){if(Array.isArray(g)){for(var $=0;$<g.length;$++)tl(d,g[$],v,x,B);return null}return v=rl(v),d&&d[hs]?d.L(g,v,f(x)?!!x.capture:!!x,B):Xf(d,g,v,!0,x,B)}function pd(d,g,v,x,B){if(Array.isArray(g))for(var $=0;$<g.length;$++)pd(d,g[$],v,x,B);else x=f(x)?!!x.capture:!!x,v=rl(v),d&&d[hs]?(d=d.i,g=String(g).toString(),g in d.g&&($=d.g[g],v=Xc($,v,x,B),-1<v&&(Pr($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete d.g[g],d.h--)))):d&&(d=Da(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Xc(g,v,x,B)),(v=-1<d?g[d]:null)&&nl(v))}function nl(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[hs])fd(g.i,d);else{var v=d.type,x=d.proxy;g.removeEventListener?g.removeEventListener(v,x,d.capture):g.detachEvent?g.detachEvent(tp(v),x):g.addListener&&g.removeListener&&g.removeListener(x),(v=Da(g))?(fd(v,d),v.h==0&&(v.src=null,g[el]=null)):Pr(d)}}}function tp(d){return d in Sa?Sa[d]:Sa[d]="on"+d}function Uy(d,g){if(d.da)d=!0;else{g=new Yn(g,this);var v=d.listener,x=d.ha||d.src;d.fa&&nl(d),d=v.call(x,g)}return d}function Da(d){return d=d[el],d instanceof fs?d:null}var il="__closure_events_fn_"+(1e9*Math.random()>>>0);function rl(d){return typeof d=="function"?d:(d[il]||(d[il]=function(g){return d.handleEvent(g)}),d[il])}function xn(){gt.call(this),this.i=new fs(this),this.M=this,this.F=null}N(xn,gt),xn.prototype[hs]=!0,xn.prototype.removeEventListener=function(d,g,v,x){pd(this,d,g,v,x)};function Sn(d,g){var v,x=d.F;if(x)for(v=[];x;x=x.F)v.push(x);if(d=d.M,x=g.type||g,typeof g=="string")g=new Ae(g,d);else if(g instanceof Ae)g.target=g.target||d;else{var B=g;g=new Ae(x,d),R(g,B)}if(B=!0,v)for(var $=v.length-1;0<=$;$--){var te=g.g=v[$];B=Ma(te,x,!0,g)&&B}if(te=g.g=d,B=Ma(te,x,!0,g)&&B,B=Ma(te,x,!1,g)&&B,v)for($=0;$<v.length;$++)te=g.g=v[$],B=Ma(te,x,!1,g)&&B}xn.prototype.N=function(){if(xn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var v=d.g[g],x=0;x<v.length;x++)Pr(v[x]);delete d.g[g],d.h--}}this.F=null},xn.prototype.K=function(d,g,v,x){return this.i.add(String(d),g,!1,v,x)},xn.prototype.L=function(d,g,v,x){return this.i.add(String(d),g,!0,v,x)};function Ma(d,g,v,x){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,$=0;$<g.length;++$){var te=g[$];if(te&&!te.da&&te.capture==v){var ze=te.listener,Ot=te.ha||te.src;te.fa&&fd(d.i,te),B=ze.call(Ot,x)!==!1&&B}}return B&&!x.defaultPrevented}function np(d,g,v){if(typeof d=="function")v&&(d=C(d,v));else if(d&&typeof d.handleEvent=="function")d=C(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(d,g||0)}function gd(d){d.g=np(()=>{d.g=null,d.i&&(d.i=!1,gd(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class md extends gt{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:gd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ps(d){gt.call(this),this.h=d,this.g={}}N(ps,gt);var ip=[];function gs(d){st(d.g,function(g,v){this.g.hasOwnProperty(v)&&nl(g)},d),d.g={}}ps.prototype.N=function(){ps.aa.N.call(this),gs(this)},ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _d=l.JSON.stringify,zy=l.JSON.parse,rp=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function ol(){}ol.prototype.h=null;function vd(d){return d.h||(d.h=d.i())}function op(){}var Aa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yd(){Ae.call(this,"d")}N(yd,Ae);function wd(){Ae.call(this,"c")}N(wd,Ae);var Eo={},sp=null;function ms(){return sp=sp||new xn}Eo.La="serverreachability";function ap(d){Ae.call(this,Eo.La,d)}N(ap,Ae);function Pa(d){let g=ms();Sn(g,new ap(g))}Eo.STAT_EVENT="statevent";function cp(d,g){Ae.call(this,Eo.STAT_EVENT,d),this.stat=g}N(cp,Ae);function kn(d){let g=ms();Sn(g,new cp(g,d))}Eo.Ma="timingevent";function yi(d,g){Ae.call(this,Eo.Ma,d),this.size=g}N(yi,Ae);function fe(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},g)}function _s(){this.g=!0}_s.prototype.xa=function(){this.g=!1};function lp(d,g,v,x,B,$){d.info(function(){if(d.g)if($)for(var te="",ze=$.split("&"),Ot=0;Ot<ze.length;Ot++){var tt=ze[Ot].split("=");if(1<tt.length){var Et=tt[0];tt=tt[1];var Tn=Et.split("_");te=2<=Tn.length&&Tn[1]=="type"?te+(Et+"="+tt+"&"):te+(Et+"=redacted&")}}else te=null;else te=$;return"XMLHTTP REQ ("+x+") [attempt "+B+"]: "+g+`
`+v+`
`+te})}function up(d,g,v,x,B,$,te){d.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+B+"]: "+g+`
`+v+`
`+$+" "+te})}function Io(d,g,v,x){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+dp(d,v)+(x?" "+x:"")})}function bd(d,g){d.info(function(){return"TIMEOUT: "+g})}_s.prototype.info=function(){};function dp(d,g){if(!d.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var x=v[d];if(!(2>x.length)){var B=x[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var te=1;te<B.length;te++)B[te]=""}}}}return _d(v)}catch{return g}}var tr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ed;function sl(){}N(sl,ol),sl.prototype.g=function(){return new XMLHttpRequest},sl.prototype.i=function(){return{}},Ed=new sl;function Or(d,g,v,x){this.j=d,this.i=g,this.l=v,this.R=x||1,this.U=new ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hp}function hp(){this.i=null,this.g="",this.h=!1}var Id={},xd={};function vs(d,g,v){d.L=1,d.v=ws(Ln(g)),d.m=v,d.P=!0,fp(d,null)}function fp(d,g){d.F=Date.now(),al(d),d.A=Ln(d.v);var v=d.A,x=d.R;Array.isArray(x)||(x=[String(x)]),mt(v.i,"t",x),d.C=0,v=d.j.J,d.h=new hp,d.g=Ha(d.j,v?g:null,!d.m),0<d.O&&(d.M=new md(C(d.Y,d,d.g),d.O)),g=d.U,v=d.g,x=d.ca;var B="readystatechange";Array.isArray(B)||(B&&(ip[0]=B.toString()),B=ip);for(var $=0;$<B.length;$++){var te=Ta(v,B[$],x||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=d.H?M(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Pa(),lp(d.i,d.u,d.A,d.l,d.R,d.m)}Or.prototype.ca=function(d){d=d.target;let g=this.M;g&&bi(d)==3?g.j():this.Y(d)},Or.prototype.Y=function(d){try{if(d==this.g)e:{let Tn=bi(this.g);var g=this.g.Ba();let Ei=this.g.Z();if(!(3>Tn)&&(Tn!=3||this.g&&(this.h.h||this.g.oa()||wp(this.g)))){this.J||Tn!=4||g==7||(g==8||0>=Ei?Pa(3):Pa(2)),Oa(this);var v=this.g.Z();this.X=v;t:if(pp(this)){var x=wp(this.g);d="";var B=x.length,$=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rr(this),nr(this);var te="";break t}this.h.i=new l.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,d+=this.h.i.decode(x[g],{stream:!($&&g==B-1)});x.length=0,this.h.g+=d,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=v==200,up(this.i,this.u,this.A,this.l,this.R,Tn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Ot=this.g;if((ze=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!he(ze)){var tt=ze;break t}}tt=null}if(v=tt)Io(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cl(this,v);else{this.o=!1,this.s=3,kn(12),Rr(this),nr(this);break e}}if(this.P){v=!0;let Ii;for(;!this.J&&this.C<te.length;)if(Ii=Hy(this,te),Ii==xd){Tn==4&&(this.s=4,kn(14),v=!1),Io(this.i,this.l,null,"[Incomplete Response]");break}else if(Ii==Id){this.s=4,kn(15),Io(this.i,this.l,te,"[Invalid Chunk]"),v=!1;break}else Io(this.i,this.l,Ii,null),cl(this,Ii);if(pp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tn!=4||te.length!=0||this.h.h||(this.s=1,kn(16),v=!1),this.o=this.o&&v,!v)Io(this.i,this.l,te,"[Invalid Chunked Response]"),Rr(this),nr(this);else if(0<te.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),pl(Et),Et.M=!0,kn(11))}}else Io(this.i,this.l,te,null),cl(this,te);Tn==4&&Rr(this),this.o&&!this.J&&(Tn==4?Ip(this.j,this):(this.o=!1,al(this)))}else bp(this.g),v==400&&0<te.indexOf("Unknown SID")?(this.s=3,kn(12)):(this.s=0,kn(13)),Rr(this),nr(this)}}}catch{}finally{}};function pp(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Hy(d,g){var v=d.C,x=g.indexOf(`
`,v);return x==-1?xd:(v=Number(g.substring(v,x)),isNaN(v)?Id:(x+=1,x+v>g.length?xd:(g=g.slice(x,x+v),d.C=x+v,g)))}Or.prototype.cancel=function(){this.J=!0,Rr(this)};function al(d){d.S=Date.now()+d.I,gp(d,d.I)}function gp(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=fe(C(d.ba,d),g)}function Oa(d){d.B&&(l.clearTimeout(d.B),d.B=null)}Or.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(bd(this.i,this.A),this.L!=2&&(Pa(),kn(17)),Rr(this),this.s=2,nr(this)):gp(this,this.S-d)};function nr(d){d.j.G==0||d.J||Ip(d.j,d)}function Rr(d){Oa(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,gs(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function cl(d,g){try{var v=d.j;if(v.G!=0&&(v.g==d||Nr(v.h,d))){if(!d.K&&Nr(v.h,d)&&v.G==3){try{var x=v.Da.g.parse(g)}catch{x=null}if(Array.isArray(x)&&x.length==3){var B=x;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)gl(v),dl(v);else break e;Fd(v),kn(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=fe(C(v.Za,v),6e3));if(1>=Na(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Do(v,11)}else if((d.K||v.g==d)&&gl(v),!he(g))for(B=v.Da.g.parse(g),g=0;g<B.length;g++){let tt=B[g];if(v.T=tt[0],tt=tt[1],v.G==2)if(tt[0]=="c"){v.K=tt[1],v.ia=tt[2];let Et=tt[3];Et!=null&&(v.la=Et,v.j.info("VER="+v.la));let Tn=tt[4];Tn!=null&&(v.Aa=Tn,v.j.info("SVER="+v.Aa));let Ei=tt[5];Ei!=null&&typeof Ei=="number"&&0<Ei&&(x=1.5*Ei,v.L=x,v.j.info("backChannelRequestTimeoutMs_="+x)),x=v;let Ii=d.g;if(Ii){let Vr=Ii.g?Ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vr){var $=x.h;$.g||Vr.indexOf("spdy")==-1&&Vr.indexOf("quic")==-1&&Vr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(kr($,$.h),$.h=null))}if(x.D){let vl=Ii.g?Ii.g.getResponseHeader("X-HTTP-Session-Id"):null;vl&&(x.ya=vl,ut(x.I,x.D,vl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),x=v;var te=d;if(x.qa=jd(x,x.J?x.ia:null,x.W),te.K){ll(x.h,te);var ze=te,Ot=x.L;Ot&&(ze.I=Ot),ze.B&&(Oa(ze),al(ze)),x.g=te}else fl(x);0<v.i.length&&hl(v)}else tt[0]!="stop"&&tt[0]!="close"||Do(v,7);else v.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Do(v,7):za(v):tt[0]!="noop"&&v.l&&v.l.ta(tt),v.v=0)}}Pa(4)}catch{}}var Ra=class{constructor(d,g){this.g=d,this.map=g}};function Je(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ct(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Na(d){return d.h?1:d.g?d.g.size:0}function Nr(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function kr(d,g){d.g?d.g.add(g):d.h=g}function ll(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Je.prototype.cancel=function(){if(this.i=Ve(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Ve(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let v of d.g.values())g=g.concat(v.D);return g}return G(d.i)}function Vt(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],v=d.length,x=0;x<v;x++)g.push(d[x]);return g}g=[],v=0;for(x in d)g[v++]=d[x];return g}function Sd(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var v=0;v<d;v++)g.push(v);return g}g=[],v=0;for(let x in d)g[v++]=x;return g}}}function ka(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var v=Sd(d),x=Vt(d),B=x.length,$=0;$<B;$++)g.call(void 0,x[$],v&&v[$],d)}var Qn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $y(d,g){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var x=d[v].indexOf("="),B=null;if(0<=x){var $=d[v].substring(0,x);B=d[v].substring(x+1)}else $=d[v];g($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Li(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Li){this.h=d.h,Tt(this,d.j),this.o=d.o,this.g=d.g,Fi(this,d.s),this.l=d.l;var g=d.i,v=new So;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),ys(this,v),this.m=d.m}else d&&(g=String(d).match(Qn))?(this.h=!1,Tt(this,g[1]||"",!0),this.o=ir(g[2]||""),this.g=ir(g[3]||"",!0),Fi(this,g[4]),this.l=ir(g[5]||"",!0),ys(this,g[6]||"",!0),this.m=ir(g[7]||"")):(this.h=!1,this.i=new So(null,this.h))}Li.prototype.toString=function(){var d=[],g=this.j;g&&d.push(xo(g,La,!0),":");var v=this.g;return(v||g=="file")&&(d.push("//"),(g=this.o)&&d.push(xo(g,La,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(xo(v,v.charAt(0)=="/"?Md:Dd,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",xo(v,mp)),d.join("")};function Ln(d){return new Li(d)}function Tt(d,g,v){d.j=v?ir(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Fi(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function ys(d,g,v){g instanceof So?(d.i=g,Ad(d.i,d.h)):(v||(g=xo(g,ul)),d.i=new So(g,d.h))}function ut(d,g,v){d.i.set(g,v)}function ws(d){return ut(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ir(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function xo(d,g,v){return typeof d=="string"?(d=encodeURI(d).replace(g,Td),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Td(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var La=/[#\/\?@]/g,Dd=/[#\?:]/g,Md=/[#\?]/g,ul=/[#\?@]/g,mp=/#/g;function So(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Lr(d){d.g||(d.g=new Map,d.h=0,d.i&&$y(d.i,function(g,v){d.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=So.prototype,n.add=function(d,g){Lr(this),this.i=null,d=To(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(g),this.h+=1,this};function Pe(d,g){Lr(d),g=To(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function wi(d,g){return Lr(d),g=To(d,g),d.g.has(g)}n.forEach=function(d,g){Lr(this),this.g.forEach(function(v,x){v.forEach(function(B){d.call(g,B,x,this)},this)},this)},n.na=function(){Lr(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let x=0;x<g.length;x++){let B=d[x];for(let $=0;$<B.length;$++)v.push(g[x])}return v},n.V=function(d){Lr(this);let g=[];if(typeof d=="string")wi(this,d)&&(g=g.concat(this.g.get(To(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)g=g.concat(d[v])}return g},n.set=function(d,g){return Lr(this),this.i=null,d=To(this,d),wi(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function mt(d,g,v){Pe(d,g),0<v.length&&(d.i=null,d.g.set(To(d,g),G(v)),d.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var x=g[v];let $=encodeURIComponent(String(x)),te=this.V(x);for(x=0;x<te.length;x++){var B=$;te[x]!==""&&(B+="="+encodeURIComponent(String(te[x]))),d.push(B)}}return this.i=d.join("&")};function To(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Ad(d,g){g&&!d.j&&(Lr(d),d.i=null,d.g.forEach(function(v,x){var B=x.toLowerCase();x!=B&&(Pe(this,x),mt(this,B,v))},d)),d.j=g}function Pd(d,g){let v=new _s;if(l.Image){let x=new Image;x.onload=I(jn,v,"TestLoadImage: loaded",!0,g,x),x.onerror=I(jn,v,"TestLoadImage: error",!1,g,x),x.onabort=I(jn,v,"TestLoadImage: abort",!1,g,x),x.ontimeout=I(jn,v,"TestLoadImage: timeout",!1,g,x),l.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=d}else g(!1)}function Od(d,g){let v=new _s,x=new AbortController,B=setTimeout(()=>{x.abort(),jn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:x.signal}).then($=>{clearTimeout(B),$.ok?jn(v,"TestPingServer: ok",!0,g):jn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),jn(v,"TestPingServer: error",!1,g)})}function jn(d,g,v,x,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),x(v)}catch{}}function Rd(){this.g=new rp}function Fa(d,g,v){let x=v||"";try{ka(d,function(B,$){let te=B;f(B)&&(te=_d(B)),g.push(x+$+"="+encodeURIComponent(te))})}catch(B){throw g.push(x+"type="+encodeURIComponent("_badmap")),B}}function Bt(d){this.l=d.Ub||null,this.j=d.eb||!1}N(Bt,ol),Bt.prototype.g=function(){return new Vi(this.l,this.j)},Bt.prototype.i=(function(d){return function(){return d}})({});function Vi(d,g){xn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Vi,xn),n=Vi.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,Va(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nd(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nd(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?bs(this):Va(this),this.readyState==3&&Nd(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,bs(this))},n.Qa=function(d){this.g&&(this.response=d,bs(this))},n.ga=function(){this.g&&bs(this)};function bs(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Va(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=g.next();return d.join(`\r
`)};function Va(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function kd(d){let g="";return st(d,function(v,x){g+=x,g+=":",g+=v,g+=`\r
`}),g}function Ba(d,g,v){e:{for(x in v){var x=!1;break e}x=!0}x||(v=kd(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):ut(d,g,v))}function Pt(d){xn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Pt,xn);var _p=/^https?$/i,Ke=["POST","PUT"];n=Pt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,v,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ed.g(),this.v=this.o?vd(this.o):vd(Ed),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch($){vp(this,$);return}if(d=v||"",v=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var B in x)v.set(B,x[B]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(let $ of x.keys())v.set($,x.get($));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),B=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ke,g,void 0))||x||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[$,te]of v)this.g.setRequestHeader($,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yp(this),this.u=!0,this.g.send(d),this.u=!1}catch($){vp(this,$)}};function vp(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,li(d),ja(d)}function li(d){d.A||(d.A=!0,Sn(d,"complete"),Sn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Sn(this,"complete"),Sn(this,"abort"),ja(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ja(this,!0)),Pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Cs(this):this.bb())},n.bb=function(){Cs(this)};function Cs(d){if(d.h&&typeof a<"u"&&(!d.v[1]||bi(d)!=4||d.Z()!=2)){if(d.u&&bi(d)==4)np(d.Ea,0,d);else if(Sn(d,"readystatechange"),bi(d)==4){d.h=!1;try{let te=d.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var x;if(x=te===0){var B=String(d.D).match(Qn)[1]||null;!B&&l.self&&l.self.location&&(B=l.self.location.protocol.slice(0,-1)),x=!_p.test(B?B.toLowerCase():"")}v=x}if(v)Sn(d,"complete"),Sn(d,"success");else{d.m=6;try{var $=2<bi(d)?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.Z()+"]",li(d)}}finally{ja(d)}}}}function ja(d,g){if(d.g){yp(d);let v=d.g,x=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||Sn(d,"ready");try{v.onreadystatechange=x}catch{}}}function yp(d){d.I&&(l.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function bi(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),zy(g)}};function wp(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function bp(d){let g={};d=(d.g&&2<=bi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<d.length;x++){if(he(d[x]))continue;var v=V(d[x]);let B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let $=g[B]||[];g[B]=$,$.push(v)}k(g,function(x){return x.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ua(d,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||g}function Cp(d){this.Aa=0,this.i=[],this.j=new _s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ua("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ua("baseRetryDelayMs",5e3,d),this.cb=Ua("retryDelaySeedMs",1e4,d),this.Wa=Ua("forwardChannelMaxRetries",2,d),this.wa=Ua("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(d&&d.concurrentRequestLimit),this.Da=new Rd,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Cp.prototype,n.la=8,n.G=1,n.connect=function(d,g,v,x){kn(0),this.W=d,this.H=g||{},v&&x!==void 0&&(this.H.OSID=v,this.H.OAID=x),this.F=this.X,this.I=jd(this,null,this.W),hl(this)};function za(d){if(Ci(d),d.G==3){var g=d.U++,v=Ln(d.I);if(ut(v,"SID",d.K),ut(v,"RID",g),ut(v,"TYPE","terminate"),Es(d,v),g=new Or(d,d.j,g),g.L=2,g.v=ws(Ln(v)),v=!1,l.navigator&&l.navigator.sendBeacon)try{v=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&l.Image&&(new Image().src=g.v,v=!0),v||(g.g=Ha(g.j,null),g.g.ea(g.v)),g.F=Date.now(),al(g)}Bd(d)}function dl(d){d.g&&(pl(d),d.g.cancel(),d.g=null)}function Ci(d){dl(d),d.u&&(l.clearTimeout(d.u),d.u=null),gl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function hl(d){if(!Ct(d.h)&&!d.s){d.s=!0;var g=d.Ga;ds||Nn(),xe||(ds(),xe=!0),bt.add(g,d),d.B=0}}function Ep(d,g){return Na(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=fe(C(d.Ga,d,g),ml(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let B=new Or(this,this.j,d),$=this.o;if(this.S&&($?($=M($),R($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var x=this.i[v];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(g+=x,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Ld(this,B,g),v=Ln(this.I),ut(v,"RID",d),ut(v,"CVER",22),this.D&&ut(v,"X-HTTP-Session-Id",this.D),Es(this,v),$&&(this.O?g="headers="+encodeURIComponent(String(kd($)))+"&"+g:this.m&&Ba(v,this.m,$)),kr(this.h,B),this.Ua&&ut(v,"TYPE","init"),this.P?(ut(v,"$req",g),ut(v,"SID","null"),B.T=!0,vs(B,v,null)):vs(B,v,g),this.G=2}}else this.G==3&&(d?rr(this,d):this.i.length==0||Ct(this.h)||rr(this))};function rr(d,g){var v;g?v=g.l:v=d.U++;let x=Ln(d.I);ut(x,"SID",d.K),ut(x,"RID",v),ut(x,"AID",d.T),Es(d,x),d.m&&d.o&&Ba(x,d.m,d.o),v=new Or(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),g&&(d.i=g.D.concat(d.i)),g=Ld(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),kr(d.h,v),vs(v,x,g)}function Es(d,g){d.H&&st(d.H,function(v,x){ut(g,x,v)}),d.l&&ka({},function(v,x){ut(g,x,v)})}function Ld(d,g,v){v=Math.min(d.i.length,v);var x=d.l?C(d.l.Na,d.l,d):null;e:{var B=d.i;let $=-1;for(;;){let te=["count="+v];$==-1?0<v?($=B[0].g,te.push("ofs="+$)):$=0:te.push("ofs="+$);let ze=!0;for(let Ot=0;Ot<v;Ot++){let tt=B[Ot].g,Et=B[Ot].map;if(tt-=$,0>tt)$=Math.max(0,B[Ot].g-100),ze=!1;else try{Fa(Et,te,"req"+tt+"_")}catch{x&&x(Et)}}if(ze){x=te.join("&");break e}}}return d=d.i.splice(0,v),g.D=d,x}function fl(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;ds||Nn(),xe||(ds(),xe=!0),bt.add(g,d),d.v=0}}function Fd(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=fe(C(d.Fa,d),ml(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Vd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=fe(C(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kn(10),dl(this),Vd(this))};function pl(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function Vd(d){d.g=new Or(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Ln(d.qa);ut(g,"RID","rpc"),ut(g,"SID",d.K),ut(g,"AID",d.T),ut(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&ut(g,"TO",d.ja),ut(g,"TYPE","xmlhttp"),Es(d,g),d.m&&d.o&&Ba(g,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=ws(Ln(g)),v.m=null,v.P=!0,fp(v,d)}n.Za=function(){this.C!=null&&(this.C=null,dl(this),Fd(this),kn(19))};function gl(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Ip(d,g){var v=null;if(d.g==g){gl(d),pl(d),d.g=null;var x=2}else if(Nr(d.h,g))v=g.D,ll(d.h,g),x=1;else return;if(d.G!=0){if(g.o)if(x==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var B=d.B;x=ms(),Sn(x,new yi(x,v)),hl(d)}else fl(d);else if(B=g.s,B==3||B==0&&0<g.X||!(x==1&&Ep(d,g)||x==2&&Fd(d)))switch(v&&0<v.length&&(g=d.h,g.i=g.i.concat(v)),B){case 1:Do(d,5);break;case 4:Do(d,10);break;case 3:Do(d,6);break;default:Do(d,2)}}}function ml(d,g){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*g}function Do(d,g){if(d.j.info("Error code "+g),g==2){var v=C(d.fb,d),x=d.Xa;let B=!x;x=new Li(x||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Tt(x,"https"),ws(x),B?Pd(x.toString(),v):Od(x.toString(),v)}else kn(2);d.G=0,d.l&&d.l.sa(g),Bd(d),Ci(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),kn(2)):(this.j.info("Failed to ping google.com"),kn(1))};function Bd(d){if(d.G=0,d.ka=[],d.l){let g=Ve(d.h);(g.length!=0||d.i.length!=0)&&(q(d.ka,g),q(d.ka,d.i),d.h.i.length=0,G(d.i),d.i.length=0),d.l.ra()}}function jd(d,g,v){var x=v instanceof Li?Ln(v):new Li(v);if(x.g!="")g&&(x.g=g+"."+x.g),Fi(x,x.s);else{var B=l.location;x=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var $=new Li(null);x&&Tt($,x),g&&($.g=g),B&&Fi($,B),v&&($.l=v),x=$}return v=d.D,g=d.ya,v&&g&&ut(x,v,g),ut(x,"VER",d.la),Es(d,x),x}function Ha(d,g,v){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Pt(new Bt({eb:v})):new Pt(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fr(){}n=Fr.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function _l(){}_l.prototype.g=function(d,g){return new vn(d,g)};function vn(d,g){xn.call(this),this.g=new Cp(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!he(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!he(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Mo(this)}N(vn,xn),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){za(this.g)},vn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=_d(d),d=v);g.i.push(new Ra(g.Ya++,d)),g.G==3&&hl(g)},vn.prototype.N=function(){this.g.l=null,delete this.j,za(this.g),delete this.g,vn.aa.N.call(this)};function Jn(d){yd.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let v in g){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}N(Jn,yd);function Ud(){wd.call(this),this.status=1}N(Ud,wd);function Mo(d){this.g=d}N(Mo,Fr),Mo.prototype.ua=function(){Sn(this.g,"a")},Mo.prototype.ta=function(d){Sn(this.g,new Jn(d))},Mo.prototype.sa=function(d){Sn(this.g,new Ud)},Mo.prototype.ra=function(){Sn(this.g,"b")},_l.prototype.createWebChannel=_l.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,kI=is.createWebChannelTransport=function(){return new _l},NI=is.getStatEventTarget=function(){return ms()},RI=is.Event=Eo,mv=is.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,Sf=is.ErrorCode=tr,Cd.COMPLETE="complete",OI=is.EventType=Cd,op.EventType=Aa,Aa.OPEN="a",Aa.CLOSE="b",Aa.ERROR="c",Aa.MESSAGE="d",xn.prototype.listen=xn.prototype.K,Pu=is.WebChannel=op,_9=is.FetchXmlHttpFactory=Bt,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,PI=is.XhrIo=Pt}).apply(typeof gv<"u"?gv:typeof self<"u"?self:typeof window<"u"?window:{});var DN="@firebase/firestore",MN="4.8.0";var Pn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");var Ju="11.10.0";var jc=new co("@firebase/firestore");function Ou(){return jc.logLevel}function ae(n,...e){if(jc.logLevel<=Ge.DEBUG){let t=e.map(TS);jc.debug(`Firestore (${Ju}): ${n}`,...t)}}function rs(n,...e){if(jc.logLevel<=Ge.ERROR){let t=e.map(TS);jc.error(`Firestore (${Ju}): ${n}`,...t)}}function ga(n,...e){if(jc.logLevel<=Ge.WARN){let t=e.map(TS);jc.warn(`Firestore (${Ju}): ${n}`,...t)}}function TS(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Se(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,bk(n,i,t)}function bk(n,e,t){let i=`FIRESTORE (${Ju}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw rs(i),new Error(i)}function pt(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||bk(e,r,i)}function Fe(n,e){return n}var W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},oe=class extends Ri{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var po=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ev=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pn.UNAUTHENTICATED))}shutdown(){}},UI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zI=class{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pt(this.o===void 0,42304);let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),o=new po;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new po,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=o;e.enqueueRetryable(()=>D(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},l=u=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?l(u):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new po)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pt(typeof i.accessToken=="string",31837,{l:i}),new Ev(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new Pn(e)}},HI=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},$I=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new HI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Iv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pt(this.o===void 0,3512);let i=o=>{o.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?r(o):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Iv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Iv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function v9(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function Ck(){return new TextEncoder}var Of=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=v9(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}};function He(n,e){return n<e?-1:n>e?1:0}function GI(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return He(i,r);{let o=Ck(),a=y9(o.encode(AN(n,t)),o.encode(AN(e,t)));return a!==0?a:He(i,r)}}t+=i>65535?2:1}return He(n.length,e.length)}function AN(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function y9(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return He(n[t],e[t]);return He(n.length,e.length)}function ju(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var PN="__name__",xv=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=n.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return He(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):GI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ns.fromString(e.substring(4,e.length-2))}},Lt=class n extends xv{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new oe(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},w9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ki=class n extends xv{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return w9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PN}static keyField(){return new n([PN])}static fromServerFormat(e){let t=[],i="",r=0,o=()=>{if(i.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},a=!1;for(;r<e.length;){let l=e[r];if(l==="\\"){if(r+1===e.length)throw new oe(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new oe(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(o(),r++)}if(o(),a)throw new oe(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ce=class n{constructor(e){this.path=e}static fromPath(e){return new n(Lt.fromString(e))}static fromName(e){return new n(Lt.fromString(e).popFirst(5))}static empty(){return new n(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Lt(e.slice()))}};function Ek(n,e,t){if(!t)throw new oe(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function b9(n,e,t,i){if(e===!0&&i===!0)throw new oe(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ON(n){if(!Ce.isDocumentKey(n))throw new oe(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RN(n){if(Ce.isDocumentKey(n))throw new oe(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ik(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function oy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function go(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=oy(n);throw new oe(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mn(n,e){let t={typeString:n};return e&&(t.value=e),t}function zf(n,e){if(!Ik(n))throw new oe(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let a=n[i];if(r&&typeof a!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new oe(W.INVALID_ARGUMENT,t);return!0}var NN=-62135596800,kN=1e6,_n=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*kN);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<NN)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kN}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-NN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};_n._jsonSchemaVersion="firestore/timestamp/1.0",_n._jsonSchema={type:mn("string",_n._jsonSchemaVersion),seconds:mn("number"),nanoseconds:mn("number")};var je=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new _n(0,0))}static max(){return new n(new _n(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Rf=-1,WI=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};WI.UNKNOWN_ID=-1;function C9(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=je.fromTimestamp(i===1e9?new _n(t+1,0):new _n(t,i));return new Uc(r,Ce.empty(),e)}function E9(n){return new Uc(n.readTime,n.key,Rf)}var Uc=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(je.min(),Ce.empty(),Rf)}static max(){return new n(je.max(),Ce.empty(),Rf)}};function I9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}var x9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",KI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xu(n){return D(this,null,function*(){if(n.code!==W.FAILED_PRECONDITION||n.message!==x9)throw n;ae("LocalStore","Unexpectedly lost primary lease")})}var ee=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,o=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++o,a&&o===r&&t()},u=>i(u))}),a=!0,o===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let o=e.length,a=new Array(o),l=0;for(let u=0;u<o;u++){let f=u;t(e[f]).next(m=>{a[f]=m,++l,l===o&&i(a)},m=>r(m))}})}static doWhile(e,t){return new n((i,r)=>{let o=()=>{e()===!0?t().next(()=>{o()},r):i()};o()})}};function S9(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ed(n){return n.name==="IndexedDbTransactionError"}var DS=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this._e(r),this.ae=r=>i.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),MS=-1;function sy(n){return n==null}function Nf(n){return n===0&&1/n==-1/0}function T9(n){return typeof n=="number"&&Number.isInteger(n)&&!Nf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var xk="";function D9(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=LN(e)),e=M9(n.get(t),e);return LN(e)}function M9(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":t+="";break;case xk:t+="";break;default:t+=o}}return t}function LN(n){return n+xk+""}var A9="remoteDocuments",Sk="owner";var Tk="mutationQueues";var Dk="mutations";var Mk="documentMutations",P9="remoteDocumentsV14";var Ak="remoteDocumentGlobal";var Pk="targets";var Ok="targetDocuments";var Rk="targetGlobal",Nk="collectionParents";var kk="clientMetadata";var Lk="bundles";var Fk="namedQueries";var O9="indexConfiguration";var R9="indexState";var N9="indexEntries";var Vk="documentOverlays";var k9="globals";var L9=[Tk,Dk,Mk,A9,Pk,Sk,Rk,Ok,kk,Ak,Nk,Lk,Fk],cpe=[...L9,Vk],F9=[Tk,Dk,Mk,P9,Pk,Sk,Rk,Ok,kk,Ak,Nk,Lk,Fk,Vk],V9=F9,B9=[...V9,O9,R9,N9];var lpe=[...B9,k9];function FN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ba(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Bk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Zt=class n{constructor(e,t){this.comparator=e,this.root=t||mo.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mo.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lu(this.root,e,this.comparator,!0)}},Lu=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mo=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}};mo.EMPTY=null,mo.RED=!0,mo.BLACK=!1;mo.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new mo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var On=class n{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sv(this.data.getIterator())}getIteratorFrom(e){return new Sv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Sv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ji=class n{constructor(e){this.fields=e,e.sort(ki.comparator)}static empty(){return new n([])}unionWith(e){let t=new On(ki.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ju(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Tv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Zn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Tv("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Zn.EMPTY_BYTE_STRING=new Zn("");var j9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(n){if(pt(!!n,39018),typeof n=="string"){let e=0,t=j9.exec(n);if(pt(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:kt(n.seconds),nanos:kt(n.nanos)}}function kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ss(n){return typeof n=="string"?Zn.fromBase64String(n):Zn.fromUint8Array(n)}var jk="server_timestamp",Uk="__type__",zk="__previous_value__",Hk="__local_write_time__";function AS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Uk])===null||t===void 0?void 0:t.stringValue)===jk}function ay(n){let e=n.mapValue.fields[zk];return AS(e)?ay(e):e}function kf(n){let e=os(n.mapValue.fields[Hk].timestampValue);return new _n(e.seconds,e.nanos)}var ZI=class{constructor(e,t,i,r,o,a,l,u,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=m}},Dv="(default)",Mv=class n{constructor(e,t){this.projectId=e,this.database=t||Dv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Dv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var PS="__type__",$k="__max__",_v={mapValue:{fields:{__type__:{stringValue:$k}}}},OS="__vector__",Uu="value";function ma(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?AS(n)?4:Gk(n)?9007199254740991:qk(n)?10:11:Se(28295,{value:n})}function yo(n,e){if(n===e)return!0;let t=ma(n);if(t!==ma(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return kf(n).isEqual(kf(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=os(r.timestampValue),l=os(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return ss(r.bytesValue).isEqual(ss(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return kt(r.geoPointValue.latitude)===kt(o.geoPointValue.latitude)&&kt(r.geoPointValue.longitude)===kt(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return kt(r.integerValue)===kt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=kt(r.doubleValue),l=kt(o.doubleValue);return a===l?Nf(a)===Nf(l):isNaN(a)&&isNaN(l)}return!1})(n,e);case 9:return ju(n.arrayValue.values||[],e.arrayValue.values||[],yo);case 10:case 11:return(function(r,o){let a=r.mapValue.fields||{},l=o.mapValue.fields||{};if(FN(a)!==FN(l))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!yo(a[u],l[u])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function Lf(n,e){return(n.values||[]).find(t=>yo(t,e))!==void 0}function zu(n,e){if(n===e)return 0;let t=ma(n),i=ma(e);if(t!==i)return He(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return(function(o,a){let l=kt(o.integerValue||o.doubleValue),u=kt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(n,e);case 3:return VN(n.timestampValue,e.timestampValue);case 4:return VN(kf(n),kf(e));case 5:return GI(n.stringValue,e.stringValue);case 6:return(function(o,a){let l=ss(o),u=ss(a);return l.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,a){let l=o.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){let m=He(l[f],u[f]);if(m!==0)return m}return He(l.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,a){let l=He(kt(o.latitude),kt(a.latitude));return l!==0?l:He(kt(o.longitude),kt(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return BN(n.arrayValue,e.arrayValue);case 10:return(function(o,a){var l,u,f,m;let y=o.fields||{},C=a.fields||{},I=(l=y[Uu])===null||l===void 0?void 0:l.arrayValue,N=(u=C[Uu])===null||u===void 0?void 0:u.arrayValue,G=He(((f=I?.values)===null||f===void 0?void 0:f.length)||0,((m=N?.values)===null||m===void 0?void 0:m.length)||0);return G!==0?G:BN(I,N)})(n.mapValue,e.mapValue);case 11:return(function(o,a){if(o===_v.mapValue&&a===_v.mapValue)return 0;if(o===_v.mapValue)return 1;if(a===_v.mapValue)return-1;let l=o.fields||{},u=Object.keys(l),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let y=0;y<u.length&&y<m.length;++y){let C=GI(u[y],m[y]);if(C!==0)return C;let I=zu(l[u[y]],f[m[y]]);if(I!==0)return I}return He(u.length,m.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{le:t})}}function VN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);let t=os(n),i=os(e),r=He(t.seconds,i.seconds);return r!==0?r:He(t.nanos,i.nanos)}function BN(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let o=zu(t[r],i[r]);if(o)return o}return He(t.length,i.length)}function Hu(n){return YI(n)}function YI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=os(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ss(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let o of t.values||[])r?r=!1:i+=",",i+=YI(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${YI(t.fields[a])}`;return r+"}"})(n.mapValue):Se(61005,{value:n})}function wv(n){switch(ma(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ay(n);return e?16+wv(e):16;case 5:return 2*n.stringValue.length;case 6:return ss(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce((r,o)=>r+wv(o),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return ba(i.fields,(o,a)=>{r+=o.length+wv(a)}),r})(n.mapValue);default:throw Se(13486,{value:n})}}function jN(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function QI(n){return!!n&&"integerValue"in n}function RS(n){return!!n&&"arrayValue"in n}function UN(n){return!!n&&"nullValue"in n}function zN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bv(n){return!!n&&"mapValue"in n}function qk(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[PS])===null||t===void 0?void 0:t.stringValue)===OS}function Df(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ba(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Df(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Df(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Gk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$k}var dpe={mapValue:{fields:{[PS]:{stringValue:OS},[Uu]:{arrayValue:{}}}}};var Ni=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!bv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Df(t)}setAll(e){let t=ki.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){let u=this.getFieldsMap(t);this.applyChanges(u,i,r),i={},r=[],t=l.popLast()}a?i[l.lastSegment()]=Df(a):r.push(l.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){let t=this.field(e.popLast());bv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];bv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){ba(t,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new n(Df(this.value))}};function Wk(n){let e=[];return ba(n.fields,(t,i)=>{let r=new ki([t]);if(bv(i)){let o=Wk(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new Ji(e)}var Dr=class n{constructor(e,t,i,r,o,a,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new n(e,0,je.min(),je.min(),je.min(),Ni.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,je.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,je.min(),je.min(),Ni.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,je.min(),je.min(),Ni.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $u=class{constructor(e,t){this.position=e,this.inclusive=t}};function HN(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let o=e[r],a=n.position[r];if(o.field.isKeyField()?i=Ce.comparator(Ce.fromName(a.referenceValue),t.key):i=zu(a,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function $N(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yo(n.position[t],e.position[t]))return!1;return!0}var zc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function U9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Av=class{},gn=class n extends Av{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new XI(e,t,i):t==="array-contains"?new nx(e,i):t==="in"?new ix(e,i):t==="not-in"?new rx(e,i):t==="array-contains-any"?new ox(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new ex(e,i):new tx(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zu(t,this.value)):t!==null&&ma(this.value)===ma(t)&&this.matchesComparison(zu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Mr=class n extends Av{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Kk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Kk(n){return n.op==="and"}function Zk(n){return z9(n)&&Kk(n)}function z9(n){for(let e of n.filters)if(e instanceof Mr)return!1;return!0}function JI(n){if(n instanceof gn)return n.field.canonicalString()+n.op.toString()+Hu(n.value);if(Zk(n))return n.filters.map(e=>JI(e)).join(",");{let e=n.filters.map(t=>JI(t)).join(",");return`${n.op}(${e})`}}function Yk(n,e){return n instanceof gn?(function(i,r){return r instanceof gn&&i.op===r.op&&i.field.isEqual(r.field)&&yo(i.value,r.value)})(n,e):n instanceof Mr?(function(i,r){return r instanceof Mr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,l)=>o&&Yk(a,r.filters[l]),!0):!1})(n,e):void Se(19439)}function Qk(n){return n instanceof gn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Hu(t.value)}`})(n):n instanceof Mr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Qk).join(" ,")+"}"})(n):"Filter"}var XI=class extends gn{constructor(e,t,i){super(e,t,i),this.key=Ce.fromName(i.referenceValue)}matches(e){let t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}},ex=class extends gn{constructor(e,t){super(e,"in",t),this.keys=Jk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},tx=class extends gn{constructor(e,t){super(e,"not-in",t),this.keys=Jk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Jk(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Ce.fromName(i.referenceValue))}var nx=class extends gn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return RS(t)&&Lf(t.arrayValue,this.value)}},ix=class extends gn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Lf(this.value.arrayValue,t)}},rx=class extends gn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lf(this.value.arrayValue,t)}},ox=class extends gn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!RS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Lf(this.value.arrayValue,i))}};var sx=class{constructor(e,t=null,i=[],r=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=l,this.Pe=null}};function qN(n,e=null,t=[],i=[],r=null,o=null,a=null){return new sx(n,e,t,i,r,o,a)}function NS(n){let e=Fe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>JI(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(o){return o.field.canonicalString()+o.dir})(i)).join(","),sy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Hu(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Hu(i)).join(",")),e.Pe=t}return e.Pe}function kS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!U9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Yk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$N(n.startAt,e.startAt)&&$N(n.endAt,e.endAt)}function ax(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var _a=class{constructor(e,t=null,i=[],r=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function H9(n,e,t,i,r,o,a,l){return new _a(n,e,t,i,r,o,a,l)}function cy(n){return new _a(n)}function GN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Xk(n){return n.collectionGroup!==null}function Mf(n){let e=Fe(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new On(ki.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new zc(o,i))}),t.has(ki.keyField().canonicalString())||e.Te.push(new zc(ki.keyField(),i))}return e.Te}function _o(n){let e=Fe(n);return e.Ie||(e.Ie=$9(e,Mf(n))),e.Ie}function $9(n,e){if(n.limitType==="F")return qN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new zc(r.field,o)});let t=n.endAt?new $u(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new $u(n.startAt.position,n.startAt.inclusive):null;return qN(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function cx(n,e){let t=n.filters.concat([e]);return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lx(n,e,t){return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ly(n,e){return kS(_o(n),_o(e))&&n.limitType===e.limitType}function e2(n){return`${NS(_o(n))}|lt:${n.limitType}`}function Ru(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>Qk(r)).join(", ")}]`),sy(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Hu(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Hu(r)).join(",")),`Target(${i})`})(_o(n))}; limitType=${n.limitType})`}function uy(n,e){return e.isFoundDocument()&&(function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(let o of Mf(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(a,l,u){let f=HN(a,l,u);return a.inclusive?f<=0:f<0})(i.startAt,Mf(i),r)||i.endAt&&!(function(a,l,u){let f=HN(a,l,u);return a.inclusive?f>=0:f>0})(i.endAt,Mf(i),r))})(n,e)}function q9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function t2(n){return(e,t)=>{let i=!1;for(let r of Mf(n)){let o=G9(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function G9(n,e,t){let i=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(o,a,l){let u=a.data.field(o),f=l.data.field(o);return u!==null&&f!==null?zu(u,f):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:n.dir})}}var as=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ba(this.inner,(t,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return Bk(this.inner)}size(){return this.innerSize}};var W9=new Zt(Ce.comparator);function cs(){return W9}var n2=new Zt(Ce.comparator);function Tf(...n){let e=n2;for(let t of n)e=e.insert(t.key,t);return e}function i2(n){let e=n2;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Lc(){return Af()}function r2(){return Af()}function Af(){return new as(n=>n.toString(),(n,e)=>n.isEqual(e))}var K9=new Zt(Ce.comparator),Z9=new On(Ce.comparator);function Ye(...n){let e=Z9;for(let t of n)e=e.add(t);return e}var Y9=new On(He);function Q9(){return Y9}function LS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nf(e)?"-0":e}}function o2(n){return{integerValue:""+n}}function J9(n,e){return T9(e)?o2(e):LS(n,e)}var qu=class{constructor(){this._=void 0}};function X9(n,e,t){return n instanceof Hc?(function(r,o){let a={fields:{[Uk]:{stringValue:jk},[Hk]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&AS(o)&&(o=ay(o)),o&&(a.fields[zk]=o),{mapValue:a}})(t,e):n instanceof $c?a2(n,e):n instanceof qc?c2(n,e):(function(r,o){let a=s2(r,o),l=WN(a)+WN(r.Ee);return QI(a)&&QI(r.Ee)?o2(l):LS(r.serializer,l)})(n,e)}function eq(n,e,t){return n instanceof $c?a2(n,e):n instanceof qc?c2(n,e):t}function s2(n,e){return n instanceof Gu?(function(i){return QI(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}var Hc=class extends qu{},$c=class extends qu{constructor(e){super(),this.elements=e}};function a2(n,e){let t=l2(e);for(let i of n.elements)t.some(r=>yo(r,i))||t.push(i);return{arrayValue:{values:t}}}var qc=class extends qu{constructor(e){super(),this.elements=e}};function c2(n,e){let t=l2(e);for(let i of n.elements)t=t.filter(r=>!yo(r,i));return{arrayValue:{values:t}}}var Gu=class extends qu{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function WN(n){return kt(n.integerValue||n.doubleValue)}function l2(n){return RS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ux=class{constructor(e,t){this.field=e,this.transform=t}};function tq(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof $c&&r instanceof $c||i instanceof qc&&r instanceof qc?ju(i.elements,r.elements,yo):i instanceof Gu&&r instanceof Gu?yo(i.Ee,r.Ee):i instanceof Hc&&r instanceof Hc})(n.transform,e.transform)}var dx=class{constructor(e,t){this.version=e,this.transformResults=t}},ua=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Cv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Wu=class{};function u2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pv(n.key,ua.none()):new Gc(n.key,n.data,ua.none());{let t=n.data,i=Ni.empty(),r=new On(ki.comparator);for(let o of e.fields)if(!r.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new wo(n.key,i,new Ji(r.toArray()),ua.none())}}function nq(n,e,t){n instanceof Gc?(function(r,o,a){let l=r.value.clone(),u=ZN(r.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):n instanceof wo?(function(r,o,a){if(!Cv(r.precondition,o))return void o.convertToUnknownDocument(a.version);let l=ZN(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(d2(r)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):(function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Pf(n,e,t,i){return n instanceof Gc?(function(o,a,l,u){if(!Cv(o.precondition,a))return l;let f=o.value.clone(),m=YN(o.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof wo?(function(o,a,l,u){if(!Cv(o.precondition,a))return l;let f=YN(o.fieldTransforms,u,a),m=a.data;return m.setAll(d2(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))})(n,e,t,i):(function(o,a,l){return Cv(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(n,e,t)}function iq(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),o=s2(i.transform,r||null);o!=null&&(t===null&&(t=Ni.empty()),t.set(i.field,o))}return t||null}function KN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ju(i,r,(o,a)=>tq(o,a))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Gc=class extends Wu{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},wo=class extends Wu{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function d2(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function ZN(n,e,t){let i=new Map;pt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let r=0;r<t.length;r++){let o=n[r],a=o.transform,l=e.data.field(o.field);i.set(o.field,eq(a,l,t[r]))}return i}function YN(n,e,t){let i=new Map;for(let r of n){let o=r.transform,a=t.data.field(r.field);i.set(r.field,X9(o,a,e))}return i}var Pv=class extends Wu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},hx=class extends Wu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fx=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&nq(o,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Pf(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Pf(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=r2();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,l=this.applyToLocalView(a,o.mutatedFields);l=t.has(r.key)?null:l;let u=u2(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(je.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&ju(this.mutations,e.mutations,(t,i)=>KN(t,i))&&ju(this.baseMutations,e.baseMutations,(t,i)=>KN(t,i))}},px=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){pt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return K9})(),o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new n(e,t,i,r)}};var gx=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mx=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var fn,it;function rq(n){switch(n){case W.OK:return Se(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function h2(n){if(n===void 0)return rs("GRPC error has no .code"),W.UNKNOWN;switch(n){case fn.OK:return W.OK;case fn.CANCELLED:return W.CANCELLED;case fn.UNKNOWN:return W.UNKNOWN;case fn.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case fn.INTERNAL:return W.INTERNAL;case fn.UNAVAILABLE:return W.UNAVAILABLE;case fn.UNAUTHENTICATED:return W.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case fn.NOT_FOUND:return W.NOT_FOUND;case fn.ALREADY_EXISTS:return W.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return W.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case fn.ABORTED:return W.ABORTED;case fn.OUT_OF_RANGE:return W.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return W.UNIMPLEMENTED;case fn.DATA_LOSS:return W.DATA_LOSS;default:return Se(39323,{code:n})}}(it=fn||(fn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";var QN=null;var oq=new ns([4294967295,4294967295],0);function JN(n){let e=Ck().encode(n),t=new AI;return t.update(e),new Uint8Array(t.digest())}function XN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ns([t,i],0),new ns([r,o],0)]}var _x=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Fc(`Invalid padding: ${t}`);if(i<0)throw new Fc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Fc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Fc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ns.fromNumber(this.fe)}pe(e,t,i){let r=e.add(t.multiply(ns.fromNumber(i)));return r.compare(oq)===1&&(r=new ns([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=JN(e),[i,r]=XN(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(i,r,o);if(!this.ye(a))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,r,t);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;let t=JN(e),[i,r]=XN(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(i,r,o);this.we(a)}}we(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},Fc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ov=class n{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Ff.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(je.min(),r,new Zt(He),cs(),Ye())}},Ff=class n{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,Ye(),Ye(),Ye())}};var Fu=class{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=r}},Rv=class{constructor(e,t){this.targetId=e,this.De=t}},Nv=class{constructor(e,t,i=Zn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},kv=class{constructor(){this.ve=0,this.Ce=ek(),this.Fe=Zn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ye(),t=Ye(),i=Ye();return this.Ce.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Se(38017,{changeType:o})}}),new Ff(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=ek()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},vx=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=cs(),this.je=vv(),this.Je=vv(),this.He=new Zt(He)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Se(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,r)=>{this.nt(r)&&t(r)})}it(e){let t=e.targetId,i=e.De.count,r=this.st(t);if(r){let o=r.target;if(ax(o))if(i===0){let a=new Ce(o.path);this.Xe(t,a,Dr.newNoDocument(a,je.min()))}else pt(i===1,20013,{expectedCount:i});else{let a=this.ot(t);if(a!==i){let l=this._t(e),u=l?this.ut(l,e,a):1;if(u!==0){this.rt(t);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,f)}QN?.ct((function(m,y,C,I,N){var G,q,Q,he,ye,Qe;let Yt={localCacheCount:m,existenceFilterCount:y.count,databaseId:C.database,projectId:C.projectId},st=y.unchangedNames;return st&&(Yt.bloomFilter={applied:N===0,hashCount:(G=st?.hashCount)!==null&&G!==void 0?G:0,bitmapLength:(he=(Q=(q=st?.bits)===null||q===void 0?void 0:q.bitmap)===null||Q===void 0?void 0:Q.length)!==null&&he!==void 0?he:0,padding:(Qe=(ye=st?.bits)===null||ye===void 0?void 0:ye.padding)!==null&&Qe!==void 0?Qe:0,mightContain:k=>{var M;return(M=I?.mightContain(k))!==null&&M!==void 0&&M}}),Yt})(a,e.De,this.We.lt(),l,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t,a,l;try{a=ss(i).toUint8Array()}catch(u){if(u instanceof Tv)return ga("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new _x(a,r,o)}catch(u){return ga(u instanceof Fc?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){let i=this.We.getRemoteKeysForTarget(t),r=0;return i.forEach(o=>{let a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Xe(t,o,null),r++)}),r}Pt(e){let t=new Map;this.Ge.forEach((o,a)=>{let l=this.st(a);if(l){if(o.current&&ax(l.target)){let u=new Ce(l.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,Dr.newNoDocument(u,e))}o.Ne&&(t.set(a,o.Le()),o.ke())}});let i=Ye();this.Je.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{let f=this.st(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.ze.forEach((o,a)=>a.setReadTime(e));let r=new Ov(e,t,this.He,this.ze,i);return this.ze=cs(),this.je=vv(),this.Je=vv(),this.He=new Zt(He),r}Ze(e,t){if(!this.nt(e))return;let i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;let r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new kv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new On(He),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new On(He),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new kv),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function vv(){return new Zt(Ce.comparator)}function ek(){return new Zt(Ce.comparator)}var sq={asc:"ASCENDING",desc:"DESCENDING"},aq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cq={and:"AND",or:"OR"},yx=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function wx(n,e){return n.useProto3Json||sy(e)?e:{value:e}}function Lv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lq(n,e){return Lv(n,e.toTimestamp())}function vo(n){return pt(!!n,49232),je.fromTimestamp((function(t){let i=os(t);return new _n(i.seconds,i.nanos)})(n))}function FS(n,e){return bx(n,e).canonicalString()}function bx(n,e){let t=(function(r){return new Lt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function p2(n){let e=Lt.fromString(n);return pt(y2(e),10190,{key:e.toString()}),e}function Cx(n,e){return FS(n.databaseId,e.path)}function LI(n,e){let t=p2(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(m2(t))}function g2(n,e){return FS(n.databaseId,e)}function uq(n){let e=p2(n);return e.length===4?Lt.emptyPath():m2(e)}function Ex(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function m2(n){return pt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function tk(n,e,t){return{name:Cx(n,e),fields:t.value.mapValue.fields}}function dq(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Se(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,m){return f.useProto3Json?(pt(m===void 0||typeof m=="string",58123),Zn.fromBase64String(m||"")):(pt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Zn.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&(function(f){let m=f.code===void 0?W.UNKNOWN:h2(f.code);return new oe(m,f.message||"")})(a);t=new Nv(i,r,o,l||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=LI(n,i.document.name),o=vo(i.document.updateTime),a=i.document.createTime?vo(i.document.createTime):je.min(),l=new Ni({mapValue:{fields:i.document.fields}}),u=Dr.newFoundDocument(r,o,a,l),f=i.targetIds||[],m=i.removedTargetIds||[];t=new Fu(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=LI(n,i.document),o=i.readTime?vo(i.readTime):je.min(),a=Dr.newNoDocument(r,o),l=i.removedTargetIds||[];t=new Fu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=LI(n,i.document),o=i.removedTargetIds||[];t=new Fu([],o,r,null)}else{if(!("filter"in e))return Se(11601,{At:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new mx(r,o),l=i.targetId;t=new Rv(l,a)}}return t}function hq(n,e){let t;if(e instanceof Gc)t={update:tk(n,e.key,e.value)};else if(e instanceof Pv)t={delete:Cx(n,e.key)};else if(e instanceof wo)t={update:tk(n,e.key,e.data),updateMask:bq(e.fieldMask)};else{if(!(e instanceof hx))return Se(16599,{Rt:e.type});t={verify:Cx(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>(function(o,a){let l=a.transform;if(l instanceof Hc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof $c)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof qc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Gu)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw Se(20930,{transform:a.transform})})(0,i))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:lq(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Se(27497)})(n,e.precondition)),t}function fq(n,e){return n&&n.length>0?(pt(e!==void 0,14353),n.map(t=>(function(r,o){let a=r.updateTime?vo(r.updateTime):vo(o);return a.isEqual(je.min())&&(a=vo(o)),new dx(a,r.transformResults||[])})(t,e))):[]}function pq(n,e){return{documents:[g2(n,e.path)]}}function gq(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=g2(n,r);let o=(function(f){if(f.length!==0)return v2(Mr.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let a=(function(f){if(f.length!==0)return f.map(m=>(function(C){return{field:Nu(C.field),direction:vq(C.dir)}})(m))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let l=wx(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:t,parent:r}}function mq(n){let e=uq(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){pt(i===1,65062);let m=t.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(y){let C=_2(y);return C instanceof Mr&&Zk(C)?C.getFilters():[C]})(t.where));let a=[];t.orderBy&&(a=(function(y){return y.map(C=>(function(N){return new zc(ku(N.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(C))})(t.orderBy));let l=null;t.limit&&(l=(function(y){let C;return C=typeof y=="object"?y.value:y,sy(C)?null:C})(t.limit));let u=null;t.startAt&&(u=(function(y){let C=!!y.before,I=y.values||[];return new $u(I,C)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){let C=!y.before,I=y.values||[];return new $u(I,C)})(t.endAt)),H9(e,r,a,o,l,"F",u,f)}function _q(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _2(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=ku(t.unaryFilter.field);return gn.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ku(t.unaryFilter.field);return gn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ku(t.unaryFilter.field);return gn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=ku(t.unaryFilter.field);return gn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return gn.create(ku(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Mr.create(t.compositeFilter.filters.map(i=>_2(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function vq(n){return sq[n]}function yq(n){return aq[n]}function wq(n){return cq[n]}function Nu(n){return{fieldPath:n.canonicalString()}}function ku(n){return ki.fromServerFormat(n.fieldPath)}function v2(n){return n instanceof gn?(function(t){if(t.op==="=="){if(zN(t.value))return{unaryFilter:{field:Nu(t.field),op:"IS_NAN"}};if(UN(t.value))return{unaryFilter:{field:Nu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zN(t.value))return{unaryFilter:{field:Nu(t.field),op:"IS_NOT_NAN"}};if(UN(t.value))return{unaryFilter:{field:Nu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nu(t.field),op:yq(t.op),value:t.value}}})(n):n instanceof Mr?(function(t){let i=t.getFilters().map(r=>v2(r));return i.length===1?i[0]:{compositeFilter:{op:wq(t.op),filters:i}}})(n):Se(54877,{filter:n})}function bq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function y2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Vf=class n{constructor(e,t,i,r,o=je.min(),a=je.min(),l=Zn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ix=class{constructor(e){this.gt=e}};function Cq(n){let e=mq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lx(e,e.limit,"L"):e}var Fv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(kt(e.integerValue));else if("doubleValue"in e){let i=kt(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),Nf(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),typeof i=="string"&&(i=os(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ss(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?Gk(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):qk(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Se(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let i=e.fields||{};this.Ct(t,55);for(let r of Object.keys(i))this.xt(r,t),this.Dt(i[r],t)}Lt(e,t){var i,r;let o=e.fields||{};this.Ct(t,53);let a=Uu,l=((r=(i=o[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Ct(t,15),t.Ft(kt(l)),this.xt(a,t),this.Dt(o[a],t)}qt(e,t){let i=e.values||[];this.Ct(t,50);for(let r of i)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),Ce.fromName(e).path.forEach(i=>{this.Ct(t,60),this.$t(i,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Fv.Ut=new Fv;var xx=class{constructor(){this.Dn=new Sx}addToCollectionParentIndex(e,t){return this.Dn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Uc.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Uc.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}},Sx=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new On(Lt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new On(Lt.comparator)).toArray()}};var hpe=new Uint8Array(0);var nk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w2=41943040,Qi=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Qi.DEFAULT_COLLECTION_PERCENTILE=10,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qi.DEFAULT=new Qi(w2,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qi.DISABLED=new Qi(-1,0,0);var Bf=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var ik="LruGarbageCollector",Eq=1048576;function rk([n,e],[t,i]){let r=He(n,t);return r===0?He(e,i):r}var Tx=class{constructor(e){this.Tr=e,this.buffer=new On(rk),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();rk(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},Dx=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ae(ik,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>D(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ed(t)?ae(ik,"Ignoring IndexedDB error during garbage collection: ",t):yield Xu(t)}yield this.Rr(3e5)}))}},Mx=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(DS.ue);let i=new Tx(t);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(nk)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nk):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,r,o,a,l,u,f,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,a=Date.now(),this.nthSequenceNumber(e,r))).next(y=>(i=y,l=Date.now(),this.removeTargets(e,i,t))).next(y=>(o=y,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(y=>(f=Date.now(),Ou()<=Ge.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${y} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:y})))}};function Iq(n,e){return new Mx(n,e)}var Ax=class{constructor(){this.changes=new as(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Px=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ox=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Pf(i.mutation,r,Ji.empty(),_n.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ye()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ye()){let r=Lc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let a=Tf();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let i=Lc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ye()))}populateOverlays(e,t,i){let r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,i,r){let o=cs(),a=Af(),l=(function(){return Af()})();return t.forEach((u,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof wo)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Pf(m.mutation,f,m.mutation.getFieldMask(),_n.now())):a.set(f.key,Ji.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,m)=>a.set(f,m)),t.forEach((f,m)=>{var y;return l.set(f,new Px(m,(y=a.get(f))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,t){let i=Af(),r=new Zt((a,l)=>a-l),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let l of a)l.keys().forEach(u=>{let f=t.get(u);if(f===null)return;let m=i.get(u)||Ji.empty();m=l.applyToLocalView(f,m),i.set(u,m);let y=(r.get(l.batchId)||Ye()).add(u);r=r.insert(l.batchId,y)})}).next(()=>{let a=[],l=r.getReverseIterator();for(;l.hasNext();){let u=l.getNext(),f=u.key,m=u.value,y=r2();m.forEach(C=>{if(!o.has(C)){let I=u2(t.get(C),i.get(C));I!==null&&y.set(C,I),o=o.add(C)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ee.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(a){return Ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):ee.resolve(Lc()),l=Rf,u=o;return a.next(f=>ee.forEach(f,(m,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),o.get(m)?ee.resolve():this.remoteDocumentCache.getEntry(e,m).next(C=>{u=u.insert(m,C)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,Ye())).next(m=>({batchId:l,changes:i2(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next(i=>{let r=Tf();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let o=t.collectionGroup,a=Tf();return this.indexManager.getCollectionParents(e,o).next(l=>ee.forEach(l,u=>{let f=(function(y,C){return new _a(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((y,C)=>{a=a.insert(y,C)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(a=>{o.forEach((u,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,Dr.newInvalidDocument(m)))});let l=Tf();return a.forEach((u,f)=>{let m=o.get(u);m!==void 0&&Pf(m.mutation,f,Ji.empty(),_n.now()),uy(t,f)&&(l=l.insert(u,f))}),l})}};var Rx=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:vo(r.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(r){return{name:r.name,query:Cq(r.bundledQuery),readTime:vo(r.readTime)}})(t)),ee.resolve()}};var Nx=class{constructor(){this.overlays=new Zt(Ce.comparator),this.kr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Lc();return ee.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.wt(e,t,o)}),ee.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.kr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){let r=Lc(),o=t.length+1,a=new Ce(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){let u=l.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return ee.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new Zt((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Lc(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let l=Lc(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=r)););return ee.resolve(l)}wt(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new gx(t,i));let o=this.kr.get(t);o===void 0&&(o=Ye(),this.kr.set(t,o)),this.kr.set(t,o.add(i.key))}};var kx=class{constructor(){this.sessionToken=Zn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}};var jf=class{constructor(){this.qr=new On(pn.Qr),this.$r=new On(pn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let i=new pn(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new pn(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){let t=new Ce(new Lt([])),i=new pn(t,e),r=new pn(t,e+1),o=[];return this.$r.forEachInRange([i,r],a=>{this.Wr(a),o.push(a.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Ce(new Lt([])),i=new pn(t,e),r=new pn(t,e+1),o=Ye();return this.$r.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new pn(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},pn=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ce.comparator(e.key,t.key)||He(e.Hr,t.Hr)}static Ur(e,t){return He(e.Hr,t.Hr)||Ce.comparator(e.key,t.key)}};var Lx=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new On(pn.Qr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new fx(o,t,i,r);this.mutationQueue.push(a);for(let l of r)this.Yr=this.Yr.add(new pn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ee.resolve(a)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Xr(i),o=r<0?0:r;return ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?MS:this.er-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new pn(t,0),r=new pn(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],a=>{let l=this.Zr(a.Hr);o.push(l)}),ee.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new On(He);return t.forEach(r=>{let o=new pn(r,0),a=new pn(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,a],l=>{i=i.add(l.Hr)})}),ee.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=i;Ce.isDocumentKey(o)||(o=o.child(""));let a=new pn(new Ce(o),0),l=new On(He);return this.Yr.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(u.Hr)),!0)},a),ee.resolve(this.ei(l))}ei(e){let t=[];return e.forEach(i=>{let r=this.Zr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){pt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ee.forEach(t.mutations,r=>{let o=new pn(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){let i=new pn(t,0),r=this.Yr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Fx=class{constructor(e){this.ni=e,this.docs=(function(){return new Zt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),o=r?r.size:0,a=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():Dr.newInvalidDocument(t))}getEntries(e,t){let i=cs();return t.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Dr.newInvalidDocument(r))}),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=cs(),a=t.path,l=new Ce(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){let{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||I9(E9(m),i)<=0||(r.has(m.key)||uy(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ee.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Se(9500)}ri(e,t){return ee.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Vx(this)}getSize(e){return ee.resolve(this.size)}},Vx=class extends Ax{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),ee.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var Bx=class{constructor(e){this.persistence=e,this.ii=new as(t=>NS(t),kS),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.si=0,this.oi=new jf,this.targetCount=0,this._i=Bf.ar()}forEachTarget(e,t){return this.ii.forEach((i,r)=>t(r)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),ee.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Bf(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.hr(t),ee.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let r=0,o=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.ii.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),ee.waitFor(o).next(()=>r)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){let i=this.ii.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);let r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),ee.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){let i=this.oi.Jr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this.oi.containsKey(t))}};var Vv=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new DS(0),this.ci=!1,this.ci=!0,this.li=new kx,this.referenceDelegate=e(this),this.hi=new Bx(this),this.indexManager=new xx,this.remoteDocumentCache=(function(r){return new Fx(r)})(i=>this.referenceDelegate.Pi(i)),this.serializer=new Ix(t),this.Ti=new Rx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Nx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new Lx(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ae("MemoryPersistence","Starting transaction:",e);let r=new jx(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ei(e,t){return ee.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}},jx=class extends KI{constructor(e){super(),this.currentSequenceNumber=e}},Ux=class n{constructor(e){this.persistence=e,this.Ai=new jf,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Se(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(r=>this.mi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.mi,i=>{let r=Ce.fromPath(i);return this.fi(e,r).next(o=>{o||t.removeEntry(r,je.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ee.or([()=>ee.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Bv=class n{constructor(e,t){this.persistence=e,this.gi=new as(i=>D9(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=Iq(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return ee.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(o=>o?ee.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,a=>this.Sr(e,a,t).next(l=>{l||(i++,o.removeEntry(a,je.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wv(e.data.value)),t}Sr(e,t,i){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.gi.get(t);return ee.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var zx=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=r}static Es(e,t){let i=Ye(),r=Ye();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(e,t.fromCache,i,r)}};var Hx=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var $x=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return zO()?8:S9(An())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,r){let o={result:null};return this.ps(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ys(e,t,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new Hx;return this.ws(e,t,a).next(l=>{if(o.result=l,this.Rs)return this.Ss(e,t,a,l.size)})}).next(()=>o.result)}Ss(e,t,i,r){return i.documentReadCount<this.Vs?(Ou()<=Ge.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Ru(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(Ou()<=Ge.DEBUG&&ae("QueryEngine","Query:",Ru(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Ou()<=Ge.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Ru(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_o(t))):ee.resolve())}ps(e,t){if(GN(t))return ee.resolve(null);let i=_o(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=lx(t,null,"F"),i=_o(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let a=Ye(...o);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.bs(t,l);return this.Ds(t,f,a,u.readTime)?this.ps(e,lx(t,null,"F")):this.vs(e,f,t,u)}))})))}ys(e,t,i,r){return GN(t)||r.isEqual(je.min())?ee.resolve(null):this.gs.getDocuments(e,i).next(o=>{let a=this.bs(t,o);return this.Ds(t,a,i,r)?ee.resolve(null):(Ou()<=Ge.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ru(t)),this.vs(e,a,t,C9(r,Rf)).next(l=>l))})}bs(e,t){let i=new On(t2(e));return t.forEach((r,o)=>{uy(e,o)&&(i=i.add(o))}),i}Ds(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,t,i){return Ou()<=Ge.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Ru(t)),this.gs.getDocumentsMatchingQuery(e,t,Uc.min(),i)}vs(e,t,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var VS="LocalStore",xq=3e8,qx=class{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Zt(He),this.Ms=new as(o=>NS(o),kS),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ox(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Sq(n,e,t,i){return new qx(n,e,t,i)}function b2(n,e){return D(this,null,function*(){let t=Fe(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],l=[],u=Ye();for(let f of r){a.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}for(let f of o){l.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}return t.localDocuments.getDocuments(i,u).next(f=>({Bs:f,removedBatchIds:a,addedBatchIds:l}))})})})}function Tq(n,e){let t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(l,u,f,m){let y=f.batch,C=y.keys(),I=ee.resolve();return C.forEach(N=>{I=I.next(()=>m.getEntry(u,N)).next(G=>{let q=f.docVersions.get(N);pt(q!==null,48541),G.version.compareTo(q)<0&&(y.applyToRemoteDocument(G,f),G.isValidDocument()&&(G.setReadTime(f.commitVersion),m.addEntry(G)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(u,y))})(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(l){let u=Ye();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u})(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function C2(n){let e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Dq(n,e){let t=Fe(n),i=e.snapshotVersion,r=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.Os.newChangeBuffer({trackRemovals:!0});r=t.Fs;let l=[];e.targetChanges.forEach((m,y)=>{let C=r.get(y);if(!C)return;l.push(t.hi.removeMatchingKeys(o,m.removedDocuments,y).next(()=>t.hi.addMatchingKeys(o,m.addedDocuments,y)));let I=C.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?I=I.withResumeToken(Zn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,i)),r=r.insert(y,I),(function(G,q,Q){return G.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=xq?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(C,I,m)&&l.push(t.hi.updateTargetData(o,I))});let u=cs(),f=Ye();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),l.push(Mq(o,a,e.documentUpdates).next(m=>{u=m.Ls,f=m.ks})),!i.isEqual(je.min())){let m=t.hi.getLastRemoteSnapshotVersion(o).next(y=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(m)}return ee.waitFor(l).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(t.Fs=r,o))}function Mq(n,e,t){let i=Ye(),r=Ye();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=cs();return t.forEach((l,u)=>{let f=o.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(je.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):ae(VS,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{Ls:a,ks:r}})}function Aq(n,e){let t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=MS),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Pq(n,e){let t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.hi.getTargetData(i,e).next(o=>o?(r=o,ee.resolve(r)):t.hi.allocateTargetId(i).next(a=>(r=new Vf(e,a,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}function Gx(n,e,t){return D(this,null,function*(){let i=Fe(n),r=i.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!ed(a))throw a;ae(VS,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)})}function ok(n,e,t){let i=Fe(n),r=je.min(),o=Ye();return i.persistence.runTransaction("Execute query","readwrite",a=>(function(u,f,m){let y=Fe(u),C=y.Ms.get(m);return C!==void 0?ee.resolve(y.Fs.get(C)):y.hi.getTargetData(f,m)})(i,a,_o(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,t?r:je.min(),t?o:Ye())).next(l=>(Oq(i,q9(e),l),{documents:l,qs:o})))}function Oq(n,e,t){let i=n.xs.get(e)||je.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.xs.set(e,i)}var jv=class{constructor(){this.activeTargetIds=Q9()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Wx=class{constructor(){this.Fo=new jv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new jv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Kx=class{xo(e){}shutdown(){}};var sk="ConnectivityMonitor",Uv=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ae(sk,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ae(sk,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var yv=null;function Zx(){return yv===null?yv=(function(){return 268435456+Math.round(2147483648*Math.random())})():yv++,"0x"+yv.toString(16)}var FI="RestConnection",Rq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Yx=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Dv?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,o){let a=Zx(),l=this.Go(e,t.toUriEncodedString());ae(FI,`Sending RPC '${e}' ${a}:`,l,i);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,r,o);let{host:f}=new URL(l),m=ta(f);return this.jo(e,l,u,i,m).then(y=>(ae(FI,`Received RPC '${e}' ${a}: `,y),y),y=>{throw ga(FI,`RPC '${e}' ${a} failed with error: `,y,"url: ",l,"request:",i),y})}Jo(e,t,i,r,o,a){return this.Wo(e,t,i,r,o)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ju})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}Go(e,t){let i=Rq[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}};var Qx=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Kn="WebChannelConnection",Jx=class extends Yx{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,r,o){let a=Zx();return new Promise((l,u)=>{let f=new PI;f.setWithCredentials(!0),f.listenOnce(OI.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Sf.NO_ERROR:let y=f.getResponseJson();ae(Kn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),l(y);break;case Sf.TIMEOUT:ae(Kn,`RPC '${e}' ${a} timed out`),u(new oe(W.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:let C=f.getStatus();if(ae(Kn,`RPC '${e}' ${a} failed with status:`,C,"response text:",f.getResponseText()),C>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);let N=I?.error;if(N&&N.status&&N.message){let G=(function(Q){let he=Q.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(he)>=0?he:W.UNKNOWN})(N.status);u(new oe(G,N.message))}else u(new oe(W.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new oe(W.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{c_:e,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{ae(Kn,`RPC '${e}' ${a} completed.`)}});let m=JSON.stringify(r);ae(Kn,`RPC '${e}' ${a} sending request:`,r),f.send(t,"POST",m,i,15)})}P_(e,t,i){let r=Zx(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=kI(),l=NI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,i),u.encodeInitMessageHeaders=!0;let m=o.join("");ae(Kn,`Creating RPC '${e}' stream ${r}: ${m}`,u);let y=a.createWebChannel(m,u);this.T_(y);let C=!1,I=!1,N=new Qx({Ho:q=>{I?ae(Kn,`Not sending because RPC '${e}' stream ${r} is closed:`,q):(C||(ae(Kn,`Opening RPC '${e}' stream ${r} transport.`),y.open(),C=!0),ae(Kn,`RPC '${e}' stream ${r} sending:`,q),y.send(q))},Yo:()=>y.close()}),G=(q,Q,he)=>{q.listen(Q,ye=>{try{he(ye)}catch(Qe){setTimeout(()=>{throw Qe},0)}})};return G(y,Pu.EventType.OPEN,()=>{I||(ae(Kn,`RPC '${e}' stream ${r} transport opened.`),N.s_())}),G(y,Pu.EventType.CLOSE,()=>{I||(I=!0,ae(Kn,`RPC '${e}' stream ${r} transport closed`),N.__(),this.I_(y))}),G(y,Pu.EventType.ERROR,q=>{I||(I=!0,ga(Kn,`RPC '${e}' stream ${r} transport errored. Name:`,q.name,"Message:",q.message),N.__(new oe(W.UNAVAILABLE,"The operation could not be completed")))}),G(y,Pu.EventType.MESSAGE,q=>{var Q;if(!I){let he=q.data[0];pt(!!he,16349);let ye=he,Qe=ye?.error||((Q=ye[0])===null||Q===void 0?void 0:Q.error);if(Qe){ae(Kn,`RPC '${e}' stream ${r} received error:`,Qe);let Yt=Qe.status,st=(function(A){let R=fn[A];if(R!==void 0)return h2(R)})(Yt),k=Qe.message;st===void 0&&(st=W.INTERNAL,k="Unknown error status: "+Yt+" with message "+Qe.message),I=!0,N.__(new oe(st,k)),y.close()}else ae(Kn,`RPC '${e}' stream ${r} received:`,he),N.a_(he)}}),G(l,RI.STAT_EVENT,q=>{q.stat===mv.PROXY?ae(Kn,`RPC '${e}' stream ${r} detected buffering proxy`):q.stat===mv.NOPROXY&&ae(Kn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{N.o_()},0),N}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function VI(){return typeof document<"u"?document:null}function dy(n){return new yx(n,!0)}var zv=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-i);r>0&&ae("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var ak="PersistentStream",Hv=class{constructor(e,t,i,r,o,a,l,u){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new zv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return D(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return D(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return D(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(rs(t.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===t&&this.W_(i,r)},i=>{e(()=>{let r=new oe(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,t){let i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(()=>D(this,null,function*(){this.state=0,this.start()}))}G_(e){return ae(ak,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ae(ak,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Xx=class extends Hv{constructor(e,t,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=dq(this.serializer,e),i=(function(o){if(!("targetChange"in o))return je.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?je.min():a.readTime?vo(a.readTime):je.min()})(e);return this.listener.J_(t,i)}H_(e){let t={};t.database=Ex(this.serializer),t.addTarget=(function(o,a){let l,u=a.target;if(l=ax(u)?{documents:pq(o,u)}:{query:gq(o,u).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=f2(o,a.resumeToken);let f=wx(o,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(je.min())>0){l.readTime=Lv(o,a.snapshotVersion.toTimestamp());let f=wx(o,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);let i=_q(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){let t={};t.database=Ex(this.serializer),t.removeTarget=e,this.k_(t)}},eS=class extends Hv{constructor(e,t,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=fq(e.writeResults,e.commitTime),i=vo(e.commitTime);return this.listener.ta(i,t)}na(){let e={};e.database=Ex(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>hq(this.serializer,i))};this.k_(t)}};var tS=class{},nS=class extends tS{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,bx(t,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(W.UNKNOWN,o.toString())})}Jo(e,t,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,bx(t,i),r,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(W.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},iS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(rs(t),this._a=!1):ae("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Wc="RemoteStore",rS=class{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{i.enqueueAndForget(()=>D(this,null,function*(){Zc(this)&&(ae(Wc,"Restarting streams for network reachability change."),yield(function(u){return D(this,null,function*(){let f=Fe(u);f.Ia.add(4),yield Hf(f),f.Aa.set("Unknown"),f.Ia.delete(4),yield hy(f)})})(this))}))}),this.Aa=new iS(i,r)}};function hy(n){return D(this,null,function*(){if(Zc(n))for(let e of n.da)yield e(!0)})}function Hf(n){return D(this,null,function*(){for(let e of n.da)yield e(!1)})}function E2(n,e){let t=Fe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),zS(t)?US(t):td(t).x_()&&jS(t,e))}function BS(n,e){let t=Fe(n),i=td(t);t.Ta.delete(e),i.x_()&&I2(t,e),t.Ta.size===0&&(i.x_()?i.B_():Zc(t)&&t.Aa.set("Unknown"))}function jS(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}td(n).H_(e)}function I2(n,e){n.Ra.$e(e),td(n).Y_(e)}function US(n){n.Ra=new vx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),td(n).start(),n.Aa.aa()}function zS(n){return Zc(n)&&!td(n).M_()&&n.Ta.size>0}function Zc(n){return Fe(n).Ia.size===0}function x2(n){n.Ra=void 0}function Nq(n){return D(this,null,function*(){n.Aa.set("Online")})}function kq(n){return D(this,null,function*(){n.Ta.forEach((e,t)=>{jS(n,e)})})}function Lq(n,e){return D(this,null,function*(){x2(n),zS(n)?(n.Aa.la(e),US(n)):n.Aa.set("Unknown")})}function Fq(n,e,t){return D(this,null,function*(){if(n.Aa.set("Online"),e instanceof Nv&&e.state===2&&e.cause)try{yield(function(r,o){return D(this,null,function*(){let a=o.cause;for(let l of o.targetIds)r.Ta.has(l)&&(yield r.remoteSyncer.rejectListen(l,a),r.Ta.delete(l),r.Ra.removeTarget(l))})})(n,e)}catch(i){ae(Wc,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield $v(n,i)}else if(e instanceof Fu?n.Ra.Ye(e):e instanceof Rv?n.Ra.it(e):n.Ra.et(e),!t.isEqual(je.min()))try{let i=yield C2(n.localStore);t.compareTo(i)>=0&&(yield(function(o,a){let l=o.Ra.Pt(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let m=o.Ta.get(f);m&&o.Ta.set(f,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{let m=o.Ta.get(u);if(!m)return;o.Ta.set(u,m.withResumeToken(Zn.EMPTY_BYTE_STRING,m.snapshotVersion)),I2(o,u);let y=new Vf(m.target,u,f,m.sequenceNumber);jS(o,y)}),o.remoteSyncer.applyRemoteEvent(l)})(n,t))}catch(i){ae(Wc,"Failed to raise snapshot:",i),yield $v(n,i)}})}function $v(n,e,t){return D(this,null,function*(){if(!ed(e))throw e;n.Ia.add(1),yield Hf(n),n.Aa.set("Offline"),t||(t=()=>C2(n.localStore)),n.asyncQueue.enqueueRetryable(()=>D(null,null,function*(){ae(Wc,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield hy(n)}))})}function S2(n,e){return e().catch(t=>$v(n,t,e))}function fy(n){return D(this,null,function*(){let e=Fe(n),t=va(e),i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:MS;for(;Vq(e);)try{let r=yield Aq(e.localStore,i);if(r===null){e.Pa.length===0&&t.B_();break}i=r.batchId,Bq(e,r)}catch(r){yield $v(e,r)}T2(e)&&D2(e)})}function Vq(n){return Zc(n)&&n.Pa.length<10}function Bq(n,e){n.Pa.push(e);let t=va(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function T2(n){return Zc(n)&&!va(n).M_()&&n.Pa.length>0}function D2(n){va(n).start()}function jq(n){return D(this,null,function*(){va(n).na()})}function Uq(n){return D(this,null,function*(){let e=va(n);for(let t of n.Pa)e.X_(t.mutations)})}function zq(n,e,t){return D(this,null,function*(){let i=n.Pa.shift(),r=px.from(i,e,t);yield S2(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield fy(n)})}function Hq(n,e){return D(this,null,function*(){e&&va(n).Z_&&(yield(function(i,r){return D(this,null,function*(){if((function(a){return rq(a)&&a!==W.ABORTED})(r.code)){let o=i.Pa.shift();va(i).N_(),yield S2(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield fy(i)}})})(n,e)),T2(n)&&D2(n)})}function ck(n,e){return D(this,null,function*(){let t=Fe(n);t.asyncQueue.verifyOperationInProgress(),ae(Wc,"RemoteStore received new credentials");let i=Zc(t);t.Ia.add(3),yield Hf(t),i&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield hy(t)})}function $q(n,e){return D(this,null,function*(){let t=Fe(n);e?(t.Ia.delete(2),yield hy(t)):e||(t.Ia.add(2),yield Hf(t),t.Aa.set("Unknown"))})}function td(n){return n.Va||(n.Va=(function(t,i,r){let o=Fe(t);return o.ia(),new Xx(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:Nq.bind(null,n),e_:kq.bind(null,n),n_:Lq.bind(null,n),J_:Fq.bind(null,n)}),n.da.push(e=>D(null,null,function*(){e?(n.Va.N_(),zS(n)?US(n):n.Aa.set("Unknown")):(yield n.Va.stop(),x2(n))}))),n.Va}function va(n){return n.ma||(n.ma=(function(t,i,r){let o=Fe(t);return o.ia(),new eS(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:jq.bind(null,n),n_:Hq.bind(null,n),ea:Uq.bind(null,n),ta:zq.bind(null,n)}),n.da.push(e=>D(null,null,function*(){e?(n.ma.N_(),yield fy(n)):(yield n.ma.stop(),n.Pa.length>0&&(ae(Wc,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var oS=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let a=Date.now()+i,l=new n(e,t,a,r,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function HS(n,e){if(rs("AsyncQueue",`${e}: ${n}`),ed(n))return new oe(W.UNAVAILABLE,`${e}: ${n}`);throw n}var qv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ce.comparator(t.key,i.key):(t,i)=>Ce.comparator(t.key,i.key),this.keyedMap=Tf(),this.sortedSet=new Zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Gv=class{constructor(){this.fa=new Zt(Ce.comparator)}track(e){let t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Se(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}},Ku=class n{constructor(e,t,i,r,o,a,l,u,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){let a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new n(e,t,qv.emptySet(t),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ly(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var sS=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},aS=class{constructor(){this.queries=lk(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){let r=Fe(t),o=r.queries;r.queries=lk(),o.forEach((a,l)=>{for(let u of l.wa)u.onError(i)})})(this,new oe(W.ABORTED,"Firestore shutting down"))}};function lk(){return new as(n=>e2(n),ly)}function M2(n,e){return D(this,null,function*(){let t=Fe(n),i=3,r=e.query,o=t.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new sS,i=e.ba()?0:1);try{switch(i){case 0:o.ya=yield t.onListen(r,!0);break;case 1:o.ya=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(a){let l=HS(a,`Initialization of query '${Ru(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&$S(t)})}function A2(n,e){return D(this,null,function*(){let t=Fe(n),i=e.query,r=3,o=t.queries.get(i);if(o){let a=o.wa.indexOf(e);a>=0&&(o.wa.splice(a,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function qq(n,e){let t=Fe(n),i=!1;for(let r of e){let o=r.query,a=t.queries.get(o);if(a){for(let l of a.wa)l.Ca(r)&&(i=!0);a.ya=r}}i&&$S(t)}function Gq(n,e,t){let i=Fe(n),r=i.queries.get(e);if(r)for(let o of r.wa)o.onError(t);i.queries.delete(e)}function $S(n){n.Da.forEach(e=>{e.next()})}var cS,uk;(uk=cS||(cS={})).Fa="default",uk.Cache="cache";var Wv=class{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Ku(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ku.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==cS.Cache}};var Kv=class{constructor(e){this.key=e}},Zv=class{constructor(e){this.key=e}},lS=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ye(),this.mutatedKeys=Ye(),this.Xa=t2(e),this.eu=new qv(this.Xa)}get tu(){return this.Ha}nu(e,t){let i=t?t.ru:new Gv,r=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,a=r,l=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,y)=>{let C=r.get(m),I=uy(this.query,y)?y:null,N=!!C&&this.mutatedKeys.has(C.key),G=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),q=!1;C&&I?C.data.isEqual(I.data)?N!==G&&(i.track({type:3,doc:I}),q=!0):this.iu(C,I)||(i.track({type:2,doc:I}),q=!0,(u&&this.Xa(I,u)>0||f&&this.Xa(I,f)<0)&&(l=!0)):!C&&I?(i.track({type:0,doc:I}),q=!0):C&&!I&&(i.track({type:1,doc:C}),q=!0,(u||f)&&(l=!0)),q&&(I?(a=a.add(I),o=G?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{eu:a,ru:i,Ds:l,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort((m,y)=>(function(I,N){let G=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{At:q})}};return G(I)-G(N)})(m.type,y.type)||this.Xa(m.doc,y.doc)),this.su(i),r=r!=null&&r;let l=t&&!r?this.ou():[],u=this.Za.size===0&&this.current&&!r?1:0,f=u!==this.Ya;return this.Ya=u,a.length!==0||f?{snapshot:new Ku(this.query,e.eu,o,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Gv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ye(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});let t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new Zv(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new Kv(i))}),t}uu(e){this.Ha=e.qs,this.Za=Ye();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ku.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},qS="SyncEngine",uS=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},dS=class{constructor(e){this.key=e,this.lu=!1}},hS=class{constructor(e,t,i,r,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new as(l=>e2(l),ly),this.Tu=new Map,this.Iu=new Set,this.du=new Zt(Ce.comparator),this.Eu=new Map,this.Au=new jf,this.Ru={},this.Vu=new Map,this.mu=Bf.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Wq(n,e,t=!0){return D(this,null,function*(){let i=L2(n),r,o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=yield P2(i,e,t,!0),r})}function Kq(n,e){return D(this,null,function*(){let t=L2(n);yield P2(t,e,!0,!1)})}function P2(n,e,t,i){return D(this,null,function*(){let r=yield Pq(n.localStore,_o(e)),o=r.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),l;return i&&(l=yield Zq(n,e,o,a==="current",r.resumeToken)),n.isPrimaryClient&&t&&E2(n.remoteStore,r),l})}function Zq(n,e,t,i,r){return D(this,null,function*(){n.gu=(y,C,I)=>(function(G,q,Q,he){return D(this,null,function*(){let ye=q.view.nu(Q);ye.Ds&&(ye=yield ok(G.localStore,q.query,!1).then(({documents:k})=>q.view.nu(k,ye)));let Qe=he&&he.targetChanges.get(q.targetId),Yt=he&&he.targetMismatches.get(q.targetId)!=null,st=q.view.applyChanges(ye,G.isPrimaryClient,Qe,Yt);return hk(G,q.targetId,st._u),st.snapshot})})(n,y,C,I);let o=yield ok(n.localStore,e,!0),a=new lS(e,o.qs),l=a.nu(o.documents),u=Ff.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=a.applyChanges(l,n.isPrimaryClient,u);hk(n,t,f._u);let m=new uS(e,t,a);return n.Pu.set(e,m),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),f.snapshot})}function Yq(n,e,t){return D(this,null,function*(){let i=Fe(n),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter(a=>!ly(a,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gx(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&BS(i.remoteStore,r.targetId),fS(i,r.targetId)}).catch(Xu))):(fS(i,r.targetId),yield Gx(i.localStore,r.targetId,!0))})}function Qq(n,e){return D(this,null,function*(){let t=Fe(n),i=t.Pu.get(e),r=t.Tu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),BS(t.remoteStore,i.targetId))})}function Jq(n,e,t){return D(this,null,function*(){let i=oG(n);try{let r=yield(function(a,l){let u=Fe(a),f=_n.now(),m=l.reduce((I,N)=>I.add(N.key),Ye()),y,C;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let N=cs(),G=Ye();return u.Os.getEntries(I,m).next(q=>{N=q,N.forEach((Q,he)=>{he.isValidDocument()||(G=G.add(Q))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,N)).next(q=>{y=q;let Q=[];for(let he of l){let ye=iq(he,y.get(he.key).overlayedDocument);ye!=null&&Q.push(new wo(he.key,ye,Wk(ye.value.mapValue),ua.exists(!0)))}return u.mutationQueue.addMutationBatch(I,f,Q,l)}).next(q=>{C=q;let Q=q.applyToLocalDocumentSet(y,G);return u.documentOverlayCache.saveOverlays(I,q.batchId,Q)})}).then(()=>({batchId:C.batchId,changes:i2(y)}))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(a,l,u){let f=a.Ru[a.currentUser.toKey()];f||(f=new Zt(He)),f=f.insert(l,u),a.Ru[a.currentUser.toKey()]=f})(i,r.batchId,t),yield $f(i,r.changes),yield fy(i.remoteStore)}catch(r){let o=HS(r,"Failed to persist write");t.reject(o)}})}function O2(n,e){return D(this,null,function*(){let t=Fe(n);try{let i=yield Dq(t.localStore,e);e.targetChanges.forEach((r,o)=>{let a=t.Eu.get(o);a&&(pt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.lu=!0:r.modifiedDocuments.size>0?pt(a.lu,14607):r.removedDocuments.size>0&&(pt(a.lu,42227),a.lu=!1))}),yield $f(t,i,e)}catch(i){yield Xu(i)}})}function dk(n,e,t){let i=Fe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Pu.forEach((o,a)=>{let l=a.view.va(e);l.snapshot&&r.push(l.snapshot)}),(function(a,l){let u=Fe(a);u.onlineState=l;let f=!1;u.queries.forEach((m,y)=>{for(let C of y.wa)C.va(l)&&(f=!0)}),f&&$S(u)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Xq(n,e,t){return D(this,null,function*(){let i=Fe(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Eu.get(e),o=r&&r.key;if(o){let a=new Zt(Ce.comparator);a=a.insert(o,Dr.newNoDocument(o,je.min()));let l=Ye().add(o),u=new Ov(je.min(),new Map,new Zt(He),a,l);yield O2(i,u),i.du=i.du.remove(o),i.Eu.delete(e),GS(i)}else yield Gx(i.localStore,e,!1).then(()=>fS(i,e,t)).catch(Xu)})}function eG(n,e){return D(this,null,function*(){let t=Fe(n),i=e.batch.batchId;try{let r=yield Tq(t.localStore,e);N2(t,i,null),R2(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield $f(t,r)}catch(r){yield Xu(r)}})}function tG(n,e,t){return D(this,null,function*(){let i=Fe(n);try{let r=yield(function(a,l){let u=Fe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,l).next(y=>(pt(y!==null,37113),m=y.keys(),u.mutationQueue.removeMutationBatch(f,y))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})})(i.localStore,e);N2(i,e,t),R2(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield $f(i,r)}catch(r){yield Xu(r)}})}function R2(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function N2(n,e,t){let i=Fe(n),r=i.Ru[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function fS(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||k2(n,i)})}function k2(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(BS(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),GS(n))}function hk(n,e,t){for(let i of t)i instanceof Kv?(n.Au.addReference(i.key,e),nG(n,i)):i instanceof Zv?(ae(qS,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||k2(n,i.key)):Se(19791,{yu:i})}function nG(n,e){let t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(ae(qS,"New document in limbo: "+t),n.Iu.add(i),GS(n))}function GS(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Ce(Lt.fromString(e)),i=n.mu.next();n.Eu.set(i,new dS(t)),n.du=n.du.insert(t,i),E2(n.remoteStore,new Vf(_o(cy(t.path)),i,"TargetPurposeLimboResolution",DS.ue))}}function $f(n,e,t){return D(this,null,function*(){let i=Fe(n),r=[],o=[],a=[];i.Pu.isEmpty()||(i.Pu.forEach((l,u)=>{a.push(i.gu(u,e,t).then(f=>{var m;if((f||t)&&i.isPrimaryClient){let y=f?!f.fromCache:(m=t?.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(f){r.push(f);let y=zx.Es(u.targetId,f);o.push(y)}}))}),yield Promise.all(a),i.hu.J_(r),yield(function(u,f){return D(this,null,function*(){let m=Fe(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ee.forEach(f,C=>ee.forEach(C.Is,I=>m.persistence.referenceDelegate.addReference(y,C.targetId,I)).next(()=>ee.forEach(C.ds,I=>m.persistence.referenceDelegate.removeReference(y,C.targetId,I)))))}catch(y){if(!ed(y))throw y;ae(VS,"Failed to update sequence numbers: "+y)}for(let y of f){let C=y.targetId;if(!y.fromCache){let I=m.Fs.get(C),N=I.snapshotVersion,G=I.withLastLimboFreeSnapshotVersion(N);m.Fs=m.Fs.insert(C,G)}}})})(i.localStore,o))})}function iG(n,e){return D(this,null,function*(){let t=Fe(n);if(!t.currentUser.isEqual(e)){ae(qS,"User change. New user:",e.toKey());let i=yield b2(t.localStore,e);t.currentUser=e,(function(o,a){o.Vu.forEach(l=>{l.forEach(u=>{u.reject(new oe(W.CANCELLED,a))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield $f(t,i.Bs)}})}function rG(n,e){let t=Fe(n),i=t.Eu.get(e);if(i&&i.lu)return Ye().add(i.key);{let r=Ye(),o=t.Tu.get(e);if(!o)return r;for(let a of o){let l=t.Pu.get(a);r=r.unionWith(l.view.tu)}return r}}function L2(n){let e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=O2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xq.bind(null,e),e.hu.J_=qq.bind(null,e.eventManager),e.hu.pu=Gq.bind(null,e.eventManager),e}function oG(n){let e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tG.bind(null,e),e}var F2=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return D(this,null,function*(){this.serializer=dy(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,i){return null}Fu(t,i){return null}vu(t){return Sq(this.persistence,new $x,t.initialUser,this.serializer)}Du(t){return new Vv(Ux.Vi,this.serializer)}bu(t){return new Wx}terminate(){return D(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),pS=class extends F2{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){pt(this.persistence.referenceDelegate instanceof Bv,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new Dx(i,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Qi.withCacheSize(this.cacheSizeBytes):Qi.DEFAULT;return new Vv(i=>Bv.Vi(i,t),this.serializer)}};var sG=(()=>{class n{initialize(t,i){return D(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iG.bind(null,this.syncEngine),yield $q(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new aS})()}createDatastore(t){let i=dy(t.databaseInfo.databaseId),r=(function(a){return new Jx(a)})(t.databaseInfo);return(function(a,l,u,f){return new nS(a,l,u,f)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,o,a,l,u){return new rS(r,o,a,l,u)})(this.localStore,this.datastore,t.asyncQueue,i=>dk(this.syncEngine,i,0),(function(){return Uv.C()?new Uv:new Kx})())}createSyncEngine(t,i){return(function(o,a,l,u,f,m,y){let C=new hS(o,a,l,u,f,m);return y&&(C.fu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return D(this,null,function*(){var t,i;yield(function(o){return D(this,null,function*(){let a=Fe(o);ae(Wc,"RemoteStore shutting down."),a.Ia.add(5),yield Hf(a),a.Ea.shutdown(),a.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Yv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ya="FirestoreClient",gS=class{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Pn.UNAUTHENTICATED,this.clientId=Of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,a=>D(this,null,function*(){ae(ya,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(ae(ya,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=HS(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function BI(n,e){return D(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ae(ya,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>D(null,null,function*(){i.isEqual(r)||(yield b2(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>{ga("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ae("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{ga("Terminating Firestore due to IndexedDb database deletion failed",r)})}),n._offlineComponents=e})}function fk(n,e){return D(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield aG(n);ae(ya,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>ck(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>ck(e.remoteStore,r)),n._onlineComponents=e})}function aG(n){return D(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae(ya,"Using user provided OfflineComponentProvider");try{yield BI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===W.FAILED_PRECONDITION||r.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;ga("Error using user provided cache. Falling back to memory cache: "+t),yield BI(n,new F2)}}else ae(ya,"Using default OfflineComponentProvider"),yield BI(n,new pS(void 0));return n._offlineComponents})}function V2(n){return D(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae(ya,"Using user provided OnlineComponentProvider"),yield fk(n,n._uninitializedComponentsProvider._online)):(ae(ya,"Using default OnlineComponentProvider"),yield fk(n,new sG))),n._onlineComponents})}function cG(n){return V2(n).then(e=>e.syncEngine)}function mS(n){return D(this,null,function*(){let e=yield V2(n),t=e.eventManager;return t.onListen=Wq.bind(null,e.syncEngine),t.onUnlisten=Yq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Kq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Qq.bind(null,e.syncEngine),t})}function lG(n,e,t={}){let i=new po;return n.asyncQueue.enqueueAndForget(()=>D(null,null,function*(){return(function(o,a,l,u,f){let m=new Yv({next:C=>{m.Ou(),a.enqueueAndForget(()=>A2(o,y));let I=C.docs.has(l);!I&&C.fromCache?f.reject(new oe(W.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&C.fromCache&&u&&u.source==="server"?f.reject(new oe(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(C)},error:C=>f.reject(C)}),y=new Wv(cy(l.path),m,{includeMetadataChanges:!0,ka:!0});return M2(o,y)})(yield mS(n),n.asyncQueue,e,t,i)})),i.promise}function B2(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var pk=new Map;var j2="firestore.googleapis.com",gk=!0,Qv=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=j2,this.ssl=gk}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:gk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Eq)throw new oe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B2((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Zu=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new jI;switch(i.type){case"firstParty":return new $I(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new oe(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return D(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=pk.get(t);i&&(ae("ComponentProvider","Removing Datastore"),pk.delete(t),i.terminate())})(this),Promise.resolve()}};function U2(n,e,t,i={}){var r;n=go(n,Zu);let o=ta(e),a=n._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(H_(`https://${u}`),$_("Firestore",!0)),a.host!==j2&&a.host!==u&&ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let f=Object.assign(Object.assign({},a),{host:u,ssl:o,emulatorOptions:i});if(!ao(f,l)&&(n._setSettings(f),i.mockUserToken)){let m,y;if(typeof i.mockUserToken=="string")m=i.mockUserToken,y=Pn.MOCK_USER;else{m=LO(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new oe(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Pn(C)}n._authCredentials=new UI(new Ev(m,y))}}var Kc=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},En=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new da(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(zf(t,n._jsonSchema))return new n(e,i||null,new Ce(Lt.fromString(t.referencePath)))}};En._jsonSchemaVersion="firestore/documentReference/1.0",En._jsonSchema={type:mn("string",En._jsonSchemaVersion),referencePath:mn("string")};var da=class n extends Kc{constructor(e,t,i){super(e,t,cy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new Ce(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function z2(n,e,...t){if(n=zt(n),Ek("collection","path",e),n instanceof Zu){let i=Lt.fromString(e,...t);return RN(i),new da(n,null,i)}{if(!(n instanceof En||n instanceof da))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Lt.fromString(e,...t));return RN(i),new da(n.firestore,null,i)}}function H2(n,e,...t){if(n=zt(n),arguments.length===1&&(e=Of.newId()),Ek("doc","path",e),n instanceof Zu){let i=Lt.fromString(e,...t);return ON(i),new En(n,null,new Ce(i))}{if(!(n instanceof En||n instanceof da))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Lt.fromString(e,...t));return ON(i),new En(n.firestore,n instanceof da?n.converter:null,new Ce(i))}}var mk="AsyncQueue",Jv=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new zv(this,"async_queue_retry"),this.oc=()=>{let i=VI();i&&ae(mk,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let t=VI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=VI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new po;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return D(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ed(e))throw e;ae(mk,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,rs("INTERNAL UNHANDLED ERROR: ",_k(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let r=oS.createAndSchedule(this,e,t,i,o=>this.lc(o));return this.ec.push(r),r}ac(){this.tc&&Se(47125,{hc:_k(this.tc)})}verifyOperationInProgress(){}Pc(){return D(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function _k(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function vk(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}var wa=class extends Zu{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Jv,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return D(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jv(e),this._firestoreClient=void 0,yield e}})}};function $2(n,e){let t=typeof n=="object"?n:Dc(),i=typeof n=="string"?n:e||Dv,r=xu(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=kO("firestore");o&&U2(r,...o)}return r}function WS(n){if(n._terminated)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||uG(n),n._firestoreClient}function uG(n){var e,t,i;let r=n._freezeSettings(),o=(function(l,u,f,m){return new ZI(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,B2(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new gS(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(l){let u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(n._componentsProvider))}var ha=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Zn.fromBase64String(e))}catch(t){throw new oe(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ha._jsonSchemaVersion="firestore/bytes/1.0",ha._jsonSchema={type:mn("string",ha._jsonSchemaVersion),bytes:mn("string")};var Yu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ki(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Qu=class{constructor(e){this._methodName=e}};var fa=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(zf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};fa._jsonSchemaVersion="firestore/geoPoint/1.0",fa._jsonSchema={type:mn("string",fa._jsonSchemaVersion),latitude:mn("number"),longitude:mn("number")};var pa=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new oe(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};pa._jsonSchemaVersion="firestore/vectorValue/1.0",pa._jsonSchema={type:mn("string",pa._jsonSchemaVersion),vectorValues:mn("object")};var dG=/^__.*__$/,_S=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new wo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gc(e,this.data,t,this.fieldTransforms)}},Xv=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new wo(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function q2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ec:n})}}var vS=class n{constructor(e,t,i,r,o,a){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ty(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(q2(this.Ec)&&dG.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},yS=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||dy(e)}Dc(e,t,i,r=!1){return new vS({Ec:e,methodName:t,bc:i,path:ki.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function KS(n){let e=n._freezeSettings(),t=dy(n._databaseId);return new yS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hG(n,e,t,i,r,o={}){let a=n.Dc(o.merge||o.mergeFields?2:0,e,t,r);ZS("Data must be an object, but it was:",a,i);let l=G2(i,a),u,f;if(o.merge)u=new Ji(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let y of o.mergeFields){let C=bS(e,y,t);if(!a.contains(C))throw new oe(W.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);K2(m,C)||m.push(C)}u=new Ji(m),f=a.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,f=a.fieldTransforms;return new _S(new Ni(l),u,f)}var ey=class n extends Qu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var wS=class n extends Qu{_toFieldTransform(e){return new ux(e.path,new Hc)}isEqual(e){return e instanceof n}};function fG(n,e,t,i){let r=n.Dc(1,e,t);ZS("Data must be an object, but it was:",r,i);let o=[],a=Ni.empty();ba(i,(u,f)=>{let m=YS(e,u,t);f=zt(f);let y=r.gc(m);if(f instanceof ey)o.push(m);else{let C=qf(f,y);C!=null&&(o.push(m),a.set(m,C))}});let l=new Ji(o);return new Xv(a,l,r.fieldTransforms)}function pG(n,e,t,i,r,o){let a=n.Dc(1,e,t),l=[bS(e,i,t)],u=[r];if(o.length%2!=0)throw new oe(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<o.length;C+=2)l.push(bS(e,o[C])),u.push(o[C+1]);let f=[],m=Ni.empty();for(let C=l.length-1;C>=0;--C)if(!K2(f,l[C])){let I=l[C],N=u[C];N=zt(N);let G=a.gc(I);if(N instanceof ey)f.push(I);else{let q=qf(N,G);q!=null&&(f.push(I),m.set(I,q))}}let y=new Ji(f);return new Xv(m,y,a.fieldTransforms)}function gG(n,e,t,i=!1){return qf(t,n.Dc(i?4:3,e))}function qf(n,e){if(W2(n=zt(n)))return ZS("Unsupported field value:",e,n),G2(n,e);if(n instanceof Qu)return(function(i,r){if(!q2(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){let o=[],a=0;for(let l of i){let u=qf(l,r.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return J9(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=_n.fromDate(i);return{timestampValue:Lv(r.serializer,o)}}if(i instanceof _n){let o=new _n(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Lv(r.serializer,o)}}if(i instanceof fa)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ha)return{bytesValue:f2(r.serializer,i._byteString)};if(i instanceof En){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:FS(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof pa)return(function(a,l){return{mapValue:{fields:{[PS]:{stringValue:OS},[Uu]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.wc("VectorValues must only contain numeric values.");return LS(l.serializer,f)})}}}}}})(i,r);throw r.wc(`Unsupported field value: ${oy(i)}`)})(n,e)}function G2(n,e){let t={};return Bk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ba(n,(i,r)=>{let o=qf(r,e.Vc(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function W2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _n||n instanceof fa||n instanceof ha||n instanceof En||n instanceof Qu||n instanceof pa)}function ZS(n,e,t){if(!W2(t)||!Ik(t)){let i=oy(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function bS(n,e,t){if((e=zt(e))instanceof Yu)return e._internalPath;if(typeof e=="string")return YS(n,e);throw ty("Field path arguments must be of type string or ",n,!1,void 0,t)}var mG=new RegExp("[~\\*/\\[\\]]");function YS(n,e,t){if(e.search(mG)>=0)throw ty(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yu(...e.split("."))._internalPath}catch{throw ty(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ty(n,e,t,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new oe(W.INVALID_ARGUMENT,l+n+u)}function K2(n,e){return n.some(t=>t.isEqual(e))}var ny=class{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new CS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(QS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},CS=class extends ny{data(){return super.data()}};function QS(n,e){return typeof e=="string"?YS(n,e):e instanceof Yu?e._internalPath:e._delegate._internalPath}function _G(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Uf=class{},iy=class extends Uf{};function Z2(n,e,...t){let i=[];e instanceof Uf&&i.push(e),i=i.concat(t),(function(o){let a=o.filter(u=>u instanceof IS).length,l=o.filter(u=>u instanceof ES).length;if(a>1||a>0&&l>0)throw new oe(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(let r of i)n=r._apply(n);return n}var ES=class n extends iy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return Q2(e._query,t),new Kc(e.firestore,e.converter,cx(e._query,t))}_parse(e){let t=KS(e.firestore);return(function(o,a,l,u,f,m,y){let C;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new oe(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){wk(y,m);let N=[];for(let G of y)N.push(yk(u,o,G));C={arrayValue:{values:N}}}else C=yk(u,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||wk(y,m),C=gG(l,a,y,m==="in"||m==="not-in");return gn.create(f,m,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var IS=class n extends Uf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Mr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let a=r,l=o.getFlattenedFilters();for(let u of l)Q2(a,u),a=cx(a,u)})(e._query,t),new Kc(e.firestore,e.converter,cx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var xS=class n extends iy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(r,o,a){if(r.startAt!==null)throw new oe(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new oe(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(o,a)})(e._query,this._field,this._direction);return new Kc(e.firestore,e.converter,(function(r,o){let a=r.explicitOrderBy.concat([o]);return new _a(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}};function Y2(n,e="asc"){let t=e,i=QS("orderBy",n);return xS._create(i,t)}function yk(n,e,t){if(typeof(t=zt(t))=="string"){if(t==="")throw new oe(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xk(e)&&t.indexOf("/")!==-1)throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Lt.fromString(t));if(!Ce.isDocumentKey(i))throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return jN(n,new Ce(i))}if(t instanceof En)return jN(n,t._key);throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oy(t)}.`)}function wk(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Q2(n,e){let t=(function(r,o){for(let a of r)for(let l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var SS=class{convertValue(e,t="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return ba(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,r;let o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[Uu].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>kt(a.doubleValue));return new pa(o)}convertGeoPoint(e){return new fa(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=ay(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(kf(e));default:return null}}convertTimestamp(e){let t=os(e);return new _n(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Lt.fromString(e);pt(y2(i),9688,{name:e});let r=new Mv(i.get(1),i.get(3)),o=new Ce(i.popFirst(5));return r.isEqual(t)||rs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function vG(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Vc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Bc=class n extends ny{constructor(e,t,i,r,o,a){super(e,t,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(QS("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Bc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bc._jsonSchema={type:mn("string",Bc._jsonSchemaVersion),bundleSource:mn("string","DocumentSnapshot"),bundleName:mn("string"),bundle:mn("string")};var Vu=class extends Bc{data(e={}){return super.data(e)}},Bu=class n{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Vc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Vu(this._firestore,this._userDataWriter,i.key,i,new Vc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{let u=new Vu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Vc(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{let u=new Vu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Vc(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:yG(l.type),doc:u,oldIndex:f,newIndex:m}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Of.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function yG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}function J2(n){n=go(n,En);let e=go(n.firestore,wa);return lG(WS(e),n._key).then(t=>nL(e,n,t))}Bu._jsonSchemaVersion="firestore/querySnapshot/1.0",Bu._jsonSchema={type:mn("string",Bu._jsonSchemaVersion),bundleSource:mn("string","QuerySnapshot"),bundleName:mn("string"),bundle:mn("string")};var ry=class extends SS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ha(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}};function X2(n,e,t){n=go(n,En);let i=go(n.firestore,wa),r=vG(n.converter,e,t);return tL(i,[hG(KS(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,ua.none())])}function eL(n,e,t,...i){n=go(n,En);let r=go(n.firestore,wa),o=KS(r),a;return a=typeof(e=zt(e))=="string"||e instanceof Yu?pG(o,"updateDoc",n._key,e,t,i):fG(o,"updateDoc",n._key,e),tL(r,[a.toMutation(n._key,ua.exists(!0))])}function JS(n,...e){var t,i,r;n=zt(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||vk(e[a])||(o=e[a++]);let l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(vk(e[a])){let y=e[a];e[a]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[a+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[a+2]=(r=y.complete)===null||r===void 0?void 0:r.bind(y)}let u,f,m;if(n instanceof En)f=go(n.firestore,wa),m=cy(n._key.path),u={next:y=>{e[a]&&e[a](nL(f,n,y))},error:e[a+1],complete:e[a+2]};else{let y=go(n,Kc);f=go(y.firestore,wa),m=y._query;let C=new ry(f);u={next:I=>{e[a]&&e[a](new Bu(f,C,y,I))},error:e[a+1],complete:e[a+2]},_G(n._query)}return(function(C,I,N,G){let q=new Yv(G),Q=new Wv(I,q,N);return C.asyncQueue.enqueueAndForget(()=>D(null,null,function*(){return M2(yield mS(C),Q)})),()=>{q.Ou(),C.asyncQueue.enqueueAndForget(()=>D(null,null,function*(){return A2(yield mS(C),Q)}))}})(WS(f),m,l,u)}function tL(n,e){return(function(i,r){let o=new po;return i.asyncQueue.enqueueAndForget(()=>D(null,null,function*(){return Jq(yield cG(i),r,o)})),o.promise})(WS(n),e)}function nL(n,e,t){let i=t.docs.get(e._key),r=new ry(n);return new Bc(n,r,e._key,i,new Vc(t.hasPendingWrites,t.fromCache),e.converter)}function nd(){return new wS("serverTimestamp")}(function(e,t=!0){(function(r){Ju=r})(ia),Sr(new ci("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),l=new wa(new zI(i.getProvider("auth-internal")),new qI(a,i.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new oe(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mv(f.options.projectId,m)})(a,r),a);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Kt(DN,MN,e),Kt(DN,MN,"esm2017")})();var py=function(){return py=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},py.apply(this,arguments)};var CG={includeMetadataChanges:!1};function iL(n,e){return e===void 0&&(e=CG),new Ie(function(t){var i=JS(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function rL(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:py(py({},i),(t={},t[e.idField]=n.id,t))}function oL(n){return iL(n,{includeMetadataChanges:!0}).pipe(le(function(e){return e.docs}))}function sL(n,e){return e===void 0&&(e={}),oL(n).pipe(le(function(t){return t.map(function(i){return rL(i,e)})}))}var Yc=class{constructor(e){return e}},aL="firestore",XS=class{constructor(){return Tu(aL)}};var eT=new ue("angularfire2.firestore-instances");function EG(n,e){let t=ff(aL,n,e);return t&&new Yc(t)}function IG(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Yc(i)}}var xG={provide:XS,deps:[[new Di,eT]]},SG={provide:Yc,useFactory:EG,deps:[[new Di,eT],Qo]};function cL(n,...e){return Kt("angularfire",ra.full,"fst"),ur([SG,xG,{provide:eT,useFactory:IG(n),multi:!0,deps:[ft,$t,oa,Ac,[new Di,xf],[new Di,Du],...e]}])}var gy=on(sL,!0);var my=on(z2,!0,2);var ls=on(H2,!0,2);var lL=on(J2,!0);var uL=on($2,!0);var tT=on(Y2,!0,2),nT=on(Z2,!0,2);var Gf=on(X2,!0,2);var iT=on(eL,!0,2);var id=class n{firestore=U(Yc);incidentsCollection=my(this.firestore,"incidents");alertsCollection=my(this.firestore,"alerts");riskZonesCollection=my(this.firestore,"riskZones");getSafetyFeed(e){let i=gy(nT(this.incidentsCollection,tT("createdAt","desc")),{idField:"id"}).pipe(le(o=>o.map(a=>pe(K({},a),{type:"incident"})))).pipe(le(o=>e==="user"?o.filter(a=>a.recipient!=="admin"):o)),r=gy(nT(this.alertsCollection,tT("createdAt","desc")),{idField:"id"}).pipe(le(o=>o.map(a=>pe(K({},a),{type:"alert"}))));return Ka([i,r]).pipe(le(([o,a])=>[...o,...a].sort((u,f)=>f.createdAt.toMillis()-u.createdAt.toMillis())))}reportIncident(e){return D(this,null,function*(){let t=ls(this.incidentsCollection).id,i=ls(this.incidentsCollection,t),r=K({id:t,type:"incident",status:"pending",createdAt:nd(),location:e.location||{lat:0,lng:0},description:e.description||"N/A",priority:e.priority||"medium",recipient:e.recipient||"both"},e);return yield Gf(i,r),t})}createUserProfile(e,t){return D(this,null,function*(){let i=ls(this.firestore,`users/${e}`),r=ls(this.firestore,"config/adminExists"),a=!(yield lL(r)).exists(),l={uid:e,email:t.email||"",displayName:t.displayName||"",phoneNumber:t.phoneNumber||"",role:a?"admin":"citizen",createdAt:nd(),lastActive:nd()};return yield Gf(i,l),a&&(yield Gf(r,{ownerUid:e,createdAt:nd()})),l})}issueAlert(e){return D(this,null,function*(){let t=ls(this.alertsCollection).id,i=ls(this.alertsCollection,t);return yield Gf(i,pe(K({},e),{type:"alert",createdAt:nd()})),t})}updateIncidentStatus(e,t){return D(this,null,function*(){let i=ls(this.incidentsCollection,e),r={status:t};t==="approved"&&(r.recipient="both"),yield iT(i,r)})}updateIncident(e,t){return D(this,null,function*(){let i=ls(this.incidentsCollection,e);yield iT(i,t)})}getRiskZones(){return gy(this.riskZonesCollection,{idField:"id"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var In=class n{auth=U(kc);router=U(wt);data=U(id);currentUser$=yN(this.auth);isAdmin$=this.currentUser$.pipe(Fn(e=>e?_t(e.getIdTokenResult()).pipe(le(t=>!!t.claims?.admin)):ve(!1)));login(e,t){return D(this,null,function*(){try{let i=yield EN(this.auth,e,t);console.log("Login successful for:",i.user.email);try{let r=this.auth.currentUser;if(r){let a=!!(yield r.getIdTokenResult()).claims?.admin;console.log("User admin status:",a),this.router.navigate([a?"/admin-dashboard":"/dashboard"])}else this.router.navigate(["/dashboard"])}catch(r){console.error("Token check error:",r),this.router.navigate(["/dashboard"])}}catch(i){console.error("Login failed:",i.code,i.message);let r="Login failed: ";switch(i.code){case"auth/user-not-found":r+="No account found with this email. Please sign up first.";break;case"auth/wrong-password":r+="Incorrect password. Please try again.";break;case"auth/invalid-email":r+="Invalid email address format.";break;case"auth/user-disabled":r+="This account has been disabled.";break;case"auth/invalid-credential":r+="Invalid credentials. Please check your email and password.";break;default:r+=i.message||"An error occurred. Please try again."}throw new Error(r)}})}logout(){return D(this,null,function*(){yield IN(this.auth),this.router.navigate(["/"])})}sendVerificationEmail(){return D(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("No authenticated user to send verification to");try{yield CN(e)}catch(t){throw console.error("Failed to send verification email:",t),t}})}register(e,t,i){return D(this,null,function*(){try{let r=yield wN(this.auth,e,t);i&&(yield xN(r.user,{displayName:i}));try{r.user&&(yield this.data.createUserProfile(r.user.uid,{email:r.user.email??"",displayName:r.user.displayName??"",phoneNumber:r.user.phoneNumber??""}))}catch(o){console.warn("Failed to create user profile automatically:",o)}this.router.navigate(["/"])}catch(r){throw console.error("Registration failed:",r),new Error(r?.message||"Registration failed")}})}isLoggedIn(){return new Ie(e=>{this.currentUser$.subscribe(t=>{e.next(!!t)})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var bo=class n{STORAGE_KEY="mountain_sentinel_notifications";notificationsSubject=new Jt(this.loadNotificationsFromStorage());constructor(){}loadNotificationsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading notifications from storage:",e),[]}}saveNotificationsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving notifications to storage:",t)}}addSosNotification(){let e={id:this.generateId(),message:"Emergency SOS sent! Police have been notified and are on their way. Stay calm and safe.",type:"sos",createdAt:new Date().toISOString(),read:!1},t=this.notificationsSubject.value,i=[e,...t];this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}addEmergencySOSAlert(e,t,i){let r=i?` Location: ${i.lat.toFixed(6)}, ${i.lng.toFixed(6)}`:"",o={id:this.generateId(),message:`EMERGENCY SOS from ${e} (${t}).${r} Immediate assistance required!`,type:"sos",createdAt:new Date().toISOString(),read:!1,sosDetails:{userName:e,userEmail:t,location:i,timestamp:new Date().toISOString(),status:"pending"}},a=this.notificationsSubject.value,l=[o,...a];this.notificationsSubject.next(l),this.saveNotificationsToStorage(l)}markSOSAsResponded(e){let i=this.notificationsSubject.value.map(r=>r.id===e&&r.sosDetails?pe(K({},r),{read:!0,sosDetails:pe(K({},r.sosDetails),{status:"responded"})}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}markSOSAsResolved(e){let i=this.notificationsSubject.value.map(r=>r.id===e&&r.sosDetails?pe(K({},r),{sosDetails:pe(K({},r.sosDetails),{status:"resolved"})}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}notifySOSResponse(e,t,i){let r=i==="responded"?"Your emergency SOS has been received! Help is on the way. An admin/police officer is responding to your location. Stay calm and safe.":"Your emergency SOS has been resolved. The situation has been addressed by authorities. Thank you for using Mountain Sentinel.",o={id:this.generateId(),message:r,type:"action",createdAt:new Date().toISOString(),read:!1},a=this.notificationsSubject.value,l=[o,...a];this.notificationsSubject.next(l),this.saveNotificationsToStorage(l)}notifyReportAction(e,t,i,r,o){let a=r==="approved"?"Your safety report has been reviewed and approved by the admin. Authorities have been notified and appropriate action is being taken.":"Your safety report has been reviewed. The admin has determined that no further action is required at this time.",l={id:this.generateId(),message:`Report Update: "${o.substring(0,50)}${o.length>50?"...":""}" - ${a}`,type:"action",createdAt:new Date().toISOString(),read:!1,reportDetails:{reportId:i,action:r}},u=this.notificationsSubject.value,f=[l,...u];this.notificationsSubject.next(f),this.saveNotificationsToStorage(f)}addNotification(e,t="info"){let i={id:this.generateId(),message:e,type:t,createdAt:new Date().toISOString(),read:!1},r=this.notificationsSubject.value,o=[i,...r];this.notificationsSubject.next(o),this.saveNotificationsToStorage(o)}getNotifications(){return this.notificationsSubject.asObservable()}getUnreadCount(){return new Ie(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>!r.read).length;e.next(i)})})}getSOSCount(){return new Ie(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>r.type==="sos"&&!r.read).length;e.next(i)})})}markAsRead(e){let i=this.notificationsSubject.value.map(r=>r.id===e?pe(K({},r),{read:!0}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}deleteNotification(e){let i=this.notificationsSubject.value.filter(r=>r.id!==e);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}clearAll(){this.notificationsSubject.next([]),this.saveNotificationsToStorage([])}generateId(){return`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var Rn=class n{STORAGE_KEY="mountain_sentinel_reports";reportsSubject=new Jt(this.loadReportsFromStorage());notificationService=U(bo);constructor(){}loadReportsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading reports from storage:",e),[]}}saveReportsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving reports to storage:",t)}}submitReport(e){let t=new Date().toISOString(),i=pe(K({},e),{id:this.generateId(),status:"pending",createdAt:t,updatedAt:t}),o=[...this.reportsSubject.value,i];return this.reportsSubject.next(o),this.saveReportsToStorage(o),this.reportsSubject.asObservable().pipe(le(a=>a.find(l=>l.id===i.id)))}getAllReports(){return this.reportsSubject.asObservable()}getPendingReports(){return this.reportsSubject.asObservable().pipe(le(e=>e.filter(t=>t.status==="pending")))}getApprovedReports(){return this.reportsSubject.asObservable().pipe(le(e=>e.filter(t=>t.status==="approved")))}approveReport(e){let t=this.reportsSubject.value,i=t.find(o=>o.id===e),r=t.map(o=>o.id===e?pe(K({},o),{status:"approved",updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r),i&&i.reporterId!=="ADMIN"&&this.notificationService.notifyReportAction(i.reporterEmail||"unknown",i.reporterName||"Reporter",e,"approved",i.description)}rejectReport(e){let t=this.reportsSubject.value,i=t.find(o=>o.id===e),r=t.map(o=>o.id===e?pe(K({},o),{status:"rejected",updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r),i&&i.reporterId!=="ADMIN"&&this.notificationService.notifyReportAction(i.reporterEmail||"unknown",i.reporterName||"Reporter",e,"rejected",i.description)}updateReport(e,t){let r=this.reportsSubject.value.map(o=>o.id===e?pe(K(K({},o),t),{updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r)}deleteReport(e){let i=this.reportsSubject.value.filter(r=>r.id!==e);this.reportsSubject.next(i),this.saveReportsToStorage(i)}sendEmergencySOS(e,t,i){this.notificationService.addEmergencySOSAlert(t,e,i),this.notificationService.addSosNotification()}generateId(){return`report_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};function TG(n,e){n&1&&(w(0,"span",78),S(1,"Location obtained"),b())}function DG(n,e){n&1&&(w(0,"span",79),S(1,"Obtaining your location..."),b())}function MG(n,e){if(n&1&&(w(0,"div",69),de(1,"div",70)(2,"div",71)(3,"div",72),w(4,"div",73),at(),w(5,"svg",74),de(6,"polygon",16)(7,"line",17)(8,"line",18),b()()(),Ut(),w(9,"h2",75),S(10,"SENDING EMERGENCY SOS"),b(),w(11,"p",76),S(12,"Please wait while we alert emergency services..."),b(),w(13,"div",77),Xe(14,TG,2,0,"span",78)(15,DG,2,0,"span",79),b(),w(16,"div",80),de(17,"div",81),b(),w(18,"p",82),S(19),b()),n&2){let t=F(2);T(14),et(t.userLocation?14:15),T(3),au("width",t.sosProgress,"%"),T(2),me("",t.sosCountdown," seconds remaining")}}function AG(n,e){n&1&&(w(0,"span"),S(1,"Your location has been shared"),b())}function PG(n,e){n&1&&(w(0,"span"),S(1,"Location not available - please share your location manually"),b())}function OG(n,e){if(n&1){let t=Me();w(0,"div",68)(1,"div",83),at(),w(2,"svg",84),de(3,"polyline",85),b()(),Ut(),w(4,"h2",86),S(5,"EMERGENCY RECEIVED"),b(),w(6,"p",76),S(7,"Admin has been notified immediately."),b(),w(8,"p",87),S(9,"Help is on the way. Stay calm and safe."),b(),w(10,"div",88)(11,"div",89),de(12,"div",90),Xe(13,AG,2,0,"span")(14,PG,2,0,"span"),b(),w(15,"div",89),de(16,"div",91),w(17,"span"),S(18,"Emergency services alerted"),b()(),w(19,"div",89),de(20,"div",92),w(21,"span"),S(22,"Admin notified in real-time"),b()()(),w(23,"button",93),ne("click",function(){J(t);let r=F(2);return X(r.closeSosOverlay())}),S(24,"Close"),b()()}if(n&2){let t=F(2);T(11),ct("success",t.userLocation)("warning",!t.userLocation),T(2),et(t.userLocation?13:14)}}function RG(n,e){if(n&1&&(w(0,"div",66)(1,"div",67),Xe(2,MG,20,4)(3,OG,25,5,"div",68),b()()),n&2){let t=F();ct("sos-success",t.sosSuccess),T(2),et(t.sosSuccess?3:2)}}function NG(n,e){if(n&1){let t=Me();w(0,"div",20),de(1,"div",94),w(2,"button",95),ne("click",function(){J(t);let r=F();return X(r.triggerSOS())}),w(3,"span",96),S(4,"PRESS SOS"),b(),w(5,"span",97),at(),w(6,"svg",98),de(7,"path",99),b()()()()}}function kG(n,e){n&1&&(w(0,"div",100)(1,"button",101)(2,"span",96),S(3,"PRESS SOS"),b()()(),w(4,"p",102),at(),w(5,"svg",103),de(6,"path",64),b(),Ut(),w(7,"a",104),S(8,"Sign in"),b(),S(9," to enable "),b())}function LG(n,e){n&1&&(at(),w(0,"svg",103),de(1,"path",122),b())}function FG(n,e){n&1&&(at(),w(0,"svg",103),de(1,"path",123),b())}function VG(n,e){n&1&&(at(),w(0,"svg",103),de(1,"path",124),b())}function BG(n,e){n&1&&(w(0,"div",125),at(),w(1,"svg",126),de(2,"circle",127)(3,"polyline",128),b(),Ut(),w(4,"span"),S(5,"Recent"),b()())}function jG(n,e){if(n&1){let t=Me();w(0,"div",108),ne("click",function(){let r=J(t).$implicit,o=F(3);return X(o.viewReportDetail(r.id))}),w(1,"div",109),ie(2,LG,2,0,"svg",110)(3,FG,2,0,"svg",110)(4,VG,2,0,"svg",110),w(5,"span"),S(6),b()(),w(7,"div",111)(8,"h4",112),S(9),b(),w(10,"div",113),at(),w(11,"svg",114),de(12,"path",50)(13,"circle",51),b(),Ut(),w(14,"span"),S(15),b()(),w(16,"div",115)(17,"div",116),at(),w(18,"svg",103),de(19,"path",117),b(),Ut(),w(20,"span"),S(21),b()(),ie(22,BG,6,0,"div",118),b()(),w(23,"div",119),at(),w(24,"svg",120),de(25,"polyline",121),b()()()}if(n&2){let t=e.$implicit;ct("priority-high",t.priority==="high")("priority-medium",t.priority==="medium")("priority-low",t.priority==="low"||!t.priority),T(),ct("high",t.priority==="high")("medium",t.priority==="medium")("low",t.priority==="low"||!t.priority),T(),Z("ngIf",t.priority==="high"),T(),Z("ngIf",t.priority==="medium"),T(),Z("ngIf",t.priority==="low"||!t.priority),T(2),ge(t.priority==="high"?"HIGH":t.priority==="medium"?"MEDIUM":"LOW"),T(3),ge(t.description),T(6),si("",t.street,", ",t.barangay),T(6),ge(t.reporterName||"Anonymous"),T(),Z("ngIf",t.createdAt)}}function UG(n,e){if(n&1&&(w(0,"div",106),ie(1,jG,26,21,"div",107),b()),n&2){let t=F().ngIf;T(),Z("ngForOf",t)}}function zG(n,e){n&1&&(w(0,"div",129)(1,"div",130),at(),w(2,"svg",131),de(3,"path",132),b()(),Ut(),w(4,"h4"),S(5,"All Clear"),b(),w(6,"p"),S(7,"No safety alerts at this time. Stay vigilant!"),b()())}function HG(n,e){if(n&1&&(w(0,"div"),ie(1,UG,2,1,"div",105)(2,zG,8,0,"ng-template",null,0,rn),b()),n&2){let t=e.ngIf,i=Mt(3);T(),Z("ngIf",t.length>0)("ngIfElse",i)}}function $G(n,e){if(n&1){let t=Me();w(0,"div",135),ne("click",function(){let r=J(t).$implicit,o=F(3);return X(o.viewReportDetail(r.id))}),w(1,"div",136),at(),w(2,"svg",103),de(3,"path",137),b(),Ut(),w(4,"span"),S(5,"OFFICIAL"),b()(),w(6,"h4",138),S(7),b(),w(8,"div",139),at(),w(9,"svg",126),de(10,"path",50)(11,"circle",51),b(),Ut(),w(12,"span"),S(13),b()(),w(14,"div",140),S(15),b()()}if(n&2){let t=e.$implicit;ct("priority-high",t.priority==="high")("priority-medium",t.priority==="medium")("priority-low",t.priority==="low"||!t.priority),T(7),ge(t.description),T(6),si("",t.street,", ",t.barangay),T(),ct("high",t.priority==="high")("medium",t.priority==="medium")("low",t.priority==="low"||!t.priority),T(),me(" ",t.priority==="high"?"HIGH PRIORITY":t.priority==="medium"?"MEDIUM":"LOW"," ")}}function qG(n,e){if(n&1&&(w(0,"div"),ie(1,$G,16,16,"div",134),b()),n&2){let t=F().ngIf;T(),Z("ngForOf",t)}}function GG(n,e){n&1&&(w(0,"div",141),at(),w(1,"svg",142),de(2,"path",143)(3,"polyline",144),b(),Ut(),w(4,"p"),S(5,"No police alerts at this time"),b()())}function WG(n,e){if(n&1&&(w(0,"div"),ie(1,qG,2,1,"div",133)(2,GG,6,0,"ng-template",null,1,rn),b()),n&2){let t=e.ngIf,i=Mt(3);T(),Z("ngIf",t.length>0)("ngIfElse",i)}}var _y=class n{authService=U(In);reportService=U(Rn);notificationService=U(bo);router=U(wt);sosSubscription;currentUser$=this.authService.currentUser$;isAdmin$=this.authService.isAdmin$;citizenReports$=this.reportService.getAllReports().pipe(le(e=>e.filter(t=>t.status==="approved"&&!t.isAdminReport&&t.reporterId!=="ADMIN")));adminAlerts$=this.reportService.getAllReports().pipe(le(e=>e.filter(t=>t.status==="approved"&&(t.isAdminReport||t.reporterId==="ADMIN"))));approvedReports$=this.reportService.getAllReports().pipe(le(e=>e.filter(t=>t.status==="approved")));sosActive=!1;sosSuccess=!1;sosProgress=0;sosCountdown=5;sosDuration=5;userLocation=null;locationError=null;ngOnInit(){}ngOnDestroy(){this.sosSubscription&&this.sosSubscription.unsubscribe()}navigateToReport(){this.router.navigate(["/report"])}viewFullMap(){this.router.navigate(["/map"])}triggerSOS(){this.authService.currentUser$.pipe(ti(1)).subscribe(e=>{if(!e){alert("Please log in to send an emergency SOS alert."),this.router.navigate(["/login"]);return}this.sosActive=!0,this.sosSuccess=!1,this.sosProgress=0,this.sosCountdown=this.sosDuration,this.userLocation=null,this.locationError=null,this.getLocationAsync();let t=50,i=0;this.sosSubscription=y0(100).subscribe(()=>{i++,this.sosProgress=i/t*100,this.sosCountdown=Math.ceil(this.sosDuration-i/10),this.sosCountdown<0&&(this.sosCountdown=0),i>=t&&(this.sosSubscription?.unsubscribe(),this.completeSOS(e))})})}getLocationAsync(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{this.userLocation={lat:e.coords.latitude,lng:e.coords.longitude},console.log("Location obtained:",this.userLocation)},e=>{console.warn("Location error:",e.message),this.locationError=e.message,navigator.geolocation.getCurrentPosition(t=>{this.userLocation={lat:t.coords.latitude,lng:t.coords.longitude},console.log("Location obtained (low accuracy):",this.userLocation)},t=>{console.error("Location failed completely:",t.message)},{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4})},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}completeSOS(e){this.userLocation?this.sendSOSToAdmin(e,this.userLocation):navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{let i={lat:t.coords.latitude,lng:t.coords.longitude};this.sendSOSToAdmin(e,i)},()=>{console.warn("Could not obtain location for SOS"),this.sendSOSToAdmin(e)},{enableHighAccuracy:!1,timeout:3e3,maximumAge:6e4}):this.sendSOSToAdmin(e)}sendSOSToAdmin(e,t){this.reportService.sendEmergencySOS(e.email||"emergency-user@sos.alert",e.displayName||"Unknown User",t),this.sosSuccess=!0,navigator.vibrate&&navigator.vibrate([200,100,200])}closeSosOverlay(){this.sosActive=!1,this.sosSuccess=!1,this.sosProgress=0,this.sosCountdown=this.sosDuration,this.router.navigate(["/notification"],{queryParams:{sos:"sent"}})}viewReportDetail(e){this.router.navigate(["/report-detail",e])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-dashboard"]],decls:98,vars:10,consts:[["noReports",""],["noPoliceAlerts",""],[1,"dashboard-container"],[1,"sos-overlay",3,"sos-success"],[1,"dashboard-content"],[1,"left-section"],[1,"emergency-sos"],[1,"sos-bg-rings"],[1,"ring","ring-1"],[1,"ring","ring-2"],[1,"ring","ring-3"],[1,"sos-content"],[1,"sos-icon-container"],[1,"sos-glow"],[1,"sos-icon"],["xmlns","http://www.w3.org/2000/svg","width","50","height","50","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"sos-tagline"],[1,"sos-btn-wrapper"],[1,"middle-section"],[1,"section-header"],[1,"section-subtitle"],[1,"alerts-grid"],[4,"ngIf"],[1,"right-section"],[1,"map-card"],[1,"map-preview",3,"click"],[1,"map-illustration"],["viewBox","0 0 200 160","xmlns","http://www.w3.org/2000/svg"],["width","200","height","160","fill","#e3f2fd"],["d","M0 80 L200 80","stroke","#b0bec5","stroke-width","3","fill","none"],["d","M100 0 L100 160","stroke","#b0bec5","stroke-width","3","fill","none"],["d","M50 40 L150 120","stroke","#cfd8dc","stroke-width","2","fill","none"],["transform","translate(60, 50)"],["r","12","fill","#dc3545","opacity","0.3"],["r","6","fill","#dc3545"],["transform","translate(130, 70)"],["r","10","fill","#fd7e14","opacity","0.3"],["r","5","fill","#fd7e14"],["transform","translate(90, 110)"],["r","8","fill","#28a745","opacity","0.3"],["r","4","fill","#28a745"],["transform","translate(150, 40)"],["r","10","fill","#dc3545","opacity","0.3"],["r","5","fill","#dc3545"],[1,"map-overlay"],[1,"map-icon"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"map-legend"],[1,"legend-item"],[1,"legend-dot","high"],[1,"legend-dot","medium"],[1,"legend-dot","low"],[1,"view-map-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"],["x1","8","y1","2","x2","8","y2","18"],["x1","16","y1","6","x2","16","y2","22"],[1,"police-alerts-section"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"],[1,"police-alerts-container"],[1,"sos-overlay"],[1,"sos-modal"],[1,"sos-success-container"],[1,"sos-sending"],[1,"sos-pulse-ring"],[1,"sos-pulse-ring","delay-1"],[1,"sos-pulse-ring","delay-2"],[1,"sos-icon-large"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"sos-title"],[1,"sos-subtitle"],[1,"sos-location-status"],[1,"location-obtained"],[1,"location-pending"],[1,"sos-progress-bar"],[1,"sos-progress-fill"],[1,"sos-countdown"],[1,"sos-success-icon"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["points","20 6 9 17 4 12"],[1,"sos-title","success"],[1,"sos-info"],[1,"sos-details"],[1,"sos-detail-item"],[1,"detail-icon","location"],[1,"detail-icon","services"],[1,"detail-icon","admin"],[1,"sos-close-btn",3,"click"],[1,"sos-btn-pulse"],[1,"sos-btn",3,"click"],[1,"btn-text"],[1,"btn-icon"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"sos-btn-wrapper","disabled"],["disabled","","title","Please sign in to use Emergency SOS",1,"sos-btn","disabled"],[1,"auth-notice"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","currentColor"],["routerLink","/login",1,"auth-link"],["class","alerts-container",4,"ngIf","ngIfElse"],[1,"alerts-container"],["class","alert-card",3,"priority-high","priority-medium","priority-low","click",4,"ngFor","ngForOf"],[1,"alert-card",3,"click"],[1,"priority-badge"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","currentColor",4,"ngIf"],[1,"card-body"],[1,"alert-title"],[1,"alert-location"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"alert-meta"],[1,"reporter"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],["class","timestamp",4,"ngIf"],[1,"card-arrow"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","9 18 15 12 9 6"],["d","M12 2L1 21h22L12 2zm0 3.83L19.53 19H4.47L12 5.83zM11 10v4h2v-4h-2zm0 6v2h2v-2h-2z"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"],[1,"timestamp"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["points","12 6 12 12 16 14"],[1,"no-alerts"],[1,"no-alerts-icon"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M22 12h-4l-3 9L9 3l-3 9H2"],[4,"ngIf","ngIfElse"],["class","police-alert-card",3,"priority-high","priority-medium","priority-low","click",4,"ngFor","ngForOf"],[1,"police-alert-card",3,"click"],[1,"police-badge"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],[1,"police-alert-title"],[1,"police-alert-location"],[1,"police-alert-priority"],[1,"no-police-alerts"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],["points","9 12 12 15 16 10"]],template:function(t,i){if(t&1&&(w(0,"div",2),Xe(1,RG,4,3,"div",3),w(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),de(6,"div",8)(7,"div",9)(8,"div",10),b(),w(9,"div",11)(10,"div",12),de(11,"div",13),w(12,"div",14),at(),w(13,"svg",15),de(14,"polygon",16)(15,"line",17)(16,"line",18),b()()(),Ut(),w(17,"h2"),S(18,"EMERGENCY"),de(19,"br"),S(20,"SOS"),b(),w(21,"p",19),S(22,"One tap emergency alert"),b(),Xe(23,NG,8,0,"div",20),_e(24,"async"),Ws(25,kG,10,0),b()()(),w(26,"div",21)(27,"div",22)(28,"h3"),S(29,"Citizen Reports"),b(),w(30,"p",23),S(31,"Reports submitted by community members"),b()(),w(32,"div",24),ie(33,HG,4,2,"div",25),_e(34,"async"),b()(),w(35,"div",26)(36,"div",22)(37,"h3"),S(38,"Incident Map"),b(),w(39,"p",23),S(40,"View reported incidents"),b()(),w(41,"div",27)(42,"div",28),ne("click",function(){return i.viewFullMap()}),w(43,"div",29),at(),w(44,"svg",30),de(45,"rect",31)(46,"path",32)(47,"path",33)(48,"path",34),w(49,"g",35),de(50,"circle",36)(51,"circle",37),b(),w(52,"g",38),de(53,"circle",39)(54,"circle",40),b(),w(55,"g",41),de(56,"circle",42)(57,"circle",43),b(),w(58,"g",44),de(59,"circle",45)(60,"circle",46),b()()(),Ut(),w(61,"div",47)(62,"div",48),at(),w(63,"svg",49),de(64,"path",50)(65,"circle",51),b()(),Ut(),w(66,"span"),S(67,"Click to explore"),b()()(),w(68,"div",52)(69,"div",53),de(70,"span",54),w(71,"span"),S(72,"High Priority"),b()(),w(73,"div",53),de(74,"span",55),w(75,"span"),S(76,"Medium"),b()(),w(77,"div",53),de(78,"span",56),w(79,"span"),S(80,"Low"),b()()(),w(81,"button",57),ne("click",function(){return i.viewFullMap()}),at(),w(82,"svg",58),de(83,"polygon",59)(84,"line",60)(85,"line",61),b(),S(86," View Full Map "),b()(),Ut(),w(87,"div",62)(88,"div",22)(89,"h3"),at(),w(90,"svg",63),de(91,"path",64),b(),S(92," Police Alerts "),b(),Ut(),w(93,"p",23),S(94,"Official announcements from BCCD"),b()(),w(95,"div",65),ie(96,WG,4,2,"div",25),_e(97,"async"),b()()()()()),t&2){let r;T(),et(i.sosActive?1:-1),T(22),et((r=qe(24,4,i.currentUser$))?23:25,r),T(10),Z("ngIf",qe(34,6,i.citizenReports$)),T(63),Z("ngIf",qe(97,8,i.adminAlerts$))}},dependencies:[Nt,mi,wn,Zo,Yi,bn],styles:['.dashboard-container[_ngcontent-%COMP%]{width:100%;background:#f5f5f5;min-height:calc(100vh - 60px);padding:0;font-family:inherit}.dashboard-tabs[_ngcontent-%COMP%]{display:flex;gap:0;margin:0;padding:0 30px;border-bottom:2px solid #d0d0d0;background:#fff;overflow-x:auto;box-shadow:0 1px 3px #0000000d;-webkit-overflow-scrolling:touch}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{flex:0 0 auto;padding:14px 24px;border:none;background:#fff;color:#666;font-size:13px;font-weight:500;cursor:pointer;border-bottom:3px solid transparent;transition:all .3s ease;position:relative;white-space:nowrap}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover{color:#333}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{color:#1a3a52;border-bottom-color:#1a3a52;font-weight:600}.dashboard-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2.5fr 1.2fr;gap:30px;padding:30px;max-width:100%;margin:0 auto;min-height:calc(100vh - 120px)}@media (max-width: 1400px){.dashboard-content[_ngcontent-%COMP%]{grid-template-columns:1fr 2fr 1.2fr;gap:25px;padding:25px}}@media (max-width: 1200px){.dashboard-content[_ngcontent-%COMP%]{grid-template-columns:1fr 1.8fr;gap:20px;padding:20px}.right-section[_ngcontent-%COMP%]{grid-column:1 / -1}}@media (max-width: 992px){.dashboard-content[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:20px}.middle-section[_ngcontent-%COMP%]{grid-column:1 / -1;order:-1}}@media (max-width: 768px){.dashboard-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px;padding:15px}.middle-section[_ngcontent-%COMP%]{order:-1}.left-section[_ngcontent-%COMP%]{order:0}.right-section[_ngcontent-%COMP%]{order:1}}@media (max-width: 480px){.dashboard-content[_ngcontent-%COMP%]{padding:10px;gap:15px}}.left-section[_ngcontent-%COMP%]   .emergency-sos[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;padding:40px 30px;border-radius:16px;text-align:center;box-shadow:0 8px 30px #dc354566;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;min-height:360px;position:relative;overflow:hidden}.sos-bg-rings[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;height:100%;pointer-events:none}.sos-bg-rings[_ngcontent-%COMP%]   .ring[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%;border:2px solid rgba(255,255,255,.1)}.sos-bg-rings[_ngcontent-%COMP%]   .ring-1[_ngcontent-%COMP%]{width:200px;height:200px;animation:_ngcontent-%COMP%_ringPulse 4s ease-in-out infinite}.sos-bg-rings[_ngcontent-%COMP%]   .ring-2[_ngcontent-%COMP%]{width:300px;height:300px;animation:_ngcontent-%COMP%_ringPulse 4s ease-in-out infinite 1s}.sos-bg-rings[_ngcontent-%COMP%]   .ring-3[_ngcontent-%COMP%]{width:400px;height:400px;animation:_ngcontent-%COMP%_ringPulse 4s ease-in-out infinite 2s}@keyframes _ngcontent-%COMP%_ringPulse{0%,to{transform:translate(-50%,-50%) scale(.8);opacity:0}50%{transform:translate(-50%,-50%) scale(1);opacity:.3}}.sos-content[_ngcontent-%COMP%]{position:relative;z-index:2;display:flex;flex-direction:column;align-items:center}.sos-icon-container[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.sos-glow[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:90px;height:90px;background:radial-gradient(circle,rgba(255,255,255,.4) 0%,transparent 70%);border-radius:50%;animation:_ngcontent-%COMP%_glowPulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_glowPulse{0%,to{transform:translate(-50%,-50%) scale(1);opacity:.6}50%{transform:translate(-50%,-50%) scale(1.3);opacity:.3}}.emergency-sos[_ngcontent-%COMP%]   .sos-icon[_ngcontent-%COMP%]{position:relative;z-index:1;animation:_ngcontent-%COMP%_iconFloat 3s ease-in-out infinite;color:#fff}@keyframes _ngcontent-%COMP%_iconFloat{0%,to{transform:translateY(0)}50%{transform:translateY(-8px)}}.emergency-sos[_ngcontent-%COMP%]   .sos-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:50px;height:50px;filter:drop-shadow(0 4px 8px rgba(0,0,0,.2))}@media (max-width: 768px){.left-section[_ngcontent-%COMP%]   .emergency-sos[_ngcontent-%COMP%]{padding:30px 20px;min-height:280px;border-radius:12px}.emergency-sos[_ngcontent-%COMP%]   .sos-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:45px;height:45px}.sos-bg-rings[_ngcontent-%COMP%]   .ring-1[_ngcontent-%COMP%]{width:150px;height:150px}.sos-bg-rings[_ngcontent-%COMP%]   .ring-2[_ngcontent-%COMP%]{width:220px;height:220px}.sos-bg-rings[_ngcontent-%COMP%]   .ring-3[_ngcontent-%COMP%]{width:290px;height:290px}}.emergency-sos[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;margin:0 0 8px;font-weight:800;letter-spacing:2px;line-height:1.2;text-shadow:0 2px 4px rgba(0,0,0,.2)}@media (max-width: 768px){.emergency-sos[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}}.emergency-sos[_ngcontent-%COMP%]   .sos-tagline[_ngcontent-%COMP%]{font-size:13px;margin:0 0 25px;opacity:.85;font-weight:500;letter-spacing:.5px}.sos-btn-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block}.sos-btn-wrapper.disabled[_ngcontent-%COMP%]{opacity:.6}.sos-btn-pulse[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;height:100%;background:#ffffff4d;border-radius:50px;animation:_ngcontent-%COMP%_btnPulseWave 2s ease-out infinite;pointer-events:none}@keyframes _ngcontent-%COMP%_btnPulseWave{0%{transform:translate(-50%,-50%) scale(1);opacity:.8}to{transform:translate(-50%,-50%) scale(1.5);opacity:0}}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]{position:relative;background:linear-gradient(135deg,#fff,#f8f9fa);color:#dc3545;border:none;padding:16px 40px;border-radius:50px;font-size:16px;font-weight:800;cursor:pointer;transition:all .4s cubic-bezier(.175,.885,.32,1.275);box-shadow:0 6px 20px #00000040,0 0 #fff6;min-height:56px;display:flex;align-items:center;justify-content:center;gap:10px;overflow:hidden;letter-spacing:1px}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(220,53,69,.15),transparent);animation:_ngcontent-%COMP%_shimmer 3s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%}50%,to{left:100%}}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{position:relative;z-index:1}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_phoneRing 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_phoneRing{0%,to{transform:rotate(0)}10%,30%{transform:rotate(-10deg)}20%,40%{transform:rotate(10deg)}50%{transform:rotate(0)}}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.02);box-shadow:0 10px 30px #00000059,0 0 30px #ffffff4d}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:hover   .btn-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_phoneRingFast .5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_phoneRingFast{0%,to{transform:rotate(0)}25%{transform:rotate(-15deg)}75%{transform:rotate(15deg)}}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px) scale(.98);box-shadow:0 4px 15px #0000004d}.emergency-sos[_ngcontent-%COMP%]   .sos-btn.disabled[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0e0e0,#d5d5d5);color:#9e9e9e;cursor:not-allowed;box-shadow:0 4px 12px #00000026}.emergency-sos[_ngcontent-%COMP%]   .sos-btn.disabled[_ngcontent-%COMP%]:before{display:none}.emergency-sos[_ngcontent-%COMP%]   .sos-btn.disabled[_ngcontent-%COMP%]:hover{transform:none;box-shadow:0 4px 12px #00000026}.sos-btn-wrapper.disabled[_ngcontent-%COMP%]   .sos-btn-pulse[_ngcontent-%COMP%]{display:none}.emergency-sos[_ngcontent-%COMP%]   .auth-notice[_ngcontent-%COMP%]{margin-top:18px;font-size:13px;color:#ffffffd9;text-align:center;display:flex;align-items:center;justify-content:center;gap:6px}.emergency-sos[_ngcontent-%COMP%]   .auth-notice[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.9}.emergency-sos[_ngcontent-%COMP%]   .auth-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:700;border-bottom:2px solid rgba(255,255,255,.5);transition:all .3s ease}.emergency-sos[_ngcontent-%COMP%]   .auth-link[_ngcontent-%COMP%]:hover{color:#ffeb3b;border-bottom-color:#ffeb3b}.middle-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px}.middle-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#1a3a52;font-weight:700}.middle-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:6px 0 0;font-size:14px;color:#666;font-weight:400}@media (max-width: 768px){.middle-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}.alerts-grid[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:16px;box-shadow:0 4px 20px #00000014}.alerts-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.alert-card[_ngcontent-%COMP%]{display:flex;align-items:stretch;background:linear-gradient(135deg,#fff,#f8f9fa);border-radius:14px;overflow:hidden;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #0000000f;border:1px solid rgba(0,0,0,.06);position:relative}.alert-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #0000001f}.alert-card.priority-high[_ngcontent-%COMP%]{border-left:5px solid #dc3545}.alert-card.priority-medium[_ngcontent-%COMP%]{border-left:5px solid #fd7e14}.alert-card.priority-low[_ngcontent-%COMP%]{border-left:5px solid #28a745}.priority-badge[_ngcontent-%COMP%]{position:absolute;top:12px;right:50px;display:inline-flex;align-items:center;gap:5px;padding:5px 12px;border-radius:20px;font-size:.7rem;font-weight:700;letter-spacing:.5px;text-transform:uppercase}.priority-badge.high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;box-shadow:0 2px 8px #dc354559}.priority-badge.medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fd7e14,#e76f00);color:#fff;box-shadow:0 2px 8px #fd7e1459}.priority-badge.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);color:#fff;box-shadow:0 2px 8px #28a74559}.priority-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.card-body[_ngcontent-%COMP%]{flex:1;padding:20px 25px;display:flex;flex-direction:column;gap:12px}.alert-title[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:700;color:#1a3a52;line-height:1.4;padding-right:100px}.alert-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#555;font-size:.95rem}.alert-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a3a52;flex-shrink:0}.alert-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-top:8px;padding-top:12px;border-top:1px solid rgba(0,0,0,.06)}.alert-meta[_ngcontent-%COMP%]   .reporter[_ngcontent-%COMP%], .alert-meta[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.85rem;color:#777}.alert-meta[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#999}.card-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:0 20px;background:#1a3a5208;color:#1a3a52;transition:all .3s ease}.alert-card[_ngcontent-%COMP%]:hover   .card-arrow[_ngcontent-%COMP%]{background:#1a3a5214;color:#1a3a52}.alert-card[_ngcontent-%COMP%]:hover   .card-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:translate(4px)}.card-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:transform .3s ease}.no-alerts[_ngcontent-%COMP%]{text-align:center;padding:60px 30px;color:#666}.no-alerts-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 20px;background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-radius:50%;display:flex;align-items:center;justify-content:center}.no-alerts-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#4caf50}.no-alerts[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.3rem;color:#333;font-weight:600}.no-alerts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:#777}@media (max-width: 768px){.alerts-grid[_ngcontent-%COMP%]{padding:15px;border-radius:12px}.alert-card[_ngcontent-%COMP%]{flex-direction:column}.priority-badge[_ngcontent-%COMP%]{position:static;align-self:flex-start;margin:15px 15px 0}.card-body[_ngcontent-%COMP%]{padding:15px 20px 20px}.alert-title[_ngcontent-%COMP%]{font-size:1.1rem;padding-right:0}.alert-meta[_ngcontent-%COMP%]{flex-wrap:wrap;gap:12px}.card-arrow[_ngcontent-%COMP%]{padding:12px;justify-content:flex-end;background:transparent}}.right-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px}.right-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;color:#1a3a52;font-weight:700}.right-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:6px 0 0;font-size:14px;color:#666;font-weight:400}.map-card[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:16px;box-shadow:0 4px 20px #00000014;display:flex;flex-direction:column;gap:16px}.map-preview[_ngcontent-%COMP%]{position:relative;width:100%;border-radius:12px;overflow:hidden;cursor:pointer;transition:all .3s ease}.map-preview[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.map-preview[_ngcontent-%COMP%]:hover   .map-overlay[_ngcontent-%COMP%]{opacity:1}.map-illustration[_ngcontent-%COMP%]{width:100%;height:180px;background:linear-gradient(135deg,#e3f2fd,#bbdefb);display:flex;align-items:center;justify-content:center}.map-illustration[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.map-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#1a3a52b3;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;opacity:0;transition:opacity .3s ease;color:#fff}.map-overlay[_ngcontent-%COMP%]   .map-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center}.map-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.map-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;padding:10px 0;border-top:1px solid rgba(0,0,0,.06);border-bottom:1px solid rgba(0,0,0,.06)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.8rem;color:#666}.legend-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.legend-dot.high[_ngcontent-%COMP%]{background:#dc3545;box-shadow:0 0 0 3px #dc354533}.legend-dot.medium[_ngcontent-%COMP%]{background:#fd7e14;box-shadow:0 0 0 3px #fd7e1433}.legend-dot.low[_ngcontent-%COMP%]{background:#28a745;box-shadow:0 0 0 3px #28a74533}.map-card[_ngcontent-%COMP%]   .view-map-btn[_ngcontent-%COMP%]{width:100%;padding:14px 24px;background:linear-gradient(135deg,#1a3a52,#2a5a7a);color:#fff;border:none;border-radius:10px;font-size:15px;font-weight:700;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:10px;box-shadow:0 4px 12px #1a3a5240}.map-card[_ngcontent-%COMP%]   .view-map-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #1a3a5259}.map-card[_ngcontent-%COMP%]   .view-map-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}@media (max-width: 768px){.map-card[_ngcontent-%COMP%]{padding:15px;border-radius:12px}.map-illustration[_ngcontent-%COMP%]{height:150px}.map-legend[_ngcontent-%COMP%]{gap:12px;flex-wrap:wrap}.legend-item[_ngcontent-%COMP%]{font-size:.75rem}.map-card[_ngcontent-%COMP%]   .view-map-btn[_ngcontent-%COMP%]{padding:12px 20px;font-size:14px}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}}.sos-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#1a3a52f7,#142d41fa);display:flex;align-items:center;justify-content:center;z-index:9999;animation:_ngcontent-%COMP%_fadeIn .3s ease;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.sos-overlay.sos-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a3a52f7,#142d41fa)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.sos-modal[_ngcontent-%COMP%]{text-align:center;padding:50px 40px;max-width:480px;width:90%;background:#ffffff0d;border-radius:20px;border:1px solid rgba(255,255,255,.1);box-shadow:0 25px 50px #0000004d}.sos-sending[_ngcontent-%COMP%]{position:relative;width:140px;height:140px;margin:0 auto 35px}.sos-pulse-ring[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;border:3px solid rgba(220,53,69,.6);animation:_ngcontent-%COMP%_pulseRing 1.5s ease-out infinite}.sos-pulse-ring.delay-1[_ngcontent-%COMP%]{animation-delay:.5s}.sos-pulse-ring.delay-2[_ngcontent-%COMP%]{animation-delay:1s}@keyframes _ngcontent-%COMP%_pulseRing{0%{transform:scale(.5);opacity:1}to{transform:scale(1.8);opacity:0}}.sos-icon-large[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;background:linear-gradient(135deg,#dc3545,#c82333);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 0 40px #dc354580;animation:_ngcontent-%COMP%_iconGlow 1s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_iconGlow{0%{box-shadow:0 0 30px #dc354566}to{box-shadow:0 0 50px #dc3545b3}}.sos-title[_ngcontent-%COMP%]{font-size:26px;color:#fff;margin:0 0 12px;font-weight:700;letter-spacing:2px;text-transform:uppercase}.sos-title.success[_ngcontent-%COMP%]{color:#2ecc71}.sos-subtitle[_ngcontent-%COMP%]{font-size:15px;color:#ffffffb3;margin:0 0 25px;font-weight:400}.sos-info[_ngcontent-%COMP%]{font-size:14px;color:#fff9;margin:0 0 30px}.sos-countdown[_ngcontent-%COMP%]{font-size:14px;color:#fff9;margin:20px 0 0;font-weight:500}.sos-location-status[_ngcontent-%COMP%]{margin-bottom:20px;padding:8px 16px;border-radius:20px;font-size:13px;font-weight:500;display:inline-block}.sos-location-status[_ngcontent-%COMP%]   .location-pending[_ngcontent-%COMP%]{color:#ffffffb3;animation:_ngcontent-%COMP%_blink 1.5s ease-in-out infinite}.sos-location-status[_ngcontent-%COMP%]   .location-obtained[_ngcontent-%COMP%]{color:#2ecc71;font-weight:600}.sos-location-status[_ngcontent-%COMP%]   .location-obtained[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:8px;height:8px;background:#2ecc71;border-radius:50%;margin-right:8px;animation:_ngcontent-%COMP%_pulse 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.5}}.sos-modal[_ngcontent-%COMP%]   .sos-progress-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:#ffffff26;border-radius:3px;overflow:hidden;margin:0}.sos-modal[_ngcontent-%COMP%]   .sos-progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#dc3545,#e74c3c);border-radius:3px;transition:width .1s linear}.sos-success-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease}.sos-success-icon[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#27ae60,#2ecc71);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 25px;color:#fff;box-shadow:0 10px 30px #27ae604d;animation:_ngcontent-%COMP%_successPop .5s ease}@keyframes _ngcontent-%COMP%_successPop{0%{transform:scale(0);opacity:0}50%{transform:scale(1.1)}to{transform:scale(1);opacity:1}}.sos-details[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:12px;padding:20px;margin:25px 0;border:1px solid rgba(255,255,255,.08)}.sos-detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 0;color:#ffffffd9;font-size:14px;font-weight:500}.sos-detail-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(255,255,255,.08)}.sos-detail-item.success[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#2ecc71f2}.sos-detail-item.warning[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e74c3ce6}.detail-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.detail-icon.location[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9)}.detail-icon.location[_ngcontent-%COMP%]:before{content:"";width:12px;height:12px;background:#fff;border-radius:50%;box-shadow:0 0 0 3px #ffffff4d}.detail-icon.services[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e67e22,#d35400)}.detail-icon.services[_ngcontent-%COMP%]:before{content:"";width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:10px solid white}.detail-icon.admin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6,#8e44ad)}.detail-icon.admin[_ngcontent-%COMP%]:before{content:"";width:10px;height:10px;background:#fff;border-radius:50%;position:relative}.detail-icon.admin[_ngcontent-%COMP%]:after{content:"";position:absolute;width:16px;height:8px;background:#fff;border-radius:0 0 8px 8px;margin-top:6px;margin-left:-3px}.sos-close-btn[_ngcontent-%COMP%]{margin-top:10px;padding:14px 50px;font-size:14px;background:linear-gradient(135deg,#1a3a52,#2a5a7a);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;text-transform:uppercase;font-weight:600;letter-spacing:1px}.sos-close-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #1a3a5266}@media (max-width: 768px){.sos-modal[_ngcontent-%COMP%]{padding:40px 25px}.sos-sending[_ngcontent-%COMP%]{width:120px;height:120px}.sos-icon-large[_ngcontent-%COMP%]{width:65px;height:65px}.sos-icon-large[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.sos-title[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1px}.sos-close-btn[_ngcontent-%COMP%]{padding:12px 40px}}@media (max-width: 480px){.sos-modal[_ngcontent-%COMP%]{padding:30px 20px;margin:15px;width:calc(100% - 30px)}.sos-sending[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:25px}.sos-icon-large[_ngcontent-%COMP%]{width:55px;height:55px}.sos-icon-large[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.sos-title[_ngcontent-%COMP%]{font-size:18px}.sos-subtitle[_ngcontent-%COMP%]{font-size:14px}.sos-success-icon[_ngcontent-%COMP%]{width:65px;height:65px}.sos-success-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:36px;height:36px}.sos-details[_ngcontent-%COMP%]{padding:15px}.sos-detail-item[_ngcontent-%COMP%]{font-size:13px}}.police-alerts-section[_ngcontent-%COMP%]{margin-top:25px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:15px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#1a3a52;font-weight:700;display:flex;align-items:center;gap:8px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a3a52}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:4px 0 0;font-size:12px;color:#666;font-weight:400}.police-alerts-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.police-alert-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a3a52,#2a5a7a);border-radius:12px;padding:16px;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.police-alert-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.1) 0%,transparent 100%);pointer-events:none}.police-alert-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 25px #1a3a5266}.police-alert-card.priority-high[_ngcontent-%COMP%]{border-left:4px solid #dc3545}.police-alert-card.priority-medium[_ngcontent-%COMP%]{border-left:4px solid #fd7e14}.police-alert-card.priority-low[_ngcontent-%COMP%]{border-left:4px solid #28a745}.police-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;background:#ffffff26;padding:4px 10px;border-radius:12px;margin-bottom:10px}.police-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ffc107}.police-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.65rem;font-weight:700;color:#ffc107;letter-spacing:1px}.police-alert-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:.95rem;font-weight:600;color:#fff;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.police-alert-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#ffffffbf;font-size:.8rem;margin-bottom:10px}.police-alert-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;opacity:.8}.police-alert-priority[_ngcontent-%COMP%]{display:inline-block;padding:3px 10px;border-radius:10px;font-size:.65rem;font-weight:700;letter-spacing:.5px}.police-alert-priority.high[_ngcontent-%COMP%]{background:#dc35454d;color:#ff6b6b}.police-alert-priority.medium[_ngcontent-%COMP%]{background:#fd7e144d;color:#ffa94d}.police-alert-priority.low[_ngcontent-%COMP%]{background:#28a7454d;color:#69db7c}.no-police-alerts[_ngcontent-%COMP%]{text-align:center;padding:30px 20px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-radius:12px;color:#666}.no-police-alerts[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#28a745;margin-bottom:10px}.no-police-alerts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#777}@media (max-width: 768px){.police-alerts-section[_ngcontent-%COMP%]{margin-top:20px}.police-alert-card[_ngcontent-%COMP%]{padding:14px}.police-alert-title[_ngcontent-%COMP%]{font-size:.9rem}.police-alert-location[_ngcontent-%COMP%]{font-size:.75rem}}']})};var Xi=CF(hL());var yy=class n{data=U(id);auth=U(In);reportService=U(Rn);router=U(wt);map;BAGUIO_COORDS=[16.4167,120.5933];BAGUIO_BOUNDS=[[16.35,120.52],[16.48,120.66]];incidentsLayer=Xi.layerGroup();eventListenerBound=!1;allReports=[];reportsSubscription;activeFilter="all";ngOnInit(){setTimeout(()=>{this.initMap(),this.loadApprovedReports()},100),this.eventListenerBound||(window.addEventListener("viewIncidentDetail",(e=>{this.viewReportDetail(e.detail)})),this.eventListenerBound=!0)}setFilter(e){this.activeFilter=e,this.displayFilteredMarkers(),setTimeout(()=>{this.zoomToFilteredMarkers()},100)}ngOnDestroy(){this.map&&this.map.remove(),this.reportsSubscription&&this.reportsSubscription.unsubscribe()}initMap(){this.map||(this.map=Xi.map("mountainSentinelMap",{center:this.BAGUIO_COORDS,zoom:13,maxBounds:this.BAGUIO_BOUNDS,maxBoundsViscosity:.5}),Xi.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:12,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),this.incidentsLayer.addTo(this.map),this.map.fitBounds(this.BAGUIO_BOUNDS))}loadApprovedReports(){this.reportsSubscription=this.reportService.getAllReports().pipe(le(e=>{console.log("All reports:",e);let t=e.filter(i=>i.status==="approved");return console.log("Approved reports with location:",t.filter(i=>i.location)),t})).subscribe(e=>{this.allReports=e,this.displayFilteredMarkers(),this.activeFilter==="all"&&setTimeout(()=>this.zoomToFilteredMarkers(),300)})}displayFilteredMarkers(){this.incidentsLayer.clearLayers(),(this.activeFilter==="all"?this.allReports:this.allReports.filter(t=>t.priority===this.activeFilter)).forEach(t=>{if(!t.location||!t.location.lat||!t.location.lng)return;let i=t.priority||"low",r=[t.location.lat,t.location.lng],o=Xi.divIcon({className:"custom-marker-icon",html:`<div class="marker-pin marker-${i}" style="
          width: 35px; 
          height: 35px; 
          background-color: ${this.getPriorityColor(i)}; 
          border-radius: 50% 50% 50% 0; 
          transform: rotate(-45deg); 
          border: 3px solid white;
          box-shadow: 0 3px 8px rgba(0,0,0,0.4);
          position: relative;
          cursor: pointer;
        ">
          <div style="
            position: absolute;
            width: 16px;
            height: 16px;
            background-color: white;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
          "></div>
        </div>`,iconSize:[35,35],iconAnchor:[17.5,35],popupAnchor:[0,-35]}),a=Xi.marker(r,{icon:o}),l=`
        <div style="padding: 12px; min-width: 280px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
          <h3 style="margin: 0 0 10px 0; color: #333; font-size: 16px; font-weight: 700; border-bottom: 2px solid ${this.getPriorityColor(i)}; padding-bottom: 8px;">
            ${t.description}
          </h3>
          
          <div style="margin-bottom: 8px;">
            <div style="font-size: 12px; color: #666; margin-bottom: 6px;">
              <strong>Location:</strong><br>
              <span style="margin-left: 16px;">${t.street||"N/A"}</span><br>
              <span style="margin-left: 16px;">${t.barangay||"N/A"}, ${t.city||"Baguio"}</span>
            </div>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px;">
            <div style="font-size: 12px; color: #666;">
              <strong>Status:</strong><br>
              <span style="text-transform: capitalize; color: #28a745; font-weight: 600;">${t.status}</span>
            </div>
            <div style="font-size: 12px; color: #666;">
              <strong>Priority:</strong><br>
              <span style="color: ${this.getPriorityColor(i)}; font-weight: 700; text-transform: uppercase;">
                ${this.getPriorityIcon(i)} ${i}
              </span>
            </div>
          </div>

          ${t.reporterName?`
            <div style="font-size: 11px; color: #666; margin-bottom: 8px; padding: 8px; background: #f8f9fa; border-radius: 4px;">
              <strong>Reported by:</strong> ${t.reporterName}
            </div>
          `:""}

          ${t.timestamp||t.createdAt?`
            <div style="font-size: 11px; color: #888; margin-bottom: 12px;">
              \u{1F4C5} ${new Date(t.timestamp||t.createdAt).toLocaleString()}
            </div>
          `:""}

          <button 
            onclick="window.dispatchEvent(new CustomEvent('viewIncidentDetail', { detail: '${t.id}' }))"
            style="
              background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
              color: white;
              border: none;
              padding: 10px 20px;
              border-radius: 6px;
              font-size: 14px;
              font-weight: 700;
              cursor: pointer;
              width: 100%;
              transition: all 0.3s;
              box-shadow: 0 3px 6px rgba(0,123,255,0.3);
            "
            onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 12px rgba(0,123,255,0.5)'"
            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 6px rgba(0,123,255,0.3)'"
          >
            View Full Report Details
          </button>
        </div>
      `;a.bindPopup(l,{maxWidth:350,className:"custom-popup"}),a.on("click",()=>{a.openPopup()}),this.incidentsLayer.addLayer(a)})}zoomToFilteredMarkers(){let t=(this.activeFilter==="all"?this.allReports:this.allReports.filter(i=>i.priority===this.activeFilter)).filter(i=>i.location&&i.location.lat&&i.location.lng);if(t.length>0){let i=Xi.latLngBounds(t.map(r=>[r.location.lat,r.location.lng]));this.map.fitBounds(i,{padding:[80,80],maxZoom:16})}else this.map.fitBounds(this.BAGUIO_BOUNDS)}viewReportDetail(e){this.router.navigate(["/report-detail",e])}getPriorityColor(e){switch(e){case"high":return"#dc3545";case"medium":return"#ffc107";case"low":return"#28a745";default:return"#6c757d"}}getPriorityIcon(e){switch(e){case"high":return"\u{1F534}";case"medium":return"\u{1F7E0}";case"low":return"\u{1F7E2}";default:return"\u26AA"}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-map"]],decls:15,vars:8,consts:[[1,"full-map-container"],[1,"map-controls"],[1,"map-title"],[1,"filter-controls"],[1,"filter-btn",3,"click"],[1,"filter-btn","filter-high",3,"click"],[1,"filter-btn","filter-medium",3,"click"],[1,"filter-btn","filter-low",3,"click"],[1,"map-wrapper-fullscreen"],["id","mountainSentinelMap",1,"map-container"]],template:function(t,i){t&1&&(Xr(0,"div",0)(1,"div",1)(2,"h2",2),S(3,"Incident Map View"),eo(),Xr(4,"div",3)(5,"button",4),_c("click",function(){return i.setFilter("all")}),S(6," All Incidents "),eo(),Xr(7,"button",5),_c("click",function(){return i.setFilter("high")}),S(8," \u{1F534} High Priority "),eo(),Xr(9,"button",6),_c("click",function(){return i.setFilter("medium")}),S(10," \u{1F7E0} Medium Priority "),eo(),Xr(11,"button",7),_c("click",function(){return i.setFilter("low")}),S(12," \u{1F7E2} Low Priority "),eo()()(),Xr(13,"div",8),Hm(14,"div",9),eo()()),t&2&&(T(5),ct("active",i.activeFilter==="all"),T(2),ct("active",i.activeFilter==="high"),T(2),ct("active",i.activeFilter==="medium"),T(2),ct("active",i.activeFilter==="low"))},dependencies:[Nt],styles:["[_ngcontent-%COMP%]:root{--nav-blue: #0A3D70;--accent-green: #4CAF50;--sos-red: #D32F2F;--light-gray: #F7F7F7;--shadow: 0 6px 20px rgba(13,18,25,.08);--soft-shadow: 0 3px 10px rgba(0,0,0,.12)}.full-map-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 60px);width:100%;background:#f5f5f5}.map-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 30px;background:#fff;border-bottom:2px solid #e0e0e0;box-shadow:0 2px 8px #0000000d;flex-shrink:0}@media (max-width: 768px){.map-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch;padding:15px 20px}}@media (max-width: 480px){.map-controls[_ngcontent-%COMP%]{padding:12px 15px;gap:12px}}.map-title[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:#333}@media (max-width: 768px){.map-title[_ngcontent-%COMP%]{font-size:20px;text-align:center}}@media (max-width: 480px){.map-title[_ngcontent-%COMP%]{font-size:18px}}.filter-controls[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}@media (max-width: 768px){.filter-controls[_ngcontent-%COMP%]{justify-content:center;gap:8px}}@media (max-width: 480px){.filter-controls[_ngcontent-%COMP%]{gap:6px}}.filter-btn[_ngcontent-%COMP%]{padding:10px 18px;border:2px solid #ddd;background:#fff;border-radius:20px;font-size:13px;font-weight:600;cursor:pointer;transition:all .3s ease;color:#666;min-height:44px}@media (max-width: 480px){.filter-btn[_ngcontent-%COMP%]{padding:8px 14px;font-size:12px;flex:1 1 calc(50% - 6px);min-width:0}}.filter-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.filter-btn.active[_ngcontent-%COMP%]{background:#007bff;color:#fff;border-color:#007bff}.filter-btn.filter-high.active[_ngcontent-%COMP%]{background:#dc3545;border-color:#dc3545}.filter-btn.filter-medium.active[_ngcontent-%COMP%]{background:#ffc107;border-color:#ffc107;color:#333}.filter-btn.filter-low.active[_ngcontent-%COMP%]{background:#28a745;border-color:#28a745}@media (max-width: 768px){.map-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}.filter-controls[_ngcontent-%COMP%]{width:100%}.filter-btn[_ngcontent-%COMP%]{flex:1;min-width:calc(50% - 5px)}}.map-wrapper-fullscreen[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;overflow:hidden}.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{width:100%;height:100%;min-height:600px}@media (max-width: 768px){.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{min-height:400px}}@media (max-width: 480px){.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{min-height:350px}}.map-container[_ngcontent-%COMP%]{width:100%;height:100%;min-height:600px}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{min-height:400px}}.map-layout-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 1.2fr;gap:30px;padding:30px;background:#f5f5f5;min-height:calc(100vh - 60px);max-width:1400px;margin:0 auto}@media (max-width: 1200px){.map-layout-container[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr;gap:20px;padding:20px}}@media (max-width: 992px){.map-layout-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}}@media (max-width: 768px){.map-layout-container[_ngcontent-%COMP%]{padding:15px;gap:15px}}@media (max-width: 480px){.map-layout-container[_ngcontent-%COMP%]{padding:10px;gap:12px}}.left-section[_ngcontent-%COMP%]   .emergency-sos[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;padding:40px 30px;border-radius:8px;text-align:center;box-shadow:0 4px 12px #dc35454d;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;min-height:280px}.emergency-sos[_ngcontent-%COMP%]   .sos-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:15px;animation:_ngcontent-%COMP%_pulse 2s infinite}.emergency-sos[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;margin:0 0 8px;font-weight:700;letter-spacing:.5px;line-height:1.2}.emergency-sos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin:0 0 20px;opacity:.95;font-weight:500}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]{background:#fff;color:#dc3545;border:none;padding:10px 28px;border-radius:4px;font-size:15px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #00000026}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000040}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.middle-section[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;min-height:500px}.map-wrapper[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:8px;box-shadow:0 2px 8px #00000014;z-index:1}.custom-marker-icon[_ngcontent-%COMP%]{background:none;border:none}.marker-pin[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s}.marker-pin[_ngcontent-%COMP%]:hover{transform:rotate(-45deg) scale(1.1)}.marker-high[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 2s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:rotate(-45deg) translateY(0)}50%{transform:rotate(-45deg) translateY(-5px)}}.leaflet-popup-content-wrapper[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 3px 14px #0003}.leaflet-popup-content[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.leaflet-popup-tip[_ngcontent-%COMP%]{box-shadow:0 3px 14px #0003}.right-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px}.right-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333;font-weight:600}.right-section[_ngcontent-%COMP%]   .updates-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px;background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 8px #00000014;max-height:400px;overflow-y:auto}.updates-list[_ngcontent-%COMP%]   .update-item[_ngcontent-%COMP%]{display:flex;gap:14px;padding:14px;background-color:#f9f9f9;border-radius:4px;transition:all .2s ease;align-items:flex-start;cursor:pointer}.updates-list[_ngcontent-%COMP%]   .update-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;transform:translate(4px)}.update-item[_ngcontent-%COMP%]   .update-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0;margin-top:2px}.update-item[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]{flex:1}.update-content[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#222;margin-bottom:4px}.update-content[_ngcontent-%COMP%]   .update-description[_ngcontent-%COMP%]{margin:0 0 4px;font-size:12px;color:#666;line-height:1.4}.update-content[_ngcontent-%COMP%]   .update-reporter[_ngcontent-%COMP%]{margin:0 0 8px;font-size:11px;color:#888;font-style:italic}.update-content[_ngcontent-%COMP%]   .update-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;color:#fff;white-space:nowrap}.updates-list[_ngcontent-%COMP%]   .no-updates[_ngcontent-%COMP%]{padding:40px 20px;text-align:center;color:#999}.no-updates[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}}"]})};var CL=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(Ee(Wi),Ee(Hn))};static \u0275dir=xt({type:n})}return n})(),sT=(()=>{class n extends CL{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Yr(n)))(r||n)}})();static \u0275dir=xt({type:n,features:[Mi]})}return n})(),Dy=new ue("");var KG={provide:Dy,useExisting:ji(()=>Co),multi:!0};function ZG(){let n=Ki()?Ki().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var YG=new ue(""),Co=(()=>{class n extends CL{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!ZG())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(Ee(Wi),Ee(Hn),Ee(YG,8))};static \u0275dir=xt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&ne("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[Go([KG]),Mi]})}return n})();function QG(n){return n==null||EL(n)===0}function EL(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var My=new ue(""),IL=new ue("");function JG(n){return QG(n.value)?{required:!0}:null}function XG(n){return e=>{let t=e.value?.length??EL(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function fL(n){return null}function xL(n){return n!=null}function SL(n){return Ho(n)?_t(n):n}function TL(n){let e={};return n.forEach(t=>{e=t!=null?K(K({},e),t):e}),Object.keys(e).length===0?null:e}function DL(n,e){return e.map(t=>t(n))}function e7(n){return!n.validate}function ML(n){return n.map(e=>e7(e)?e:t=>e.validate(t))}function t7(n){if(!n)return null;let e=n.filter(xL);return e.length==0?null:function(t){return TL(DL(t,e))}}function aT(n){return n!=null?t7(ML(n)):null}function n7(n){if(!n)return null;let e=n.filter(xL);return e.length==0?null:function(t){let i=DL(t,e).map(SL);return v0(i).pipe(le(TL))}}function cT(n){return n!=null?n7(ML(n)):null}function pL(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function i7(n){return n._rawValidators}function r7(n){return n._rawAsyncValidators}function rT(n){return n?Array.isArray(n)?n:[n]:[]}function by(n,e){return Array.isArray(n)?n.includes(e):n===e}function gL(n,e){let t=rT(e);return rT(n).forEach(r=>{by(t,r)||t.push(r)}),t}function mL(n,e){return rT(e).filter(t=>!by(n,t))}var Cy=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=aT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},sd=class extends Cy{name;get formDirective(){return null}get path(){return null}},Jf=class extends Cy{_parent=null;name=null;valueAccessor=null},Ey=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},o7={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Zme=pe(K({},o7),{"[class.ng-submitted]":"isSubmitted"}),Ea=(()=>{class n extends Ey{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Ee(Jf,2))};static \u0275dir=xt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&ct("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Mi]})}return n})(),ad=(()=>{class n extends Ey{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Ee(sd,10))};static \u0275dir=xt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&ct("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Mi]})}return n})();var Wf="VALID",wy="INVALID",rd="PENDING",Kf="DISABLED",Ca=class{},Iy=class extends Ca{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Yf=class extends Ca{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Qf=class extends Ca{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},od=class extends Ca{status;source;constructor(e,t){super(),this.status=e,this.source=t}},oT=class extends Ca{source;constructor(e){super(),this.source=e}},xy=class extends Ca{source;constructor(e){super(),this.source=e}};function AL(n){return(Ay(n)?n.validators:n)||null}function s7(n){return Array.isArray(n)?aT(n):n||null}function PL(n,e){return(Ay(e)?e.asyncValidators:n)||null}function a7(n){return Array.isArray(n)?cT(n):n||null}function Ay(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function c7(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new re(1e3,"");if(!i[t])throw new re(1001,"")}function l7(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new re(1002,"")})}var Sy=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return dn(this.statusReactive)}set status(e){dn(()=>this.statusReactive.set(e))}_status=lu(()=>this.statusReactive());statusReactive=Gi(void 0);get valid(){return this.status===Wf}get invalid(){return this.status===wy}get pending(){return this.status==rd}get disabled(){return this.status===Kf}get enabled(){return this.status!==Kf}errors;get pristine(){return dn(this.pristineReactive)}set pristine(e){dn(()=>this.pristineReactive.set(e))}_pristine=lu(()=>this.pristineReactive());pristineReactive=Gi(!0);get dirty(){return!this.pristine}get touched(){return dn(this.touchedReactive)}set touched(e){dn(()=>this.touchedReactive.set(e))}_touched=lu(()=>this.touchedReactive());touchedReactive=Gi(!1);get untouched(){return!this.touched}_events=new Qt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mL(e,this._rawAsyncValidators))}hasValidator(e){return by(this._rawValidators,e)}hasAsyncValidator(e){return by(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(K({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Qf(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Qf(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(K({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Yf(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Yf(!0,i))}markAsPending(e={}){this.status=rd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new od(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(K({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Kf,this.errors=null,this._forEachChild(r=>{r.disable(pe(K({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Iy(this.value,i)),this._events.next(new od(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(K({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Wf,this._forEachChild(i=>{i.enable(pe(K({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(K({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wf||this.status===rd)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Iy(this.value,t)),this._events.next(new od(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(K({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kf:Wf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=rd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=SL(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new od(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new nn,this.statusChanges=new nn}_calculateStatus(){return this._allControlsDisabled()?Kf:this.errors?wy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(rd)?rd:this._anyControlsHaveStatus(wy)?wy:Wf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Yf(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Qf(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ay(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=s7(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=a7(this._rawAsyncValidators)}},Ty=class extends Sy{constructor(e,t,i){super(AL(t),PL(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){l7(this,!0,e),Object.keys(e).forEach(i=>{c7(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new xy(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var lT=new ue("",{providedIn:"root",factory:()=>uT}),uT="always";function u7(n,e){return[...e.path,n]}function OL(n,e,t=uT){RL(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),h7(n,e),p7(n,e),f7(n,e),d7(n,e)}function _L(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function d7(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function RL(n,e){let t=i7(n);e.validator!==null?n.setValidators(pL(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=r7(n);e.asyncValidator!==null?n.setAsyncValidators(pL(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();_L(e._rawValidators,r),_L(e._rawAsyncValidators,r)}function h7(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&NL(n,e)})}function f7(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&NL(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function NL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function p7(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function g7(n,e){n==null,RL(n,e)}function m7(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function _7(n){return Object.getPrototypeOf(n.constructor)===sT}function v7(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function y7(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Co?t=o:_7(o)?i=o:r=o}),r||i||t||null}var w7={provide:sd,useExisting:ji(()=>Qc)},Zf=Promise.resolve(),Qc=(()=>{class n extends sd{callSetDisabledState;get submitted(){return dn(this.submittedReactive)}_submitted=lu(()=>this.submittedReactive());submittedReactive=Gi(!1);_directives=new Set;form;ngSubmit=new nn;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new Ty({},aT(t),cT(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Zf.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),OL(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Zf.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Zf.then(()=>{let i=this._findContainer(t.path),r=new Ty({});g7(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Zf.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Zf.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),v7(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new oT(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(Ee(My,10),Ee(IL,10),Ee(lT,8))};static \u0275dir=xt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&ne("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Go([w7]),Mi]})}return n})();function vL(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function yL(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var b7=class extends Sy{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(AL(t),PL(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ay(t)&&(t.nonNullable||t.initialValueIsDefault)&&(yL(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new xy(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){yL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var C7={provide:Jf,useExisting:ji(()=>us)},wL=Promise.resolve(),us=(()=>{class n extends Jf{_changeDetectorRef;callSetDisabledState;control=new b7;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new nn;constructor(t,i,r,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=y7(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),m7(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){OL(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){wL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Ks(i);wL.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?u7(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(Ee(sd,9),Ee(My,10),Ee(IL,10),Ee(Dy,10),Ee(to,8),Ee(lT,8))};static \u0275dir=xt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Go([C7]),Mi,Zr]})}return n})();var cd=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var E7={provide:Dy,useExisting:ji(()=>Ia),multi:!0};function kL(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function I7(n){return n.split(":")[0]}var Ia=(()=>{class n extends sT{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=U($o).injector;destroyRef=U(pr);cdr=U(to);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ih({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=kL(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=I7(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Yr(n)))(r||n)}})();static \u0275dir=xt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&ne("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Go([E7]),Mi]})}return n})(),ld=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(kL(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(Ee(Hn),Ee(Wi),Ee(Ia,9))};static \u0275dir=xt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),x7={provide:Dy,useExisting:ji(()=>LL),multi:!0};function bL(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function S7(n){return n.split(":")[0]}var LL=(()=>{class n extends sT{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let l=0;l<a.length;l++){let u=a[l],f=this._getOptionValue(u.value);r.push(f)}}else{let a=i.options;for(let l=0;l<a.length;l++){let u=a[l];if(u.selected){let f=this._getOptionValue(u.value);r.push(f)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=S7(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Yr(n)))(r||n)}})();static \u0275dir=xt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&ne("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Go([x7]),Mi]})}return n})(),ud=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(bL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(bL(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(Ee(Hn),Ee(Wi),Ee(LL,9))};static \u0275dir=xt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function T7(n){return typeof n=="number"?n:parseInt(n,10)}var FL=(()=>{class n{_validator=fL;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):fL,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,features:[Zr]})}return n})();var D7={provide:My,useExisting:ji(()=>Jc),multi:!0};var Jc=(()=>{class n extends FL{required;inputName="required";normalizeInput=Ks;createValidator=t=>JG;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Yr(n)))(r||n)}})();static \u0275dir=xt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&qo("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Go([D7]),Mi]})}return n})();var M7={provide:My,useExisting:ji(()=>dT),multi:!0},dT=(()=>{class n extends FL{minlength;inputName="minlength";normalizeInput=t=>T7(t);createValidator=t=>XG(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Yr(n)))(r||n)}})();static \u0275dir=xt({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&qo("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[Go([M7]),Mi]})}return n})();var A7=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Jr({type:n});static \u0275inj=lr({})}return n})();var xa=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:lT,useValue:t.callSetDisabledState??uT}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Jr({type:n});static \u0275inj=lr({imports:[A7]})}return n})();function P7(n,e){if(n&1&&(w(0,"div",41),S(1),b()),n&2){let t=F(2);T(),ge(t.successMessage)}}function O7(n,e){if(n&1&&(w(0,"div",42),S(1),b()),n&2){let t=F(2);T(),ge(t.errorMessage)}}function R7(n,e){if(n&1&&(w(0,"span",43),S(1),b()),n&2){let t=F(2);T(),me(" ",t.validationErrors.fullName," ")}}function N7(n,e){if(n&1&&(w(0,"span",43),S(1),b()),n&2){let t=F(2);T(),me(" ",t.validationErrors.email," ")}}function k7(n,e){if(n&1&&(w(0,"span",43),S(1),b()),n&2){let t=F(2);T(),me(" ",t.validationErrors.description," ")}}function L7(n,e){if(n&1&&(w(0,"span",43),S(1),b()),n&2){let t=F(2);T(),me(" ",t.validationErrors.street," ")}}function F7(n,e){if(n&1){let t=Me();w(0,"div",46),ne("mousedown",function(){let r=J(t).$implicit,o=F(3);return X(o.selectBarangay(r))}),S(1),b()}if(n&2){let t=e.$implicit;T(),me(" ",t," ")}}function V7(n,e){if(n&1&&(w(0,"div",44),ie(1,F7,2,1,"div",45),b()),n&2){let t=F(2);T(),Z("ngForOf",t.filteredBarangays.slice(0,8))}}function B7(n,e){if(n&1&&(w(0,"span",43),S(1),b()),n&2){let t=F(2);T(),me(" ",t.validationErrors.barangay," ")}}function j7(n,e){if(n&1&&(w(0,"p",50),S(1),_e(2,"number"),b()),n&2){let t=F(3);T(),me(" Accuracy: \xB1 ",At(2,1,t.locationAccuracy,"1.0-0")," meters ")}}function U7(n,e){if(n&1&&(w(0,"div",47)(1,"p",48)(2,"strong"),S(3,"Latitude:"),b(),S(4),_e(5,"number"),b(),w(6,"p",48)(7,"strong"),S(8,"Longitude:"),b(),S(9),_e(10,"number"),b(),ie(11,j7,3,4,"p",49),b()),n&2){let t=F(2);T(4),me(" ",At(5,3,t.location.lat,"1.6-6")," "),T(5),me(" ",At(10,6,t.location.lng,"1.6-6")," "),T(2),Z("ngIf",t.locationAccuracy)}}function z7(n,e){if(n&1&&(w(0,"div",51),S(1),b()),n&2){let t=F(2);T(),me(" ",t.locationError," ")}}function H7(n,e){if(n&1&&(w(0,"span",43),S(1),b()),n&2){let t=F(2);T(),me(" ",t.validationErrors.location," ")}}function $7(n,e){if(n&1&&(w(0,"div",55),de(1,"img",56),b()),n&2){let t=F(3);T(),Z("src",t.proofImageUrl,$n)}}function q7(n,e){if(n&1&&(w(0,"div",52)(1,"p",53),S(2," Selected file: "),w(3,"strong"),S(4),b()(),ie(5,$7,2,1,"div",54),b()),n&2){let t=F(2);T(4),ge(t.proofImageFileName),T(),Z("ngIf",t.proofImageUrl)}}function G7(n,e){if(n&1&&(w(0,"div",55),de(1,"img",57),b()),n&2){let t=F(3);T(),Z("src",t.idImageUrl,$n)}}function W7(n,e){if(n&1&&(w(0,"div",52)(1,"p",53),S(2," Selected file: "),w(3,"strong"),S(4),b()(),ie(5,G7,2,1,"div",54),b()),n&2){let t=F(2);T(4),ge(t.idImageFileName),T(),Z("ngIf",t.idImageUrl)}}function K7(n,e){if(n&1){let t=Me();qn(0),w(1,"form",5,1),ne("ngSubmit",function(){J(t);let r=F();return X(r.onSubmit())}),ie(3,P7,2,1,"div",6)(4,O7,2,1,"div",7),w(5,"div",8)(6,"h3",9),S(7,"Reporter Information"),b(),w(8,"div",10)(9,"label",11),S(10,"Full Name *"),b(),w(11,"input",12),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.fullName,r)||(o.fullName=r),X(r)}),b(),ie(12,R7,2,1,"span",13),b(),w(13,"div",10)(14,"label",14),S(15,"Email Address *"),b(),w(16,"input",15),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.email,r)||(o.email=r),X(r)}),b(),ie(17,N7,2,1,"span",13),b()(),w(18,"div",8)(19,"h3",9),S(20,"Safety Alert Details"),b(),w(21,"div",10)(22,"label",16),S(23,"Describe the Safety Concern *"),b(),w(24,"textarea",17),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.description,r)||(o.description=r),X(r)}),ne("blur",function(){J(t);let r=F();return X(r.saveFormProgress())}),b(),ie(25,k7,2,1,"span",13),b(),w(26,"div",10)(27,"label",18),S(28,"Priority Level *"),b(),w(29,"select",19),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.priority,r)||(o.priority=r),X(r)}),ne("blur",function(){J(t);let r=F();return X(r.saveFormProgress())}),w(30,"option",20),S(31,"Low - Minor issue, no immediate danger"),b(),w(32,"option",21),S(33,"Medium - Moderate concern, needs attention"),b(),w(34,"option",22),S(35,"High - Urgent, requires immediate action"),b()()()(),w(36,"div",8)(37,"h3",9),S(38,"Location Information"),b(),w(39,"div",10)(40,"label",23),S(41,"Street Address *"),b(),w(42,"input",24),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.street,r)||(o.street=r),X(r)}),ne("blur",function(){J(t);let r=F();return X(r.saveFormProgress())}),b(),ie(43,L7,2,1,"span",13),b(),w(44,"div",10)(45,"label",25),S(46,"Barangay *"),b(),w(47,"input",26),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.barangay,r)||(o.barangay=r),X(r)}),ne("input",function(r){J(t);let o=F();return X(o.filterBarangays(r))})("focus",function(){J(t);let r=F();return X(r.showBarangaySuggestions=!0)})("blur",function(){J(t);let r=F();return X(r.saveFormProgress())}),b(),ie(48,V7,2,1,"div",27)(49,B7,2,1,"span",13),b(),w(50,"div",10)(51,"label",28),S(52,"Landmark or Nearby Location (Optional)"),b(),w(53,"input",29),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.landmark,r)||(o.landmark=r),X(r)}),ne("blur",function(){J(t);let r=F();return X(r.saveFormProgress())}),b()(),w(54,"div",30)(55,"label"),S(56,"GPS Coordinates *"),b(),w(57,"button",31),ne("click",function(){J(t);let r=F();return X(r.getCurrentLocation())}),S(58),b(),ie(59,U7,12,9,"div",32)(60,z7,2,1,"div",33),w(61,"p",34),S(62," Location must be within Baguio City limits. Click the button above to automatically detect your location. "),b(),ie(63,H7,2,1,"span",13),b()(),w(64,"div",8)(65,"h3",9),S(66,"Evidence"),b(),w(67,"div",10)(68,"label",35),S(69,"Proof of Incident (Photo) (Optional)"),b(),w(70,"input",36),ne("change",function(r){J(t);let o=F();return X(o.onProofImageSelected(r))}),b(),w(71,"p",34),S(72," Upload a clear photo of the incident. Maximum 5MB. This is optional but recommended for verification. "),b(),ie(73,q7,6,2,"div",37),b(),w(74,"div",10)(75,"label",38),S(76,"Valid ID (Optional)"),b(),w(77,"input",39),ne("change",function(r){J(t);let o=F();return X(o.onIdImageSelected(r))}),b(),w(78,"p",34),S(79," Upload a photo of your valid ID for verification purposes. Maximum 5MB. "),b(),ie(80,W7,6,2,"div",37),b()(),w(81,"button",40),S(82),b()(),Gn()}if(n&2){let t=F();T(3),Z("ngIf",t.successMessage),T(),Z("ngIf",t.errorMessage),T(7),rt("ngModel",t.fullName),T(),Z("ngIf",t.validationErrors.fullName),T(4),rt("ngModel",t.email),T(),Z("ngIf",t.validationErrors.email),T(7),rt("ngModel",t.description),T(),Z("ngIf",t.validationErrors.description),T(4),rt("ngModel",t.priority),T(13),rt("ngModel",t.street),T(),Z("ngIf",t.validationErrors.street),T(4),rt("ngModel",t.barangay),T(),Z("ngIf",t.showBarangaySuggestions&&t.filteredBarangays.length>0),T(),Z("ngIf",t.validationErrors.barangay),T(4),rt("ngModel",t.landmark),T(4),Z("disabled",t.isGettingLocation),T(),me(" ",t.isGettingLocation?"Getting Location...":"Get My Current Location"," "),T(),Z("ngIf",t.location),T(),Z("ngIf",t.locationError),T(3),Z("ngIf",t.validationErrors.location),T(10),Z("ngIf",t.proofImageFileName),T(7),Z("ngIf",t.idImageFileName),T(),Z("disabled",t.isLoading||!t.location),T(),me(" ",t.isLoading?"Submitting Alert...":"Submit Safety Alert"," ")}}function Z7(n,e){n&1&&(w(0,"div",58)(1,"div",59)(2,"h3"),S(3,"Authentication Required"),b(),w(4,"p",60),S(5," You need to create an account or sign in before you can submit a safety alert. "),b(),w(6,"p",34),S(7," Creating an account helps us verify reports and keep the community safe. "),b(),w(8,"div",61)(9,"a",62),S(10,"Sign In"),b(),w(11,"span",63),S(12,"or"),b(),w(13,"a",64),S(14,"Sign Up"),b()()()())}var Oy=class n{reportService=U(Rn);authService=U(In);router=U(wt);description="";street="";barangay="";landmark="";city="Baguio City";priority="medium";fullName="";email="";idImageUrl=null;idImageFile=null;idImageFileName=null;proofImageUrl=null;proofImageFile=null;proofImageFileName=null;location=null;locationAccuracy=null;isGettingLocation=!1;locationError=null;errorMessage=null;successMessage=null;isLoading=!1;validationErrors={};baguioBarangays=["A. Bonifacio-Caguioa-Rimando (ABCR)","Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)","Alfonso Tabora","Ambiong","Andres Bonifacio (Lower Bokawkan)","Apugan-Loakan","Asin Road","Atok Trail","Aurora Hill Proper (Malvar-Sgt. Floresca)","Aurora Hill, North Central","Aurora Hill, South Central","Bagong Lipunan (Market Area)","Baguio Dairy Farm","Bakakeng Central","Bakakeng North","Bal-Marcoville (Marcoville)","Balsigan","Bayan Park East","Bayan Park Village","Bayan Park West (Bayan Park)","BGH Compound","Brookside","Brookspoint","Cabinet Hill-Teacher's Camp","Camdas Subdivision","Camp 7","Camp 8","Camp Allen","Campo Filipino","City Camp Central","City Camp Proper","Country Club Village","Cresencia Village","Dagisitan","Dagsian, Lower","Dagsian, Upper","Dizon Subdivision","Dominican Hill-Mirador","Dontogan","DPS Area","Engineers' Hill","Fairview Village","Ferdinand (Happy Homes-Campo Sioco)","Fort del Pilar","Gabriel Silang","General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)","General Luna, Lower","General Luna, Upper","Gibraltar","Greenwater Village","Guisad Central","Guisad Sorong","Happy Hollow","Happy Homes (Happy Homes-Lucban)","Harrison-Claudio Carantes","Hillside","Holy Ghost Extension","Holy Ghost Proper","Honeymoon (Honeymoon-Holy Ghost)","Imelda R. Marcos (La Salle)","Imelda Village","Irisan","Kabayanihan","Kagitingan","Kayang Extension","Kayang-Hilltop","Kias","Legarda-Burnham-Kisad","Liwanag-Loakan","Loakan Proper","Lopez Jaena","Lourdes Subdivision Extension","Lourdes Subdivision, Lower","Lourdes Subdivision, Proper","Lualhati","Lucnab","Magsaysay Private Road","Magsaysay, Lower","Magsaysay, Upper","Malcolm Square-Perfecto (Jose Abad Santos)","Manuel A. Roxas","Market Subdivision, Upper","Middle Quezon Hill Subdivision (Quezon Hill Middle)","Military Cut-off","Mines View Park","Modern Site, East","Modern Site, West","MRR-Queen of Peace","New Lucban","Outlook Drive","Pacdal","Padre Burgos","Padre Zamora","Palma-Urbano (Cari\xF1o-Palma)","Phil-Am","Pinget","Pinsao Pilot Project","Pinsao Proper","Poliwes","Pucsusan","Quezon Hill Proper","Quezon Hill, Upper","Quirino Hill, East","Quirino Hill, Lower","Quirino Hill, Middle","Quirino Hill, West","Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)","Rizal Monument Area","Rock Quarry, Lower","Rock Quarry, Middle","Rock Quarry, Upper","Salud Mitra","San Antonio Village","San Luis Village","San Roque Village","San Vicente","Sanitary Camp, North","Sanitary Camp, South","Santa Escolastica","Santo Rosario","Santo Tomas Proper","Santo Tomas School Area","Scout Barrio","Session Road Area","Slaughter House Area (Santo Ni\xF1o Slaughter)","SLU-SVP Housing Village","South Drive","Teodora Alonzo","Trancoville","Upper General Luna","Victoria Village","Websters Subdivision"];filteredBarangays=[...this.baguioBarangays];showBarangaySuggestions=!1;ngOnInit(){this.authService.currentUser$.subscribe(t=>{t&&(this.email=t.email||"",this.fullName=t.displayName||"")});let e=sessionStorage.getItem("reportFormData");if(e){let t=JSON.parse(e);this.description=t.description||"",this.street=t.street||"",this.barangay=t.barangay||"",this.landmark=t.landmark||"",this.priority=t.priority||"medium"}}filterBarangays(e){let t=e.target.value.toLowerCase();if(this.showBarangaySuggestions=!0,!t){this.filteredBarangays=[...this.baguioBarangays];return}this.filteredBarangays=this.baguioBarangays.filter(i=>i.toLowerCase().includes(t))}selectBarangay(e){this.barangay=e,this.showBarangaySuggestions=!1,this.filteredBarangays=[...this.baguioBarangays]}getAddressFromCoordinates(e,t){return D(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`)).json();if(r&&r.address){let o=r.address,a=o.road||o.street||o.neighbourhood||"",l=o.suburb||o.neighbourhood||o.quarter||"";if(a&&!this.street&&(this.street=a),l){let u=this.baguioBarangays.find(f=>f.toLowerCase().includes(l.toLowerCase())||l.toLowerCase().includes(f.toLowerCase().split("(")[0].trim().toLowerCase()));u&&!this.barangay&&(this.barangay=u)}}}catch(i){console.warn("Could not fetch address details:",i)}})}getCurrentLocation(){if(!navigator.geolocation){this.locationError="Geolocation is not supported by your browser.";return}this.isGettingLocation=!0,this.locationError=null,navigator.geolocation.getCurrentPosition(e=>D(this,null,function*(){let t=e.coords.latitude,i=e.coords.longitude;t>=16.35&&t<=16.48&&i>=120.52&&i<=120.66?(this.location={lat:t,lng:i},this.locationAccuracy=e.coords.accuracy,this.locationError=null,yield this.getAddressFromCoordinates(t,i)):(this.locationError="Your location is outside Baguio City. Please ensure you are within Baguio City to report an incident.",this.location=null),this.isGettingLocation=!1}),e=>{switch(this.isGettingLocation=!1,e.code){case e.PERMISSION_DENIED:this.locationError="Location access denied. Please enable location access to submit a report.";break;case e.POSITION_UNAVAILABLE:this.locationError="Location information unavailable. Please check your GPS settings.";break;case e.TIMEOUT:this.locationError="Location request timed out. Please try again.";break;default:this.locationError="Unable to get your location. Please try again."}this.location=null},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}onProofImageSelected(e){let t=e.target.files[0];if(t){if(t.size>5*1024*1024){this.errorMessage="Proof image must be less than 5MB.";return}this.proofImageFile=t,this.proofImageFileName=t.name;let i=new FileReader;i.onload=r=>{this.proofImageUrl=r.target?.result,this.successMessage="Proof image uploaded successfully!",setTimeout(()=>{this.successMessage==="Proof image uploaded successfully!"&&(this.successMessage=null)},3e3)},i.readAsDataURL(t)}}onIdImageSelected(e){let t=e.target.files[0];if(t){if(t.size>5*1024*1024){this.errorMessage="ID image must be less than 5MB.";return}this.idImageFile=t,this.idImageFileName=t.name;let i=new FileReader;i.onload=r=>{this.idImageUrl=r.target?.result,this.successMessage="ID image uploaded successfully!",setTimeout(()=>{this.successMessage==="ID image uploaded successfully!"&&(this.successMessage=null)},3e3)},i.readAsDataURL(t)}}validateForm(){return this.validationErrors={},this.description.trim()||(this.validationErrors.description="Incident description is required."),this.fullName.trim()||(this.validationErrors.fullName="Full name is required."),(!this.email.trim()||!this.isValidEmail(this.email))&&(this.validationErrors.email="Valid email address is required."),this.street.trim()||(this.validationErrors.street="Street address is required."),this.barangay.trim()||(this.validationErrors.barangay="Barangay is required."),this.location||(this.validationErrors.location="Real-time location is required. Please enable location access."),Object.keys(this.validationErrors).length===0}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}onSubmit(){return D(this,null,function*(){if(this.errorMessage=null,this.successMessage=null,!!this.validateForm()){this.isLoading=!0;try{let e=yield As(this.authService.currentUser$);if(!e){this.errorMessage="You must be logged in to submit a report. Redirecting to login...",setTimeout(()=>this.router.navigate(["/login"]),900),this.isLoading=!1;return}if(!this.location){this.errorMessage="Location is required. Please enable location access and try again.",this.isLoading=!1;return}let t={reporterId:e.uid||e.email||"unknown",reporterName:this.fullName.trim(),reporterEmail:this.email.trim(),description:this.description.trim(),street:this.street.trim(),barangay:this.barangay.trim(),landmark:this.landmark.trim()||void 0,city:this.city,priority:this.priority,location:this.location,locationAccuracy:this.locationAccuracy??void 0,timestamp:new Date().toISOString(),imageUrl:this.proofImageUrl||void 0,idImageUrl:this.idImageUrl||void 0};yield As(this.reportService.submitReport(t)),this.successMessage="Report submitted successfully and is awaiting admin approval.",this.clearForm(),sessionStorage.removeItem("reportFormData")}catch(e){console.error("Report submission failed: - report.ts:120",e),this.errorMessage="Submission failed. Please try again."}finally{this.isLoading=!1}}})}clearForm(){this.description="",this.street="",this.barangay="",this.landmark="",this.priority="medium",this.proofImageUrl=null,this.proofImageFile=null,this.proofImageFileName=null,this.idImageUrl=null,this.idImageFile=null,this.idImageFileName=null,this.location=null,this.locationAccuracy=null,this.locationError=null}saveFormProgress(){let e={description:this.description,street:this.street,barangay:this.barangay,landmark:this.landmark,priority:this.priority};sessionStorage.setItem("reportFormData",JSON.stringify(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-report"]],decls:10,vars:4,consts:[["notLogged",""],["reportForm","ngForm"],[1,"report-page"],[1,"report-container"],[4,"ngIf","ngIfElse"],[3,"ngSubmit"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],[1,"form-section"],[1,"section-title"],[1,"form-group"],["for","fullName"],["id","fullName","type","text","name","fullName","required","","placeholder","Enter your full name",3,"ngModelChange","ngModel"],["class","error-text",4,"ngIf"],["for","email"],["id","email","type","email","name","email","required","","placeholder","your.email@example.com",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","rows","5","required","","placeholder","Describe what happened in detail...",3,"ngModelChange","blur","ngModel"],["for","priority"],["id","priority","name","priority","required","",3,"ngModelChange","blur","ngModel"],["value","low"],["value","medium"],["value","high"],["for","street"],["id","street","type","text","name","street","required","","placeholder","e.g., Session Road",3,"ngModelChange","blur","ngModel"],["for","barangay"],["id","barangay","type","text","name","barangay","required","","placeholder","Start typing to search barangays...","autocomplete","off",3,"ngModelChange","input","focus","blur","ngModel"],["class","barangay-suggestions",4,"ngIf"],["for","landmark"],["id","landmark","type","text","name","landmark","placeholder","e.g., Near Burnham Park",3,"ngModelChange","blur","ngModel"],[1,"form-group","location-info"],["type","button",1,"get-location-btn",3,"click","disabled"],["class","location-display",4,"ngIf"],["class","location-error",4,"ngIf"],[1,"help-text"],["for","proofImage"],["id","proofImage","type","file","name","proofImage","accept","image/*",3,"change"],["class","image-preview-container",4,"ngIf"],["for","idImage"],["id","idImage","type","file","name","idImage","accept","image/*",3,"change"],["type","submit",1,"submit-btn",3,"disabled"],[1,"message","success"],[1,"message","error"],[1,"error-text"],[1,"barangay-suggestions"],["class","suggestion-item",3,"mousedown",4,"ngFor","ngForOf"],[1,"suggestion-item",3,"mousedown"],[1,"location-display"],[1,"location-coords"],["class","location-accuracy",4,"ngIf"],[1,"location-accuracy"],[1,"location-error"],[1,"image-preview-container"],[1,"file-name"],["class","image-preview",4,"ngIf"],[1,"image-preview"],["alt","Proof Preview",3,"src"],["alt","ID Preview",3,"src"],[1,"not-logged"],[1,"auth-prompt-box"],[1,"login-warning"],[1,"action-row"],["routerLink","/login",1,"btn","login-btn"],[1,"or-text"],["routerLink","/login",1,"btn","signup-btn"]],template:function(t,i){if(t&1&&(w(0,"div",2)(1,"div",3)(2,"h2"),S(3,"Submit a Safety Alert"),b(),w(4,"p"),S(5,"Report safety concerns in your neighborhood. All fields marked with * are required."),b(),ie(6,K7,83,24,"ng-container",4),_e(7,"async"),ie(8,Z7,15,0,"ng-template",null,0,rn),b()()),t&2){let r=Mt(9);T(6),Z("ngIf",qe(7,2,i.authService.currentUser$))("ngIfElse",r)}},dependencies:[Nt,mi,wn,xa,cd,ld,ud,Co,Ia,Ea,ad,Jc,us,Qc,Zo,Yi,bn,yc],styles:[".report-page[_ngcontent-%COMP%]{min-height:100vh;background:#fff;display:flex;align-items:flex-start;justify-content:center;padding:40px 20px}@media (max-width: 768px){.report-page[_ngcontent-%COMP%]{padding:20px 15px}}@media (max-width: 480px){.report-page[_ngcontent-%COMP%]{padding:15px 10px}}.report-container[_ngcontent-%COMP%]{max-width:900px;width:100%;margin:0 auto;padding:40px 36px;background:#2c3e50;border-radius:12px;box-shadow:0 8px 32px #0000004d;color:#fff}@media (max-width: 768px){.report-container[_ngcontent-%COMP%]{padding:30px 20px;border-radius:10px}}@media (max-width: 480px){.report-container[_ngcontent-%COMP%]{padding:20px 15px;border-radius:8px}}.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2rem;font-weight:700;margin-bottom:10px;text-align:center;letter-spacing:1px}@media (max-width: 768px){.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}}@media (max-width: 480px){.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}}.report-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#95a5b8;margin-bottom:30px;font-size:.9rem;line-height:1.5;text-align:center;font-weight:400}@media (max-width: 480px){.report-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:20px;font-size:.85rem}}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}@media (max-width: 480px){form[_ngcontent-%COMP%]{gap:18px}}.form-section[_ngcontent-%COMP%]{background:#34495e;padding:25px;border-radius:8px;box-shadow:0 2px 8px #0003}@media (max-width: 480px){.form-section[_ngcontent-%COMP%]{padding:18px 15px}}.section-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#fff;margin:0 0 20px;padding-bottom:10px;border-bottom:2px solid #5dade2;letter-spacing:.5px}@media (max-width: 480px){.section-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:15px}}.form-group[_ngcontent-%COMP%]{margin-bottom:18px}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#95a5b8;font-size:.9rem;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:2px solid #34495e;border-radius:6px;box-sizing:border-box;font-size:16px;font-family:inherit;transition:all .2s;background:#1a252f;color:#fff;min-height:50px}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px 14px}}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#5dade2;background:#243340}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{color:#7f8c8d}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:120px}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{padding:12px;border:2px solid #34495e;border-radius:6px;width:100%;box-sizing:border-box;cursor:pointer;transition:all .2s;background:#1a252f;color:#95a5b8;font-size:.95rem}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]:hover{border-color:#5dade2;background:#243340}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]:focus{outline:none;border-color:#5dade2;background:#243340}.help-text[_ngcontent-%COMP%]{font-size:.875rem;color:#95a5b8;margin-top:8px;font-style:normal}.error-text[_ngcontent-%COMP%]{display:block;color:var(--color-error);font-size:.85rem;margin-top:6px;font-weight:600}.form-group[_ngcontent-%COMP%]{position:relative}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;background:#1a252f;border:2px solid #5dade2;border-top:none;border-radius:0 0 6px 6px;max-height:250px;overflow-y:auto;width:100%;box-shadow:0 4px 10px #0000004d;z-index:1000;color:#fff;top:100%;left:0}.suggestion-item[_ngcontent-%COMP%]{padding:12px 15px;cursor:pointer;transition:background-color .15s;border-bottom:1px solid #34495e;font-size:.95rem}.suggestion-item[_ngcontent-%COMP%]:hover{background-color:#34495e}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.location-info[_ngcontent-%COMP%]{background-color:#1a252f;padding:20px;border-radius:8px;border:2px solid #34495e}.get-location-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background-color:#5dade2;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:700;transition:all .2s;margin-bottom:15px;box-shadow:0 4px 12px #5dade24d}.get-location-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#3498db;transform:translateY(-2px);box-shadow:0 6px 16px #5dade266}.get-location-btn[_ngcontent-%COMP%]:disabled{background-color:#7f8c8d;cursor:not-allowed;opacity:.6;transform:none;box-shadow:none}.location-display[_ngcontent-%COMP%]{background-color:#243340;padding:15px;border-radius:6px;margin-bottom:10px;border:2px solid #34495e}.location-coords[_ngcontent-%COMP%]{margin:10px 0;color:#fff;font-size:1rem;font-weight:500}.location-accuracy[_ngcontent-%COMP%]{margin:10px 0;color:#95a5b8;font-size:.9rem}.location-error[_ngcontent-%COMP%]{background-color:#ffebee;color:var(--color-error);padding:12px;border-radius:6px;border-left:4px solid var(--color-error);margin-bottom:10px;font-size:.9rem}.image-preview-container[_ngcontent-%COMP%]{margin-top:15px;padding:20px;background-color:#243340;border-radius:8px;border:2px solid #34495e}.file-name[_ngcontent-%COMP%]{margin:0 0 15px;color:#95a5b8;font-size:.95rem;font-weight:500}.image-preview[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:12px}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:350px;width:auto;height:auto;border-radius:6px;border:2px solid #34495e;box-shadow:0 4px 12px #0000004d}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background-color:#5dade2;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:1.1rem;font-weight:700;transition:all .2s;margin-top:10px;box-shadow:0 4px 12px #5dade24d}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#3498db;transform:translateY(-2px);box-shadow:0 6px 16px #5dade266}.submit-btn[_ngcontent-%COMP%]:disabled{background-color:#7f8c8d;cursor:not-allowed;opacity:.6;transform:none;box-shadow:none}.message[_ngcontent-%COMP%]{padding:15px 20px;margin-bottom:20px;border-radius:8px;font-weight:600;text-align:center;font-size:.95rem}.success[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32;border:2px solid #4CAF50}.error[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;border:2px solid #d32f2f}.not-logged[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;margin-top:20px}.auth-prompt-box[_ngcontent-%COMP%]{background-color:#fff3cd;border:3px solid #ffc107;border-radius:12px;padding:40px;max-width:600px;margin:0 auto;box-shadow:0 4px 16px #0000001a}.auth-prompt-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;color:#856404;margin-bottom:15px;font-weight:700}.login-warning[_ngcontent-%COMP%]{font-size:1.15rem;color:#856404;margin-bottom:10px;font-weight:600;line-height:1.5}.auth-prompt-box[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:1rem;color:#856404;margin-bottom:25px;opacity:.9;line-height:1.6}.not-logged[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;align-items:center;margin-top:20px}.or-text[_ngcontent-%COMP%]{font-size:1rem;color:#856404;font-weight:600}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%], .not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]{padding:14px 30px;color:#fff;border-radius:6px;text-decoration:none;font-weight:700;border:none;cursor:pointer;transition:all .2s;font-size:1rem;display:inline-block}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{background-color:#2c5282}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background-color:#1e3a5f;transform:translateY(-2px);box-shadow:0 4px 12px #2c52824d}.not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]{background-color:#28a745}.not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]:hover{background-color:#218838;transform:translateY(-2px);box-shadow:0 4px 12px #28a7454d}.name-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.name-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:0}}@media (max-width: 768px){.report-page[_ngcontent-%COMP%]{padding:20px 15px}.report-container[_ngcontent-%COMP%]{padding:30px 20px}.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.1rem}.form-section[_ngcontent-%COMP%]{padding:20px 15px}.name-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function Y7(n,e){if(n&1&&(w(0,"div",8)(1,"h3"),S(2,"Incident Photo"),b(),de(3,"img",13),b()),n&2){let t=F().ngIf;T(3),Z("src",t.imageUrl,$n)}}function Q7(n,e){if(n&1){let t=Me();w(0,"div",3)(1,"button",4),ne("click",function(){J(t);let r=F();return X(r.goBack())}),S(2,"\u2190 Back"),b(),w(3,"div",5)(4,"h1"),S(5),b(),w(6,"div",6),S(7),_e(8,"uppercase"),b()(),w(9,"div",7)(10,"div",8)(11,"h3"),S(12,"Location Information"),b(),w(13,"div",9)(14,"div",10)(15,"label"),S(16,"Street:"),b(),w(17,"p"),S(18),b()(),w(19,"div",10)(20,"label"),S(21,"Barangay:"),b(),w(22,"p"),S(23),b()()()(),w(24,"div",8)(25,"h3"),S(26,"Reporter Information"),b(),w(27,"div",9)(28,"div",10)(29,"label"),S(30,"Name:"),b(),w(31,"p"),S(32),b()(),w(33,"div",10)(34,"label"),S(35,"ID:"),b(),w(36,"p"),S(37),b()()()(),w(38,"div",8)(39,"h3"),S(40,"Description"),b(),w(41,"p",11),S(42),b()(),ie(43,Y7,4,1,"div",12),w(44,"div",8)(45,"h3"),S(46,"Timeline"),b(),w(47,"div",9)(48,"div",10)(49,"label"),S(50,"Reported:"),b(),w(51,"p"),S(52),_e(53,"date"),b()(),w(54,"div",10)(55,"label"),S(56,"Last Updated:"),b(),w(57,"p"),S(58),_e(59,"date"),b()()()()()()}if(n&2){let t=e.ngIf,i=F();T(5),ge(t.description),T(),au("background-color",i.getStatusBadgeColor(t.status)),T(),me(" ",qe(8,12,t.status)," "),T(11),ge(t.street),T(5),ge(t.barangay),T(9),ge(t.reporterName||"Anonymous"),T(5),ge(t.reporterId),T(5),ge(t.description),T(),Z("ngIf",t.imageUrl),T(9),ge(At(53,14,t.createdAt,"medium")),T(6),ge(At(59,17,t.updatedAt,"medium"))}}function J7(n,e){n&1&&(w(0,"div",14)(1,"p"),S(2,"Loading report details..."),b()())}var Ry=class n{route=U(_i);router=U(wt);reportService=U(Rn);reportId=this.route.snapshot.paramMap.get("id");report$=this.reportService.getAllReports().pipe(le(e=>e.find(t=>t.id===this.reportId)));ngOnInit(){}goBack(){this.router.navigate(["/"])}getStatusBadgeColor(e){switch(e){case"approved":return"#4caf50";case"pending":return"#ff9800";case"rejected":return"#f44336";default:return"#999"}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-report-detail"]],decls:5,vars:4,consts:[["loading",""],[1,"report-detail-container"],["class","report-detail-content",4,"ngIf","ngIfElse"],[1,"report-detail-content"],[1,"back-btn",3,"click"],[1,"report-header"],[1,"status-badge"],[1,"report-body"],[1,"report-section"],[1,"info-grid"],[1,"info-item"],[1,"description-text"],["class","report-section",4,"ngIf"],["alt","Report photo",1,"report-image",3,"src"],[1,"loading"]],template:function(t,i){if(t&1&&(w(0,"div",1),ie(1,Q7,60,20,"div",2),_e(2,"async"),ie(3,J7,3,0,"ng-template",null,0,rn),b()),t&2){let r=Mt(4);T(),Z("ngIf",qe(2,2,i.report$))("ngIfElse",r)}},dependencies:[Nt,wn,bn,vc,Cr],styles:[".report-detail-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:30px;background:#fff;min-height:calc(100vh - 60px)}.report-detail-container[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#f0f0f0;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:14px;font-weight:600;color:#333;margin-bottom:20px;transition:all .2s ease}.report-detail-container[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;transform:translate(-4px)}.report-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid #e0e0e0}.report-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;color:#333;flex:1}.report-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;color:#fff;font-weight:600;font-size:12px;white-space:nowrap;margin-left:20px}.report-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.report-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;color:#333;font-weight:600;border-bottom:2px solid #f0f0f0;padding-bottom:8px}.report-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.report-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#888;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333;line-height:1.5;word-wrap:break-word}.report-section[_ngcontent-%COMP%]   .description-text[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#555;line-height:1.6;background:#f9f9f9;padding:16px;border-radius:4px}.report-section[_ngcontent-%COMP%]   .report-image[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px;box-shadow:0 4px 12px #0000001a;margin-top:12px}.report-detail-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}"]})};var VL=(n,e)=>e.id;function X7(n,e){if(n&1&&(w(0,"strong"),S(1),b()),n&2){let t=F().$implicit;T(),ge(t.description)}}function eW(n,e){if(n&1){let t=Me();w(0,"textarea",21),ot("ngModelChange",function(r){J(t);let o=F(5);return lt(o.editBuffer.description,r)||(o.editBuffer.description=r),X(r)}),b()}if(n&2){let t=F(5);rt("ngModel",t.editBuffer.description)}}function tW(n,e){if(n&1&&(w(0,"small"),S(1),b()),n&2){let t=F(2).$implicit;T(),ge(t.city)}}function nW(n,e){if(n&1&&(w(0,"div",11)(1,"div"),S(2),b(),w(3,"small"),S(4),b(),Xe(5,tW,2,1,"small"),b()),n&2){let t=F().$implicit;T(2),ge(t.street),T(2),ge(t.barangay),T(),et(t.city?5:-1)}}function iW(n,e){if(n&1){let t=Me();w(0,"div",12)(1,"input",22),ot("ngModelChange",function(r){J(t);let o=F(5);return lt(o.editBuffer.street,r)||(o.editBuffer.street=r),X(r)}),b(),w(2,"input",23),ot("ngModelChange",function(r){J(t);let o=F(5);return lt(o.editBuffer.barangay,r)||(o.editBuffer.barangay=r),X(r)}),b()()}if(n&2){let t=F(5);T(),rt("ngModel",t.editBuffer.street),T(),rt("ngModel",t.editBuffer.barangay)}}function rW(n,e){if(n&1&&(w(0,"div",13)(1,"p")(2,"strong"),S(3),b()(),w(4,"small"),S(5),b()()),n&2){let t=F().$implicit;T(3),ge(t.reporterName||"N/A"),T(2),ge(t.reporterId)}}function oW(n,e){if(n&1){let t=Me();w(0,"div",14)(1,"input",24),ot("ngModelChange",function(r){J(t);let o=F(5);return lt(o.editBuffer.reporterName,r)||(o.editBuffer.reporterName=r),X(r)}),b(),w(2,"input",25),ot("ngModelChange",function(r){J(t);let o=F(5);return lt(o.editBuffer.reporterId,r)||(o.editBuffer.reporterId=r),X(r)}),b()()}if(n&2){let t=F(5);T(),rt("ngModel",t.editBuffer.reporterName),T(),rt("ngModel",t.editBuffer.reporterId)}}function sW(n,e){if(n&1&&de(0,"img",15),n&2){let t=F().$implicit;Z("src",t.imageUrl,$n)}}function aW(n,e){n&1&&(w(0,"span",16),S(1,"No image"),b())}function cW(n,e){if(n&1){let t=Me();w(0,"button",26),ne("click",function(){J(t);let r=F().$implicit,o=F(4);return X(o.startEdit(r))}),S(1,"Edit"),b()}}function lW(n,e){if(n&1){let t=Me();w(0,"button",27),ne("click",function(){J(t);let r=F().$implicit,o=F(4);return X(o.saveEdit(r.id))}),S(1,"Save"),b(),w(2,"button",28),ne("click",function(){J(t);let r=F(5);return X(r.cancelEdit())}),S(3,"Cancel"),b()}}function uW(n,e){if(n&1){let t=Me();w(0,"tr")(1,"td")(2,"div",8)(3,"div"),S(4),_e(5,"date"),b(),w(6,"small"),S(7),_e(8,"date"),b()()(),w(9,"td"),Xe(10,X7,2,1,"strong")(11,eW,1,1,"textarea",9),b(),w(12,"td")(13,"span",10),S(14),_e(15,"uppercase"),b()(),w(16,"td"),Xe(17,nW,6,3,"div",11)(18,iW,3,2,"div",12),b(),w(19,"td"),Xe(20,rW,6,2,"div",13)(21,oW,3,2,"div",14),b(),w(22,"td"),Xe(23,sW,1,1,"img",15)(24,aW,2,0,"span",16),b(),w(25,"td",17),Xe(26,cW,2,0,"button",18),Xe(27,lW,4,0),w(28,"button",19),ne("click",function(){let r=J(t).$implicit,o=F(4);return X(o.approveReport(r.id))}),S(29," Approve "),b(),w(30,"button",20),ne("click",function(){let r=J(t).$implicit,o=F(4);return X(o.deleteReport(r.id))}),S(31,"Delete"),b()()()}if(n&2){let t=e.$implicit,i=F(4);qo("data-id",t.id),T(4),ge(At(5,12,t.createdAt,"MMM d, y")),T(3),ge(At(8,15,t.createdAt,"h:mm a")),T(3),et(i.editingId!==t.id?10:11),T(3),$m("priority-"+(t.priority||"medium")),T(),me(" ",qe(15,18,t.priority||"medium")," "),T(3),et(i.editingId!==t.id?17:18),T(3),et(i.editingId!==t.id?20:21),T(3),et(t.imageUrl?23:24),T(3),et(i.editingId!==t.id?26:-1),T(),et(i.editingId===t.id?27:-1)}}function dW(n,e){if(n&1&&(w(0,"div",6)(1,"table")(2,"thead")(3,"tr")(4,"th"),S(5,"Submitted"),b(),w(6,"th"),S(7,"Description"),b(),w(8,"th"),S(9,"Priority"),b(),w(10,"th"),S(11,"Location"),b(),w(12,"th"),S(13,"Reporter"),b(),w(14,"th"),S(15,"Image"),b(),w(16,"th"),S(17,"Actions"),b()()(),w(18,"tbody"),Um(19,uW,32,20,"tr",null,VL),b()()()),n&2){let t=F();T(19),zm(t)}}function hW(n,e){n&1&&(w(0,"div",7)(1,"p"),S(2,"No pending reports. All reports have been reviewed!"),b()())}function fW(n,e){n&1&&Xe(0,dW,21,0,"div",6)(1,hW,3,0,"div",7),n&2&&et(e.length>0?0:1)}function pW(n,e){n&1&&(w(0,"div",5),S(1,"Loading reports..."),b())}function gW(n,e){if(n&1&&(w(0,"div",3)(1,"h3",4),S(2,"Pending Safety Alerts - Awaiting Review"),b(),Xe(3,fW,2,1),_e(4,"async"),Ws(5,pW,2,0,"div",5),b()),n&2){let t,i=F();T(3),et((t=qe(4,1,i.pendingReports$))?3:5,t)}}function mW(n,e){if(n&1&&(w(0,"div",40),S(1),b()),n&2){let t=F(),i=F();T(),si(" Showing ",t.length," of ",i.length," approved reports ")}}function _W(n,e){if(n&1&&(w(0,"span",49),S(1),b()),n&2){let t=F().$implicit;T(),ge(t.city)}}function vW(n,e){if(n&1&&(w(0,"div",48)(1,"strong"),S(2,"Coordinates:"),b(),w(3,"span",53),S(4),_e(5,"number"),_e(6,"number"),b()()),n&2){let t=F().$implicit;T(4),si("",At(5,2,t.location.lat,"1.6-6"),", ",At(6,5,t.location.lng,"1.6-6"))}}function yW(n,e){if(n&1&&(w(0,"div",48)(1,"strong"),S(2,"Email:"),b(),w(3,"span"),S(4),b()()),n&2){let t=F().$implicit;T(4),ge(t.reporterEmail)}}function wW(n,e){if(n&1&&(w(0,"div",50),de(1,"img",54),b()),n&2){let t=F().$implicit;T(),Z("src",t.imageUrl,$n)}}function bW(n,e){if(n&1){let t=Me();w(0,"div",42)(1,"div",43)(2,"span",10),S(3),_e(4,"uppercase"),b(),w(5,"span",44),S(6),_e(7,"date"),b()(),w(8,"div",45)(9,"h4",46),S(10),b(),w(11,"div",47)(12,"div",48)(13,"strong"),S(14,"Location:"),b(),w(15,"span"),S(16),b(),Xe(17,_W,2,1,"span",49),b(),Xe(18,vW,7,8,"div",48),w(19,"div",48)(20,"strong"),S(21,"Reporter:"),b(),w(22,"span"),S(23),b()(),Xe(24,yW,5,1,"div",48),b(),Xe(25,wW,2,1,"div",50),b(),w(26,"div",51)(27,"button",52),ne("click",function(){let r=J(t).$implicit,o=F(5);return X(o.deleteApprovedReport(r.id))}),S(28," Delete Report "),b()()()}if(n&2){let t=e.$implicit;T(2),$m("priority-"+(t.priority||"medium")),T(),me(" ",qe(4,12,t.priority||"medium")," "),T(3),me(" ",At(7,14,t.timestamp||t.createdAt,"MMM d, y h:mm a")," "),T(4),ge(t.description),T(6),si("",t.street,", ",t.barangay),T(),et(t.city?17:-1),T(),et(t.location?18:-1),T(5),ge(t.reporterName||"N/A"),T(),et(t.reporterEmail?24:-1),T(),et(t.imageUrl?25:-1)}}function CW(n,e){if(n&1&&(w(0,"div",41),Um(1,bW,29,17,"div",42,VL),b()),n&2){let t=F();T(),zm(t)}}function EW(n,e){n&1&&(w(0,"p"),S(1,"No approved reports match your filters."),b())}function IW(n,e){n&1&&(w(0,"p"),S(1,"No approved reports yet."),b())}function xW(n,e){if(n&1&&(w(0,"div",7),Xe(1,EW,2,0,"p"),Xe(2,IW,2,0,"p"),b()),n&2){let t=F(2),i=F(2);T(),et(i.approvedFilterPriority!=="all"||i.approvedFilterSearch?1:-1),T(),et(i.approvedFilterPriority==="all"&&!i.approvedFilterSearch&&t.length===0?2:-1)}}function SW(n,e){if(n&1&&(Xe(0,mW,2,2,"div",40),Xe(1,CW,3,0,"div",41)(2,xW,3,2,"div",7)),n&2){let t=F();et(t.length>0?0:-1),T(),et(e.length>0?1:2)}}function TW(n,e){if(n&1&&Xe(0,SW,3,2),n&2){let t,i=F(2);et((t=i.getFilteredApprovedReports(e))?0:-1,t)}}function DW(n,e){n&1&&(w(0,"div",5),S(1,"Loading approved reports..."),b())}function MW(n,e){if(n&1){let t=Me();w(0,"div",3)(1,"h3",4),S(2,"Published Safety Alerts - Visible to Residents"),b(),w(3,"div",29)(4,"div",30)(5,"label",31),S(6,"Filter by Priority:"),b(),w(7,"select",32),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.approvedFilterPriority,r)||(o.approvedFilterPriority=r),X(r)}),w(8,"option",33),S(9,"All Priorities"),b(),w(10,"option",34),S(11,"High Priority"),b(),w(12,"option",35),S(13,"Medium Priority"),b(),w(14,"option",36),S(15,"Low Priority"),b()()(),w(16,"div",30)(17,"label",37),S(18,"Search:"),b(),w(19,"input",38),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.approvedFilterSearch,r)||(o.approvedFilterSearch=r),X(r)}),b()(),w(20,"button",39),ne("click",function(){J(t);let r=F();return X(r.resetFilters())}),S(21,"Reset Filters"),b()(),Xe(22,TW,1,1),_e(23,"async"),Ws(24,DW,2,0,"div",5),b()}if(n&2){let t,i=F();T(7),rt("ngModel",i.approvedFilterPriority),T(12),rt("ngModel",i.approvedFilterSearch),T(3),et((t=qe(23,3,i.approvedReports$))?22:24,t)}}var Ny=class n{reportService=U(Rn);activeView="pending";pendingReports$=this.reportService.getPendingReports();approvedReports$=this.reportService.getApprovedReports();approvedFilterPriority="all";approvedFilterSearch="";editingId=null;editBuffer={};ngOnInit(){}switchView(e){this.activeView=e}filterByPriority(e){return this.approvedFilterPriority==="all"?e:e.filter(t=>t.priority===this.approvedFilterPriority)}filterBySearch(e){if(!this.approvedFilterSearch.trim())return e;let t=this.approvedFilterSearch.toLowerCase();return e.filter(i=>i.description?.toLowerCase().includes(t)||i.barangay?.toLowerCase().includes(t)||i.street?.toLowerCase().includes(t)||i.reporterName?.toLowerCase().includes(t))}getFilteredApprovedReports(e){let t=this.filterByPriority(e);return t=this.filterBySearch(t),t}resetFilters(){this.approvedFilterPriority="all",this.approvedFilterSearch=""}startEdit(e){this.editingId=e.id,this.editBuffer={reporterId:e.reporterId,reporterName:e.reporterName,description:e.description,street:e.street,barangay:e.barangay,imageUrl:e.imageUrl}}cancelEdit(){this.editingId=null,this.editBuffer={}}saveEdit(e){if(this.editingId===e){let t={reporterId:this.editBuffer.reporterId,reporterName:this.editBuffer.reporterName,description:this.editBuffer.description,street:this.editBuffer.street,barangay:this.editBuffer.barangay,imageUrl:this.editBuffer.imageUrl};this.reportService.updateReport(e,t),alert("Report updated successfully"),this.cancelEdit()}}approveReport(e){confirm("Are you sure you want to approve this report?")&&(this.reportService.approveReport(e),alert("Report approved and published to user dashboard"))}deleteReport(e){confirm("Are you sure you want to delete this report permanently?")&&(this.reportService.deleteReport(e),alert("Report deleted"))}deleteApprovedReport(e){confirm("\u26A0\uFE0F This will permanently delete this approved report and remove it from the user dashboard and map. Continue?")&&(this.reportService.deleteReport(e),alert("\u2713 Approved report deleted successfully"))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-admin-dashboard"]],decls:12,vars:6,consts:[[1,"admin-dashboard-container"],[1,"dashboard-tabs"],[1,"tab-btn",3,"click"],[1,"reports-management"],[1,"section-subtitle"],[1,"loading"],[1,"reports-table"],[1,"no-reports-message"],[1,"date-display"],["rows","2",3,"ngModel"],[1,"priority-badge"],[1,"location-display"],[1,"edit-location"],[1,"reporter-info"],[1,"edit-reporter"],["alt","Report image",1,"thumbnail",3,"src"],[1,"no-image"],[1,"actions"],[1,"btn-edit"],[1,"btn-approve",3,"click"],[1,"btn-delete",3,"click"],["rows","2",3,"ngModelChange","ngModel"],["type","text","placeholder","Street",3,"ngModelChange","ngModel"],["type","text","placeholder","Barangay",3,"ngModelChange","ngModel"],["type","text","placeholder","Name",3,"ngModelChange","ngModel"],["type","text","placeholder","ID",3,"ngModelChange","ngModel"],[1,"btn-edit",3,"click"],[1,"btn-save",3,"click"],[1,"btn-cancel",3,"click"],[1,"filters-bar"],[1,"filter-group"],["for","priorityFilter"],["id","priorityFilter",1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","high"],["value","medium"],["value","low"],["for","searchFilter"],["type","text","id","searchFilter","placeholder","Search by description, location, or reporter...",1,"filter-input",3,"ngModelChange","ngModel"],[1,"btn-reset-filters",3,"click"],[1,"results-count"],[1,"reports-grid"],[1,"report-card"],[1,"card-header"],[1,"report-date"],[1,"card-body"],[1,"report-title"],[1,"report-details"],[1,"detail-item"],[1,"text-muted"],[1,"report-image"],[1,"card-footer"],[1,"btn-delete-approved",3,"click"],[1,"coords"],["alt","Report evidence",3,"src"]],template:function(t,i){t&1&&(w(0,"div",0)(1,"h2"),S(2,"Admin Dashboard"),b(),w(3,"p"),S(4,"Manage incident reports submitted by users."),b(),w(5,"div",1)(6,"button",2),ne("click",function(){return i.switchView("pending")}),S(7," Pending Alerts "),b(),w(8,"button",2),ne("click",function(){return i.switchView("approved")}),S(9," Published Alerts "),b()(),Xe(10,gW,6,3,"div",3),Xe(11,MW,25,5,"div",3),b()),t&2&&(T(6),ct("active",i.activeView==="pending"),T(2),ct("active",i.activeView==="approved"),T(2),et(i.activeView==="pending"?10:-1),T(),et(i.activeView==="approved"?11:-1))},dependencies:[Nt,xa,ld,ud,Co,Ia,Ea,us,bn,vc,yc,Cr],styles:[".admin-dashboard-container[_ngcontent-%COMP%]{padding:30px;max-width:1400px;margin:0 auto}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a237e;font-size:2rem;margin-bottom:10px}.admin-dashboard-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.dashboard-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:30px;border-bottom:3px solid #e0e0e0}.tab-btn[_ngcontent-%COMP%]{padding:12px 24px;background:transparent;border:none;border-bottom:3px solid transparent;font-size:1rem;font-weight:600;color:#666;cursor:pointer;transition:all .3s;margin-bottom:-3px}.tab-btn[_ngcontent-%COMP%]:hover{color:#1a237e;background:#f5f7ff}.tab-btn.active[_ngcontent-%COMP%]{color:#1a237e;border-bottom-color:#1a237e;background:#f5f7ff}.section-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:#1a237e;margin-bottom:20px}.filters-bar[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-end;padding:20px;background:#f5f7ff;border-radius:8px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#1a237e;font-size:.9rem}.filter-select[_ngcontent-%COMP%], .filter-input[_ngcontent-%COMP%]{padding:10px;border:2px solid #9fa8da;border-radius:6px;background:#fff;font-size:.95rem;transition:all .3s}.filter-select[_ngcontent-%COMP%]:focus, .filter-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a237e;background:#fff;box-shadow:0 0 0 3px #1a237e1a}.btn-reset-filters[_ngcontent-%COMP%]{padding:10px 20px;background:#1a237e;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s;white-space:nowrap}.btn-reset-filters[_ngcontent-%COMP%]:hover{background:#0d1654;transform:translateY(-2px);box-shadow:0 4px 8px #1a237e4d}.results-count[_ngcontent-%COMP%]{margin-bottom:15px;color:#666;font-weight:500}.reports-table[_ngcontent-%COMP%]{overflow-x:auto;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%]{background-color:#1a237e;color:#fff;padding:15px;text-align:left;font-weight:600;font-size:.9rem;text-transform:uppercase}td[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #e0e0e0;vertical-align:top}tr[_ngcontent-%COMP%]:hover{background:#f5f7ff}.date-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.date-display[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:.75rem;font-weight:700;text-transform:uppercase}.priority-high[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.priority-medium[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00}.priority-low[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.location-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.location-display[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.reporter-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.reporter-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.reporter-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.8rem}.thumbnail[_ngcontent-%COMP%]{max-width:100px;max-height:100px;width:auto;height:auto;border-radius:6px;border:2px solid #e0e0e0;cursor:pointer;transition:transform .2s}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.8);z-index:10;position:relative}.no-image[_ngcontent-%COMP%]{color:#999;font-style:italic}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%], .btn-approve[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;font-size:.85rem;font-weight:600;cursor:pointer;transition:all .3s;white-space:nowrap}.btn-edit[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background:#1976d2;transform:translateY(-2px);box-shadow:0 4px 8px #2196f34d}.btn-save[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-save[_ngcontent-%COMP%]:hover{background:#388e3c}.btn-cancel[_ngcontent-%COMP%]{background:#9e9e9e;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background:#757575}.btn-approve[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-approve[_ngcontent-%COMP%]:hover{background:#388e3c;transform:translateY(-2px);box-shadow:0 4px 8px #4caf504d}.btn-delete[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background:#d32f2f;transform:translateY(-2px);box-shadow:0 4px 8px #f443364d}.reports-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.report-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden;transition:all .3s}.report-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 16px #00000026}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;background:#f5f7ff;border-bottom:2px solid #9fa8da}.report-date[_ngcontent-%COMP%]{font-size:.85rem;color:#666;font-weight:500}.card-body[_ngcontent-%COMP%]{padding:20px}.report-title[_ngcontent-%COMP%]{font-size:1.1rem;color:#1a237e;margin-bottom:15px;font-weight:700}.report-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a237e;font-size:.9rem}.detail-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-size:.95rem}.text-muted[_ngcontent-%COMP%]{color:#666!important;font-size:.85rem!important}.coords[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem!important;background:#f5f7ff;padding:4px 8px;border-radius:4px}.report-image[_ngcontent-%COMP%]{margin-top:15px}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:6px;border:2px solid #e0e0e0}.card-footer[_ngcontent-%COMP%]{padding:15px;background:#f9f9f9;border-top:1px solid #e0e0e0}.btn-delete-approved[_ngcontent-%COMP%]{width:100%;padding:10px;background:#f44336;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s}.btn-delete-approved[_ngcontent-%COMP%]:hover{background:#d32f2f;transform:translateY(-2px);box-shadow:0 4px 8px #f443364d}.edit-location[_ngcontent-%COMP%], .edit-reporter[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.edit-location[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-reporter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:8px;border:2px solid #9fa8da;border-radius:4px;font-size:.9rem}.edit-location[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .edit-reporter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a237e}.no-reports-message[_ngcontent-%COMP%]{padding:40px;text-align:center;background:#f5f7ff;border-radius:8px;color:#1a237e;font-size:1.1rem;font-weight:500}.loading[_ngcontent-%COMP%]{padding:40px;text-align:center;color:#666;font-size:1.1rem}@media (max-width: 992px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:20px}.dashboard-tabs[_ngcontent-%COMP%]{flex-wrap:wrap;gap:5px}.tab-btn[_ngcontent-%COMP%]{padding:10px 18px;font-size:.9rem}}@media (max-width: 768px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:15px}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}.filters-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:15px;padding:15px}.filter-group[_ngcontent-%COMP%]{width:100%}.reports-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.reports-table[_ngcontent-%COMP%]{font-size:.85rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:6px}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%], .btn-approve[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem;flex:1;min-width:70px}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.dashboard-tabs[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:5px}.tab-btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:.85rem;white-space:nowrap}.section-subtitle[_ngcontent-%COMP%]{font-size:1.3rem}}@media (max-width: 480px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:10px}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.admin-dashboard-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:.85rem}.tab-btn[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem}.filters-bar[_ngcontent-%COMP%]{padding:12px;gap:12px}.filter-select[_ngcontent-%COMP%], .filter-input[_ngcontent-%COMP%]{padding:10px;font-size:16px}.btn-reset-filters[_ngcontent-%COMP%]{padding:12px 16px;font-size:.9rem}.reports-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block}.reports-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.reports-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid #e0e0e0;border-radius:8px;padding:10px}.reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;text-align:left;position:relative;padding:8px 10px 8px 40%}.reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:10px;font-weight:600;color:#1a237e;font-size:.8rem}.report-card[_ngcontent-%COMP%]{border-radius:10px}.card-header[_ngcontent-%COMP%]{padding:12px}.card-body[_ngcontent-%COMP%]{padding:15px}.card-footer[_ngcontent-%COMP%]{padding:12px}.report-title[_ngcontent-%COMP%]{font-size:1rem}}"]})};function AW(n,e){if(n&1&&(w(0,"div",39),S(1),b()),n&2){let t=F(2);T(),ge(t.successMessage)}}function PW(n,e){if(n&1&&(w(0,"div",40),S(1),b()),n&2){let t=F(2);T(),ge(t.errorMessage)}}function OW(n,e){if(n&1&&(w(0,"span",41),S(1),b()),n&2){let t=F(2);T(),me(" ",t.validationErrors.description," ")}}function RW(n,e){if(n&1&&(w(0,"span",41),S(1),b()),n&2){let t=F(2);T(),me(" ",t.validationErrors.street," ")}}function NW(n,e){if(n&1){let t=Me();w(0,"div",44),ne("mousedown",function(){let r=J(t).$implicit,o=F(3);return X(o.selectBarangay(r))}),S(1),b()}if(n&2){let t=e.$implicit;T(),me(" ",t," ")}}function kW(n,e){if(n&1&&(w(0,"div",42),ie(1,NW,2,1,"div",43),b()),n&2){let t=F(2);T(),Z("ngForOf",t.filteredBarangays.slice(0,8))}}function LW(n,e){if(n&1&&(w(0,"span",41),S(1),b()),n&2){let t=F(2);T(),me(" ",t.validationErrors.barangay," ")}}function FW(n,e){if(n&1&&(w(0,"p",48),S(1),_e(2,"number"),b()),n&2){let t=F(3);T(),me(" Accuracy: \xB1 ",At(2,1,t.locationAccuracy,"1.0-0")," meters ")}}function VW(n,e){if(n&1&&(w(0,"div",45)(1,"p",46)(2,"strong"),S(3,"Latitude:"),b(),S(4),_e(5,"number"),b(),w(6,"p",46)(7,"strong"),S(8,"Longitude:"),b(),S(9),_e(10,"number"),b(),ie(11,FW,3,4,"p",47),b()),n&2){let t=F(2);T(4),me(" ",At(5,3,t.location.lat,"1.6-6")," "),T(5),me(" ",At(10,6,t.location.lng,"1.6-6")," "),T(2),Z("ngIf",t.locationAccuracy)}}function BW(n,e){if(n&1&&(w(0,"div",49),S(1),b()),n&2){let t=F(2);T(),me(" ",t.locationError," ")}}function jW(n,e){if(n&1&&(w(0,"span",41),S(1),b()),n&2){let t=F(2);T(),me(" ",t.validationErrors.location," ")}}function UW(n,e){if(n&1){let t=Me();qn(0),w(1,"form",5,1),ne("ngSubmit",function(){J(t);let r=F();return X(r.onSubmit())}),ie(3,AW,2,1,"div",6)(4,PW,2,1,"div",7),w(5,"div",8)(6,"div",9),at(),w(7,"svg",10),de(8,"path",11),b()(),Ut(),w(9,"div",12)(10,"strong"),S(11,"Police Admin Report"),b(),w(12,"span"),S(13,"Submitted by: Police Admin"),b()()(),w(14,"div",13)(15,"h3",14),S(16,"Safety Alert Details"),b(),w(17,"div",15)(18,"label",16),S(19,"Alert Description *"),b(),w(20,"textarea",17),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.description,r)||(o.description=r),X(r)}),b(),ie(21,OW,2,1,"span",18),b(),w(22,"div",15)(23,"label",19),S(24,"Priority Level *"),b(),w(25,"select",20),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.priority,r)||(o.priority=r),X(r)}),w(26,"option",21),S(27,"High - Urgent, requires immediate attention"),b(),w(28,"option",22),S(29,"Medium - Moderate concern"),b(),w(30,"option",23),S(31,"Low - Minor issue"),b()()()(),w(32,"div",13)(33,"h3",14),S(34,"Location Information"),b(),w(35,"div",15)(36,"label",24),S(37,"Street Address *"),b(),w(38,"input",25),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.street,r)||(o.street=r),X(r)}),b(),ie(39,RW,2,1,"span",18),b(),w(40,"div",15)(41,"label",26),S(42,"Barangay *"),b(),w(43,"input",27),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.barangay,r)||(o.barangay=r),X(r)}),ne("input",function(r){J(t);let o=F();return X(o.filterBarangays(r))})("focus",function(){J(t);let r=F();return X(r.showBarangaySuggestions=!0)}),b(),ie(44,kW,2,1,"div",28)(45,LW,2,1,"span",18),b(),w(46,"div",15)(47,"label",29),S(48,"Landmark or Nearby Location (Optional)"),b(),w(49,"input",30),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.landmark,r)||(o.landmark=r),X(r)}),b()(),w(50,"div",31)(51,"label"),S(52,"GPS Coordinates *"),b(),w(53,"button",32),ne("click",function(){J(t);let r=F();return X(r.getCurrentLocation())}),S(54),b(),ie(55,VW,12,9,"div",33)(56,BW,2,1,"div",34),w(57,"p",35),S(58," Location must be within Baguio City limits. Click the button above to automatically detect your location. "),b(),ie(59,jW,2,1,"span",18),b()(),w(60,"div",36)(61,"button",37),S(62),b(),w(63,"a",38),S(64," Cancel "),b()()(),Gn()}if(n&2){let t=F();T(3),Z("ngIf",t.successMessage),T(),Z("ngIf",t.errorMessage),T(16),rt("ngModel",t.description),T(),Z("ngIf",t.validationErrors.description),T(4),rt("ngModel",t.priority),T(13),rt("ngModel",t.street),T(),Z("ngIf",t.validationErrors.street),T(4),rt("ngModel",t.barangay),T(),Z("ngIf",t.showBarangaySuggestions&&t.filteredBarangays.length>0),T(),Z("ngIf",t.validationErrors.barangay),T(4),rt("ngModel",t.landmark),T(4),Z("disabled",t.isGettingLocation),T(),me(" ",t.isGettingLocation?"Getting Location...":"Get Current Location"," "),T(),Z("ngIf",t.location),T(),Z("ngIf",t.locationError),T(3),Z("ngIf",t.validationErrors.location),T(2),Z("disabled",t.isLoading||!t.location),T(),me(" ",t.isLoading?"Issuing Alert...":"Issue Safety Alert"," ")}}function zW(n,e){n&1&&(w(0,"div",50)(1,"p",51),S(2,"You must be signed in as admin to create reports."),b(),w(3,"div",52)(4,"a",53),S(5,"Sign In"),b()()())}var ky=class n{reportService=U(Rn);authService=U(In);router=U(wt);description="";street="";barangay="";landmark="";city="Baguio City";priority="high";location=null;locationAccuracy=null;isGettingLocation=!1;locationError=null;errorMessage=null;successMessage=null;isLoading=!1;validationErrors={};baguioBarangays=["A. Bonifacio-Caguioa-Rimando (ABCR)","Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)","Alfonso Tabora","Ambiong","Andres Bonifacio (Lower Bokawkan)","Apugan-Loakan","Asin Road","Atok Trail","Aurora Hill Proper (Malvar-Sgt. Floresca)","Aurora Hill, North Central","Aurora Hill, South Central","Bagong Lipunan (Market Area)","Baguio Dairy Farm","Bakakeng Central","Bakakeng North","Bal-Marcoville (Marcoville)","Balsigan","Bayan Park East","Bayan Park Village","Bayan Park West (Bayan Park)","BGH Compound","Brookside","Brookspoint","Cabinet Hill-Teacher's Camp","Camdas Subdivision","Camp 7","Camp 8","Camp Allen","Campo Filipino","City Camp Central","City Camp Proper","Country Club Village","Cresencia Village","Dagisitan","Dagsian, Lower","Dagsian, Upper","Dizon Subdivision","Dominican Hill-Mirador","Dontogan","DPS Area","Engineers' Hill","Fairview Village","Ferdinand (Happy Homes-Campo Sioco)","Fort del Pilar","Gabriel Silang","General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)","General Luna, Lower","General Luna, Upper","Gibraltar","Greenwater Village","Guisad Central","Guisad Sorong","Happy Hollow","Happy Homes (Happy Homes-Lucban)","Harrison-Claudio Carantes","Hillside","Holy Ghost Extension","Holy Ghost Proper","Honeymoon (Honeymoon-Holy Ghost)","Imelda R. Marcos (La Salle)","Imelda Village","Irisan","Kabayanihan","Kagitingan","Kayang Extension","Kayang-Hilltop","Kias","Legarda-Burnham-Kisad","Liwanag-Loakan","Loakan Proper","Lopez Jaena","Lourdes Subdivision Extension","Lourdes Subdivision, Lower","Lourdes Subdivision, Proper","Lualhati","Lucnab","Magsaysay Private Road","Magsaysay, Lower","Magsaysay, Upper","Malcolm Square-Perfecto (Jose Abad Santos)","Manuel A. Roxas","Market Subdivision, Upper","Middle Quezon Hill Subdivision (Quezon Hill Middle)","Military Cut-off","Mines View Park","Modern Site, East","Modern Site, West","MRR-Queen of Peace","New Lucban","Outlook Drive","Pacdal","Padre Burgos","Padre Zamora","Palma-Urbano (Cari\xF1o-Palma)","Phil-Am","Pinget","Pinsao Pilot Project","Pinsao Proper","Poliwes","Pucsusan","Quezon Hill Proper","Quezon Hill, Upper","Quirino Hill, East","Quirino Hill, Lower","Quirino Hill, Middle","Quirino Hill, West","Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)","Rizal Monument Area","Rock Quarry, Lower","Rock Quarry, Middle","Rock Quarry, Upper","Salud Mitra","San Antonio Village","San Luis Village","San Roque Village","San Vicente","Sanitary Camp, North","Sanitary Camp, South","Santa Escolastica","Santo Rosario","Santo Tomas Proper","Santo Tomas School Area","Scout Barrio","Session Road Area","Slaughter House Area (Santo Ni\xF1o Slaughter)","SLU-SVP Housing Village","South Drive","Teodora Alonzo","Trancoville","Upper General Luna","Victoria Village","Websters Subdivision"];filteredBarangays=[...this.baguioBarangays];showBarangaySuggestions=!1;ngOnInit(){}filterBarangays(e){let t=e.target.value.toLowerCase();if(this.showBarangaySuggestions=!0,!t){this.filteredBarangays=[...this.baguioBarangays];return}this.filteredBarangays=this.baguioBarangays.filter(i=>i.toLowerCase().includes(t))}selectBarangay(e){this.barangay=e,this.showBarangaySuggestions=!1,this.filteredBarangays=[...this.baguioBarangays]}getAddressFromCoordinates(e,t){return D(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`)).json();if(r&&r.address){let o=r.address,a=o.road||o.street||o.neighbourhood||"",l=o.suburb||o.neighbourhood||o.quarter||"";if(a&&!this.street&&(this.street=a),l){let u=this.baguioBarangays.find(f=>f.toLowerCase().includes(l.toLowerCase())||l.toLowerCase().includes(f.toLowerCase().split("(")[0].trim().toLowerCase()));u&&!this.barangay&&(this.barangay=u)}}}catch(i){console.warn("Could not fetch address details:",i)}})}getCurrentLocation(){if(!navigator.geolocation){this.locationError="Geolocation is not supported by your browser.";return}this.isGettingLocation=!0,this.locationError=null,navigator.geolocation.getCurrentPosition(e=>D(this,null,function*(){let t=e.coords.latitude,i=e.coords.longitude;t>=16.35&&t<=16.48&&i>=120.52&&i<=120.66?(this.location={lat:t,lng:i},this.locationAccuracy=e.coords.accuracy,this.locationError=null,yield this.getAddressFromCoordinates(t,i)):(this.locationError="Your location is outside Baguio City. Please ensure you are within Baguio City to report an incident.",this.location=null),this.isGettingLocation=!1}),e=>{switch(this.isGettingLocation=!1,e.code){case e.PERMISSION_DENIED:this.locationError="Location access denied. Please enable location access to submit a report.";break;case e.POSITION_UNAVAILABLE:this.locationError="Location information unavailable. Please check your GPS settings.";break;case e.TIMEOUT:this.locationError="Location request timed out. Please try again.";break;default:this.locationError="Unable to get your location. Please try again."}this.location=null},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}validateForm(){return this.validationErrors={},this.description.trim()||(this.validationErrors.description="Incident description is required."),this.street.trim()||(this.validationErrors.street="Street address is required."),this.barangay.trim()||(this.validationErrors.barangay="Barangay is required."),this.location||(this.validationErrors.location="Real-time location is required. Please enable location access."),Object.keys(this.validationErrors).length===0}onSubmit(){return D(this,null,function*(){if(this.errorMessage=null,this.successMessage=null,!!this.validateForm()){this.isLoading=!0;try{let e=yield As(this.authService.currentUser$);if(!e){this.errorMessage="You must be logged in as admin to create reports.",setTimeout(()=>this.router.navigate(["/login"]),900),this.isLoading=!1;return}if(!this.location){this.errorMessage="Location is required. Please enable location access and try again.",this.isLoading=!1;return}let t={reporterId:"ADMIN",reporterName:"Police Admin",reporterEmail:e.email||"admin@mountainsentinel.com",description:this.description.trim(),street:this.street.trim(),barangay:this.barangay.trim(),landmark:this.landmark.trim()||void 0,city:this.city,priority:this.priority,location:this.location,locationAccuracy:this.locationAccuracy??void 0,timestamp:new Date().toISOString(),isAdminReport:!0};yield As(this.reportService.submitReport(t));let i=yield As(this.reportService.getAllReports()),r=i[i.length-1];r&&this.reportService.approveReport(r.id),this.successMessage="Safety alert issued and published successfully!",this.clearForm(),setTimeout(()=>{this.router.navigate(["/admin-dashboard"])},1500)}catch(e){console.error("Report creation failed:",e),this.errorMessage="Submission failed. Please try again."}finally{this.isLoading=!1}}})}clearForm(){this.description="",this.street="",this.barangay="",this.landmark="",this.priority="high",this.location=null,this.locationAccuracy=null}saveFormProgress(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-admin-report"]],decls:9,vars:4,consts:[["notLogged",""],["reportForm","ngForm"],[1,"admin-report-container"],[1,"subtitle"],[4,"ngIf","ngIfElse"],[3,"ngSubmit"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],[1,"admin-info-banner"],[1,"badge-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 6c1.4 0 2.8 1.1 2.8 2.5V11c.6.3 1 .9 1 1.5v3c0 1-.8 1.8-1.8 1.8h-4c-1 0-1.8-.8-1.8-1.8v-3c0-.6.4-1.2 1-1.5V9.5C9.2 8.1 10.6 7 12 7zm0 1.2c-.8 0-1.5.5-1.5 1.3v1.5h3V9.5c0-.8-.7-1.3-1.5-1.3z"],[1,"badge-text"],[1,"form-section"],[1,"section-title"],[1,"form-group"],["for","description"],["id","description","name","description","rows","5","required","","placeholder","Provide a detailed description of the incident...",3,"ngModelChange","ngModel"],["class","error-text",4,"ngIf"],["for","priority"],["id","priority","name","priority","required","",3,"ngModelChange","ngModel"],["value","high"],["value","medium"],["value","low"],["for","street"],["id","street","type","text","name","street","required","","placeholder","e.g., Session Road",3,"ngModelChange","ngModel"],["for","barangay"],["id","barangay","type","text","name","barangay","required","","placeholder","Start typing to search barangays...","autocomplete","off",3,"ngModelChange","input","focus","ngModel"],["class","barangay-suggestions",4,"ngIf"],["for","landmark"],["id","landmark","type","text","name","landmark","placeholder","e.g., Near Burnham Park",3,"ngModelChange","ngModel"],[1,"form-group","location-info"],["type","button",1,"get-location-btn",3,"click","disabled"],["class","location-display",4,"ngIf"],["class","location-error",4,"ngIf"],[1,"help-text"],[1,"button-group"],["type","submit",1,"submit-btn",3,"disabled"],["routerLink","/admin-dashboard",1,"cancel-btn"],[1,"message","success"],[1,"message","error"],[1,"error-text"],[1,"barangay-suggestions"],["class","suggestion-item",3,"mousedown",4,"ngFor","ngForOf"],[1,"suggestion-item",3,"mousedown"],[1,"location-display"],[1,"location-coords"],["class","location-accuracy",4,"ngIf"],[1,"location-accuracy"],[1,"location-error"],[1,"not-logged"],[1,"login-warning"],[1,"action-row"],["href","/login",1,"btn","login-btn"]],template:function(t,i){if(t&1&&(w(0,"div",2)(1,"h2"),S(2,"Create New Report"),b(),w(3,"p",3),S(4," Admin-initiated incident report. This report will be published immediately upon submission. "),b(),ie(5,UW,65,18,"ng-container",4),_e(6,"async"),ie(7,zW,6,0,"ng-template",null,0,rn),b()),t&2){let r=Mt(8);T(5),Z("ngIf",qe(6,2,i.authService.currentUser$))("ngIfElse",r)}},dependencies:[Nt,mi,wn,xa,cd,ld,ud,Co,Ia,Ea,ad,Jc,us,Qc,Zo,Yi,bn,yc],styles:[".admin-report-container[_ngcontent-%COMP%]{max-width:900px;margin:40px auto;padding:50px 60px;background:linear-gradient(135deg,#c5cae9,#e8eaf6);border-radius:12px;box-shadow:0 4px 12px #00000026}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#1a237e;font-size:2.5rem;margin-bottom:10px;font-weight:700;letter-spacing:1px}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:30px;font-size:1rem}.admin-info-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:20px;background:linear-gradient(135deg,#1a237e,#283593);border-radius:8px;margin-bottom:30px;color:#fff;box-shadow:0 3px 8px #1a237e4d}.badge-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;height:50px;background:#ffffff26;border-radius:50%;flex-shrink:0}.badge-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px;color:#fff}.badge-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.badge-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.2rem}.badge-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.form-section[_ngcontent-%COMP%]{background:#e8eaf6;padding:25px;border-radius:8px;margin-bottom:25px;box-shadow:0 2px 4px #0000000d}.section-title[_ngcontent-%COMP%]{color:#1a237e;font-size:1.4rem;font-weight:700;margin-bottom:20px;padding-bottom:10px;border-bottom:3px solid #9fa8da}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700;color:#1a237e;font-size:1rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:14px;border:2px solid #9fa8da;border-radius:6px;font-size:1rem;background:#f5f7ff;transition:all .3s;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a237e;background:#fff;box-shadow:0 0 0 3px #1a237e1a}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:120px}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;z-index:1000;background:#fff;border:2px solid #9fa8da;border-radius:6px;max-height:250px;overflow-y:auto;box-shadow:0 4px 12px #00000026;margin-top:4px;width:calc(100% - 50px)}.suggestion-item[_ngcontent-%COMP%]{padding:12px 16px;cursor:pointer;transition:background .2s;border-bottom:1px solid #f0f0f0}.suggestion-item[_ngcontent-%COMP%]:hover{background:#c5cae9}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.location-info[_ngcontent-%COMP%]{position:relative}.get-location-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:#1a237e;color:#fff;border:none;border-radius:6px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s;text-transform:uppercase;letter-spacing:1px;margin-bottom:15px}.get-location-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0d1654;transform:translateY(-2px);box-shadow:0 4px 12px #1a237e4d}.get-location-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.location-display[_ngcontent-%COMP%]{padding:15px;background:#fff;border:2px solid #9fa8da;border-radius:6px;margin-bottom:15px}.location-coords[_ngcontent-%COMP%]{margin:8px 0;font-size:.95rem;color:#333}.location-accuracy[_ngcontent-%COMP%]{margin:8px 0;font-size:.9rem;color:#666;font-style:italic}.location-error[_ngcontent-%COMP%]{padding:12px;background:#ffebee;color:#c62828;border-radius:6px;border:2px solid #ef5350;margin-bottom:15px;font-weight:500}.help-text[_ngcontent-%COMP%]{font-size:.85rem;color:#666;margin:8px 0 0;font-style:italic}.message[_ngcontent-%COMP%]{padding:15px;border-radius:6px;margin-bottom:20px;font-weight:600;text-align:center}.message.success[_ngcontent-%COMP%]{background:#c8e6c9;color:#2e7d32;border:2px solid #66bb6a}.message.error[_ngcontent-%COMP%]{background:#ffcdd2;color:#c62828;border:2px solid #ef5350}.error-text[_ngcontent-%COMP%]{display:block;color:#c62828;font-size:.85rem;margin-top:6px;font-weight:600}.button-group[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:30px}.submit-btn[_ngcontent-%COMP%]{flex:1;padding:16px;background:linear-gradient(135deg,#1a237e,#283593);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .3s;text-transform:uppercase;letter-spacing:1px;box-shadow:0 4px 12px #1a237e4d}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#0d1654,#1a237e);transform:translateY(-2px);box-shadow:0 6px 16px #1a237e66}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.cancel-btn[_ngcontent-%COMP%]{flex:0 0 auto;padding:16px 30px;background:#9e9e9e;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s;text-decoration:none;text-align:center;display:flex;align-items:center;justify-content:center}.cancel-btn[_ngcontent-%COMP%]:hover{background:#757575;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.not-logged[_ngcontent-%COMP%]{text-align:center;padding:60px 40px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a}.login-warning[_ngcontent-%COMP%]{font-size:1.2rem;color:#666;margin-bottom:30px}.action-row[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}.login-btn[_ngcontent-%COMP%]{padding:14px 30px;background:#1a237e;color:#fff;text-decoration:none;border-radius:6px;font-weight:600;transition:all .3s}.login-btn[_ngcontent-%COMP%]:hover{background:#0d1654;transform:translateY(-2px);box-shadow:0 4px 12px #1a237e4d}@media (max-width: 768px){.admin-report-container[_ngcontent-%COMP%]{padding:30px 20px;margin:20px}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.button-group[_ngcontent-%COMP%]{flex-direction:column}.cancel-btn[_ngcontent-%COMP%]{flex:1}.barangay-suggestions[_ngcontent-%COMP%]{width:calc(100% - 40px)}}"]})};function HW(n,e){if(n&1&&(w(0,"div",12),de(1,"img",13),b()),n&2){let t=F().$implicit;T(),Z("src",t.imageUrl,$n)}}function $W(n,e){if(n&1&&(w(0,"div",7)(1,"div",8)(2,"h3"),S(3),b(),w(4,"span",9),S(5),b()(),w(6,"div",10)(7,"p")(8,"strong"),S(9,"Location:"),b(),S(10),b(),w(11,"p")(12,"strong"),S(13,"Reporter:"),b(),S(14),b(),w(15,"p")(16,"strong"),S(17," Reported:"),b(),S(18),_e(19,"date"),b()(),ie(20,HW,2,1,"div",11),b()),n&2){let t=e.$implicit;T(3),ge(t.description),T(2),ge(t.status),T(5),si(" ",t.street,", ",t.barangay),T(4),me(" ",t.reporterName||t.reporterId),T(4),me(" ",At(19,7,t.createdAt,"short")),T(2),Z("ngIf",t.imageUrl)}}function qW(n,e){if(n&1&&(qn(0),ie(1,$W,21,10,"div",6),Gn()),n&2){let t=F().ngIf;T(),Z("ngForOf",t)}}function GW(n,e){n&1&&(w(0,"div",14)(1,"p"),S(2,"No incidents reported at this time. Stay safe!"),b()())}function WW(n,e){if(n&1&&(w(0,"div",4),ie(1,qW,2,1,"ng-container",5)(2,GW,3,0,"ng-template",null,1,rn),b()),n&2){let t=e.ngIf,i=Mt(3);T(),Z("ngIf",t.length>0)("ngIfElse",i)}}function KW(n,e){n&1&&(w(0,"div",15),S(1,"Loading safety feed..."),b())}var Ly=class n{reportService=U(Rn);approvedReports$=this.reportService.getAllReports().pipe(le(e=>e.filter(t=>t.status==="approved")));static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-safety-feed"]],decls:9,vars:4,consts:[["loading",""],["emptyFeed",""],[1,"safety-feed-container"],["class","feed-list",4,"ngIf","ngIfElse"],[1,"feed-list"],[4,"ngIf","ngIfElse"],["class","feed-item approved",4,"ngFor","ngForOf"],[1,"feed-item","approved"],[1,"item-header"],[1,"status-badge"],[1,"item-details"],["class","item-image",4,"ngIf"],[1,"item-image"],["alt","Incident",3,"src"],[1,"empty-feed"],[1,"loading"]],template:function(t,i){if(t&1&&(w(0,"div",2)(1,"h2"),S(2," Real-Time Safety Feed "),b(),w(3,"p"),S(4,"View approved incident reports in real-time."),b(),ie(5,WW,4,2,"div",3),_e(6,"async"),ie(7,KW,2,0,"ng-template",null,0,rn),b()),t&2){let r=Mt(8);T(5),Z("ngIf",qe(6,2,i.approvedReports$))("ngIfElse",r)}},dependencies:[Nt,mi,wn,bn,Cr],styles:[".safety-feed-container[_ngcontent-%COMP%]{padding:30px;max-width:1200px;margin:0 auto}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%]{padding:20px 15px}}@media (max-width: 480px){.safety-feed-container[_ngcontent-%COMP%]{padding:15px 10px}}.safety-feed-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#1a3a52;margin-bottom:10px;text-align:center}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.safety-feed-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:30px}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:20px;font-size:.9rem}}.feed-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}@media (max-width: 768px){.feed-list[_ngcontent-%COMP%]{gap:15px}}.feed-container[_ngcontent-%COMP%]{padding:10px}.feed-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;border-bottom:2px solid #eee;padding-bottom:5px}.feed-item[_ngcontent-%COMP%]{border-left:5px solid #ccc;padding:20px;margin-bottom:0;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014}@media (max-width: 768px){.feed-item[_ngcontent-%COMP%]{padding:16px;border-radius:6px}}@media (max-width: 480px){.feed-item[_ngcontent-%COMP%]{padding:14px 12px}}.feed-item.approved[_ngcontent-%COMP%]{border-left-color:#4caf50}.feed-item.feed-item-high[_ngcontent-%COMP%]{border-left-color:#d32f2f;background-color:#fdeaea}.feed-item.feed-item-medium[_ngcontent-%COMP%]{border-left-color:#ffb300;background-color:#fff9e6}.feed-item.feed-item-low[_ngcontent-%COMP%]{border-left-color:#43a047;background-color:#edf7ed}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;font-weight:700;gap:12px}@media (max-width: 480px){.item-header[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:#333;flex:1}@media (max-width: 768px){.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:.75rem;font-weight:700;background:#4caf50;color:#fff;text-transform:uppercase;white-space:nowrap}.item-details[_ngcontent-%COMP%]{margin-bottom:12px}.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:.95rem;color:#555}@media (max-width: 768px){.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}}.type-tag[_ngcontent-%COMP%], .priority-tag[_ngcontent-%COMP%]{padding:2px 6px;border-radius:3px;font-size:.75rem;color:#fff}.type-tag[_ngcontent-%COMP%]{background-color:#3f51b5}.priority-tag.priority-high[_ngcontent-%COMP%]{background-color:#d32f2f}.priority-tag.priority-medium[_ngcontent-%COMP%]{background-color:#ffb300}.priority-tag.priority-low[_ngcontent-%COMP%]{background-color:#43a047}.item-description[_ngcontent-%COMP%]{margin:0 0 5px;font-size:.9rem}.item-footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.7rem}.empty-feed[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;border:2px dashed #ccc;color:#888;border-radius:8px;background:#fafafa}@media (max-width: 768px){.empty-feed[_ngcontent-%COMP%]{padding:30px 15px}}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;font-size:1rem}.item-image[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:center}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:250px;width:auto;height:auto;border-radius:8px;border:1px solid #ddd;box-shadow:0 2px 8px #0000001a}@media (max-width: 768px){.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}}@media (max-width: 480px){.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:180px}}"]})};function ZW(n,e){if(n&1&&(w(0,"div",12),de(1,"img",13),b()),n&2){let t=F().$implicit;T(),Z("src",t.imageUrl,$n)}}function YW(n,e){if(n&1&&(w(0,"div",7)(1,"div",8)(2,"h3"),S(3),b(),w(4,"span",9),S(5),b()(),w(6,"div",10)(7,"p")(8,"strong"),S(9,"Location:"),b(),S(10),b(),w(11,"p")(12,"strong"),S(13,"Reporter:"),b(),S(14),b(),w(15,"p")(16,"strong"),S(17,"Submitted:"),b(),S(18),_e(19,"date"),b()(),ie(20,ZW,2,1,"div",11),b()),n&2){let t=e.$implicit;T(3),ge(t.description),T(2),ge(t.status),T(5),si(" ",t.street,", ",t.barangay),T(4),me(" ",t.reporterName||t.reporterId),T(4),me(" ",At(19,7,t.createdAt,"short")),T(2),Z("ngIf",t.imageUrl)}}function QW(n,e){if(n&1&&(qn(0),ie(1,YW,21,10,"div",6),Gn()),n&2){let t=F().ngIf;T(),Z("ngForOf",t)}}function JW(n,e){n&1&&(w(0,"div",14)(1,"p"),S(2,"No approved reports available at this time."),b()())}function XW(n,e){if(n&1&&(w(0,"div",4),ie(1,QW,2,1,"ng-container",5)(2,JW,3,0,"ng-template",null,1,rn),b()),n&2){let t=e.ngIf,i=Mt(3);T(),Z("ngIf",t.length>0)("ngIfElse",i)}}function eK(n,e){n&1&&(w(0,"div",15),S(1,"Loading reports..."),b())}var Fy=class n{reportService=U(Rn);approvedReports$=this.reportService.getAllReports().pipe(le(e=>e.filter(t=>t.status==="approved")));static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-user-dashboard"]],decls:9,vars:4,consts:[["loading",""],["noReports",""],[1,"user-dashboard-container"],["class","reports-list",4,"ngIf","ngIfElse"],[1,"reports-list"],[4,"ngIf","ngIfElse"],["class","report-card",4,"ngFor","ngForOf"],[1,"report-card"],[1,"report-header"],[1,"status-badge","approved"],[1,"report-details"],["class","report-image",4,"ngIf"],[1,"report-image"],["alt","Incident image",3,"src"],[1,"no-reports"],[1,"loading"]],template:function(t,i){if(t&1&&(w(0,"div",2)(1,"h2"),S(2,"Report Management"),b(),w(3,"p"),S(4,"View all approved incident reports in Baguio City."),b(),ie(5,XW,4,2,"div",3),_e(6,"async"),ie(7,eK,2,0,"ng-template",null,0,rn),b()),t&2){let r=Mt(8);T(5),Z("ngIf",qe(6,2,i.approvedReports$))("ngIfElse",r)}},dependencies:[Nt,mi,wn,bn,Cr],styles:[".user-dashboard-container[_ngcontent-%COMP%]{max-width:800px;margin:30px auto;padding:20px}.user-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--sentinel-blue, #0b57a4);border-bottom:2px solid #e0e0e0;padding-bottom:10px;margin-bottom:5px}.user-dashboard-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:20px}.reports-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.report-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;padding:20px;background-color:#f9f9f9;box-shadow:0 2px 6px #0000001a;transition:box-shadow .2s}.report-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026}.report-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px;gap:10px}.report-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.1rem;flex:1}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:600;white-space:nowrap}.status-badge.approved[_ngcontent-%COMP%]{background-color:#c8e6c9;color:#2e7d32}.report-details[_ngcontent-%COMP%]{margin-bottom:15px;line-height:1.6}.report-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:.95rem}.report-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.report-image[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:center}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:250px;max-height:200px;width:auto;height:auto;border-radius:6px;border:1px solid #ddd;box-shadow:0 2px 8px #0000001a}.no-reports[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;border:1px dashed #ccc;border-radius:8px;color:#999}.loading[_ngcontent-%COMP%]{text-align:center;padding:30px;color:#999;font-style:italic}"]})};function tK(n,e){if(n&1){let t=Me();w(0,"div",6)(1,"div",7)(2,"strong"),S(3),b(),w(4,"button",8),ne("click",function(){J(t);let r=F();return X(r.closeAlert())}),S(5,"\xD7"),b()()()}if(n&2){let t=F();T(3),ge(t.sosMessage)}}function nK(n,e){if(n&1&&(w(0,"div",15)(1,"span",16),S(2,"GPS Location:"),b(),w(3,"span",21),S(4),b()()),n&2){let t=F(2);T(4),si(" ",t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null||t.selectedSOS.sosDetails.location.lat==null?null:t.selectedSOS.sosDetails.location.lat.toFixed(6),", ",t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null||t.selectedSOS.sosDetails.location.lng==null?null:t.selectedSOS.sosDetails.location.lng.toFixed(6)," ")}}function iK(n,e){if(n&1&&(w(0,"div",15)(1,"span",16),S(2,"Map Link:"),b(),w(3,"a",22),S(4," Open in Google Maps "),b()()),n&2){let t=F(2);T(3),Z("href","https://www.google.com/maps?q="+(t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null?null:t.selectedSOS.sosDetails.location.lat)+","+(t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null?null:t.selectedSOS.sosDetails.location.lng),$n)}}function rK(n,e){if(n&1){let t=Me();w(0,"div",23)(1,"button",24),ne("click",function(){J(t);let r=F(2);return X(r.respondToSOS(r.selectedSOS.id))}),S(2," Mark as Responded "),b()()}}function oK(n,e){if(n&1){let t=Me();w(0,"div",23)(1,"button",25),ne("click",function(){J(t);let r=F(2);return X(r.resolveSOS(r.selectedSOS.id))}),S(2," Mark as Resolved "),b()()}}function sK(n,e){n&1&&(w(0,"div",26),S(1," This emergency has been resolved. "),b())}function aK(n,e){if(n&1){let t=Me();w(0,"div",9),ne("click",function(){J(t);let r=F();return X(r.closeSOSDetail())}),w(1,"div",10),ne("click",function(r){return J(t),X(r.stopPropagation())}),w(2,"div",11)(3,"h3"),S(4,"Emergency SOS Details"),b(),w(5,"button",12),ne("click",function(){J(t);let r=F();return X(r.closeSOSDetail())}),S(6,"\xD7"),b()(),w(7,"div",13)(8,"div",14),S(9),_e(10,"uppercase"),b(),w(11,"div",15)(12,"span",16),S(13,"Reporter Name:"),b(),w(14,"span",17),S(15),b()(),w(16,"div",15)(17,"span",16),S(18,"Email:"),b(),w(19,"span",17),S(20),b()(),w(21,"div",15)(22,"span",16),S(23,"Time Reported:"),b(),w(24,"span",17),S(25),_e(26,"date"),b()(),ie(27,nK,5,2,"div",18)(28,iK,5,1,"div",18),b(),ie(29,rK,3,0,"div",19)(30,oK,3,0,"div",19)(31,sK,2,0,"div",20),b()()}if(n&2){let t=F();T(8),Z("ngClass","status-"+(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)),T(),me(" ",qe(10,10,t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)," "),T(6),ge(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.userName),T(5),ge(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.userEmail),T(5),ge(At(26,12,t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.timestamp,"medium")),T(2),Z("ngIf",t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.location),T(),Z("ngIf",t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.location),T(),Z("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="pending"),T(),Z("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="responded"),T(),Z("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="resolved")}}function cK(n,e){if(n&1){let t=Me();w(0,"div",46)(1,"span",47),S(2),b(),w(3,"button",48),ne("click",function(r){J(t);let o=F().$implicit;return F(3).onNotificationClick(o),X(r.stopPropagation())}),S(4," View Details "),b()()}if(n&2){let t=F().$implicit;T(),Z("ngClass","status-"+t.sosDetails.status),T(),me(" ",t.sosDetails.status," ")}}function lK(n,e){if(n&1){let t=Me();w(0,"button",49),ne("click",function(r){J(t);let o=F().$implicit;return F(3).quickRespondToSOS(o),X(r.stopPropagation())}),at(),w(1,"svg",43),de(2,"path",50),b(),S(3," Respond "),b()}}function uK(n,e){if(n&1){let t=Me();w(0,"button",51),ne("click",function(r){J(t);let o=F().$implicit;return F(3).markAsRead(o.id),X(r.stopPropagation())}),at(),w(1,"svg",52),de(2,"polyline",53),b()()}}function dK(n,e){if(n&1){let t=Me();w(0,"div",33),_e(1,"async"),de(2,"div",34),w(3,"div",35),ne("click",function(){let r=J(t).$implicit,o=F(3);return X(o.onNotificationClick(r))}),w(4,"p",36),S(5),b(),w(6,"small",37),S(7),_e(8,"date"),b(),ie(9,cK,5,2,"div",38),_e(10,"async"),b(),w(11,"div",39),ie(12,lK,4,0,"button",40),_e(13,"async"),ie(14,uK,3,0,"button",41),w(15,"button",42),ne("click",function(r){let o=J(t).$implicit;return F(3).deleteNotification(o.id),X(r.stopPropagation())}),at(),w(16,"svg",43),de(17,"polyline",44)(18,"path",45),b()()()()}if(n&2){let t=e.$implicit,i=F(3);ct("clickable",t.sosDetails&&qe(1,9,i.isAdmin$)),Z("ngClass",i.getNotificationClass(t)),T(2),Z("innerHTML",i.getNotificationIcon(t.type),xb),T(3),ge(t.message),T(2),me(" ",At(8,11,t.createdAt,"short")," "),T(2),Z("ngIf",t.sosDetails&&qe(10,14,i.isAdmin$)),T(3),Z("ngIf",t.sosDetails&&qe(13,16,i.isAdmin$)&&t.sosDetails.status==="pending"),T(2),Z("ngIf",!t.read)}}function hK(n,e){if(n&1){let t=Me();qn(0),w(1,"div",29)(2,"p"),S(3," You have "),w(4,"strong"),S(5),b(),S(6," notification(s) "),b(),w(7,"button",30),ne("click",function(){J(t);let r=F(2);return X(r.clearAll())}),S(8,"Clear All"),b()(),w(9,"div",31),ie(10,dK,19,18,"div",32),b(),Gn()}if(n&2){let t=F().ngIf;T(5),ge(t.length),T(5),Z("ngForOf",t)}}function fK(n,e){n&1&&(w(0,"div",54)(1,"p"),S(2,"No notifications at this time."),b()())}function pK(n,e){if(n&1&&(w(0,"div",27),ie(1,hK,11,2,"ng-container",28)(2,fK,3,0,"ng-template",null,1,rn),b()),n&2){let t=e.ngIf,i=Mt(3);T(),Z("ngIf",t.length>0)("ngIfElse",i)}}function gK(n,e){n&1&&(w(0,"div",55),S(1,"Loading notifications..."),b())}var Vy=class n{route=U(_i);notificationService=U(bo);authService=U(In);showSosAlert=!1;sosMessage="";selectedSOS=null;notifications$=this.notificationService.getNotifications();isAdmin$=this.authService.isAdmin$;ngOnInit(){this.route.snapshot.queryParamMap.get("sos")==="sent"&&this.triggerSosAlert()}triggerSosAlert(){this.sosMessage="EMERGENCY SOS SENT - Police/Admin have been notified and will respond immediately. Stay safe!",this.showSosAlert=!0,setTimeout(()=>{this.showSosAlert=!1},1e4)}closeAlert(){this.showSosAlert=!1}onNotificationClick(e){e.sosDetails&&this.authService.isAdmin$.pipe(ti(1)).subscribe(t=>{t&&(this.selectedSOS=e)})}closeSOSDetail(){this.selectedSOS=null}respondToSOS(e){this.selectedSOS&&this.selectedSOS.sosDetails&&(this.notificationService.markSOSAsResponded(e),this.notificationService.notifySOSResponse(this.selectedSOS.sosDetails.userName,this.selectedSOS.sosDetails.userEmail,"responded"),this.selectedSOS=pe(K({},this.selectedSOS),{sosDetails:pe(K({},this.selectedSOS.sosDetails),{status:"responded"})}))}resolveSOS(e){this.selectedSOS&&this.selectedSOS.sosDetails&&(this.notificationService.markSOSAsResolved(e),this.notificationService.notifySOSResponse(this.selectedSOS.sosDetails.userName,this.selectedSOS.sosDetails.userEmail,"resolved"),this.selectedSOS=pe(K({},this.selectedSOS),{sosDetails:pe(K({},this.selectedSOS.sosDetails),{status:"resolved"})}))}quickRespondToSOS(e){e.sosDetails&&(this.notificationService.markSOSAsResponded(e.id),this.notificationService.notifySOSResponse(e.sosDetails.userName,e.sosDetails.userEmail,"responded"))}deleteNotification(e){this.notificationService.deleteNotification(e),this.selectedSOS&&this.selectedSOS.id===e&&(this.selectedSOS=null)}markAsRead(e){this.notificationService.markAsRead(e)}clearAll(){confirm("Clear all notifications?")&&(this.notificationService.clearAll(),this.selectedSOS=null)}getNotificationIcon(e){switch(e){case"sos":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#dc3545" stroke-width="2"><polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>';case"alert":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>';case"action":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>';default:return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>'}}getNotificationClass(e){return{[`notification-${e.type}`]:!0,unread:!e.read}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-notification"]],decls:9,vars:6,consts:[["loading",""],["noNotifications",""],[1,"notification-container"],["class","sos-alert",4,"ngIf"],["class","sos-detail-modal",3,"click",4,"ngIf"],["class","notifications-panel",4,"ngIf","ngIfElse"],[1,"sos-alert"],[1,"alert-content"],[1,"close-btn",3,"click"],[1,"sos-detail-modal",3,"click"],[1,"sos-detail-content",3,"click"],[1,"sos-detail-header"],[1,"modal-close-btn",3,"click"],[1,"sos-detail-body"],[1,"sos-status-badge",3,"ngClass"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","detail-row",4,"ngIf"],["class","sos-detail-actions",4,"ngIf"],["class","sos-resolved-notice",4,"ngIf"],[1,"detail-value","coordinates"],["target","_blank",1,"map-link",3,"href"],[1,"sos-detail-actions"],[1,"action-btn","respond-btn",3,"click"],[1,"action-btn","resolve-btn",3,"click"],[1,"sos-resolved-notice"],[1,"notifications-panel"],[4,"ngIf","ngIfElse"],[1,"notifications-header"],[1,"clear-btn",3,"click"],[1,"notifications-list"],["class","notification-item",3,"ngClass","clickable",4,"ngFor","ngForOf"],[1,"notification-item",3,"ngClass"],[1,"notification-icon",3,"innerHTML"],[1,"notification-content",3,"click"],[1,"notification-message"],[1,"notification-time"],["class","sos-quick-info",4,"ngIf"],[1,"notification-actions"],["class","quick-respond-btn","title","Respond to Emergency",3,"click",4,"ngIf"],["class","mark-read-btn","title","Mark as read",3,"click",4,"ngIf"],["title","Delete",1,"delete-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"sos-quick-info"],[1,"sos-status",3,"ngClass"],[1,"view-details-btn",3,"click"],["title","Respond to Emergency",1,"quick-respond-btn",3,"click"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],["title","Mark as read",1,"mark-read-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["points","20 6 9 17 4 12"],[1,"no-notifications"],[1,"loading"]],template:function(t,i){if(t&1&&(w(0,"div",2)(1,"h2"),S(2,"Safety Alerts & Notifications"),b(),ie(3,tK,6,1,"div",3)(4,aK,32,15,"div",4)(5,pK,4,2,"div",5),_e(6,"async"),ie(7,gK,2,0,"ng-template",null,0,rn),b()),t&2){let r=Mt(8);T(3),Z("ngIf",i.showSosAlert),T(),Z("ngIf",i.selectedSOS),T(),Z("ngIf",qe(6,4,i.notifications$))("ngIfElse",r)}},dependencies:[Nt,xC,mi,wn,bn,vc,Cr],styles:[".notification-container[_ngcontent-%COMP%]{max-width:700px;margin:30px auto;padding:20px}@media (max-width: 768px){.notification-container[_ngcontent-%COMP%]{margin:20px auto;padding:15px}}@media (max-width: 480px){.notification-container[_ngcontent-%COMP%]{margin:15px auto;padding:10px}}.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--sentinel-blue, #0b57a4);border-bottom:2px solid #e0e0e0;padding-bottom:10px;margin-bottom:20px;font-size:1.6rem}@media (max-width: 768px){.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}}@media (max-width: 480px){.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:15px}}.sos-alert[_ngcontent-%COMP%]{background-color:#ffebee;border-left:5px solid #d32f2f;border-radius:4px;margin-bottom:20px;animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.alert-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;color:#c62828;font-weight:600}@media (max-width: 480px){.alert-content[_ngcontent-%COMP%]{padding:12px;font-size:.9rem}}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#c62828;padding:0;width:40px;height:40px;min-width:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .2s}.close-btn[_ngcontent-%COMP%]:hover{background-color:#d32f2f1a}.sos-detail-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.sos-detail-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;max-width:500px;width:100%;box-shadow:0 20px 50px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.sos-detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e0e0e0;background:linear-gradient(135deg,#1a3a52,#2a5a7a);border-radius:12px 12px 0 0}.sos-detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.2rem;font-weight:600}.modal-close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;font-size:1.5rem;width:36px;height:36px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s}.modal-close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.sos-detail-body[_ngcontent-%COMP%]{padding:24px}.sos-status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 16px;border-radius:20px;font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;margin-bottom:20px}.sos-status-badge.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.sos-status-badge.status-responded[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.sos-status-badge.status-resolved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.detail-row[_ngcontent-%COMP%]{display:flex;padding:12px 0;border-bottom:1px solid #f0f0f0}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-label[_ngcontent-%COMP%]{font-weight:600;color:#666;min-width:130px;font-size:.9rem}.detail-value[_ngcontent-%COMP%]{color:#333;font-size:.95rem;word-break:break-word}.detail-value.coordinates[_ngcontent-%COMP%]{font-family:Courier New,monospace;background:#f5f5f5;padding:4px 8px;border-radius:4px;font-size:.85rem}.map-link[_ngcontent-%COMP%]{color:#1a3a52;text-decoration:none;font-weight:600;display:inline-flex;align-items:center;gap:6px}.map-link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#2a5a7a}.sos-detail-actions[_ngcontent-%COMP%]{padding:20px 24px;border-top:1px solid #e0e0e0;display:flex;gap:12px;justify-content:flex-end}.action-btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s}.respond-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1565c0,#1976d2);color:#fff}.respond-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #1565c04d}.resolve-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2e7d32,#43a047);color:#fff}.resolve-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #2e7d324d}.sos-resolved-notice[_ngcontent-%COMP%]{padding:16px 24px;background:#e8f5e9;color:#2e7d32;text-align:center;font-weight:500;border-radius:0 0 12px 12px}@media (max-width: 480px){.sos-detail-content[_ngcontent-%COMP%]{margin:10px}.sos-detail-header[_ngcontent-%COMP%]{padding:16px 20px}.sos-detail-body[_ngcontent-%COMP%]{padding:20px}.detail-row[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.detail-label[_ngcontent-%COMP%]{min-width:auto}.sos-detail-actions[_ngcontent-%COMP%]{padding:16px 20px;flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%}}.notifications-panel[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;padding:20px}@media (max-width: 480px){.notifications-panel[_ngcontent-%COMP%]{padding:15px;border-radius:6px}}.notifications-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #f0f0f0;gap:12px}@media (max-width: 480px){.notifications-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:10px}}.notifications-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333;font-size:.95rem}.clear-btn[_ngcontent-%COMP%]{padding:10px 16px;background-color:#f5f5f5;color:#666;border:1px solid #ddd;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .2s;min-height:44px;white-space:nowrap}@media (max-width: 480px){.clear-btn[_ngcontent-%COMP%]{width:100%;text-align:center}}.clear-btn[_ngcontent-%COMP%]:hover{background-color:#eee;border-color:#ccc}.notifications-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.notification-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:15px;border-radius:6px;background-color:#f9f9f9;border-left:4px solid #ccc;transition:all .2s}.notification-item.clickable[_ngcontent-%COMP%]{cursor:pointer}.notification-item.clickable[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;transform:translate(4px)}@media (max-width: 480px){.notification-item[_ngcontent-%COMP%]{padding:12px;gap:10px;flex-wrap:wrap}}.notification-item.unread[_ngcontent-%COMP%]{background-color:#f0f7ff;border-left-color:var(--sentinel-blue, #0b57a4)}.notification-item.notification-sos[_ngcontent-%COMP%]{background-color:#ffebee;border-left-color:#d32f2f}.notification-item.notification-alert[_ngcontent-%COMP%]{background-color:#fff3e0;border-left-color:#ffb300}.notification-item.notification-info[_ngcontent-%COMP%]{background-color:#e3f2fd;border-left-color:#1976d2}.notification-item.notification-action[_ngcontent-%COMP%]{background-color:#e8f5e9;border-left-color:#43a047}.notification-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 6px #0000001a}.notification-icon[_ngcontent-%COMP%]{min-width:40px;display:flex;align-items:flex-start;justify-content:center;padding-top:2px}@media (max-width: 480px){.notification-icon[_ngcontent-%COMP%]{min-width:35px}.notification-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}}.notification-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px;min-width:0}.notification-message[_ngcontent-%COMP%]{margin:0;color:#333;font-weight:500;font-size:.95rem;word-break:break-word}@media (max-width: 480px){.notification-message[_ngcontent-%COMP%]{font-size:.9rem}}.notification-time[_ngcontent-%COMP%]{color:#999;font-size:.85rem}.sos-quick-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:8px;flex-wrap:wrap}.sos-status[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;text-transform:uppercase;padding:3px 8px;border-radius:10px;letter-spacing:.3px}.sos-status.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.sos-status.status-responded[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.sos-status.status-resolved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.view-details-btn[_ngcontent-%COMP%]{font-size:.75rem;padding:4px 12px;background:linear-gradient(135deg,#1a3a52,#2a5a7a);color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:all .2s}.view-details-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #1a3a524d}.quick-respond-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:.8rem;font-weight:600;transition:all .2s;white-space:nowrap}.quick-respond-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #27ae6066}.quick-respond-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.click-hint[_ngcontent-%COMP%]{font-size:.75rem;color:#999;font-style:italic}.notification-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap}@media (max-width: 480px){.notification-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end;padding-top:8px;border-top:1px solid #eee;margin-top:8px}.quick-respond-btn[_ngcontent-%COMP%]{flex:1;justify-content:center}}.mark-read-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{padding:8px 12px;border:none;background-color:transparent;cursor:pointer;transition:all .2s;border-radius:4px;min-height:44px;min-width:44px;display:flex;align-items:center;justify-content:center}.mark-read-btn[_ngcontent-%COMP%]:hover, .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.mark-read-btn[_ngcontent-%COMP%]{color:#4caf50}.mark-read-btn[_ngcontent-%COMP%]:hover{background-color:#4caf501a}.delete-btn[_ngcontent-%COMP%]{color:#999}.delete-btn[_ngcontent-%COMP%]:hover{color:#d32f2f;background-color:#d32f2f1a}.no-notifications[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999}@media (max-width: 480px){.no-notifications[_ngcontent-%COMP%]{padding:30px 15px}}.no-notifications[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:30px;color:#999;font-style:italic}"]})};function mK(n,e){if(n&1&&(w(0,"div",19),S(1),b()),n&2){let t=F(2);T(),ge(t.adminErrorMessage)}}function _K(n,e){if(n&1){let t=Me();w(0,"div",7)(1,"h2"),S(2,"ADMIN LOGIN"),b(),w(3,"form",11,0),ne("ngSubmit",function(){J(t);let r=F();return X(r.onSubmitAdmin())}),w(5,"div",12)(6,"label",13),S(7,"Username"),b(),w(8,"input",14),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.adminEmail,r)||(o.adminEmail=r),X(r)}),b()(),w(9,"div",12)(10,"label",15),S(11,"Password"),b(),w(12,"input",16),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.adminPassword,r)||(o.adminPassword=r),X(r)}),b()(),ie(13,mK,2,1,"div",17),w(14,"button",18),S(15),b()()()}if(n&2){let t=Mt(4),i=F();T(8),rt("ngModel",i.adminEmail),T(4),rt("ngModel",i.adminPassword),T(),Z("ngIf",i.adminErrorMessage),T(),Z("disabled",t.invalid||i.isLoading),T(),me(" ",i.isLoading?"Signing in...":"Login"," ")}}function vK(n,e){if(n&1&&(w(0,"div",19),S(1),b()),n&2){let t=F(2);T(),ge(t.userErrorMessage)}}function yK(n,e){if(n&1){let t=Me();w(0,"div",8)(1,"h2"),S(2,"USER LOGIN"),b(),w(3,"form",11,1),ne("ngSubmit",function(){J(t);let r=F();return X(r.onSubmitUser())}),w(5,"div",12)(6,"label",20),S(7,"Username"),b(),w(8,"input",21),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.userEmail,r)||(o.userEmail=r),X(r)}),b()(),w(9,"div",12)(10,"label",22),S(11,"Password"),b(),w(12,"input",23),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.userPassword,r)||(o.userPassword=r),X(r)}),b()(),ie(13,vK,2,1,"div",17),w(14,"button",24),S(15),b()()()}if(n&2){let t=Mt(4),i=F();T(8),rt("ngModel",i.userEmail),T(4),rt("ngModel",i.userPassword),T(),Z("ngIf",i.userErrorMessage),T(),Z("disabled",t.invalid||i.isLoading),T(),me(" ",i.isLoading?"Signing in...":"Login"," ")}}function wK(n,e){if(n&1&&(w(0,"div",19),S(1),b()),n&2){let t=F(2);T(),ge(t.errorMessage)}}function bK(n,e){if(n&1){let t=Me();w(0,"div",9)(1,"h2"),S(2,"CREATE ACCOUNT"),b(),w(3,"form",25,2),ne("ngSubmit",function(){J(t);let r=F();return X(r.onSubmit())}),w(5,"div",12)(6,"label",26),S(7,"Email"),b(),w(8,"input",27),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.email,r)||(o.email=r),X(r)}),b()(),w(9,"div",12)(10,"label",28),S(11,"Full Name (optional)"),b(),w(12,"input",29),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.displayName,r)||(o.displayName=r),X(r)}),b()(),w(13,"div",12)(14,"label",30),S(15,"Password"),b(),w(16,"input",31),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.password,r)||(o.password=r),X(r)}),b()(),w(17,"div",12)(18,"label",32),S(19,"Confirm Password"),b(),w(20,"input",33),ot("ngModelChange",function(r){J(t);let o=F();return lt(o.confirmPassword,r)||(o.confirmPassword=r),X(r)}),b()(),ie(21,wK,2,1,"div",17),w(22,"button",34),S(23),b()(),w(24,"div",35)(25,"button",36),ne("click",function(){J(t);let r=F();return X(r.setTab("user"))}),S(26,"\u2190 Back to Login"),b()()()}if(n&2){let t=Mt(4),i=F();T(8),rt("ngModel",i.email),T(4),rt("ngModel",i.displayName),T(4),rt("ngModel",i.password),T(4),rt("ngModel",i.confirmPassword),T(),Z("ngIf",i.errorMessage),T(),Z("disabled",t.invalid||i.isLoading),T(),me(" ",i.isLoading?"Creating account...":"Create Account"," ")}}function CK(n,e){if(n&1){let t=Me();w(0,"div",37)(1,"button",38),ne("click",function(){J(t);let r=F();return X(r.setTab("signup"))}),S(2,"Create Account"),b()()}}var By=class n{authService=U(In);tab="user";adminEmail="";adminPassword="";adminErrorMessage=null;userEmail="";userPassword="";userErrorMessage=null;email="";password="";displayName="";confirmPassword="";errorMessage=null;isLoading=!1;ngOnInit(){this.tab="user"}setTab(e){this.tab=e,this.adminErrorMessage=null,this.userErrorMessage=null,this.errorMessage=null}onSubmitAdmin(){return D(this,null,function*(){this.adminErrorMessage=null,this.isLoading=!0;try{yield this.authService.login(this.adminEmail,this.adminPassword)}catch(e){this.adminErrorMessage=e.message||"Admin login failed."}finally{this.isLoading=!1}})}onSubmitUser(){return D(this,null,function*(){this.userErrorMessage=null,this.isLoading=!0;try{yield this.authService.login(this.userEmail,this.userPassword)}catch(e){this.userErrorMessage=e.message||"User login failed."}finally{this.isLoading=!1}})}onSubmit(){return D(this,null,function*(){this.errorMessage=null,this.isLoading=!0;try{if(this.password!==this.confirmPassword){this.errorMessage="Passwords do not match.",this.isLoading=!1;return}yield this.authService.register(this.email,this.password,this.displayName||void 0)}catch(e){this.errorMessage=e.message||"Signup failed."}finally{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-login"]],decls:11,vars:8,consts:[["adminForm","ngForm"],["userForm","ngForm"],["signupFormRef","ngForm"],[1,"login-bg"],[1,"login-card"],[1,"login-tabs"],[3,"click"],[1,"admin-login-section"],[1,"user-login-section"],[1,"signup-section"],["class","create-account-section",4,"ngIf"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","adminEmail"],["id","adminEmail","type","email","name","adminEmail","required","","placeholder","admin@example.com",3,"ngModelChange","ngModel"],["for","adminPassword"],["id","adminPassword","type","password","name","adminPassword","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"login-btn","admin-btn",3,"disabled"],[1,"error-message"],["for","userEmail"],["id","userEmail","type","email","name","userEmail","required","","placeholder","user@example.com",3,"ngModelChange","ngModel"],["for","userPassword"],["id","userPassword","type","password","name","userPassword","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModelChange","ngModel"],["type","submit",1,"login-btn","user-btn",3,"disabled"],[1,"signup-form",3,"ngSubmit"],["for","email"],["id","email","type","email","name","email","required","","placeholder","your@email.com",3,"ngModelChange","ngModel"],["for","displayName"],["id","displayName","type","text","name","displayName","placeholder","Your Full Name",3,"ngModelChange","ngModel"],["for","password"],["id","password","type","password","name","password","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","minlength","6",3,"ngModelChange","ngModel"],["for","confirm"],["id","confirm","type","password","name","confirm","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModelChange","ngModel"],["type","submit",1,"signup-btn",3,"disabled"],[1,"back-to-login"],[1,"back-link",3,"click"],[1,"create-account-section"],[1,"btn","create-account-btn",3,"click"]],template:function(t,i){t&1&&(w(0,"div",3)(1,"div",4)(2,"div",5)(3,"button",6),ne("click",function(){return i.setTab("admin")}),S(4,"Login as Admin"),b(),w(5,"button",6),ne("click",function(){return i.setTab("user")}),S(6,"Login as User"),b()(),Xe(7,_K,16,5,"div",7),Xe(8,yK,16,5,"div",8),Xe(9,bK,27,7,"div",9),b(),ie(10,CK,3,0,"div",10),b()),t&2&&(T(3),ct("active",i.tab==="admin"),T(2),ct("active",i.tab==="user"),T(2),et(i.tab==="admin"?7:-1),T(),et(i.tab==="user"?8:-1),T(),et(i.tab==="signup"?9:-1),T(),Z("ngIf",i.tab!=="signup"))},dependencies:[Nt,wn,xa,cd,Co,Ea,ad,Jc,dT,us,Qc],styles:[".login-bg[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#b3c6e7,#7fa1d6);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px}@media (max-width: 768px){.login-bg[_ngcontent-%COMP%]{padding:50px 15px 30px;justify-content:flex-start}}@media (max-width: 480px){.login-bg[_ngcontent-%COMP%]{padding:30px 10px 20px}}.login-card[_ngcontent-%COMP%]{background:#2c3e50;color:#fff;max-width:420px;width:100%;padding:40px 36px;border-radius:12px;box-shadow:0 8px 32px #0000004d;position:relative}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:30px 20px;border-radius:10px;max-width:100%}}.login-tabs[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:32px;background:#1a252f;border-radius:8px;overflow:hidden}@media (max-width: 480px){.login-tabs[_ngcontent-%COMP%]{margin-bottom:24px}}.login-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:14px 8px;background:none;border:none;color:#95a5b8;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s;border-bottom:3px solid transparent;min-height:48px}@media (max-width: 480px){.login-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 6px;font-size:.8rem}}.login-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#34495e;color:#fff;border-bottom:3px solid #5dade2}.login-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.active):hover{background:#243340;color:#fff}.admin-login-section[_ngcontent-%COMP%], .user-login-section[_ngcontent-%COMP%], .signup-section[_ngcontent-%COMP%]{margin-top:10px;padding:10px 0 0}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;font-weight:700;margin-bottom:24px;text-align:center;letter-spacing:1.5px;border-bottom:none;padding-bottom:0}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:20px}}.create-account-section[_ngcontent-%COMP%]{margin-top:24px;text-align:center}@media (max-width: 480px){.create-account-section[_ngcontent-%COMP%]{margin-top:20px}}.create-account-btn[_ngcontent-%COMP%]{background:#5dade2;color:#fff;border:none;border-radius:8px;padding:14px 40px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .2s;box-shadow:0 4px 12px #5dade24d;min-height:50px;width:100%;max-width:280px}@media (max-width: 480px){.create-account-btn[_ngcontent-%COMP%]{padding:14px 30px;font-size:1rem;max-width:100%}}.create-account-btn[_ngcontent-%COMP%]:hover{background:#3498db;transform:translateY(-2px);box-shadow:0 6px 16px #5dade266}.back-to-login[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.back-link[_ngcontent-%COMP%]{background:transparent;color:#95a5b8;border:1px solid #95a5b8;border-radius:6px;padding:10px 24px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s;min-height:44px}.back-link[_ngcontent-%COMP%]:hover{background:#34495e;color:#fff;border-color:#fff}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]{margin-bottom:16px}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#95a5b8;font-size:.9rem;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:1px solid #34495e;border-radius:6px;box-sizing:border-box;font-size:1rem;background:#1a252f;color:#fff;transition:all .2s;min-height:50px}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 14px;font-size:16px}}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#5dade2;background:#243340}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#7f8c8d}.login-btn[_ngcontent-%COMP%], .signup-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background-color:#5dade2;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:1.1rem;font-weight:700;transition:all .2s;margin-top:8px;box-shadow:0 4px 12px #5dade24d;min-height:52px}@media (max-width: 480px){.login-btn[_ngcontent-%COMP%], .signup-btn[_ngcontent-%COMP%]{font-size:1rem;padding:14px}}.login-btn[_ngcontent-%COMP%]:hover:not([disabled]), .signup-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#3498db;transform:translateY(-2px);box-shadow:0 6px 16px #5dade266}.login-btn[_ngcontent-%COMP%]:disabled, .signup-btn[_ngcontent-%COMP%]:disabled{background-color:#7f8c8d;cursor:not-allowed;opacity:.6;transform:none;box-shadow:none}.error-message[_ngcontent-%COMP%]{margin-top:15px;padding:12px;background-color:#fdeaea;color:#d32f2f;border:1px solid #d32f2f;border-radius:6px;text-align:center;font-size:.9rem}"]})};var hT=(n,e)=>{let t=U(In),i=U(wt);return t.isAdmin$.pipe(le(r=>r?!0:i.createUrlTree(["/login"])))},fT=(n,e)=>{let t=U(In),i=U(wt);return t.currentUser$.pipe(le(r=>r?!0:i.createUrlTree(["/login"])))};var BL=[{path:"",component:_y,title:"Mountain Sentinel Home"},{path:"map",component:yy,title:"Safety Alert Map"},{path:"login",component:By,title:"Login / Sign Up"},{path:"report",component:Oy,title:"Submit Safety Alert",canActivate:[fT]},{path:"report-detail/:id",component:Ry,title:"Alert Details"},{path:"admin-dashboard",component:Ny,title:"Admin Dashboard",canActivate:[hT]},{path:"admin-report",component:ky,title:"Issue Safety Alert",canActivate:[hT]},{path:"safety-feed",component:Ly,title:"Safety Feed"},{path:"user-dashboard",component:Fy,title:"User Dashboard",canActivate:[fT]},{path:"notification",component:Vy,title:"Notifications"},{path:"**",redirectTo:""}];var EK={apiKey:"AIzaSyC5tdlJxwcSqbHwGAjOjUbd7XVU54ePawk",authDomain:"mountain-sentinel.firebaseapp.com",projectId:"mountain-sentinel",storageBucket:"mountain-sentinel.firebasestorage.app",messagingSenderId:"635510430186",appId:"1:635510430186:web:e333c2a926d64d44383a93",measurementId:"G-5G9M3TM3NW"},jL={providers:[lR(()=>uR(EK)),cL(()=>uL()),vN(()=>bN()),dE(BL)]};var IK=()=>({exact:!0});function xK(n,e){if(n&1&&(qn(0),w(1,"div",14),_e(2,"async"),w(3,"div",15),at(),w(4,"svg",16),de(5,"path",17),b()(),Ut(),w(6,"span",18),S(7),_e(8,"async"),b()(),Gn()),n&2){let t=F();T(),ct("admin-indicator",qe(2,3,t.authService.isAdmin$)),T(6),ge(qe(8,5,t.authService.isAdmin$)?"ADMIN":"CITIZEN")}}function SK(n,e){if(n&1){let t=Me();w(0,"a",23),ne("click",function(r){J(t);let o=F(2);return X(o.handleReportClick(r))}),S(1,"Submit Safety Alert"),b()}}function TK(n,e){if(n&1){let t=Me();qn(0),w(1,"a",24),ne("click",function(){J(t);let r=F(2);return X(r.closeMenu())}),S(2,"Admin Dashboard"),b(),w(3,"a",25),ne("click",function(){J(t);let r=F(2);return X(r.closeMenu())}),S(4,"Issue Alert"),b(),Gn()}}function DK(n,e){if(n&1&&(w(0,"span",28),S(1),b()),n&2){let t=e.ngIf;ct("hidden",t===0),T(),me(" ",t," ")}}function MK(n,e){if(n&1){let t=Me();w(0,"a",26),ne("click",function(){J(t);let r=F(2);return X(r.closeMenu())}),S(1," Emergency SOS "),ie(2,DK,2,3,"span",27),_e(3,"async"),b()}if(n&2){let t=F(2);T(2),Z("ngIf",qe(3,1,t.sosCount$))}}function AK(n,e){if(n&1&&(w(0,"span",31),S(1),b()),n&2){let t=e.ngIf;ct("hidden",t===0),T(),me(" ",t," ")}}function PK(n,e){if(n&1){let t=Me();w(0,"a",29),ne("click",function(){J(t);let r=F(2);return X(r.closeMenu())}),S(1," Safety Alerts "),ie(2,AK,2,3,"span",30),_e(3,"async"),b()}if(n&2){let t=F(2);T(2),Z("ngIf",qe(3,1,t.unreadCount$))}}function OK(n,e){if(n&1){let t=Me();qn(0),ie(1,SK,2,0,"a",19),_e(2,"async"),ie(3,TK,5,0,"ng-container",3),_e(4,"async"),ie(5,MK,4,3,"a",20),_e(6,"async"),ie(7,PK,4,3,"a",21),_e(8,"async"),w(9,"button",22),ne("click",function(){J(t);let r=F();return r.logout(),X(r.closeMenu())}),S(10,"Logout"),b(),Gn()}if(n&2){let t=F();T(),Z("ngIf",!qe(2,4,t.authService.isAdmin$)),T(2),Z("ngIf",qe(4,6,t.authService.isAdmin$)),T(2),Z("ngIf",qe(6,8,t.authService.isAdmin$)),T(2),Z("ngIf",!qe(8,10,t.authService.isAdmin$))}}function RK(n,e){if(n&1){let t=Me();w(0,"a",23),ne("click",function(r){J(t);let o=F();return X(o.handleReportClick(r))}),S(1,"Submit Safety Alert"),b(),w(2,"a",32),ne("click",function(){J(t);let r=F();return X(r.closeMenu())}),S(3,"Login / Sign-up"),b()}}function NK(n,e){if(n&1){let t=Me();w(0,"div",33),ne("click",function(){J(t);let r=F();return X(r.closeAuthPrompt())}),w(1,"div",34),ne("click",function(r){return J(t),X(r.stopPropagation())}),w(2,"button",35),ne("click",function(){J(t);let r=F();return X(r.closeAuthPrompt())}),S(3,"\xD7"),b(),w(4,"div",36),at(),w(5,"svg",37),de(6,"rect",38)(7,"path",39),b()(),Ut(),w(8,"h2"),S(9,"Authentication Required"),b(),w(10,"p",40),S(11," You need to create an account or sign in before you can submit a safety alert. "),b(),w(12,"p",41),S(13," Creating an account helps us verify reports and keep the community safe. "),b(),w(14,"div",42)(15,"button",43),ne("click",function(){J(t);let r=F();return X(r.navigateToLogin())}),S(16," Sign In / Sign Up "),b(),w(17,"button",44),ne("click",function(){J(t);let r=F();return X(r.closeAuthPrompt())}),S(18,"Cancel"),b()()()()}}var jy=class n{title="Mountain Sentinel";authService=U(In);notificationService=U(bo);router=U(wt);unreadCount$;sosCount$;showAuthPrompt=!1;menuOpen=!1;constructor(){this.unreadCount$=this.notificationService.getUnreadCount(),this.sosCount$=this.notificationService.getSOSCount()}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}handleReportClick(e){this.authService.currentUser$.pipe(ti(1)).subscribe(t=>{t||(e.preventDefault(),this.showAuthPrompt=!0)})}closeAuthPrompt(){this.showAuthPrompt=!1}navigateToLogin(){this.showAuthPrompt=!1,this.router.navigate(["/login"])}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Dt({type:n,selectors:[["app-root"]],decls:26,vars:16,consts:[["loggedOut",""],[1,"app-header"],[1,"header-left"],[4,"ngIf"],[1,"logo-area"],[1,"logo-badge"],["aria-label","Toggle menu",1,"hamburger-btn",3,"click"],[1,"hamburger-line"],[1,"header-nav"],["routerLink","/","routerLinkActive","active",3,"click","routerLinkActiveOptions"],[4,"ngIf","ngIfElse"],[1,"menu-overlay",3,"click"],[1,"app-main"],[1,"modal-overlay"],[1,"user-role-indicator"],[1,"role-icon"],["xmlns","http://www.w3.org/2000/svg","width","12","height","12","viewBox","0 0 24 24","fill","currentColor"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],[1,"role-text"],["routerLink","/report","routerLinkActive","active","class","report-link",3,"click",4,"ngIf"],["routerLink","/notification","routerLinkActive","active","class","notification-link sos-emergency-link",3,"click",4,"ngIf"],["routerLink","/notification","routerLinkActive","active","class","notification-link",3,"click",4,"ngIf"],[1,"logout-btn",3,"click"],["routerLink","/report","routerLinkActive","active",1,"report-link",3,"click"],["routerLink","/admin-dashboard","routerLinkActive","active",1,"admin-link",3,"click"],["routerLink","/admin-report","routerLinkActive","active",1,"admin-report-link",3,"click"],["routerLink","/notification","routerLinkActive","active",1,"notification-link","sos-emergency-link",3,"click"],["class","sos-badge",3,"hidden",4,"ngIf"],[1,"sos-badge"],["routerLink","/notification","routerLinkActive","active",1,"notification-link",3,"click"],["class","unread-badge",3,"hidden",4,"ngIf"],[1,"unread-badge"],["routerLink","/login","routerLinkActive","active",1,"login-link",3,"click"],[1,"modal-overlay",3,"click"],[1,"auth-prompt-modal",3,"click"],["aria-label","Close",1,"close-btn",3,"click"],[1,"modal-icon"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"modal-message"],[1,"modal-submessage"],[1,"modal-actions"],[1,"modal-btn","primary-btn",3,"click"],[1,"modal-btn","secondary-btn",3,"click"]],template:function(t,i){if(t&1){let r=Me();w(0,"header",1)(1,"div",2),ie(2,xK,9,7,"ng-container",3),_e(3,"async"),w(4,"div",4)(5,"div",5),S(6,"BCCD"),b()(),w(7,"h1"),S(8,"MOUNTAIN"),de(9,"br"),S(10,"SENTINEL"),b()(),w(11,"button",6),ne("click",function(){return J(r),X(i.toggleMenu())}),de(12,"span",7)(13,"span",7)(14,"span",7),b(),w(15,"nav",8)(16,"a",9),ne("click",function(){return J(r),X(i.closeMenu())}),S(17,"Home"),b(),ie(18,OK,11,12,"ng-container",10),_e(19,"async"),ie(20,RK,4,0,"ng-template",null,0,rn),b(),w(22,"div",11),ne("click",function(){return J(r),X(i.closeMenu())}),b()(),w(23,"main",12),de(24,"router-outlet"),b(),Xe(25,NK,19,0,"div",13)}if(t&2){let r=Mt(21);T(2),Z("ngIf",qe(3,11,i.authService.currentUser$)),T(9),ct("active",i.menuOpen),T(4),ct("open",i.menuOpen),T(),Z("routerLinkActiveOptions",rC(15,IK)),T(2),Z("ngIf",qe(19,13,i.authService.currentUser$))("ngIfElse",r),T(4),ct("open",i.menuOpen),T(3),et(i.showAuthPrompt?25:-1)}},dependencies:[Nt,wn,tf,Yi,Zo,uE,bn],styles:[".app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a3a52,#2a5a7a);color:#fff;padding:12px 60px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 20px #00000040;height:70px;position:relative;z-index:1000}.app-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.header-left[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:50px;height:50px;background:linear-gradient(135deg,gold,#ffed4e);border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid rgba(255,255,255,.4);flex-shrink:0;box-shadow:0 4px 12px #ffd7004d}.logo-area[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:13px;font-weight:800;color:#1a3a52;text-align:center;line-height:1}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:700;letter-spacing:.5px;line-height:1.2;white-space:nowrap}.user-role-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;padding:4px 10px 4px 6px;background:linear-gradient(135deg,#50c878,#3ba55c);border-radius:15px;font-size:.65rem;font-weight:700;letter-spacing:.5px;color:#fff;box-shadow:0 2px 6px #50c87859;border:1px solid rgba(255,255,255,.3)}.user-role-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:18px;height:18px;background:#ffffff40;border-radius:50%;flex-shrink:0}.user-role-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;width:11px;height:11px}.user-role-indicator[_ngcontent-%COMP%]   .role-text[_ngcontent-%COMP%]{line-height:1}.user-role-indicator.admin-indicator[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#f0c800);color:#1a3a52;box-shadow:0 2px 8px #ffd70073;border:1px solid rgba(255,215,0,.5);animation:_ngcontent-%COMP%_adminGlow 3s ease-in-out infinite}.user-role-indicator.admin-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{background:#1a3a5233}.user-role-indicator.admin-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a3a52}@keyframes _ngcontent-%COMP%_adminGlow{0%,to{box-shadow:0 2px 10px #ffd70080}50%{box-shadow:0 4px 18px #ffd700b3}}.hamburger-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:center;align-items:center;gap:5px;width:44px;height:44px;background:#ffffff1a;border:2px solid rgba(255,255,255,.2);border-radius:8px;cursor:pointer;padding:10px;transition:all .3s ease;z-index:1002}.hamburger-btn[_ngcontent-%COMP%]:hover{background:#fff3}.hamburger-line[_ngcontent-%COMP%]{width:22px;height:3px;background:#fff;border-radius:2px;transition:all .3s ease}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(5px,6px)}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(2){opacity:0;transform:translate(-10px)}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(5px,-6px)}.menu-overlay[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;background:#00000080;z-index:999;opacity:0;transition:opacity .3s ease}.menu-overlay.open[_ngcontent-%COMP%]{opacity:1}.app-header[_ngcontent-%COMP%]   .header-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:12px 24px;border-radius:8px;transition:all .25s ease;font-size:14px;font-weight:600;border:none;background:transparent;cursor:pointer;display:flex;align-items:center;gap:6px;white-space:nowrap}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ffffff26;transform:translateY(-1px)}.header-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:inset 0 -2px #ffffff80}.header-nav[_ngcontent-%COMP%]   .report-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#50c878,#3ba55c);font-weight:700;box-shadow:0 4px 12px #50c8784d}.header-nav[_ngcontent-%COMP%]   .report-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#45b066,#2e8b57);transform:translateY(-2px);box-shadow:0 6px 16px #50c87866}.header-nav[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#50c878,#3ba55c);font-weight:700;box-shadow:0 4px 12px #50c8784d}.header-nav[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#45b066,#2e8b57);transform:translateY(-2px);box-shadow:0 6px 16px #50c87866}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{background:#ffffff26;font-size:14px;border:1px solid rgba(255,255,255,.2)}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff40}.header-nav[_ngcontent-%COMP%]   .notification-link[_ngcontent-%COMP%]{position:relative;padding:12px 18px}.header-nav[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background-color:#d32f2f;color:#fff;border-radius:50%;min-width:20px;height:20px;font-size:.75rem;font-weight:700;padding:0 4px;animation:_ngcontent-%COMP%_pulse 2s infinite}.header-nav[_ngcontent-%COMP%]   .unread-badge.hidden[_ngcontent-%COMP%]{display:none}.header-nav[_ngcontent-%COMP%]   .sos-emergency-link[_ngcontent-%COMP%]{background:#d32f2f33;border:2px solid rgba(211,47,47,.5);font-weight:700}.header-nav[_ngcontent-%COMP%]   .sos-emergency-link[_ngcontent-%COMP%]:hover{background:#d32f2f59;transform:translateY(-1px)}.header-nav[_ngcontent-%COMP%]   .sos-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background-color:#d32f2f;color:#fff;border-radius:50%;min-width:22px;height:22px;font-size:.8rem;font-weight:700;padding:0 5px;animation:_ngcontent-%COMP%_urgentPulse 1s infinite;box-shadow:0 0 12px #d32f2fcc}.header-nav[_ngcontent-%COMP%]   .sos-badge.hidden[_ngcontent-%COMP%]{display:none}@keyframes _ngcontent-%COMP%_urgentPulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.8}}.header-nav[_ngcontent-%COMP%]   .admin-link[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   .admin-report-link[_ngcontent-%COMP%]{background:#ffd70026;border:2px solid rgba(255,215,0,.35)}.header-nav[_ngcontent-%COMP%]   .admin-link[_ngcontent-%COMP%]:hover, .header-nav[_ngcontent-%COMP%]   .admin-report-link[_ngcontent-%COMP%]:hover{background:#ffd7004d;transform:translateY(-1px)}.app-main[_ngcontent-%COMP%]{padding:0;min-height:calc(100vh - 70px)}.global-sos[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:120px;width:220px;z-index:1200}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}@media (max-width: 1200px){.app-header[_ngcontent-%COMP%]{padding:12px 40px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 18px;font-size:13px}}@media (max-width: 992px){.app-header[_ngcontent-%COMP%]{padding:10px 25px}.hamburger-btn[_ngcontent-%COMP%]{display:flex}.menu-overlay[_ngcontent-%COMP%], .menu-overlay.open[_ngcontent-%COMP%]{display:block}.header-nav[_ngcontent-%COMP%]{position:fixed;top:0;right:-320px;width:300px;height:100vh;background:linear-gradient(180deg,#1a3a52,#0d1f2d);flex-direction:column;align-items:stretch;padding:90px 20px 30px;gap:8px;transition:right .3s ease;z-index:1001;box-shadow:-5px 0 30px #0000004d;overflow-y:auto}.header-nav.open[_ngcontent-%COMP%]{right:0}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:15px 20px;font-size:15px;border-radius:10px;justify-content:flex-start;width:100%}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{margin-top:auto;background:#dc354533;border:1px solid rgba(220,53,69,.4)}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#dc35454d}}@media (max-width: 600px){.app-header[_ngcontent-%COMP%]{padding:10px 15px;height:auto;min-height:65px}.header-left[_ngcontent-%COMP%]   .brand-section[_ngcontent-%COMP%]{gap:3px}.user-role-indicator[_ngcontent-%COMP%]{padding:3px 8px 3px 5px;font-size:.6rem;gap:4px}.user-role-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{width:16px;height:16px}.user-role-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:9px;height:9px}.header-left[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:42px;height:42px}.logo-area[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:11px}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem}.hamburger-btn[_ngcontent-%COMP%]{width:40px;height:40px}.hamburger-line[_ngcontent-%COMP%]{width:20px}.header-nav[_ngcontent-%COMP%]{width:280px;right:-290px;padding:80px 15px 25px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 16px;font-size:14px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#0009;display:flex;align-items:center;justify-content:center;z-index:9999;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.auth-prompt-modal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);border:3px solid #ffc107;border-radius:16px;padding:40px;max-width:500px;width:90%;box-shadow:0 10px 40px #0000004d;position:relative;text-align:center;animation:_ngcontent-%COMP%_slideIn .3s ease}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-30px);opacity:0}to{transform:translateY(0);opacity:1}}.auth-prompt-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:transparent;border:none;font-size:32px;color:#856404;cursor:pointer;line-height:1;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;transition:all .2s}.auth-prompt-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#d32f2f;transform:scale(1.1)}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:20px}.auth-prompt-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#856404;margin:0 0 15px;font-weight:700}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-message[_ngcontent-%COMP%]{font-size:1.1rem;color:#856404;margin:0 0 10px;font-weight:600;line-height:1.5}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-submessage[_ngcontent-%COMP%]{font-size:.95rem;color:#856404;margin:0 0 30px;opacity:.9;line-height:1.6}.modal-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.modal-btn[_ngcontent-%COMP%]{padding:14px 30px;font-size:1rem;font-weight:700;border-radius:8px;border:none;cursor:pointer;transition:all .2s;width:100%}.modal-btn.primary-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2c5282,#1e3a5f);color:#fff;box-shadow:0 4px 12px #2c52824d}.modal-btn.primary-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #2c528266}.modal-btn.secondary-btn[_ngcontent-%COMP%]{background:#fff;color:#856404;border:2px solid #ffc107}.modal-btn.secondary-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;transform:translateY(-1px)}@media (max-width: 600px){.auth-prompt-modal[_ngcontent-%COMP%]{padding:30px 20px;max-width:95%}.auth-prompt-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-message[_ngcontent-%COMP%]{font-size:1rem}}"]})};LC(jy,jL).catch(n=>console.error(n));
